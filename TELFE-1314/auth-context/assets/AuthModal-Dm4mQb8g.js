var Qk=Object.defineProperty;var O1=n=>{throw TypeError(n)};var eF=(n,e,t)=>e in n?Qk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Zh=(n,e,t)=>eF(n,typeof e!="symbol"?e+"":e,t),im=(n,e,t)=>e.has(n)||O1("Cannot "+t);var ae=(n,e,t)=>(im(n,e,"read from private field"),t?t.call(n):e.get(n)),Pt=(n,e,t)=>e.has(n)?O1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Je=(n,e,t,r)=>(im(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),er=(n,e,t)=>(im(n,e,"access private method"),t);var Jh=(n,e,t,r)=>({set _(i){Je(n,e,i,t)},get _(){return ae(n,e,r)}});import{j as Q,a as rt,F as gy}from"./emotion-react-jsx-runtime.browser.esm-BgDa5HT4.js";import{b as tC,g as zd,r as ie,c as As,R as my}from"./index-Dl6G-zuu.js";import{T as Yi,c as tF,d as nF}from"./Text-DnbGH9ax.js";import{e as Qh,d as L1,b as nC,D as rC,a as iC,u as sC,c as rF,g as oC}from"./constants-CVq1Wmjp.js";import{F as Gs,b as aC,A as iF,D as sF,c as oF,d as aF,e as yy,g as _y}from"./UserProfile-CSbbH8i5.js";import{B as lF,D as uF,E as cF,I as hF,N as fF,O as dF,P as pF,Z as sm,a as gF,b as mF,c as yF,d as _F,e as vF,f as xF,g as wF,h as bF,i as EF,j as k1,k as CF,l as SF,m as TF,n as RF,o as IF,p as AF,q as PF,r as MF,s as OF,t as LF,u as kF,v as FF,w as DF,x as NF,y as zF,z as $F,A as BF,C as UF,F as GF,G as qF,H as WF,J as jF,K as HF,L as VF,M as XF,Q as YF,R as KF,S as ZF,T as JF,U as QF,V as eD,W as yi,X as Xf,Y as tD,_ as Dr,$ as nD,a0 as rD,a1 as iD,a2 as sD,a3 as oD,a4 as aD,a5 as F1,a6 as lC,a7 as Sl,a8 as lD,a9 as uD,aa as cD,ab as hD,ac as fD,ad as dD,ae as pD,af as gD,ag as mD,ah as yD,ai as Yf,aj as _D,ak as vD,al as xD,am as wD,an as bD,ao as uC,ap as ED,aq as oc,ar as Ls,as as CD,at as SD,au as TD,av as RD,aw as ID,ax as AD,ay as PD,az as MD,aA as OD,aB as cC,aC as LD,aD as kD,aE as FD,aF as nr,aG as hC,aH as DD,aI as ND,aJ as Kf,aK as zD,aL as $D,aM as BD}from"./types-JQgdQoTs.js";import{B as ac,u as UD}from"./ButtonBase-JObl-ewV.js";import{_ as xe,a as Ir,l as Gn,b as fa,t as zc,u as fC}from"./identifier-CCo8HfxA.js";import{g as zo,s as Pn,c as Un,a as Li,r as $d}from"./styled-DiVYluCu.js";import{u as dC}from"./index-CXtVKvFt.js";import{g as $o}from"./generateUtilityClasses-CRyAR7Z0.js";import{j as ft}from"./jsx-runtime-DMAvRu52.js";import{u as as,r as GD}from"./DefaultPropsProvider-BrPVfFhn.js";import{c as pC,d as qD,o as gC,M as mC,G as D1,b as ef}from"./Popover-B3llNT0S.js";import{u as Bo}from"./useTheme-DC9e96ys.js";import{c as Tl,s as WD,u as Bd,b as tf,a as jD}from"./TransitionGroupContext-BU5kpZ0L.js";import{d as tc,u as yC,f as HD,O as VD,e as XD}from"./Select-BIX2DfMX.js";import{u as _C}from"./useId-CkA8naEk.js";import{ae as YD,af as Mu,ag as vy,ah as vC}from"./AdapterDayjs-sa9HN2xx.js";import{u as ki,G as KD,X as ZD,a as JD,C as QD}from"./TelicentHorizontalSVG-DP7xLAp3.js";import"./DataSetIcon-CzT3Gt8m.js";import{U as e5}from"./UserIcon-B0AVfc7u.js";import{L as Zf,M as xC,b as t5}from"./Menu-BkD04aCn.js";import{u as n5}from"./useEnhancedEffect-DZnfS5Iy.js";import{g as r5,a as i5,l as N1,M as wC}from"./MenuItem-CdOttbWs.js";import{z as ua,a as s5}from"./UIThemeProvider-Cy_6mza1.js";import{I as Ao}from"./IconButton-Dl7Uv_PN.js";import{S as bC,F as Ki}from"./FlexBox-owEKTX38.js";import"./Chip-BVaSRp92.js";import"./Divider-CCH3-U8L.js";import{B as Zn}from"./Box-DR7xjwgg.js";import"./TreeView-0QEJhhhD.js";import"./UserProfileContent-BkWk_Qx8.js";import{G as na,a as Ud,F as lc}from"./FlexGrid-M25hPc65.js";import"./LinearProgress-CRSreEF6.js";import{a as nf}from"./colorManipulator-DBPky6cX.js";import{B as ko}from"./Button-BhZeqQDZ.js";import"./LinkButton-CsDENkR4.js";import"./Container-CFeVW3qn.js";import"./TextField-InohbSRw.js";import"./Select-C1_f-aAJ.js";import"./DatePicker-ga9keWZl.js";import"./DateTimePicker-B55e7A3j.js";import{s as o5}from"./styled-BEKiHWi7.js";import{P as xy}from"./Paper-B-rBeRIm.js";import{T as Ps}from"./Typography-DvrCv4HQ.js";import{B as EC}from"./Button-B8lPRXAj.js";import"./Card-BWv60QFk.js";import"./CardActions-CCW8za6b.js";import{p as CC}from"./index-BfyspvgH.js";import{r as Gd}from"./index-B0kOWIl9.js";import{P as SC}from"./Popover-Bxjayg7j.js";import{P as a5}from"./Paper-BBwh5-3y.js";import"./ErrorFallback-fPXNZKjO.js";import"./ErrorFallbackText-BLCYy_1i.js";import"./ErrorFallbackWrapper-CSpgK55r.js";import"./MapToggleButtonPresentational-DiEvv04q.js";import{T as l5,g as z1,r as u5}from"./utils-BfhgiYH5.js";import{C as c5,c as h5,E as f5,a as d5,b as p5}from"./Edit-BwFhg13Q.js";import{c as wy}from"./createSvgIcon-CxivGeKF.js";import{T as g5}from"./TextField-D_aQwkfm.js";var qd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},m5={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},_o,py,qE,y5=(qE=class{constructor(){Pt(this,_o,m5);Pt(this,py,!1)}setTimeoutProvider(n){Je(this,_o,n)}setTimeout(n,e){return ae(this,_o).setTimeout(n,e)}clearTimeout(n){ae(this,_o).clearTimeout(n)}setInterval(n,e){return ae(this,_o).setInterval(n,e)}clearInterval(n){ae(this,_o).clearInterval(n)}},_o=new WeakMap,py=new WeakMap,qE),l0=new y5;function _5(n){setTimeout(n,0)}var Wd=typeof window>"u"||"Deno"in globalThis;function _i(){}function v5(n,e){return typeof n=="function"?n(e):n}function x5(n){return typeof n=="number"&&n>=0&&n!==1/0}function w5(n,e){return Math.max(n+(e||0)-Date.now(),0)}function u0(n,e){return typeof n=="function"?n(e):n}function b5(n,e){return typeof n=="function"?n(e):n}function $1(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==by(o,e.options))return!1}else if(!cc(e.queryKey,o))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function B1(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(uc(e.options.mutationKey)!==uc(s))return!1}else if(!cc(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function by(n,e){return((e==null?void 0:e.queryKeyHashFn)||uc)(n)}function uc(n){return JSON.stringify(n,(e,t)=>c0(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function cc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>cc(n[t],e[t])):!1}var E5=Object.prototype.hasOwnProperty;function TC(n,e){if(n===e)return n;const t=U1(n)&&U1(e);if(!t&&!(c0(n)&&c0(e)))return e;const i=(t?n:Object.keys(n)).length,s=t?e:Object.keys(e),o=s.length,a=t?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=t?c:s[c],d=n[f],g=e[f];if(d===g){a[f]=d,(t?c<i:E5.call(n,f))&&u++;continue}if(d===null||g===null||typeof d!="object"||typeof g!="object"){a[f]=g;continue}const y=TC(d,g);a[f]=y,y===d&&u++}return i===o&&u===i?n:a}function U1(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function c0(n){if(!G1(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!G1(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function G1(n){return Object.prototype.toString.call(n)==="[object Object]"}function C5(n){return new Promise(e=>{l0.setTimeout(e,n)})}function S5(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?TC(n,e):e}function T5(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function R5(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Ey=Symbol();function RC(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Ey?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var xa,vo,Nl,WE,I5=(WE=class extends qd{constructor(){super();Pt(this,xa);Pt(this,vo);Pt(this,Nl);Je(this,Nl,e=>{if(!Wd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ae(this,vo)||this.setEventListener(ae(this,Nl))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,vo))==null||e.call(this),Je(this,vo,void 0))}setEventListener(e){var t;Je(this,Nl,e),(t=ae(this,vo))==null||t.call(this),Je(this,vo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ae(this,xa)!==e&&(Je(this,xa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ae(this,xa)=="boolean"?ae(this,xa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xa=new WeakMap,vo=new WeakMap,Nl=new WeakMap,WE),IC=new I5;function A5(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}var P5=_5;function M5(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=P5;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(u=>{t(u)})})})};return{batch:a=>{let u;e++;try{u=a()}finally{e--,e||o()}return u},batchCalls:a=>(...u)=>{s(()=>{a(...u)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var hr=M5(),zl,xo,$l,jE,O5=(jE=class extends qd{constructor(){super();Pt(this,zl,!0);Pt(this,xo);Pt(this,$l);Je(this,$l,e=>{if(!Wd&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ae(this,xo)||this.setEventListener(ae(this,$l))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,xo))==null||e.call(this),Je(this,xo,void 0))}setEventListener(e){var t;Je(this,$l,e),(t=ae(this,xo))==null||t.call(this),Je(this,xo,e(this.setOnline.bind(this)))}setOnline(e){ae(this,zl)!==e&&(Je(this,zl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ae(this,zl)}},zl=new WeakMap,xo=new WeakMap,$l=new WeakMap,jE),Jf=new O5;function L5(n){return Math.min(1e3*2**n,3e4)}function AC(n){return(n??"online")==="online"?Jf.isOnline():!0}var h0=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function PC(n){let e=!1,t=0,r;const i=A5(),s=()=>i.status!=="pending",o=v=>{var x;if(!s()){const b=new h0(v);g(b),(x=n.onCancel)==null||x.call(n,b)}},a=()=>{e=!0},u=()=>{e=!1},c=()=>IC.isFocused()&&(n.networkMode==="always"||Jf.isOnline())&&n.canRun(),f=()=>AC(n.networkMode)&&n.canRun(),d=v=>{s()||(r==null||r(),i.resolve(v))},g=v=>{s()||(r==null||r(),i.reject(v))},y=()=>new Promise(v=>{var x;r=b=>{(s()||c())&&v(b)},(x=n.onPause)==null||x.call(n)}).then(()=>{var v;r=void 0,s()||(v=n.onContinue)==null||v.call(n)}),m=()=>{if(s())return;let v;const x=t===0?n.initialPromise:void 0;try{v=x??n.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(d).catch(b=>{var F;if(s())return;const E=n.retry??(Wd?0:3),T=n.retryDelay??L5,C=typeof T=="function"?T(t,b):T,R=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,b);if(e||!R){g(b);return}t++,(F=n.onFail)==null||F.call(n,t,b),C5(C).then(()=>c()?void 0:y()).then(()=>{e?g(b):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:u,canStart:f,start:()=>(f()?m():y().then(m),i)}}var wa,HE,MC=(HE=class{constructor(){Pt(this,wa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),x5(this.gcTime)&&Je(this,wa,l0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Wd?1/0:5*60*1e3))}clearGcTimeout(){ae(this,wa)&&(l0.clearTimeout(ae(this,wa)),Je(this,wa,void 0))}},wa=new WeakMap,HE),ba,Bl,ei,Ea,Wn,Fc,Ca,vi,Ss,VE,k5=(VE=class extends MC{constructor(e){super();Pt(this,vi);Pt(this,ba);Pt(this,Bl);Pt(this,ei);Pt(this,Ea);Pt(this,Wn);Pt(this,Fc);Pt(this,Ca);Je(this,Ca,!1),Je(this,Fc,e.defaultOptions),this.setOptions(e.options),this.observers=[],Je(this,Ea,e.client),Je(this,ei,ae(this,Ea).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Je(this,ba,q1(this.options)),this.state=e.state??ae(this,ba),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ae(this,Wn))==null?void 0:e.promise}setOptions(e){if(this.options={...ae(this,Fc),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=q1(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),Je(this,ba,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,ei).remove(this)}setData(e,t){const r=S5(this.state.data,e,this.options);return er(this,vi,Ss).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){er(this,vi,Ss).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ae(this,Wn))==null?void 0:r.promise;return(i=ae(this,Wn))==null||i.cancel(e),t?t.then(_i).catch(_i):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,ba))}isActive(){return this.observers.some(e=>b5(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ey||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>u0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!w5(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ae(this,Wn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ae(this,Wn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ae(this,ei).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ae(this,Wn)&&(ae(this,Ca)?ae(this,Wn).cancel({revert:!0}):ae(this,Wn).cancelRetry()),this.scheduleGc()),ae(this,ei).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||er(this,vi,Ss).call(this,{type:"invalidate"})}async fetch(e,t){var u,c,f,d,g,y,m,v,x,b,E,T;if(this.state.fetchStatus!=="idle"&&((u=ae(this,Wn))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ae(this,Wn))return ae(this,Wn).continueRetry(),ae(this,Wn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(R=>R.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Je(this,Ca,!0),r.signal)})},s=()=>{const C=RC(this.options,t),F=(()=>{const O={client:ae(this,Ea),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return Je(this,Ca,!1),this.options.persister?this.options.persister(C,F,this):C(F)},a=(()=>{const C={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ae(this,Ea),state:this.state,fetchFn:s};return i(C),C})();(c=this.options.behavior)==null||c.onFetch(a,this),Je(this,Bl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=a.fetchOptions)==null?void 0:f.meta))&&er(this,vi,Ss).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),Je(this,Wn,PC({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof h0&&C.revert&&this.setState({...ae(this,Bl),fetchStatus:"idle"}),r.abort()},onFail:(C,R)=>{er(this,vi,Ss).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{er(this,vi,Ss).call(this,{type:"pause"})},onContinue:()=>{er(this,vi,Ss).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await ae(this,Wn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(g=ae(this,ei).config).onSuccess)==null||y.call(g,C,this),(v=(m=ae(this,ei).config).onSettled)==null||v.call(m,C,this.state.error,this),C}catch(C){if(C instanceof h0){if(C.silent)return ae(this,Wn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw er(this,vi,Ss).call(this,{type:"error",error:C}),(b=(x=ae(this,ei).config).onError)==null||b.call(x,C,this),(T=(E=ae(this,ei).config).onSettled)==null||T.call(E,this.state.data,C,this),C}finally{this.scheduleGc()}}},ba=new WeakMap,Bl=new WeakMap,ei=new WeakMap,Ea=new WeakMap,Wn=new WeakMap,Fc=new WeakMap,Ca=new WeakMap,vi=new WeakSet,Ss=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...F5(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Je(this,Bl,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),hr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ae(this,ei).notify({query:this,type:"updated",action:e})})},VE);function F5(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function q1(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function W1(n){return{onFetch:(e,t)=>{var f,d,g,y,m;const r=e.options,i=(g=(d=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:g.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},u=0;const c=async()=>{let v=!1;const x=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=RC(e.options,e.fetchOptions),E=async(T,C,R)=>{if(v)return Promise.reject();if(C==null&&T.pages.length)return Promise.resolve(T);const O=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:C,direction:R?"backward":"forward",meta:e.options.meta};return x(B),B})(),$=await b(O),{maxPages:L}=e.options,N=R?R5:T5;return{pages:N(T.pages,$,L),pageParams:N(T.pageParams,C,L)}};if(i&&s.length){const T=i==="backward",C=T?D5:j1,R={pages:s,pageParams:o},F=C(r,R);a=await E(R,F,T)}else{const T=n??s.length;do{const C=u===0?o[0]??r.initialPageParam:j1(r,a);if(u>0&&C==null)break;a=await E(a,C),u++}while(u<T)}return a};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function j1(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function D5(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Dc,qi,cr,Sa,Wi,ho,XE,N5=(XE=class extends MC{constructor(e){super();Pt(this,Wi);Pt(this,Dc);Pt(this,qi);Pt(this,cr);Pt(this,Sa);Je(this,Dc,e.client),this.mutationId=e.mutationId,Je(this,cr,e.mutationCache),Je(this,qi,[]),this.state=e.state||z5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ae(this,qi).includes(e)||(ae(this,qi).push(e),this.clearGcTimeout(),ae(this,cr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Je(this,qi,ae(this,qi).filter(t=>t!==e)),this.scheduleGc(),ae(this,cr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ae(this,qi).length||(this.state.status==="pending"?this.scheduleGc():ae(this,cr).remove(this))}continue(){var e;return((e=ae(this,Sa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,u,c,f,d,g,y,m,v,x,b,E,T,C,R,F,O,$,L;const t=()=>{er(this,Wi,ho).call(this,{type:"continue"})},r={client:ae(this,Dc),meta:this.options.meta,mutationKey:this.options.mutationKey};Je(this,Sa,PC({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,B)=>{er(this,Wi,ho).call(this,{type:"failed",failureCount:N,error:B})},onPause:()=>{er(this,Wi,ho).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,cr).canRun(this)}));const i=this.state.status==="pending",s=!ae(this,Sa).canStart();try{if(i)t();else{er(this,Wi,ho).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=ae(this,cr).config).onMutate)==null?void 0:a.call(o,e,this,r));const B=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,e,r));B!==this.state.context&&er(this,Wi,ho).call(this,{type:"pending",context:B,variables:e,isPaused:s})}const N=await ae(this,Sa).start();return await((d=(f=ae(this,cr).config).onSuccess)==null?void 0:d.call(f,N,e,this.state.context,this,r)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,N,e,this.state.context,r)),await((v=(m=ae(this,cr).config).onSettled)==null?void 0:v.call(m,N,null,this.state.variables,this.state.context,this,r)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,N,null,e,this.state.context,r)),er(this,Wi,ho).call(this,{type:"success",data:N}),N}catch(N){try{throw await((T=(E=ae(this,cr).config).onError)==null?void 0:T.call(E,N,e,this.state.context,this,r)),await((R=(C=this.options).onError)==null?void 0:R.call(C,N,e,this.state.context,r)),await((O=(F=ae(this,cr).config).onSettled)==null?void 0:O.call(F,void 0,N,this.state.variables,this.state.context,this,r)),await((L=($=this.options).onSettled)==null?void 0:L.call($,void 0,N,e,this.state.context,r)),N}finally{er(this,Wi,ho).call(this,{type:"error",error:N})}}finally{ae(this,cr).runNext(this)}}},Dc=new WeakMap,qi=new WeakMap,cr=new WeakMap,Sa=new WeakMap,Wi=new WeakSet,ho=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),hr.batch(()=>{ae(this,qi).forEach(r=>{r.onMutationUpdate(e)}),ae(this,cr).notify({mutation:this,type:"updated",action:e})})},XE);function z5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Is,xi,Nc,YE,$5=(YE=class extends qd{constructor(e={}){super();Pt(this,Is);Pt(this,xi);Pt(this,Nc);this.config=e,Je(this,Is,new Set),Je(this,xi,new Map),Je(this,Nc,0)}build(e,t,r){const i=new N5({client:e,mutationCache:this,mutationId:++Jh(this,Nc)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ae(this,Is).add(e);const t=rf(e);if(typeof t=="string"){const r=ae(this,xi).get(t);r?r.push(e):ae(this,xi).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ae(this,Is).delete(e)){const t=rf(e);if(typeof t=="string"){const r=ae(this,xi).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ae(this,xi).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=rf(e);if(typeof t=="string"){const r=ae(this,xi).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=rf(e);if(typeof t=="string"){const i=(r=ae(this,xi).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hr.batch(()=>{ae(this,Is).forEach(e=>{this.notify({type:"removed",mutation:e})}),ae(this,Is).clear(),ae(this,xi).clear()})}getAll(){return Array.from(ae(this,Is))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>B1(t,r))}findAll(e={}){return this.getAll().filter(t=>B1(e,t))}notify(e){hr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return hr.batch(()=>Promise.all(e.map(t=>t.continue().catch(_i))))}},Is=new WeakMap,xi=new WeakMap,Nc=new WeakMap,YE);function rf(n){var e;return(e=n.options.scope)==null?void 0:e.id}var ji,KE,B5=(KE=class extends qd{constructor(e={}){super();Pt(this,ji);this.config=e,Je(this,ji,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??by(i,t);let o=this.get(s);return o||(o=new k5({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ae(this,ji).has(e.queryHash)||(ae(this,ji).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ae(this,ji).get(e.queryHash);t&&(e.destroy(),t===e&&ae(this,ji).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,ji).get(e)}getAll(){return[...ae(this,ji).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>$1(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>$1(e,r)):t}notify(e){hr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ji=new WeakMap,KE),xn,wo,bo,Ul,Gl,Eo,ql,Wl,ZE,U5=(ZE=class{constructor(n={}){Pt(this,xn);Pt(this,wo);Pt(this,bo);Pt(this,Ul);Pt(this,Gl);Pt(this,Eo);Pt(this,ql);Pt(this,Wl);Je(this,xn,n.queryCache||new B5),Je(this,wo,n.mutationCache||new $5),Je(this,bo,n.defaultOptions||{}),Je(this,Ul,new Map),Je(this,Gl,new Map),Je(this,Eo,0)}mount(){Jh(this,Eo)._++,ae(this,Eo)===1&&(Je(this,ql,IC.subscribe(async n=>{n&&(await this.resumePausedMutations(),ae(this,xn).onFocus())})),Je(this,Wl,Jf.subscribe(async n=>{n&&(await this.resumePausedMutations(),ae(this,xn).onOnline())})))}unmount(){var n,e;Jh(this,Eo)._--,ae(this,Eo)===0&&((n=ae(this,ql))==null||n.call(this),Je(this,ql,void 0),(e=ae(this,Wl))==null||e.call(this),Je(this,Wl,void 0))}isFetching(n){return ae(this,xn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ae(this,wo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ae(this,xn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ae(this,xn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(u0(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ae(this,xn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ae(this,xn).get(r.queryHash),s=i==null?void 0:i.state.data,o=v5(e,s);if(o!==void 0)return ae(this,xn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return hr.batch(()=>ae(this,xn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ae(this,xn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ae(this,xn);hr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ae(this,xn);return hr.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=hr.batch(()=>ae(this,xn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(_i).catch(_i)}invalidateQueries(n,e={}){return hr.batch(()=>(ae(this,xn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=hr.batch(()=>ae(this,xn).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(_i)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(_i)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ae(this,xn).build(this,e);return t.isStaleByTime(u0(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(_i).catch(_i)}fetchInfiniteQuery(n){return n.behavior=W1(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(_i).catch(_i)}ensureInfiniteQueryData(n){return n.behavior=W1(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Jf.isOnline()?ae(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,xn)}getMutationCache(){return ae(this,wo)}getDefaultOptions(){return ae(this,bo)}setDefaultOptions(n){Je(this,bo,n)}setQueryDefaults(n,e){ae(this,Ul).set(uc(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ae(this,Ul).values()],t={};return e.forEach(r=>{cc(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ae(this,Gl).set(uc(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ae(this,Gl).values()],t={};return e.forEach(r=>{cc(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ae(this,bo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=by(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ey&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ae(this,bo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ae(this,xn).clear(),ae(this,wo).clear()}},xn=new WeakMap,wo=new WeakMap,bo=new WeakMap,Ul=new WeakMap,Gl=new WeakMap,Eo=new WeakMap,ql=new WeakMap,Wl=new WeakMap,ZE);function OC(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f0={exports:{}},om={exports:{}};const G5=Object.freeze(Object.defineProperty({__proto__:null,BRAND:lF,DIRTY:uF,EMPTY_PATH:cF,INVALID:hF,NEVER:fF,OK:dF,ParseStatus:pF,Schema:sm,ZodAny:gF,ZodArray:mF,ZodBigInt:yF,ZodBoolean:_F,ZodBranded:vF,ZodCatch:xF,ZodDate:wF,ZodDefault:bF,ZodDiscriminatedUnion:EF,ZodEffects:k1,ZodEnum:CF,ZodError:SF,get ZodFirstPartyTypeKind(){return TF},ZodFunction:RF,ZodIntersection:IF,ZodIssueCode:AF,ZodLazy:PF,ZodLiteral:MF,ZodMap:OF,ZodNaN:LF,ZodNativeEnum:kF,ZodNever:FF,ZodNull:DF,ZodNullable:NF,ZodNumber:zF,ZodObject:$F,ZodOptional:BF,ZodParsedType:UF,ZodPipeline:GF,ZodPromise:qF,ZodReadonly:WF,ZodRecord:jF,ZodSchema:sm,ZodSet:HF,ZodString:VF,ZodSymbol:XF,ZodTransformer:k1,ZodTuple:YF,ZodType:sm,ZodUndefined:KF,ZodUnion:ZF,ZodUnknown:JF,ZodVoid:QF,addIssueToContext:eD,any:yi,array:Xf,bigint:tD,boolean:Dr,coerce:nD,custom:rD,date:iD,datetimeRegex:sD,default:ua,defaultErrorMap:oD,discriminatedUnion:aD,effect:F1,enum:lC,function:Sl,getErrorMap:lD,getParsedType:uD,instanceof:cD,intersection:hD,isAborted:fD,isAsync:dD,isDirty:pD,isValid:gD,late:mD,lazy:yD,literal:Yf,makeIssue:_D,map:vD,nan:xD,nativeEnum:wD,never:bD,null:uC,nullable:ED,number:oc,object:Ls,get objectUtil(){return CD},oboolean:SD,onumber:TD,optional:RD,ostring:ID,pipeline:AD,preprocess:PD,promise:MD,quotelessJson:OD,record:cC,set:LD,setErrorMap:kD,strictObject:FD,string:nr,symbol:hC,transformer:F1,tuple:DD,undefined:ND,union:Kf,unknown:zD,get util(){return $D},void:BD,z:ua},Symbol.toStringTag,{value:"Module"})),q5=tC(G5);var H1;function W5(){return H1||(H1=1,function(n,e){let t,r;try{typeof OC<"u"&&(t=q5.z)}catch{console.warn("Zod not available in this environment, schema validation will be disabled")}t&&(r=t.object({sub:t.string(),email:t.string().email(),preferred_name:t.string(),iss:t.string(),aud:t.string(),exp:t.number(),iat:t.number(),jti:t.string(),nonce:t.string().optional(),auth_time:t.number().optional(),sid:t.string().optional(),azp:t.string().optional(),name:t.string().optional(),token_expired:t.boolean().optional(),token_expires_at:t.string().optional(),source:t.string().optional(),externalProvider:t.record(t.unknown()).optional()})),n.exports&&(n.exports={GetUserInfoSchema:r},n.exports.default=r)}(om)),om.exports}(function(n,e){let t;if(typeof OC<"u")try{t=W5().GetUserInfoSchema}catch(s){console.warn("Zod schema not available, validation will be skipped:",s.message)}const i=class i{constructor(o){this.config={clientId:"spa-client",authServerUrl:"http://auth.telicent.localhost",redirectUri:"http://demo.telicent.localhost/callback.html",popupRedirectUri:null,scope:"openid email profile offline_access",apiUrl:"http://api.telicent.localhost",onLogout:()=>{window.alert("You are now logged out. Redirecting to /"),window.location.href="/"},...o},this.isCrossDomain=this.detectCrossDomain(),console.log(`üîß Initialized ${this.isCrossDomain?"cross-domain":"same-domain"} OAuth2 client`),console.log("üîß Client config:",{clientId:this.config.clientId,redirectUri:this.config.redirectUri,authServerUrl:this.config.authServerUrl,currentOrigin:window.location.origin})}detectCrossDomain(){try{const o=window.location.origin,a=new URL(this.config.authServerUrl),u=a.origin,c=new URL(o).hostname,f=a.hostname,d=c===f||c.endsWith(".telicent.localhost")&&f.endsWith(".telicent.localhost");return console.log(`üåê Domain detection: current=${c}, auth=${f}, sameDomain=${d}`),!d}catch(o){return console.warn("Error detecting domain context, defaulting to cross-domain:",o),!0}}generateCodeVerifier(){const o=new Uint8Array(32);return crypto.getRandomValues(o),this.base64URLEncode(o)}async generateCodeChallenge(o){const u=new TextEncoder().encode(o),c=await crypto.subtle.digest("SHA-256",u);return this.base64URLEncode(new Uint8Array(c))}base64URLEncode(o){return btoa(String.fromCharCode.apply(null,o)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}generateState(){const o=new Uint8Array(16);return crypto.getRandomValues(o),this.base64URLEncode(o)}generateNonce(){const o=new Uint8Array(16);return crypto.getRandomValues(o),this.base64URLEncode(o)}async login(o=null){const a=this.generateState(),u=this.generateNonce(),c=this.generateCodeVerifier(),f=await this.generateCodeChallenge(c),d=o||this.config.redirectUri;sessionStorage.setItem("oauth_state",a),sessionStorage.setItem("oauth_nonce",u),sessionStorage.setItem("oauth_code_verifier",c),sessionStorage.setItem("oauth_redirect_uri",d);const g=new URLSearchParams({response_type:"code",client_id:this.config.clientId,redirect_uri:d,scope:this.config.scope,state:a,nonce:u,code_challenge:f,code_challenge_method:"S256"}),y=`${this.config.authServerUrl}/oauth2/authorize?${g.toString()}`;console.log("Redirecting current window to:",y),window.location.href=y}async loginWithPopup(o=null,a="width=600,height=700,scrollbars=yes,resizable=yes"){const u=o||this.config.popupRedirectUri;if(!u)throw new Error("redirectUri is required for popup login. Either provide it as a parameter or configure popupRedirectUri in the client config.");const c=this.generateState(),f=this.generateNonce(),d=this.generateCodeVerifier(),g=await this.generateCodeChallenge(d);sessionStorage.setItem("oauth_state",c),sessionStorage.setItem("oauth_nonce",f),sessionStorage.setItem("oauth_code_verifier",d),sessionStorage.setItem("oauth_redirect_uri",u);const y=new URLSearchParams({response_type:"code",client_id:this.config.clientId,redirect_uri:u,scope:this.config.scope,state:c,nonce:f,code_challenge:g,code_challenge_method:"S256"}),m=`${this.config.authServerUrl}/oauth2/authorize?${y.toString()}`;console.log("Opening popup with URL:",m),console.log("Popup features:",a);const x=(window.top||window).open(m,"_blank",a);console.log("Popup opened:",x?"Success":"Blocked or failed"),x&&this.startPopupFlow(x)}async handleCallback(o=null){let a;o?a=new URLSearchParams(o):a=new URLSearchParams(window.location.search);const u=a.get("code"),c=a.get("state"),f=a.get("error");if(f)throw new Error(`OAuth error: ${f}`);if(!u||!c)throw new Error("Missing code or state parameter");const d=sessionStorage.getItem("oauth_state");if(c!==d)throw new Error("Invalid state parameter");const g=sessionStorage.getItem("oauth_code_verifier");if(!g)throw new Error("Missing code verifier");const y=sessionStorage.getItem("oauth_redirect_uri");if(!y)throw new Error("Missing redirect URI");const m=await fetch(`${this.config.authServerUrl}/oauth2/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},credentials:"include",body:new URLSearchParams({grant_type:"authorization_code",client_id:this.config.clientId,code:u,redirect_uri:y,code_verifier:g})});if(!m.ok){let x;try{x=await m.json()}catch{x={error:"unknown",error_description:await m.text()}}if(x.error==="consent_required"){console.log("Consent required - redirecting to proper OAuth2 flow");const E=this.buildAuthorizationUrl();console.log("Redirecting to OAuth2 authorization flow:",E),window.location.href=E;return}const b=x.error_description||x.error||"Unknown error";throw new Error(`Token exchange and session creation failed: ${b}`)}const v=await m.json();console.log("üéâ Session created securely via domain cookies (access token never exposed)"),console.log("üìä Session data:",v),console.log("üîç Cross-domain check:",{isCrossDomain:this.isCrossDomain,sessionIsCrossDomain:v.isCrossDomain,hasSessionToken:!!v.sessionToken,sessionToken:v.sessionToken}),this.isCrossDomain&&v.isCrossDomain&&v.sessionToken?(sessionStorage.setItem("auth_session_id",v.sessionToken),console.log("üîë Cross-domain client: Session ID stored for Authorization header use")):console.log("‚ùå Cross-domain session storage skipped - conditions not met");try{await new Promise(b=>setTimeout(b,100));const x=await this.makeAuthenticatedRequest(`${this.config.authServerUrl}/session/idtoken`,{skipAutoLogout:!0});if(!x.ok)console.warn("Failed to retrieve ID token, but continuing with callback completion");else{const b=await x.json();console.log("ID token retrieved in separate call for enhanced security"),b.id_token&&(this.validateIdToken(b.id_token)?(sessionStorage.setItem("auth_id_token",b.id_token),console.log("ID token validated and stored in sessionStorage")):console.warn("ID token validation failed, but continuing with callback"))}}catch(x){console.warn("Error retrieving ID token during callback, but continuing:",x)}return sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_code_verifier"),v}async isAuthenticated(){try{const o={Accept:"application/json"},a=sessionStorage.getItem("auth_session_id");this.isCrossDomain&&a&&(o.Authorization=`Bearer ${a}`,console.log("üîç Using session ID in Authorization header for authentication check"));const u=await fetch(`${this.config.authServerUrl}/session/check`,{method:"GET",headers:o,credentials:"include"});if(u.ok){const c=await u.json();return console.log(c),!0}return!1}catch(o){return console.error("Authentication check error:",o),!1}}decodeJWT(o){try{const u=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=decodeURIComponent(atob(u).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(c)}catch(a){return console.error("Error decoding JWT:",a),null}}validateIdTokenForRecovery(o){try{const a=this.decodeJWT(o);return a?a.aud!==this.config.clientId?(console.error("Audience validation failed",{expected:this.config.clientId,actual:a.aud}),!1):!a.exp||a.exp*1e3<Date.now()?(console.error("Token expired",{exp:a.exp,now:Math.floor(Date.now()/1e3)}),!1):a.iat&&a.iat*1e3<Date.now()-60*60*1e3?(console.error("Token issued too long ago",{iat:a.iat,maxAge:"1 hour"}),!1):(console.log("ID token validation for recovery successful (no nonce check)"),!0):(console.error("Failed to decode ID token payload"),!1)}catch(a){return console.error("ID token validation error:",a),!1}}validateIdToken(o){try{const a=this.decodeJWT(o);if(!a)return console.error("Failed to decode ID token payload"),!1;const u=sessionStorage.getItem("oauth_nonce");return u?!a.nonce||a.nonce!==u?(console.error("Nonce validation failed",{stored:u,token:a.nonce}),!1):a.aud!==this.config.clientId?(console.error("Audience validation failed",{expected:this.config.clientId,actual:a.aud}),!1):!a.exp||a.exp*1e3<Date.now()?(console.error("Token expired",{exp:a.exp,now:Math.floor(Date.now()/1e3)}),!1):a.iat&&a.iat*1e3<Date.now()-5*60*1e3?(console.error("Token issued too long ago",{iat:a.iat,maxAge:"5 minutes"}),!1):(sessionStorage.removeItem("oauth_nonce"),console.log("ID token validation successful"),!0):(console.error("No stored nonce found for validation"),!1)}catch(a){return console.error("ID token validation error:",a),!1}}isIdTokenExpired(){try{const o=sessionStorage.getItem("auth_id_token");if(!o)return!0;const a=this.decodeJWT(o);if(!a||!a.exp)return!0;const u=Math.floor(Date.now()/1e3);return a.exp<u+30}catch(o){return console.error("Error checking ID token expiration:",o),!0}}getUserInfo(){try{const o=sessionStorage.getItem("auth_id_token");if(!o)return console.log("No ID token found in storage"),null;const a=this.decodeJWT(o);if(!a)return console.log("Failed to decode ID token"),null;if(this.isIdTokenExpired())return console.log("ID token is expired"),null;const u={sub:a.sub,email:a.email,preferred_name:a.preferred_name,iss:a.iss,aud:a.aud,exp:a.exp,iat:a.iat,jti:a.jti,nonce:a.nonce,auth_time:a.auth_time,sid:a.sid,azp:a.azp,name:a.preferred_name||a.name||a.sub,token_expired:!1,token_expires_at:new Date(a.exp*1e3).toISOString(),source:"id_token",externalProvider:a};if(t)try{const c=t.parse(u);return console.log("User info validated successfully against schema"),c}catch(c){return console.error("User info validation failed:",c),console.warn("Returning unvalidated user info. Validation errors:",c.errors),u}return u}catch(o){return console.error("Error getting user info from ID token:",o),null}}async getUserInfoFromAPI(){try{const o=await this.makeAuthenticatedRequest(`${this.config.authServerUrl}/userinfo`);return o.ok?{...await o.json(),source:this.isCrossDomain?"oauth2_userinfo_api_cross_domain":"oauth2_userinfo_api_same_domain"}:null}catch(o){return console.error("Error getting user info from OAuth2 API:",o),null}}getRawIdToken(){return sessionStorage.getItem("auth_id_token")}getCsrfToken(){if(this.isCrossDomain)return null;const o=document.cookie.split(";");for(let a of o){const[u,c]=a.trim().split("=");if(u==="XSRF-TOKEN")return decodeURIComponent(c)}return null}async makeAuthenticatedRequest(o,a={}){const u={Accept:"application/json",...a.headers};if(this.isCrossDomain){const d=sessionStorage.getItem("auth_session_id");d&&(u.Authorization=`Bearer ${d}`,console.log("Using session ID in Authorization header for cross-domain request to:",o))}else if(a.method&&["POST","PUT","DELETE"].includes(a.method.toUpperCase())){const d=this.getCsrfToken();d&&(u["X-XSRF-TOKEN"]=d)}const c={...a,headers:u,credentials:"include"},f=await fetch(o,c);if(f.status===401){const d=a.skipAutoLogout||o.includes("/session/idtoken"),g=o.includes("/session/logout"),y=o.includes("/session/check"),m=o.includes("/userinfo");if(!d&&!g&&!y&&!m)throw console.log("Session expired, redirecting to login"),this.clearLocalStorage(),this.login(),new Error("Session expired");console.warn("401 response during protected operation, not auto-logging out to prevent loops")}return f}beforeRequest(o={}){const a={Accept:"application/json",...o.headers};if(this.isCrossDomain){const u=sessionStorage.getItem("auth_session_id");u&&(a.Authorization=`Bearer ${u}`)}else if(o.method&&["POST","PUT","DELETE"].includes(o.method.toUpperCase())){const u=this.getCsrfToken();u&&(a["X-XSRF-TOKEN"]=u)}return{...o,headers:a,credentials:"include"}}afterRequest(o,a,u={}){if(o.status===401){const c=u.skipAutoLogout||a.includes("/session/idtoken"),f=a.includes("/session/logout"),d=a.includes("/session/check"),g=a.includes("/userinfo");if(!c&&!f&&!d&&!g)throw console.log("Session expired, redirecting to login"),this.clearLocalStorage(),this.login(),new Error("Session expired");console.warn("401 response during protected operation, not auto-logging out to prevent loops")}return o}finishPopupFlow(){window.opener&&window.opener.postMessage({type:"oauth-callback",clientId:this.config.clientId,callbackUrl:window.location.href},"*")}async logout(){try{const o={Accept:"application/json"},a=sessionStorage.getItem("auth_session_id");this.isCrossDomain&&a&&(o.Authorization=`Bearer ${a}`,console.log("üö™ Using session ID in Authorization header for logout"));const u=await fetch(`${this.config.authServerUrl}/session/logout`,{method:"POST",headers:o,credentials:"include"});if(u.ok)try{const c=await u.json();if(c.external_logout&&c.logout_url){console.log("üîó External IDP logout required, redirecting to:",c.logout_url),this.clearLocalStorage(),window.location.href=c.logout_url;return}}catch{console.warn("Logout response is not JSON, continuing with standard logout")}}catch(o){console.error("Logout error (ignoring):",o)}this.clearLocalStorage(),this.config.onLogout()}startPopupFlow(o){console.log("Starting popup tracking...");const a=c=>{if(console.log("Popup message received:",c.data),c.data.clientId!==this.config.clientId){console.log("Ignoring message from different client:",c.data.clientId);return}c.data.type==="oauth-success"?(console.log("OAuth success received from popup"),o.close(),window.removeEventListener("message",a),window.dispatchEvent(new CustomEvent(i.OAUTH_SUCCESS,{detail:c.data}))):c.data.type==="oauth-error"?(console.log("OAuth error received from popup"),o.close(),window.removeEventListener("message",a),window.dispatchEvent(new CustomEvent(i.OAUTH_ERROR,{detail:c.data}))):c.data.type==="oauth-callback"&&(console.log("OAuth callback received from popup"),o.close(),window.removeEventListener("message",a),window.dispatchEvent(new CustomEvent("oauth-callback",{detail:c.data})))};window.addEventListener("message",a),console.log("Added message listener for popup");const u=setInterval(()=>{o.closed&&(clearInterval(u),window.removeEventListener("message",a),console.log("Popup closed manually - cleaning up listeners"))},1e3)}clearLocalStorage(){sessionStorage.removeItem("auth_id_token"),sessionStorage.removeItem("auth_session_id"),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_code_verifier"),sessionStorage.removeItem("oauth_nonce"),console.log("üßπ Cleared all auth-related storage")}};Zh(i,"OAUTH_SUCCESS","oauth-success"),Zh(i,"OAUTH_ERROR","oauth-error");let r=i;n.exports?(n.exports=r,n.exports.default=r,n.exports.AuthServerOAuth2Client=r):(e.default=r,e.AuthServerOAuth2Client=r),typeof window<"u"&&(window.AuthServerOAuth2Client=r,window.authServerOAuth2Client=new r)})(f0,f0.exports);var j5=f0.exports;const qu=zd(j5),H5=n=>{const e=ie.useRef({});return ie.useEffect(()=>{e.current=n}),e.current};function V1(n){return typeof n.normalize<"u"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):n}function V5(n={}){const{ignoreAccents:e=!0,ignoreCase:t=!0,limit:r,matchFrom:i="any",stringify:s,trim:o=!1}=n;return(a,{inputValue:u,getOptionLabel:c})=>{let f=o?u.trim():u;t&&(f=f.toLowerCase()),e&&(f=V1(f));const d=f?a.filter(g=>{let y=(s||c)(g);return t&&(y=y.toLowerCase()),e&&(y=V1(y)),i==="start"?y.indexOf(f)===0:y.indexOf(f)>-1}):a;return typeof r=="number"?d.slice(0,r):d}}function sf(n,e){for(let t=0;t<n.length;t+=1)if(e(n[t]))return t;return-1}const X5=V5(),X1=5,Y5=n=>{var e;return n.current!==null&&((e=n.current.parentElement)==null?void 0:e.contains(document.activeElement))},K5=[];function Z5(n){const{unstable_isActiveElementInListbox:e=Y5,unstable_classNamePrefix:t="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:s=!1,blurOnSelect:o=!1,clearOnBlur:a=!n.freeSolo,clearOnEscape:u=!1,componentName:c="useAutocomplete",defaultValue:f=n.multiple?K5:null,disableClearable:d=!1,disableCloseOnSelect:g=!1,disabled:y,disabledItemsFocusable:m=!1,disableListWrap:v=!1,filterOptions:x=X5,filterSelectedOptions:b=!1,freeSolo:E=!1,getOptionDisabled:T,getOptionKey:C,getOptionLabel:R=oe=>{var J;return(J=oe.label)!=null?J:oe},groupBy:F,handleHomeEndKeys:O=!n.freeSolo,id:$,includeInputInList:L=!1,inputValue:N,isOptionEqualToValue:B=(oe,J)=>oe===J,multiple:z=!1,onChange:H,onClose:Z,onHighlightChange:G,onInputChange:W,onOpen:q,open:V,openOnFocus:ne=!1,options:re,readOnly:me=!1,selectOnFocus:ce=!n.freeSolo,value:Fe}=n,le=_C($);let Oe=R;Oe=oe=>{const J=R(oe);return typeof J!="string"?String(J):J};const dt=ie.useRef(!1),ze=ie.useRef(!0),Ie=ie.useRef(null),Te=ie.useRef(null),[pt,Gt]=ie.useState(null),[Tt,en]=ie.useState(-1),ge=i?0:-1,$e=ie.useRef(ge),[be,ke]=tc({controlled:Fe,default:f,name:c}),[Ze,rn]=tc({controlled:N,default:"",name:c,state:"inputValue"}),[gt,k]=ie.useState(!1),Qe=ie.useCallback((oe,J)=>{if(!(z?be.length<J.length:J!==null)&&!a)return;let Ne;if(z)Ne="";else if(J==null)Ne="";else{const wt=Oe(J);Ne=typeof wt=="string"?wt:""}Ze!==Ne&&(rn(Ne),W&&W(oe,Ne,"reset"))},[Oe,Ze,z,W,rn,a,be]),[Be,En]=tc({controlled:V,default:!1,name:c,state:"open"}),[Ht,un]=ie.useState(!0),Et=!z&&be!=null&&Ze===Oe(be),He=Be&&!me,Pe=He?x(re.filter(oe=>!(b&&(z?be:[be]).some(J=>J!==null&&B(oe,J)))),{inputValue:Et&&Ht?"":Ze,getOptionLabel:Oe}):[],Le=H5({filteredOptions:Pe,value:be,inputValue:Ze});ie.useEffect(()=>{const oe=be!==Le.value;gt&&!oe||E&&!oe||Qe(null,be)},[be,Qe,gt,Le.value,E]);const Ce=Be&&Pe.length>0&&!me,xt=Tl(oe=>{oe===-1?Ie.current.focus():pt.querySelector(`[data-tag-index="${oe}"]`).focus()});ie.useEffect(()=>{z&&Tt>be.length-1&&(en(-1),xt(-1))},[be,z,Tt,xt]);function Ue(oe,J){if(!Te.current||oe<0||oe>=Pe.length)return-1;let we=oe;for(;;){const Ne=Te.current.querySelector(`[data-option-index="${we}"]`),wt=m?!1:!Ne||Ne.disabled||Ne.getAttribute("aria-disabled")==="true";if(Ne&&Ne.hasAttribute("tabindex")&&!wt)return we;if(J==="next"?we=(we+1)%Pe.length:we=(we-1+Pe.length)%Pe.length,we===oe)return-1}}const Ge=Tl(({event:oe,index:J,reason:we="auto"})=>{if($e.current=J,J===-1?Ie.current.removeAttribute("aria-activedescendant"):Ie.current.setAttribute("aria-activedescendant",`${le}-option-${J}`),G&&G(oe,J===-1?null:Pe[J],we),!Te.current)return;const Ne=Te.current.querySelector(`[role="option"].${t}-focused`);Ne&&(Ne.classList.remove(`${t}-focused`),Ne.classList.remove(`${t}-focusVisible`));let wt=Te.current;if(Te.current.getAttribute("role")!=="listbox"&&(wt=Te.current.parentElement.querySelector('[role="listbox"]')),!wt)return;if(J===-1){wt.scrollTop=0;return}const Re=Te.current.querySelector(`[data-option-index="${J}"]`);if(Re&&(Re.classList.add(`${t}-focused`),we==="keyboard"&&Re.classList.add(`${t}-focusVisible`),wt.scrollHeight>wt.clientHeight&&we!=="mouse"&&we!=="touch")){const _t=Re,On=wt.clientHeight+wt.scrollTop,tt=_t.offsetTop+_t.offsetHeight;tt>On?wt.scrollTop=tt-wt.clientHeight:_t.offsetTop-_t.offsetHeight*(F?1.3:0)<wt.scrollTop&&(wt.scrollTop=_t.offsetTop-_t.offsetHeight*(F?1.3:0))}}),et=Tl(({event:oe,diff:J,direction:we="next",reason:Ne="auto"})=>{if(!He)return;const Re=Ue((()=>{const _t=Pe.length-1;if(J==="reset")return ge;if(J==="start")return 0;if(J==="end")return _t;const On=$e.current+J;return On<0?On===-1&&L?-1:v&&$e.current!==-1||Math.abs(J)>1?0:_t:On>_t?On===_t+1&&L?-1:v||Math.abs(J)>1?_t:0:On})(),we);if(Ge({index:Re,reason:Ne,event:oe}),r&&J!=="reset")if(Re===-1)Ie.current.value=Ze;else{const _t=Oe(Pe[Re]);Ie.current.value=_t,_t.toLowerCase().indexOf(Ze.toLowerCase())===0&&Ze.length>0&&Ie.current.setSelectionRange(Ze.length,_t.length)}}),Rt=()=>{const oe=(J,we)=>{const Ne=J?Oe(J):"",wt=we?Oe(we):"";return Ne===wt};if($e.current!==-1&&Le.filteredOptions&&Le.filteredOptions.length!==Pe.length&&Le.inputValue===Ze&&(z?be.length===Le.value.length&&Le.value.every((J,we)=>Oe(be[we])===Oe(J)):oe(Le.value,be))){const J=Le.filteredOptions[$e.current];if(J)return sf(Pe,we=>Oe(we)===Oe(J))}return-1},Kt=ie.useCallback(()=>{if(!He)return;const oe=Rt();if(oe!==-1){$e.current=oe;return}const J=z?be[0]:be;if(Pe.length===0||J==null){et({diff:"reset"});return}if(Te.current){if(J!=null){const we=Pe[$e.current];if(z&&we&&sf(be,wt=>B(we,wt))!==-1)return;const Ne=sf(Pe,wt=>B(wt,J));Ne===-1?et({diff:"reset"}):Ge({index:Ne});return}if($e.current>=Pe.length-1){Ge({index:Pe.length-1});return}Ge({index:$e.current})}},[Pe.length,z?!1:be,b,et,Ge,He,Ze,z]),mn=Tl(oe=>{WD(Te,oe),oe&&Kt()});ie.useEffect(()=>{Kt()},[Kt]);const Dt=oe=>{Be||(En(!0),un(!0),q&&q(oe))},Nt=(oe,J)=>{Be&&(En(!1),Z&&Z(oe,J))},ot=(oe,J,we,Ne)=>{if(z){if(be.length===J.length&&be.every((wt,Re)=>wt===J[Re]))return}else if(be===J)return;H&&H(oe,J,we,Ne),ke(J)},Ct=ie.useRef(!1),Yt=(oe,J,we="selectOption",Ne="options")=>{let wt=we,Re=J;if(z){Re=Array.isArray(be)?be.slice():[];const _t=sf(Re,On=>B(J,On));_t===-1?Re.push(J):Ne!=="freeSolo"&&(Re.splice(_t,1),wt="removeOption")}Qe(oe,Re),ot(oe,Re,wt,{option:J}),!g&&(!oe||!oe.ctrlKey&&!oe.metaKey)&&Nt(oe,wt),(o===!0||o==="touch"&&Ct.current||o==="mouse"&&!Ct.current)&&Ie.current.blur()};function kt(oe,J){if(oe===-1)return-1;let we=oe;for(;;){if(J==="next"&&we===be.length||J==="previous"&&we===-1)return-1;const Ne=pt.querySelector(`[data-tag-index="${we}"]`);if(!Ne||!Ne.hasAttribute("tabindex")||Ne.disabled||Ne.getAttribute("aria-disabled")==="true")we+=J==="next"?1:-1;else return we}}const $t=(oe,J)=>{if(!z)return;Ze===""&&Nt(oe,"toggleInput");let we=Tt;Tt===-1?Ze===""&&J==="previous"&&(we=be.length-1):(we+=J==="next"?1:-1,we<0&&(we=0),we===be.length&&(we=-1)),we=kt(we,J),en(we),xt(we)},Mn=oe=>{dt.current=!0,rn(""),W&&W(oe,"","clear"),ot(oe,z?[]:null,"clear")},cn=oe=>J=>{if(oe.onKeyDown&&oe.onKeyDown(J),!J.defaultMuiPrevented&&(Tt!==-1&&["ArrowLeft","ArrowRight"].indexOf(J.key)===-1&&(en(-1),xt(-1)),J.which!==229))switch(J.key){case"Home":He&&O&&(J.preventDefault(),et({diff:"start",direction:"next",reason:"keyboard",event:J}));break;case"End":He&&O&&(J.preventDefault(),et({diff:"end",direction:"previous",reason:"keyboard",event:J}));break;case"PageUp":J.preventDefault(),et({diff:-X1,direction:"previous",reason:"keyboard",event:J}),Dt(J);break;case"PageDown":J.preventDefault(),et({diff:X1,direction:"next",reason:"keyboard",event:J}),Dt(J);break;case"ArrowDown":J.preventDefault(),et({diff:1,direction:"next",reason:"keyboard",event:J}),Dt(J);break;case"ArrowUp":J.preventDefault(),et({diff:-1,direction:"previous",reason:"keyboard",event:J}),Dt(J);break;case"ArrowLeft":$t(J,"previous");break;case"ArrowRight":$t(J,"next");break;case"Enter":if($e.current!==-1&&He){const we=Pe[$e.current],Ne=T?T(we):!1;if(J.preventDefault(),Ne)return;Yt(J,we,"selectOption"),r&&Ie.current.setSelectionRange(Ie.current.value.length,Ie.current.value.length)}else E&&Ze!==""&&Et===!1&&(z&&J.preventDefault(),Yt(J,Ze,"createOption","freeSolo"));break;case"Escape":He?(J.preventDefault(),J.stopPropagation(),Nt(J,"escape")):u&&(Ze!==""||z&&be.length>0)&&(J.preventDefault(),J.stopPropagation(),Mn(J));break;case"Backspace":if(z&&!me&&Ze===""&&be.length>0){const we=Tt===-1?be.length-1:Tt,Ne=be.slice();Ne.splice(we,1),ot(J,Ne,"removeOption",{option:be[we]})}break;case"Delete":if(z&&!me&&Ze===""&&be.length>0&&Tt!==-1){const we=Tt,Ne=be.slice();Ne.splice(we,1),ot(J,Ne,"removeOption",{option:be[we]})}break}},yn=oe=>{k(!0),ne&&!dt.current&&Dt(oe)},Zt=oe=>{if(e(Te)){Ie.current.focus();return}k(!1),ze.current=!0,dt.current=!1,s&&$e.current!==-1&&He?Yt(oe,Pe[$e.current],"blur"):s&&E&&Ze!==""?Yt(oe,Ze,"blur","freeSolo"):a&&Qe(oe,be),Nt(oe,"blur")},Dn=oe=>{const J=oe.target.value;Ze!==J&&(rn(J),un(!1),W&&W(oe,J,"input")),J===""?!d&&!z&&ot(oe,null,"clear"):Dt(oe)},hn=oe=>{const J=Number(oe.currentTarget.getAttribute("data-option-index"));$e.current!==J&&Ge({event:oe,index:J,reason:"mouse"})},Ft=oe=>{Ge({event:oe,index:Number(oe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ct.current=!0},It=oe=>{const J=Number(oe.currentTarget.getAttribute("data-option-index"));Yt(oe,Pe[J],"selectOption"),Ct.current=!1},Cn=oe=>J=>{const we=be.slice();we.splice(oe,1),ot(J,we,"removeOption",{option:be[oe]})},Ni=oe=>{Be?Nt(oe,"toggleInput"):Dt(oe)},li=oe=>{oe.currentTarget.contains(oe.target)&&oe.target.getAttribute("id")!==le&&oe.preventDefault()},ui=oe=>{oe.currentTarget.contains(oe.target)&&(Ie.current.focus(),ce&&ze.current&&Ie.current.selectionEnd-Ie.current.selectionStart===0&&Ie.current.select(),ze.current=!1)},_n=oe=>{!y&&(Ze===""||!Be)&&Ni(oe)};let ci=E&&Ze.length>0;ci=ci||(z?be.length>0:be!==null);let gr=Pe;return F&&(gr=Pe.reduce((oe,J,we)=>{const Ne=F(J);return oe.length>0&&oe[oe.length-1].group===Ne?oe[oe.length-1].options.push(J):oe.push({key:we,index:we,group:Ne,options:[J]}),oe},[])),y&&gt&&Zt(),{getRootProps:(oe={})=>xe({"aria-owns":Ce?`${le}-listbox`:null},oe,{onKeyDown:cn(oe),onMouseDown:li,onClick:ui}),getInputLabelProps:()=>({id:`${le}-label`,htmlFor:le}),getInputProps:()=>({id:le,value:Ze,onBlur:Zt,onFocus:yn,onChange:Dn,onMouseDown:_n,"aria-activedescendant":He?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Ce?`${le}-listbox`:void 0,"aria-expanded":Ce,autoComplete:"off",ref:Ie,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:y}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Mn}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ni}),getTagProps:({index:oe})=>xe({key:oe,"data-tag-index":oe,tabIndex:-1},!me&&{onDelete:Cn(oe)}),getListboxProps:()=>({role:"listbox",id:`${le}-listbox`,"aria-labelledby":`${le}-label`,ref:mn,onMouseDown:oe=>{oe.preventDefault()}}),getOptionProps:({index:oe,option:J})=>{var we;const Ne=(z?be:[be]).some(Re=>Re!=null&&B(J,Re)),wt=T?T(J):!1;return{key:(we=C==null?void 0:C(J))!=null?we:Oe(J),tabIndex:-1,role:"option",id:`${le}-option-${oe}`,onMouseMove:hn,onClick:It,onTouchStart:Ft,"data-option-index":oe,"aria-disabled":wt,"aria-selected":Ne}},id:le,inputValue:Ze,value:be,dirty:ci,expanded:He&&pt,popupOpen:He,focused:gt||Tt!==-1,anchorEl:pt,setAnchorEl:Gt,focusedTag:Tt,groupedOptions:gr}}function J5(n){return zo("PrivateSwitchBase",n)}$o("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Q5=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],e3=n=>{const{classes:e,checked:t,disabled:r,edge:i}=n,s={root:["root",t&&"checked",r&&"disabled",i&&`edge${Gn(i)}`],input:["input"]};return Li(s,J5,e)},t3=Pn(ac,{name:"MuiSwitchBase"})(({ownerState:n})=>xe({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),n3=Pn("input",{name:"MuiSwitchBase",shouldForwardProp:$d})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),r3=ie.forwardRef(function(e,t){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:u,disableFocusRipple:c=!1,edge:f=!1,icon:d,id:g,inputProps:y,inputRef:m,name:v,onBlur:x,onChange:b,onFocus:E,readOnly:T,required:C=!1,tabIndex:R,type:F,value:O}=e,$=Ir(e,Q5),[L,N]=tc({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),B=yC(),z=ne=>{E&&E(ne),B&&B.onFocus&&B.onFocus(ne)},H=ne=>{x&&x(ne),B&&B.onBlur&&B.onBlur(ne)},Z=ne=>{if(ne.nativeEvent.defaultPrevented)return;const re=ne.target.checked;N(re),b&&b(ne,re)};let G=u;B&&typeof G>"u"&&(G=B.disabled);const W=F==="checkbox"||F==="radio",q=xe({},e,{checked:L,disabled:G,disableFocusRipple:c,edge:f}),V=e3(q);return ft.jsxs(t3,xe({component:"span",className:Un(V.root,o),centerRipple:!0,focusRipple:!c,disabled:G,tabIndex:null,role:void 0,onFocus:z,onBlur:H,ownerState:q,ref:t},$,{children:[ft.jsx(n3,xe({autoFocus:r,checked:i,defaultChecked:a,className:V.input,disabled:G,id:W?g:void 0,name:v,onChange:Z,readOnly:T,ref:m,required:C,ownerState:q,tabIndex:R,type:F},F==="checkbox"&&O===void 0?{}:{value:O},y)),L?s:d]}))}),i3=wy(ft.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),s3=wy(ft.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),o3=wy(ft.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function a3(n){return zo("MuiCheckbox",n)}const am=$o("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),l3=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],u3=n=>{const{classes:e,indeterminate:t,color:r,size:i}=n,s={root:["root",t&&"indeterminate",`color${Gn(r)}`,`size${Gn(i)}`]},o=Li(s,a3,e);return xe({},e,o)},c3=Pn(r3,{shouldForwardProp:n=>$d(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${Gn(t.size)}`],t.color!=="default"&&e[`color${Gn(t.color)}`]]}})(({theme:n,ownerState:e})=>xe({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:fa(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${am.checked}, &.${am.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${am.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),h3=ft.jsx(s3,{}),f3=ft.jsx(i3,{}),d3=ft.jsx(o3,{}),Y1=ie.forwardRef(function(e,t){var r,i;const s=as({props:e,name:"MuiCheckbox"}),{checkedIcon:o=h3,color:a="primary",icon:u=f3,indeterminate:c=!1,indeterminateIcon:f=d3,inputProps:d,size:g="medium",className:y}=s,m=Ir(s,l3),v=c?f:u,x=c?f:o,b=xe({},s,{color:a,indeterminate:c,size:g}),E=u3(b);return ft.jsx(c3,xe({type:"checkbox",inputProps:xe({"data-indeterminate":c},d),icon:ie.cloneElement(v,{fontSize:(r=v.props.fontSize)!=null?r:g}),checkedIcon:ie.cloneElement(x,{fontSize:(i=x.props.fontSize)!=null?i:g}),ownerState:b,ref:t,className:Un(E.root,y)},m,{classes:E}))});function p3(n){return zo("MuiCircularProgress",n)}$o("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const g3=["className","color","disableShrink","size","style","thickness","value","variant"];let jd=n=>n,K1,Z1,J1,Q1;const no=44,m3=fC(K1||(K1=jd`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),y3=fC(Z1||(Z1=jd`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),_3=n=>{const{classes:e,variant:t,color:r,disableShrink:i}=n,s={root:["root",t,`color${Gn(r)}`],svg:["svg"],circle:["circle",`circle${Gn(t)}`,i&&"circleDisableShrink"]};return Li(s,p3,e)},v3=Pn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${Gn(t.color)}`]]}})(({ownerState:n,theme:e})=>xe({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&zc(J1||(J1=jd`
      animation: ${0} 1.4s linear infinite;
    `),m3)),x3=Pn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),w3=Pn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${Gn(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>xe({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&zc(Q1||(Q1=jd`
      animation: ${0} 1.4s ease-in-out infinite;
    `),y3)),b3=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:u,thickness:c=3.6,value:f=0,variant:d="indeterminate"}=r,g=Ir(r,g3),y=xe({},r,{color:s,disableShrink:o,size:a,thickness:c,value:f,variant:d}),m=_3(y),v={},x={},b={};if(d==="determinate"){const E=2*Math.PI*((no-c)/2);v.strokeDasharray=E.toFixed(3),b["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*E).toFixed(3)}px`,x.transform="rotate(-90deg)"}return ft.jsx(v3,xe({className:Un(m.root,i),style:xe({width:a,height:a},x,u),ownerState:y,ref:t,role:"progressbar"},b,g,{children:ft.jsx(x3,{className:m.svg,ownerState:y,viewBox:`${no/2} ${no/2} ${no} ${no}`,children:ft.jsx(w3,{className:m.circle,style:v,ownerState:y,cx:no,cy:no,r:(no-c)/2,fill:"none",strokeWidth:c})})}))}),E3=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function C3(n,e,t){const r=e.getBoundingClientRect(),i=t&&t.getBoundingClientRect(),s=gC(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const c=s.getComputedStyle(e);o=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,u=0;if(o&&o!=="none"&&typeof o=="string"){const c=o.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),u=parseInt(c[5],10)}return n==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${s.innerWidth+a-r.left}px)`:n==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:n==="up"?i?`translateY(${i.bottom+u-r.top}px)`:`translateY(${s.innerHeight+u-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function S3(n){return typeof n=="function"?n():n}function of(n,e,t){const r=S3(t),i=C3(n,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const T3=ie.forwardRef(function(e,t){const r=Bo(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:u,container:c,direction:f="down",easing:d=i,in:g,onEnter:y,onEntered:m,onEntering:v,onExit:x,onExited:b,onExiting:E,style:T,timeout:C=s,TransitionComponent:R=l5}=e,F=Ir(e,E3),O=ie.useRef(null),$=Bd(pC(u),O,t),L=V=>ne=>{V&&(ne===void 0?V(O.current):V(O.current,ne))},N=L((V,ne)=>{of(f,V,c),u5(V),y&&y(V,ne)}),B=L((V,ne)=>{const re=z1({timeout:C,style:T,easing:d},{mode:"enter"});V.style.webkitTransition=r.transitions.create("-webkit-transform",xe({},re)),V.style.transition=r.transitions.create("transform",xe({},re)),V.style.webkitTransform="none",V.style.transform="none",v&&v(V,ne)}),z=L(m),H=L(E),Z=L(V=>{const ne=z1({timeout:C,style:T,easing:d},{mode:"exit"});V.style.webkitTransition=r.transitions.create("-webkit-transform",ne),V.style.transition=r.transitions.create("transform",ne),of(f,V,c),x&&x(V)}),G=L(V=>{V.style.webkitTransition="",V.style.transition="",b&&b(V)}),W=V=>{o&&o(O.current,V)},q=ie.useCallback(()=>{O.current&&of(f,O.current,c)},[f,c]);return ie.useEffect(()=>{if(g||f==="down"||f==="right")return;const V=qD(()=>{O.current&&of(f,O.current,c)}),ne=gC(O.current);return ne.addEventListener("resize",V),()=>{V.clear(),ne.removeEventListener("resize",V)}},[f,g,c]),ie.useEffect(()=>{g||q()},[g,q]),ft.jsx(R,xe({nodeRef:O,onEnter:N,onEntered:z,onEntering:B,onExit:Z,onExited:G,onExiting:H,addEndListener:W,appear:a,in:g,timeout:C},F,{children:(V,ne)=>ie.cloneElement(u,xe({ref:$,style:xe({visibility:V==="exited"&&!g?"hidden":void 0},T,u.props.style)},ne))}))});function R3(n){return zo("MuiDrawer",n)}$o("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const I3=["BackdropProps"],A3=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],LC=(n,e)=>{const{ownerState:t}=n;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},P3=n=>{const{classes:e,anchor:t,variant:r}=n,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Gn(t)}`,r!=="temporary"&&`paperAnchorDocked${Gn(t)}`]};return Li(i,R3,e)},M3=Pn(mC,{name:"MuiDrawer",slot:"Root",overridesResolver:LC})(({theme:n})=>({zIndex:(n.vars||n).zIndex.drawer})),ew=Pn("div",{shouldForwardProp:$d,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:LC})({flex:"0 0 auto"}),O3=Pn(xy,{name:"MuiDrawer",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`paperAnchor${Gn(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${Gn(t.anchor)}`]]}})(({theme:n,ownerState:e})=>xe({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(n.vars||n).palette.divider}`})),kC={left:"right",right:"left",top:"down",bottom:"up"};function L3(n){return["left","right"].indexOf(n)!==-1}function k3({direction:n},e){return n==="rtl"&&L3(e)?kC[e]:e}const F3=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiDrawer"}),i=Bo(),s=dC(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:u,children:c,className:f,elevation:d=16,hideBackdrop:g=!1,ModalProps:{BackdropProps:y}={},onClose:m,open:v=!1,PaperProps:x={},SlideProps:b,TransitionComponent:E=T3,transitionDuration:T=o,variant:C="temporary"}=r,R=Ir(r.ModalProps,I3),F=Ir(r,A3),O=ie.useRef(!1);ie.useEffect(()=>{O.current=!0},[]);const $=k3({direction:s?"rtl":"ltr"},a),N=xe({},r,{anchor:a,elevation:d,open:v,variant:C},F),B=P3(N),z=ft.jsx(O3,xe({elevation:C==="temporary"?d:0,square:!0},x,{className:Un(B.paper,x.className),ownerState:N,children:c}));if(C==="permanent")return ft.jsx(ew,xe({className:Un(B.root,B.docked,f),ownerState:N,ref:t},F,{children:z}));const H=ft.jsx(E,xe({in:v,direction:kC[$],timeout:T,appear:O.current},b,{children:z}));return C==="persistent"?ft.jsx(ew,xe({className:Un(B.root,B.docked,f),ownerState:N,ref:t},F,{children:H})):ft.jsx(M3,xe({BackdropProps:xe({},u,y,{transitionDuration:T}),className:Un(B.root,B.modal,f),open:v,ownerState:N,onClose:m,hideBackdrop:g,ref:t},F,R,{children:H}))});function D3(n){return zo("MuiFormControlLabel",n)}const Wu=$o("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),N3=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],z3=n=>{const{classes:e,disabled:t,labelPlacement:r,error:i,required:s}=n,o={root:["root",t&&"disabled",`labelPlacement${Gn(r)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return Li(o,D3,e)},$3=Pn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Wu.label}`]:e.label},e.root,e[`labelPlacement${Gn(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>xe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Wu.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Wu.label}`]:{[`&.${Wu.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),B3=Pn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${Wu.error}`]:{color:(n.vars||n).palette.error.main}})),U3=ie.forwardRef(function(e,t){var r,i;const s=as({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:a={},control:u,disabled:c,disableTypography:f,label:d,labelPlacement:g="end",required:y,slotProps:m={}}=s,v=Ir(s,N3),x=yC(),b=(r=c??u.props.disabled)!=null?r:x==null?void 0:x.disabled,E=y??u.props.required,T={disabled:b,required:E};["checked","name","onChange","value","inputRef"].forEach(L=>{typeof u.props[L]>"u"&&typeof s[L]<"u"&&(T[L]=s[L])});const C=HD({props:s,muiFormControl:x,states:["error"]}),R=xe({},s,{disabled:b,labelPlacement:g,required:E,error:C.error}),F=z3(R),O=(i=m.typography)!=null?i:a.typography;let $=d;return $!=null&&$.type!==Ps&&!f&&($=ft.jsx(Ps,xe({component:"span"},O,{className:Un(F.label,O==null?void 0:O.className),children:$}))),ft.jsxs($3,xe({className:Un(F.root,o),ownerState:R,ref:t},v,{children:[ie.cloneElement(u,T),E?ft.jsxs(bC,{display:"block",children:[$,ft.jsxs(B3,{ownerState:R,"aria-hidden":!0,className:F.asterisk,children:["‚Äâ","*"]})]}):$]}))}),G3=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],q3=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},W3=n=>{const{alignItems:e,classes:t,dense:r,disabled:i,disableGutters:s,divider:o,selected:a}=n,c=Li({root:["root",r&&"dense",!s&&"gutters",o&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},YD,t);return xe({},t,c)},j3=Pn(ac,{shouldForwardProp:n=>$d(n)||n==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:q3})(({theme:n,ownerState:e})=>xe({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Mu.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:fa(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${Mu.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:fa(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${Mu.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:fa(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:fa(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${Mu.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${Mu.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),FC=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:o="div",children:a,dense:u=!1,disableGutters:c=!1,divider:f=!1,focusVisibleClassName:d,selected:g=!1,className:y}=r,m=Ir(r,G3),v=ie.useContext(Zf),x=ie.useMemo(()=>({dense:u||v.dense||!1,alignItems:i,disableGutters:c}),[i,v.dense,u,c]),b=ie.useRef(null);n5(()=>{s&&b.current&&b.current.focus()},[s]);const E=xe({},r,{alignItems:i,dense:x.dense,disableGutters:c,divider:f,selected:g}),T=W3(E),C=Bd(b,t);return ft.jsx(Zf.Provider,{value:x,children:ft.jsx(j3,xe({ref:C,href:m.href||m.to,component:(m.href||m.to)&&o==="div"?"button":o,focusVisibleClassName:Un(T.focusVisible,d),ownerState:E,className:Un(T.root,y)},m,{classes:T,children:a}))})}),H3=["className"],V3=n=>{const{alignItems:e,classes:t}=n;return Li({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},r5,t)},X3=Pn("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:n,ownerState:e})=>xe({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),Cy=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiListItemIcon"}),{className:i}=r,s=Ir(r,H3),o=ie.useContext(Zf),a=xe({},r,{alignItems:o.alignItems}),u=V3(a);return ft.jsx(X3,xe({className:Un(u.root,i),ownerState:a,ref:t},s))}),Y3=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],K3=n=>{const{classes:e,inset:t,primary:r,secondary:i,dense:s}=n;return Li({root:["root",t&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},i5,e)},Z3=Pn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${N1.primary}`]:e.primary},{[`& .${N1.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})(({ownerState:n})=>xe({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},n.primary&&n.secondary&&{marginTop:6,marginBottom:6},n.inset&&{paddingLeft:56})),Sy=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:u,primaryTypographyProps:c,secondary:f,secondaryTypographyProps:d}=r,g=Ir(r,Y3),{dense:y}=ie.useContext(Zf);let m=u??i,v=f;const x=xe({},r,{disableTypography:o,inset:a,primary:!!m,secondary:!!v,dense:y}),b=K3(x);return m!=null&&m.type!==Ps&&!o&&(m=ft.jsx(Ps,xe({variant:y?"body2":"body1",className:b.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:m}))),v!=null&&v.type!==Ps&&!o&&(v=ft.jsx(Ps,xe({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},d,{children:v}))),ft.jsxs(Z3,xe({className:Un(b.root,s),ownerState:x,ref:t},g,{children:[m,v]}))});function J3(n){return zo("MuiTooltip",n)}const Ms=$o("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Q3=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function eN(n){return Math.round(n*1e5)/1e5}const tN=n=>{const{classes:e,disableInteractive:t,arrow:r,touch:i,placement:s}=n,o={popper:["popper",!t&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Gn(s.split("-")[0])}`],arrow:["arrow"]};return Li(o,J3,e)},nN=Pn(vy,{name:"MuiTooltip",slot:"Popper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(({theme:n,ownerState:e,open:t})=>xe({zIndex:(n.vars||n).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!t&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ms.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ms.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ms.arrow}`]:xe({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ms.arrow}`]:xe({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),rN=Pn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${Gn(t.placement.split("-")[0])}`]]}})(({theme:n,ownerState:e})=>xe({backgroundColor:n.vars?n.vars.palette.Tooltip.bg:fa(n.palette.grey[700],.92),borderRadius:(n.vars||n).shape.borderRadius,color:(n.vars||n).palette.common.white,fontFamily:n.typography.fontFamily,padding:"4px 8px",fontSize:n.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:n.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:n.typography.pxToRem(14),lineHeight:`${eN(16/14)}em`,fontWeight:n.typography.fontWeightRegular},{[`.${Ms.popper}[data-popper-placement*="left"] &`]:xe({transformOrigin:"right center"},e.isRtl?xe({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):xe({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ms.popper}[data-popper-placement*="right"] &`]:xe({transformOrigin:"left center"},e.isRtl?xe({marginRight:"14px"},e.touch&&{marginRight:"24px"}):xe({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ms.popper}[data-popper-placement*="top"] &`]:xe({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ms.popper}[data-popper-placement*="bottom"] &`]:xe({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),iN=Pn("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(n,e)=>e.arrow})(({theme:n})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:n.vars?n.vars.palette.Tooltip.bg:fa(n.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let af=!1;const tw=new jD;let Ou={x:0,y:0};function lf(n,e){return(t,...r)=>{e&&e(t,...r),n(t,...r)}}const Ty=ie.forwardRef(function(e,t){var r,i,s,o,a,u,c,f,d,g,y,m,v,x,b,E,T,C,R;const F=as({props:e,name:"MuiTooltip"}),{arrow:O=!1,children:$,components:L={},componentsProps:N={},describeChild:B=!1,disableFocusListener:z=!1,disableHoverListener:H=!1,disableInteractive:Z=!1,disableTouchListener:G=!1,enterDelay:W=100,enterNextDelay:q=0,enterTouchDelay:V=700,followCursor:ne=!1,id:re,leaveDelay:me=0,leaveTouchDelay:ce=1500,onClose:Fe,onOpen:le,open:Oe,placement:dt="bottom",PopperComponent:ze,PopperProps:Ie={},slotProps:Te={},slots:pt={},title:Gt,TransitionComponent:Tt=D1,TransitionProps:en}=F,ge=Ir(F,Q3),$e=ie.isValidElement($)?$:ft.jsx("span",{children:$}),be=Bo(),ke=dC(),[Ze,rn]=ie.useState(),[gt,k]=ie.useState(null),Qe=ie.useRef(!1),Be=Z||ne,En=tf(),Ht=tf(),un=tf(),Et=tf(),[He,Pe]=tc({controlled:Oe,default:!1,name:"Tooltip",state:"open"});let Le=He;const Ce=_C(re),xt=ie.useRef(),Ue=Tl(()=>{xt.current!==void 0&&(document.body.style.WebkitUserSelect=xt.current,xt.current=void 0),Et.clear()});ie.useEffect(()=>Ue,[Ue]);const Ge=Re=>{tw.clear(),af=!0,Pe(!0),le&&!Le&&le(Re)},et=Tl(Re=>{tw.start(800+me,()=>{af=!1}),Pe(!1),Fe&&Le&&Fe(Re),En.start(be.transitions.duration.shortest,()=>{Qe.current=!1})}),Rt=Re=>{Qe.current&&Re.type!=="touchstart"||(Ze&&Ze.removeAttribute("title"),Ht.clear(),un.clear(),W||af&&q?Ht.start(af?q:W,()=>{Ge(Re)}):Ge(Re))},Kt=Re=>{Ht.clear(),un.start(me,()=>{et(Re)})},{isFocusVisibleRef:mn,onBlur:Dt,onFocus:Nt,ref:ot}=UD(),[,Ct]=ie.useState(!1),Yt=Re=>{Dt(Re),mn.current===!1&&(Ct(!1),Kt(Re))},kt=Re=>{Ze||rn(Re.currentTarget),Nt(Re),mn.current===!0&&(Ct(!0),Rt(Re))},$t=Re=>{Qe.current=!0;const _t=$e.props;_t.onTouchStart&&_t.onTouchStart(Re)},Mn=Re=>{$t(Re),un.clear(),En.clear(),Ue(),xt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Et.start(V,()=>{document.body.style.WebkitUserSelect=xt.current,Rt(Re)})},cn=Re=>{$e.props.onTouchEnd&&$e.props.onTouchEnd(Re),Ue(),un.start(ce,()=>{et(Re)})};ie.useEffect(()=>{if(!Le)return;function Re(_t){(_t.key==="Escape"||_t.key==="Esc")&&et(_t)}return document.addEventListener("keydown",Re),()=>{document.removeEventListener("keydown",Re)}},[et,Le]);const yn=Bd(pC($e),ot,rn,t);!Gt&&Gt!==0&&(Le=!1);const Zt=ie.useRef(),Dn=Re=>{const _t=$e.props;_t.onMouseMove&&_t.onMouseMove(Re),Ou={x:Re.clientX,y:Re.clientY},Zt.current&&Zt.current.update()},hn={},Ft=typeof Gt=="string";B?(hn.title=!Le&&Ft&&!H?Gt:null,hn["aria-describedby"]=Le?Ce:null):(hn["aria-label"]=Ft?Gt:null,hn["aria-labelledby"]=Le&&!Ft?Ce:null);const It=xe({},hn,ge,$e.props,{className:Un(ge.className,$e.props.className),onTouchStart:$t,ref:yn},ne?{onMouseMove:Dn}:{}),Cn={};G||(It.onTouchStart=Mn,It.onTouchEnd=cn),H||(It.onMouseOver=lf(Rt,It.onMouseOver),It.onMouseLeave=lf(Kt,It.onMouseLeave),Be||(Cn.onMouseOver=Rt,Cn.onMouseLeave=Kt)),z||(It.onFocus=lf(kt,It.onFocus),It.onBlur=lf(Yt,It.onBlur),Be||(Cn.onFocus=kt,Cn.onBlur=Yt));const Ni=ie.useMemo(()=>{var Re;let _t=[{name:"arrow",enabled:!!gt,options:{element:gt,padding:4}}];return(Re=Ie.popperOptions)!=null&&Re.modifiers&&(_t=_t.concat(Ie.popperOptions.modifiers)),xe({},Ie.popperOptions,{modifiers:_t})},[gt,Ie]),li=xe({},F,{isRtl:ke,arrow:O,disableInteractive:Be,placement:dt,PopperComponentProp:ze,touch:Qe.current}),ui=tN(li),_n=(r=(i=pt.popper)!=null?i:L.Popper)!=null?r:nN,ci=(s=(o=(a=pt.transition)!=null?a:L.Transition)!=null?o:Tt)!=null?s:D1,gr=(u=(c=pt.tooltip)!=null?c:L.Tooltip)!=null?u:rN,oe=(f=(d=pt.arrow)!=null?d:L.Arrow)!=null?f:iN,J=ef(_n,xe({},Ie,(g=Te.popper)!=null?g:N.popper,{className:Un(ui.popper,Ie==null?void 0:Ie.className,(y=(m=Te.popper)!=null?m:N.popper)==null?void 0:y.className)}),li),we=ef(ci,xe({},en,(v=Te.transition)!=null?v:N.transition),li),Ne=ef(gr,xe({},(x=Te.tooltip)!=null?x:N.tooltip,{className:Un(ui.tooltip,(b=(E=Te.tooltip)!=null?E:N.tooltip)==null?void 0:b.className)}),li),wt=ef(oe,xe({},(T=Te.arrow)!=null?T:N.arrow,{className:Un(ui.arrow,(C=(R=Te.arrow)!=null?R:N.arrow)==null?void 0:C.className)}),li);return ft.jsxs(ie.Fragment,{children:[ie.cloneElement($e,It),ft.jsx(_n,xe({as:ze??vy,placement:dt,anchorEl:ne?{getBoundingClientRect:()=>({top:Ou.y,left:Ou.x,right:Ou.x,bottom:Ou.y,width:0,height:0})}:Ze,popperRef:Zt,open:Ze?Le:!1,id:Ce,transition:!0},Cn,J,{popperOptions:Ni,children:({TransitionProps:Re})=>ft.jsx(ci,xe({timeout:be.transitions.duration.shorter},Re,we,{children:ft.jsxs(gr,xe({},Ne,{children:[Gt,O?ft.jsx(oe,xe({},wt,{ref:k})):null]}))}))}))]})});function sN(n){return zo("MuiToolbar",n)}$o("MuiToolbar",["root","gutters","regular","dense"]);const oN=["className","component","disableGutters","variant"],aN=n=>{const{classes:e,disableGutters:t,variant:r}=n;return Li({root:["root",!t&&"gutters",r]},sN,e)},lN=Pn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableGutters&&e.gutters,e[t.variant]]}})(({theme:n,ownerState:e})=>xe({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:n,ownerState:e})=>e.variant==="regular"&&n.mixins.toolbar),uN=ie.forwardRef(function(e,t){const r=as({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,u=Ir(r,oN),c=xe({},r,{component:s,disableGutters:o,variant:a}),f=aN(c);return ft.jsx(lN,xe({as:s,className:Un(f.root,i),ref:t,ownerState:c},u))});function cN(n){return zo("MuiToggleButton",n)}const nw=$o("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),hN=ie.createContext({}),fN=ie.createContext(void 0);function dN(n,e){return e===void 0||n===void 0?!1:Array.isArray(e)?e.indexOf(n)>=0:n===e}const pN=["value"],gN=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],mN=n=>{const{classes:e,fullWidth:t,selected:r,disabled:i,size:s,color:o}=n,a={root:["root",r&&"selected",i&&"disabled",t&&"fullWidth",`size${Gn(s)}`,o]};return Li(a,cN,e)},yN=Pn(ac,{name:"MuiToggleButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`size${Gn(t.size)}`]]}})(({theme:n,ownerState:e})=>{let t=e.color==="standard"?n.palette.text.primary:n.palette[e.color].main,r;return n.vars&&(t=e.color==="standard"?n.vars.palette.text.primary:n.vars.palette[e.color].main,r=e.color==="standard"?n.vars.palette.text.primaryChannel:n.vars.palette[e.color].mainChannel),xe({},n.typography.button,{borderRadius:(n.vars||n).shape.borderRadius,padding:11,border:`1px solid ${(n.vars||n).palette.divider}`,color:(n.vars||n).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${nw.disabled}`]:{color:(n.vars||n).palette.action.disabled,border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:nf(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${nw.selected}`]:{color:t,backgroundColor:n.vars?`rgba(${r} / ${n.vars.palette.action.selectedOpacity})`:nf(t,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?`rgba(${r} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:nf(t,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${r} / ${n.vars.palette.action.selectedOpacity})`:nf(t,n.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:n.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:n.typography.pxToRem(15)})}),DC=ie.forwardRef(function(e,t){const r=ie.useContext(hN),{value:i}=r,s=Ir(r,pN),o=ie.useContext(fN),a=GD(xe({},s,{selected:dN(e.value,i)}),e),u=as({props:a,name:"MuiToggleButton"}),{children:c,className:f,color:d="standard",disabled:g=!1,disableFocusRipple:y=!1,fullWidth:m=!1,onChange:v,onClick:x,selected:b,size:E="medium",value:T}=u,C=Ir(u,gN),R=xe({},u,{color:d,disabled:g,disableFocusRipple:y,fullWidth:m,size:E}),F=mN(R),O=L=>{x&&(x(L,T),L.defaultPrevented)||v&&v(L,T)},$=o||"";return ft.jsx(yN,xe({className:Un(s.className,F.root,f,$),disabled:g,focusRipple:!y,ref:t,onClick:O,onChange:v,value:T,ownerState:R,"aria-pressed":b},C,{children:c}))}),NC=({faIcon:n,id:e,size:t,...r})=>Q(Gs,{"aria-label":r["aria-label"],id:e,icon:n,size:t,...r});NC.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{faIcon:{required:!0,tsType:{name:"IconProp"},description:""}},composes:["Partial"]};const _N=n=>Q(NC,{faIcon:aC,...n});_N.__docgenInfo={description:"",methods:[],displayName:"TeliSearchIcon"};var zC={},$C={},Ry={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){if(t=`${t}`,t==="0")return"0";if(/^[+-]?(\d+|\d*\.\d+)(e[+-]?\d+)?(%|\w+)?$/.test(t))return t.replace(/^[+-]?/,i=>i==="-"?"":"-");let r=["var","calc","min","max","clamp"];for(const i of r)if(t.includes(`${i}(`))return`calc(${t} * -1)`}})(Ry);var BC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});const e=["preflight","container","accessibility","pointerEvents","visibility","position","inset","isolation","zIndex","order","gridColumn","gridColumnStart","gridColumnEnd","gridRow","gridRowStart","gridRowEnd","float","clear","margin","boxSizing","lineClamp","display","aspectRatio","size","height","maxHeight","minHeight","width","minWidth","maxWidth","flex","flexShrink","flexGrow","flexBasis","tableLayout","captionSide","borderCollapse","borderSpacing","transformOrigin","translate","rotate","skew","scale","transform","animation","cursor","touchAction","userSelect","resize","scrollSnapType","scrollSnapAlign","scrollSnapStop","scrollMargin","scrollPadding","listStylePosition","listStyleType","listStyleImage","appearance","columns","breakBefore","breakInside","breakAfter","gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateColumns","gridTemplateRows","flexDirection","flexWrap","placeContent","placeItems","alignContent","alignItems","justifyContent","justifyItems","gap","space","divideWidth","divideStyle","divideColor","divideOpacity","placeSelf","alignSelf","justifySelf","overflow","overscrollBehavior","scrollBehavior","textOverflow","hyphens","whitespace","textWrap","wordBreak","borderRadius","borderWidth","borderStyle","borderColor","borderOpacity","backgroundColor","backgroundOpacity","backgroundImage","gradientColorStops","boxDecorationBreak","backgroundSize","backgroundAttachment","backgroundClip","backgroundPosition","backgroundRepeat","backgroundOrigin","fill","stroke","strokeWidth","objectFit","objectPosition","padding","textAlign","textIndent","verticalAlign","fontFamily","fontSize","fontWeight","textTransform","fontStyle","fontVariantNumeric","lineHeight","letterSpacing","textColor","textOpacity","textDecoration","textDecorationColor","textDecorationStyle","textDecorationThickness","textUnderlineOffset","fontSmoothing","placeholderColor","placeholderOpacity","caretColor","accentColor","opacity","backgroundBlendMode","mixBlendMode","boxShadow","boxShadowColor","outlineStyle","outlineWidth","outlineOffset","outlineColor","ringWidth","ringColor","ringOpacity","ringOffsetWidth","ringOffsetColor","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","saturate","sepia","filter","backdropBlur","backdropBrightness","backdropContrast","backdropGrayscale","backdropHueRotate","backdropInvert","backdropOpacity","backdropSaturate","backdropSepia","backdropFilter","transitionProperty","transitionDelay","transitionDuration","transitionTimingFunction","willChange","contain","content","forcedColorAdjust"]})(BC);var UC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t,r){return t===void 0?r:Array.isArray(t)?t:[...new Set(r.filter(s=>t!==!1&&t[s]!==!1).concat(Object.keys(t).filter(s=>t[s]!==!1)))]}})(UC);var GC={},Hd={},Iy={exports:{}},ct=String,qC=function(){return{isColorSupported:!1,reset:ct,bold:ct,dim:ct,italic:ct,underline:ct,inverse:ct,hidden:ct,strikethrough:ct,black:ct,red:ct,green:ct,yellow:ct,blue:ct,magenta:ct,cyan:ct,white:ct,gray:ct,bgBlack:ct,bgRed:ct,bgGreen:ct,bgYellow:ct,bgBlue:ct,bgMagenta:ct,bgCyan:ct,bgWhite:ct,blackBright:ct,redBright:ct,greenBright:ct,yellowBright:ct,blueBright:ct,magentaBright:ct,cyanBright:ct,whiteBright:ct,bgBlackBright:ct,bgRedBright:ct,bgGreenBright:ct,bgYellowBright:ct,bgBlueBright:ct,bgMagentaBright:ct,bgCyanBright:ct,bgWhiteBright:ct}};Iy.exports=qC();Iy.exports.createColors=qC;var WC=Iy.exports;(function(n){var e={};Object.defineProperty(n,"__esModule",{value:!0});function t(c,f){for(var d in f)Object.defineProperty(c,d,{enumerable:!0,get:f[d]})}t(n,{dim:function(){return a},default:function(){return u}});const r=i(WC);function i(c){return c&&c.__esModule?c:{default:c}}let s=new Set;function o(c,f,d){typeof process<"u"&&e.JEST_WORKER_ID||d&&s.has(d)||(d&&s.add(d),console.warn(""),f.forEach(g=>console.warn(c,"-",g)))}function a(c){return r.default.dim(c)}const u={info(c,f){o(r.default.bold(r.default.cyan("info")),...Array.isArray(c)?[c]:[f,c])},warn(c,f){o(r.default.bold(r.default.yellow("warn")),...Array.isArray(c)?[c]:[f,c])},risk(c,f){o(r.default.bold(r.default.magenta("risk")),...Array.isArray(c)?[c]:[f,c])}}})(Hd);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});const e=t(Hd);function t(s){return s&&s.__esModule?s:{default:s}}function r({version:s,from:o,to:a}){e.default.warn(`${o}-color-renamed`,[`As of Tailwind CSS ${s}, \`${o}\` has been renamed to \`${a}\`.`,"Update your configuration file to silence this warning."])}const i={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return r({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return r({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return r({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return r({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return r({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(GC);var jC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"defaults",{enumerable:!0,get:function(){return e}});function e(t,...r){for(let o of r){for(let a in o){var i;!(t==null||(i=t.hasOwnProperty)===null||i===void 0)&&i.call(t,a)||(t[a]=o[a])}for(let a of Object.getOwnPropertySymbols(o)){var s;!(t==null||(s=t.hasOwnProperty)===null||s===void 0)&&s.call(t,a)||(t[a]=o[a])}}return t}})(jC);var HC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"toPath",{enumerable:!0,get:function(){return e}});function e(t){if(Array.isArray(t))return t;let r=t.split("[").length-1,i=t.split("]").length-1;if(r!==i)throw new Error(`Path is invalid. Has unbalanced brackets: ${t}`);return t.split(/\.(?![^\[]*\])|[\[\]]/g).filter(Boolean)}})(HC);var VC={},Vd={};(function(n){var e={};Object.defineProperty(n,"__esModule",{value:!0});function t(g,y){for(var m in y)Object.defineProperty(g,m,{enumerable:!0,get:y[m]})}t(n,{flagEnabled:function(){return u},issueFlagNotices:function(){return f},default:function(){return d}});const r=s(WC),i=s(Hd);function s(g){return g&&g.__esModule?g:{default:g}}let o={optimizeUniversalDefaults:!1,generalizedModifiers:!0,disableColorOpacityUtilitiesByDefault:!1,relativeContentPathsByDefault:!1},a={future:["hoverOnlyWhenSupported","respectDefaultRingColorOpacity","disableColorOpacityUtilitiesByDefault","relativeContentPathsByDefault"],experimental:["optimizeUniversalDefaults","generalizedModifiers"]};function u(g,y){if(a.future.includes(y)){var m,v,x;return g.future==="all"||((x=(v=g==null||(m=g.future)===null||m===void 0?void 0:m[y])!==null&&v!==void 0?v:o[y])!==null&&x!==void 0?x:!1)}if(a.experimental.includes(y)){var b,E,T;return g.experimental==="all"||((T=(E=g==null||(b=g.experimental)===null||b===void 0?void 0:b[y])!==null&&E!==void 0?E:o[y])!==null&&T!==void 0?T:!1)}return!1}function c(g){if(g.experimental==="all")return a.experimental;var y;return Object.keys((y=g==null?void 0:g.experimental)!==null&&y!==void 0?y:{}).filter(m=>a.experimental.includes(m)&&g.experimental[m])}function f(g){if(e.JEST_WORKER_ID===void 0&&c(g).length>0){let y=c(g).map(m=>r.default.yellow(m)).join(", ");i.default.warn("experimental-flags-enabled",[`You have enabled experimental features: ${y}`,"Experimental features in Tailwind CSS are not covered by semver, may introduce breaking changes, and can change at any time."])}}const d=a})(Vd);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"normalizeConfig",{enumerable:!0,get:function(){return s}});const e=Vd,t=i(Hd);function r(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,u=new WeakMap;return(r=function(c){return c?u:a})(o)}function i(o,a){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var u=r(a);if(u&&u.has(o))return u.get(o);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in o)if(d!=="default"&&Object.prototype.hasOwnProperty.call(o,d)){var g=f?Object.getOwnPropertyDescriptor(o,d):null;g&&(g.get||g.set)?Object.defineProperty(c,d,g):c[d]=o[d]}return c.default=o,u&&u.set(o,c),c}function s(o){if((()=>{if(o.purge||!o.content||!Array.isArray(o.content)&&!(typeof o.content=="object"&&o.content!==null))return!1;if(Array.isArray(o.content))return o.content.every(c=>typeof c=="string"?!0:!(typeof(c==null?void 0:c.raw)!="string"||c!=null&&c.extension&&typeof(c==null?void 0:c.extension)!="string"));if(typeof o.content=="object"&&o.content!==null){if(Object.keys(o.content).some(c=>!["files","relative","extract","transform"].includes(c)))return!1;if(Array.isArray(o.content.files)){if(!o.content.files.every(c=>typeof c=="string"?!0:!(typeof(c==null?void 0:c.raw)!="string"||c!=null&&c.extension&&typeof(c==null?void 0:c.extension)!="string")))return!1;if(typeof o.content.extract=="object"){for(let c of Object.values(o.content.extract))if(typeof c!="function")return!1}else if(!(o.content.extract===void 0||typeof o.content.extract=="function"))return!1;if(typeof o.content.transform=="object"){for(let c of Object.values(o.content.transform))if(typeof c!="function")return!1}else if(!(o.content.transform===void 0||typeof o.content.transform=="function"))return!1;if(typeof o.content.relative!="boolean"&&typeof o.content.relative<"u")return!1}return!0}return!1})()||t.default.warn("purge-deprecation",["The `purge`/`content` options have changed in Tailwind CSS v3.0.","Update your configuration file to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#configure-content-sources"]),o.safelist=(()=>{var c;let{content:f,purge:d,safelist:g}=o;return Array.isArray(g)?g:Array.isArray(f==null?void 0:f.safelist)?f.safelist:Array.isArray(d==null?void 0:d.safelist)?d.safelist:Array.isArray(d==null||(c=d.options)===null||c===void 0?void 0:c.safelist)?d.options.safelist:[]})(),o.blocklist=(()=>{let{blocklist:c}=o;if(Array.isArray(c)){if(c.every(f=>typeof f=="string"))return c;t.default.warn("blocklist-invalid",["The `blocklist` option must be an array of strings.","https://tailwindcss.com/docs/content-configuration#discarding-classes"])}return[]})(),typeof o.prefix=="function")t.default.warn("prefix-function",["As of Tailwind CSS v3.0, `prefix` cannot be a function.","Update `prefix` in your configuration to be a string to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#prefix-cannot-be-a-function"]),o.prefix="";else{var u;o.prefix=(u=o.prefix)!==null&&u!==void 0?u:""}o.content={relative:(()=>{let{content:c}=o;return c!=null&&c.relative?c.relative:(0,e.flagEnabled)(o,"relativeContentPathsByDefault")})(),files:(()=>{let{content:c,purge:f}=o;return Array.isArray(f)?f:Array.isArray(f==null?void 0:f.content)?f.content:Array.isArray(c)?c:Array.isArray(c==null?void 0:c.content)?c.content:Array.isArray(c==null?void 0:c.files)?c.files:[]})(),extract:(()=>{let c=(()=>{var g,y,m,v,x,b,E,T,C,R;return!((g=o.purge)===null||g===void 0)&&g.extract?o.purge.extract:!((y=o.content)===null||y===void 0)&&y.extract?o.content.extract:!((m=o.purge)===null||m===void 0||(v=m.extract)===null||v===void 0)&&v.DEFAULT?o.purge.extract.DEFAULT:!((x=o.content)===null||x===void 0||(b=x.extract)===null||b===void 0)&&b.DEFAULT?o.content.extract.DEFAULT:!((E=o.purge)===null||E===void 0||(T=E.options)===null||T===void 0)&&T.extractors?o.purge.options.extractors:!((C=o.content)===null||C===void 0||(R=C.options)===null||R===void 0)&&R.extractors?o.content.options.extractors:{}})(),f={},d=(()=>{var g,y,m,v;if(!((g=o.purge)===null||g===void 0||(y=g.options)===null||y===void 0)&&y.defaultExtractor)return o.purge.options.defaultExtractor;if(!((m=o.content)===null||m===void 0||(v=m.options)===null||v===void 0)&&v.defaultExtractor)return o.content.options.defaultExtractor})();if(d!==void 0&&(f.DEFAULT=d),typeof c=="function")f.DEFAULT=c;else if(Array.isArray(c))for(let{extensions:g,extractor:y}of c??[])for(let m of g)f[m]=y;else typeof c=="object"&&c!==null&&Object.assign(f,c);return f})(),transform:(()=>{let c=(()=>{var d,g,y,m,v,x;return!((d=o.purge)===null||d===void 0)&&d.transform?o.purge.transform:!((g=o.content)===null||g===void 0)&&g.transform?o.content.transform:!((y=o.purge)===null||y===void 0||(m=y.transform)===null||m===void 0)&&m.DEFAULT?o.purge.transform.DEFAULT:!((v=o.content)===null||v===void 0||(x=v.transform)===null||x===void 0)&&x.DEFAULT?o.content.transform.DEFAULT:{}})(),f={};return typeof c=="function"?f.DEFAULT=c:typeof c=="object"&&c!==null&&Object.assign(f,c),f})()};for(let c of o.content.files)if(typeof c=="string"&&/{([^,]*?)}/g.test(c)){t.default.warn("invalid-glob-braces",[`The glob pattern ${(0,t.dim)(c)} in your Tailwind CSS configuration is invalid.`,`Update it to ${(0,t.dim)(c.replace(/{([^,]*?)}/g,"$1"))} to silence this warning.`]);break}return o}})(VC);var XC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const r=Object.getPrototypeOf(t);return r===null||Object.getPrototypeOf(r)===null}})(XC);var YC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"cloneDeep",{enumerable:!0,get:function(){return e}});function e(t){return Array.isArray(t)?t.map(r=>e(r)):typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([r,i])=>[r,e(i)])):t}})(YC);var KC={},ZC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){return t.replace(/\\,/g,"\\2c ")}})(ZC);var Ay={},Py={},JC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});const e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})(JC);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(m,v){for(var x in v)Object.defineProperty(m,x,{enumerable:!0,get:v[x]})}e(n,{parseColor:function(){return g},formatColor:function(){return y}});const t=r(JC);function r(m){return m&&m.__esModule?m:{default:m}}let i=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,o=/(?:\d+|\d*\.\d+)%?/,a=/(?:\s*,\s*|\s+)/,u=/\s*[,/]\s*/,c=/var\(--(?:[^ )]*?)(?:,(?:[^ )]*?|var\(--[^ )]*?\)))?\)/,f=new RegExp(`^(rgba?)\\(\\s*(${o.source}|${c.source})(?:${a.source}(${o.source}|${c.source}))?(?:${a.source}(${o.source}|${c.source}))?(?:${u.source}(${o.source}|${c.source}))?\\s*\\)$`),d=new RegExp(`^(hsla?)\\(\\s*((?:${o.source})(?:deg|rad|grad|turn)?|${c.source})(?:${a.source}(${o.source}|${c.source}))?(?:${a.source}(${o.source}|${c.source}))?(?:${u.source}(${o.source}|${c.source}))?\\s*\\)$`);function g(m,{loose:v=!1}={}){var x,b;if(typeof m!="string")return null;if(m=m.trim(),m==="transparent")return{mode:"rgb",color:["0","0","0"],alpha:"0"};if(m in t.default)return{mode:"rgb",color:t.default[m].map(F=>F.toString())};let E=m.replace(s,(F,O,$,L,N)=>["#",O,O,$,$,L,L,N?N+N:""].join("")).match(i);if(E!==null)return{mode:"rgb",color:[parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16)].map(F=>F.toString()),alpha:E[4]?(parseInt(E[4],16)/255).toString():void 0};var T;let C=(T=m.match(f))!==null&&T!==void 0?T:m.match(d);if(C===null)return null;let R=[C[2],C[3],C[4]].filter(Boolean).map(F=>F.toString());return R.length===2&&R[0].startsWith("var(")?{mode:C[1],color:[R[0]],alpha:R[1]}:!v&&R.length!==3||R.length<3&&!R.some(F=>/^var\(.*?\)$/.test(F))?null:{mode:C[1],color:R,alpha:(x=C[5])===null||x===void 0||(b=x.toString)===null||b===void 0?void 0:b.call(x)}}function y({mode:m,color:v,alpha:x}){let b=x!==void 0;return m==="rgba"||m==="hsla"?`${m}(${v.join(", ")}${b?`, ${x}`:""})`:`${m}(${v.join(" ")}${b?` / ${x}`:""})`}})(Py);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(s,o){for(var a in o)Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}e(n,{withAlphaValue:function(){return r},default:function(){return i}});const t=Py;function r(s,o,a){if(typeof s=="function")return s({opacityValue:o});let u=(0,t.parseColor)(s,{loose:!0});return u===null?a:(0,t.formatColor)({...u,alpha:o})}function i({color:s,property:o,variable:a}){let u=[].concat(o);if(typeof s=="function")return{[a]:"1",...Object.fromEntries(u.map(f=>[f,s({opacityVariable:a,opacityValue:`var(${a}, 1)`})]))};const c=(0,t.parseColor)(s);return c===null?Object.fromEntries(u.map(f=>[f,s])):c.alpha!==void 0?Object.fromEntries(u.map(f=>[f,s])):{[a]:"1",...Object.fromEntries(u.map(f=>[f,(0,t.formatColor)({...c,alpha:`var(${a}, 1)`})]))}}})(Ay);var My={},QC={},Xd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"splitAtTopLevelOnly",{enumerable:!0,get:function(){return e}});function e(t,r){let i=[],s=[],o=0,a=!1;for(let u=0;u<t.length;u++){let c=t[u];i.length===0&&c===r[0]&&!a&&(r.length===1||t.slice(u,u+r.length)===r)&&(s.push(t.slice(o,u)),o=u+r.length),a=a?!1:c==="\\",c==="("||c==="["||c==="{"?i.push(c):(c===")"&&i[i.length-1]==="("||c==="]"&&i[i.length-1]==="["||c==="}"&&i[i.length-1]==="{")&&i.pop()}return s.push(t.slice(o)),s}})(Xd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(u,c){for(var f in c)Object.defineProperty(u,f,{enumerable:!0,get:c[f]})}e(n,{parseBoxShadowValue:function(){return o},formatBoxShadowValue:function(){return a}});const t=Xd;let r=new Set(["inset","inherit","initial","revert","unset"]),i=/\ +(?![^(]*\))/g,s=/^-?(\d+|\.\d+)(.*?)$/g;function o(u){return(0,t.splitAtTopLevelOnly)(u,",").map(f=>{let d=f.trim(),g={raw:d},y=d.split(i),m=new Set;for(let v of y)s.lastIndex=0,!m.has("KEYWORD")&&r.has(v)?(g.keyword=v,m.add("KEYWORD")):s.test(v)?m.has("X")?m.has("Y")?m.has("BLUR")?m.has("SPREAD")||(g.spread=v,m.add("SPREAD")):(g.blur=v,m.add("BLUR")):(g.y=v,m.add("Y")):(g.x=v,m.add("X")):g.color?(g.unknown||(g.unknown=[]),g.unknown.push(v)):g.color=v;return g.valid=g.x!==void 0&&g.y!==void 0,g})}function a(u){return u.map(c=>c.valid?[c.keyword,c.x,c.y,c.blur,c.spread,c.color].filter(Boolean).join(" "):c.raw).join(", ")}})(QC);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(q,V){for(var ne in V)Object.defineProperty(q,ne,{enumerable:!0,get:V[ne]})}e(n,{normalize:function(){return u},normalizeAttributeSelectors:function(){return c},url:function(){return d},number:function(){return g},percentage:function(){return y},length:function(){return x},lineWidth:function(){return E},shadow:function(){return T},color:function(){return C},image:function(){return R},gradient:function(){return O},position:function(){return L},familyName:function(){return N},genericName:function(){return z},absoluteSize:function(){return Z},relativeSize:function(){return W}});const t=Py,r=QC,i=Xd;let s=["min","max","clamp","calc"];function o(q){return s.some(V=>new RegExp(`^${V}\\(.*\\)`).test(q))}const a=new Set(["scroll-timeline-name","timeline-scope","view-timeline-name","font-palette","anchor-name","anchor-scope","position-anchor","position-try-options","scroll-timeline","animation-timeline","view-timeline","position-try"]);function u(q,V=null,ne=!0){let re=V&&a.has(V.property);return q.startsWith("--")&&!re?`var(${q})`:q.includes("url(")?q.split(/(url\(.*?\))/g).filter(Boolean).map(me=>/^url\(.*?\)$/.test(me)?me:u(me,V,!1)).join(""):(q=q.replace(/([^\\])_+/g,(me,ce)=>ce+" ".repeat(me.length-1)).replace(/^_/g," ").replace(/\\_/g,"_"),ne&&(q=q.trim()),q=f(q),q)}function c(q){return q.includes("=")&&(q=q.replace(/(=.*)/g,(V,ne)=>{if(ne[1]==="'"||ne[1]==='"')return ne;if(ne.length>2){let re=ne[ne.length-1];if(ne[ne.length-2]===" "&&(re==="i"||re==="I"||re==="s"||re==="S"))return`="${ne.slice(1,-2)}" ${ne[ne.length-1]}`}return`="${ne.slice(1)}"`})),q}function f(q){let V=["theme"],ne=["min-content","max-content","fit-content","safe-area-inset-top","safe-area-inset-right","safe-area-inset-bottom","safe-area-inset-left","titlebar-area-x","titlebar-area-y","titlebar-area-width","titlebar-area-height","keyboard-inset-top","keyboard-inset-right","keyboard-inset-bottom","keyboard-inset-left","keyboard-inset-width","keyboard-inset-height","radial-gradient","linear-gradient","conic-gradient","repeating-radial-gradient","repeating-linear-gradient","repeating-conic-gradient","anchor-size"];return q.replace(/(calc|min|max|clamp)\(.+\)/g,re=>{let me="";function ce(){let Fe=me.trimEnd();return Fe[Fe.length-1]}for(let Fe=0;Fe<re.length;Fe++){let le=function(ze){return ze.split("").every((Ie,Te)=>re[Fe+Te]===Ie)},Oe=function(ze){let Ie=1/0;for(let pt of ze){let Gt=re.indexOf(pt,Fe);Gt!==-1&&Gt<Ie&&(Ie=Gt)}let Te=re.slice(Fe,Ie);return Fe+=Te.length-1,Te},dt=re[Fe];if(le("var"))me+=Oe([")",","]);else if(ne.some(ze=>le(ze))){let ze=ne.find(Ie=>le(Ie));me+=ze,Fe+=ze.length-1}else V.some(ze=>le(ze))?me+=Oe([")"]):le("[")?me+=Oe(["]"]):["+","-","*","/"].includes(dt)&&!["(","+","-","*","/",","].includes(ce())?me+=` ${dt} `:me+=dt}return me.replace(/\s+/g," ")})}function d(q){return q.startsWith("url(")}function g(q){return!isNaN(Number(q))||o(q)}function y(q){return q.endsWith("%")&&g(q.slice(0,-1))||o(q)}let v=`(?:${["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","lh","rlh","vw","vh","vmin","vmax","vb","vi","svw","svh","lvw","lvh","dvw","dvh","cqw","cqh","cqi","cqb","cqmin","cqmax"].join("|")})`;function x(q){return q==="0"||new RegExp(`^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?${v}$`).test(q)||o(q)}let b=new Set(["thin","medium","thick"]);function E(q){return b.has(q)}function T(q){let V=(0,r.parseBoxShadowValue)(u(q));for(let ne of V)if(!ne.valid)return!1;return!0}function C(q){let V=0;return(0,i.splitAtTopLevelOnly)(q,"_").every(re=>(re=u(re),re.startsWith("var(")?!0:(0,t.parseColor)(re,{loose:!0})!==null?(V++,!0):!1))?V>0:!1}function R(q){let V=0;return(0,i.splitAtTopLevelOnly)(q,",").every(re=>(re=u(re),re.startsWith("var(")?!0:d(re)||O(re)||["element(","image(","cross-fade(","image-set("].some(me=>re.startsWith(me))?(V++,!0):!1))?V>0:!1}let F=new Set(["conic-gradient","linear-gradient","radial-gradient","repeating-conic-gradient","repeating-linear-gradient","repeating-radial-gradient"]);function O(q){q=u(q);for(let V of F)if(q.startsWith(`${V}(`))return!0;return!1}let $=new Set(["center","top","right","bottom","left"]);function L(q){let V=0;return(0,i.splitAtTopLevelOnly)(q,"_").every(re=>(re=u(re),re.startsWith("var(")?!0:$.has(re)||x(re)||y(re)?(V++,!0):!1))?V>0:!1}function N(q){let V=0;return(0,i.splitAtTopLevelOnly)(q,",").every(re=>(re=u(re),re.startsWith("var(")?!0:re.includes(" ")&&!/(['"])([^"']+)\1/g.test(re)||/^\d/g.test(re)?!1:(V++,!0)))?V>0:!1}let B=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]);function z(q){return B.has(q)}let H=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"]);function Z(q){return H.has(q)}let G=new Set(["larger","smaller"]);function W(q){return G.has(q)}})(My);var eS={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"backgroundSize",{enumerable:!0,get:function(){return r}});const e=My,t=Xd;function r(i){let s=["cover","contain"];return(0,t.splitAtTopLevelOnly)(i,",").every(o=>{let a=(0,t.splitAtTopLevelOnly)(o,"_").filter(Boolean);return a.length===1&&s.includes(a[0])?!0:a.length!==1&&a.length!==2?!1:a.every(u=>(0,e.length)(u)||(0,e.percentage)(u)||u==="auto")})}})(eS);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(L,N){for(var B in N)Object.defineProperty(L,B,{enumerable:!0,get:N[B]})}e(n,{updateAllClasses:function(){return c},asValue:function(){return g},parseColorFormat:function(){return v},asColor:function(){return b},asLookupValue:function(){return E},typeMap:function(){return C},coerceValue:function(){return O},getMatchingTypes:function(){return $}});const t=u(ZC),r=Ay,i=My,s=u(Ry),o=eS,a=Vd;function u(L){return L&&L.__esModule?L:{default:L}}function c(L,N){L.walkClasses(B=>{B.value=N(B.value),B.raws&&B.raws.value&&(B.raws.value=(0,t.default)(B.raws.value))})}function f(L,N){if(!y(L))return;let B=L.slice(1,-1);if(N(B))return(0,i.normalize)(B)}function d(L,N={},B){let z=N[L];if(z!==void 0)return(0,s.default)(z);if(y(L)){let H=f(L,B);return H===void 0?void 0:(0,s.default)(H)}}function g(L,N={},{validate:B=()=>!0}={}){var z;let H=(z=N.values)===null||z===void 0?void 0:z[L];return H!==void 0?H:N.supportsNegativeValues&&L.startsWith("-")?d(L.slice(1),N.values,B):f(L,B)}function y(L){return L.startsWith("[")&&L.endsWith("]")}function m(L){let N=L.lastIndexOf("/"),B=L.lastIndexOf("[",N),z=L.indexOf("]",N);return L[N-1]==="]"||L[N+1]==="["||B!==-1&&z!==-1&&B<N&&N<z&&(N=L.lastIndexOf("/",B)),N===-1||N===L.length-1?[L,void 0]:y(L)&&!L.includes("]/[")?[L,void 0]:[L.slice(0,N),L.slice(N+1)]}function v(L){if(typeof L=="string"&&L.includes("<alpha-value>")){let N=L;return({opacityValue:B=1})=>N.replace(/<alpha-value>/g,B)}return L}function x(L){return(0,i.normalize)(L.slice(1,-1))}function b(L,N={},{tailwindConfig:B={}}={}){var z;if(((z=N.values)===null||z===void 0?void 0:z[L])!==void 0){var H;return v((H=N.values)===null||H===void 0?void 0:H[L])}let[Z,G]=m(L);if(G!==void 0){var W,q,V,ne;let re=(ne=(W=N.values)===null||W===void 0?void 0:W[Z])!==null&&ne!==void 0?ne:y(Z)?Z.slice(1,-1):void 0;return re===void 0?void 0:(re=v(re),y(G)?(0,r.withAlphaValue)(re,x(G)):((q=B.theme)===null||q===void 0||(V=q.opacity)===null||V===void 0?void 0:V[G])===void 0?void 0:(0,r.withAlphaValue)(re,B.theme.opacity[G]))}return g(L,N,{validate:i.color})}function E(L,N={}){var B;return(B=N.values)===null||B===void 0?void 0:B[L]}function T(L){return(N,B)=>g(N,B,{validate:L})}let C={any:g,color:b,url:T(i.url),image:T(i.image),length:T(i.length),percentage:T(i.percentage),position:T(i.position),lookup:E,"generic-name":T(i.genericName),"family-name":T(i.familyName),number:T(i.number),"line-width":T(i.lineWidth),"absolute-size":T(i.absoluteSize),"relative-size":T(i.relativeSize),shadow:T(i.shadow),size:T(o.backgroundSize)},R=Object.keys(C);function F(L,N){let B=L.indexOf(N);return B===-1?[void 0,L]:[L.slice(0,B),L.slice(B+1)]}function O(L,N,B,z){if(B.values&&N in B.values)for(let{type:Z}of L??[]){let G=C[Z](N,B,{tailwindConfig:z});if(G!==void 0)return[G,Z,null]}if(y(N)){let Z=N.slice(1,-1),[G,W]=F(Z,":");if(!/^[\w-_]+$/g.test(G))W=Z;else if(G!==void 0&&!R.includes(G))return[];if(W.length>0&&R.includes(G))return[g(`[${W}]`,B),G,null]}let H=$(L,N,B,z);for(let Z of H)return Z;return[]}function*$(L,N,B,z){let H=(0,a.flagEnabled)(z,"generalizedModifiers"),[Z,G]=m(N);if(H&&B.modifiers!=null&&(B.modifiers==="any"||typeof B.modifiers=="object"&&(G&&y(G)||G in B.modifiers))||(Z=N,G=void 0),G!==void 0&&Z===""&&(Z="DEFAULT"),G!==void 0&&typeof B.modifiers=="object"){var q,V;let ne=(V=(q=B.modifiers)===null||q===void 0?void 0:q[G])!==null&&V!==void 0?V:null;ne!==null?G=ne:y(G)&&(G=x(G))}for(let{type:ne}of L??[]){let re=C[ne](Z,B,{tailwindConfig:z});re!==void 0&&(yield[re,ne,G??null])}}})(KC);var tS={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){return typeof t=="function"?t({}):t}})(tS);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return B}});const e=y(Ry),t=y(BC),r=y(UC),i=y(GC),s=jC,o=HC,a=VC,u=y(XC),c=YC,f=KC,d=Ay,g=y(tS);function y(z){return z&&z.__esModule?z:{default:z}}function m(z){return typeof z=="function"}function v(z,...H){let Z=H.pop();for(let G of H)for(let W in G){let q=Z(z[W],G[W]);q===void 0?(0,u.default)(z[W])&&(0,u.default)(G[W])?z[W]=v({},z[W],G[W],Z):z[W]=G[W]:z[W]=q}return z}const x={colors:i.default,negative(z){return Object.keys(z).filter(H=>z[H]!=="0").reduce((H,Z)=>{let G=(0,e.default)(z[Z]);return G!==void 0&&(H[`-${Z}`]=G),H},{})},breakpoints(z){return Object.keys(z).filter(H=>typeof z[H]=="string").reduce((H,Z)=>({...H,[`screen-${Z}`]:z[Z]}),{})}};function b(z,...H){return m(z)?z(...H):z}function E(z){return z.reduce((H,{extend:Z})=>v(H,Z,(G,W)=>G===void 0?[W]:Array.isArray(G)?[W,...G]:[W,G]),{})}function T(z){return{...z.reduce((H,Z)=>(0,s.defaults)(H,Z),{}),extend:E(z)}}function C(z,H){if(Array.isArray(z)&&(0,u.default)(z[0]))return z.concat(H);if(Array.isArray(H)&&(0,u.default)(H[0])&&(0,u.default)(z))return[z,...H];if(Array.isArray(H))return H}function R({extend:z,...H}){return v(H,z,(Z,G)=>!m(Z)&&!G.some(m)?v({},Z,...G,C):(W,q)=>v({},...[Z,...G].map(V=>b(V,W,q)),C))}function*F(z){let H=(0,o.toPath)(z);if(H.length===0||(yield H,Array.isArray(z)))return;let Z=/^(.*?)\s*\/\s*([^/]+)$/,G=z.match(Z);if(G!==null){let[,W,q]=G,V=(0,o.toPath)(W);V.alpha=q,yield V}}function O(z){const H=(Z,G)=>{for(const W of F(Z)){let q=0,V=z;for(;V!=null&&q<W.length;)V=V[W[q++]],V=m(V)&&(W.alpha===void 0||q<=W.length-1)?V(H,x):V;if(V!==void 0){if(W.alpha!==void 0){let ne=(0,f.parseColorFormat)(V);return(0,d.withAlphaValue)(ne,W.alpha,(0,g.default)(ne))}return(0,u.default)(V)?(0,c.cloneDeep)(V):V}}return G};return Object.assign(H,{theme:H,...x}),Object.keys(z).reduce((Z,G)=>(Z[G]=m(z[G])?z[G](H,x):z[G],Z),{})}function $(z){let H=[];return z.forEach(Z=>{H=[...H,Z];var G;const W=(G=Z==null?void 0:Z.plugins)!==null&&G!==void 0?G:[];W.length!==0&&W.forEach(q=>{q.__isOptionsFunction&&(q=q());var V;H=[...H,...$([(V=q==null?void 0:q.config)!==null&&V!==void 0?V:{}])]})}),H}function L(z){return[...z].reduceRight((Z,G)=>m(G)?G({corePlugins:Z}):(0,r.default)(G,Z),t.default)}function N(z){return[...z].reduceRight((Z,G)=>[...Z,...G],[])}function B(z){let H=[...$(z),{prefix:"",important:!1,separator:":"}];var Z,G;return(0,a.normalizeConfig)((0,s.defaults)({theme:O(R(T(H.map(W=>(Z=W==null?void 0:W.theme)!==null&&Z!==void 0?Z:{})))),corePlugins:L(H.map(W=>W.corePlugins)),plugins:N(z.map(W=>(G=W==null?void 0:W.plugins)!==null&&G!==void 0?G:[]))},...H))}})($C);var nS={},vN={content:[],presets:[],darkMode:"media",theme:{accentColor:({theme:n})=>({...n("colors"),auto:"auto"}),animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aria:{busy:'busy="true"',checked:'checked="true"',disabled:'disabled="true"',expanded:'expanded="true"',hidden:'hidden="true"',pressed:'pressed="true"',readonly:'readonly="true"',required:'required="true"',selected:'selected="true"'},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:({theme:n})=>n("blur"),backdropBrightness:({theme:n})=>n("brightness"),backdropContrast:({theme:n})=>n("contrast"),backdropGrayscale:({theme:n})=>n("grayscale"),backdropHueRotate:({theme:n})=>n("hueRotate"),backdropInvert:({theme:n})=>n("invert"),backdropOpacity:({theme:n})=>n("opacity"),backdropSaturate:({theme:n})=>n("saturate"),backdropSepia:({theme:n})=>n("sepia"),backgroundColor:({theme:n})=>n("colors"),backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:({theme:n})=>n("opacity"),backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},borderColor:({theme:n})=>({...n("colors"),DEFAULT:n("colors.gray.200","currentColor")}),borderOpacity:({theme:n})=>n("opacity"),borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderSpacing:({theme:n})=>({...n("spacing")}),borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:({theme:n})=>n("colors"),brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},caretColor:({theme:n})=>n("colors"),colors:({colors:n})=>({inherit:n.inherit,current:n.current,transparent:n.transparent,black:n.black,white:n.white,slate:n.slate,gray:n.gray,zinc:n.zinc,neutral:n.neutral,stone:n.stone,red:n.red,orange:n.orange,amber:n.amber,yellow:n.yellow,lime:n.lime,green:n.green,emerald:n.emerald,teal:n.teal,cyan:n.cyan,sky:n.sky,blue:n.blue,indigo:n.indigo,violet:n.violet,purple:n.purple,fuchsia:n.fuchsia,pink:n.pink,rose:n.rose}),columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},container:{},content:{none:"none"},contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:({theme:n})=>n("borderColor"),divideOpacity:({theme:n})=>n("borderOpacity"),divideWidth:({theme:n})=>n("borderWidth"),dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:({theme:n})=>({none:"none",...n("colors")}),flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"}),flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:({theme:n})=>n("spacing"),gradientColorStops:({theme:n})=>n("colors"),gradientColorStopPositions:{"0%":"0%","5%":"5%","10%":"10%","15%":"15%","20%":"20%","25%":"25%","30%":"30%","35%":"35%","40%":"40%","45%":"45%","50%":"50%","55%":"55%","60%":"60%","65%":"65%","70%":"70%","75%":"75%","80%":"80%","85%":"85%","90%":"90%","95%":"95%","100%":"100%"},grayscale:{0:"0",DEFAULT:"100%"},gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridTemplateColumns:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},height:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},inset:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),invert:{0:"0",DEFAULT:"100%"},keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},listStyleImage:{none:"none"},margin:({theme:n})=>({auto:"auto",...n("spacing")}),lineClamp:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"},maxHeight:({theme:n})=>({...n("spacing"),none:"none",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),maxWidth:({theme:n,breakpoints:e})=>({...n("spacing"),none:"none",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch",...e(n("screens"))}),minHeight:({theme:n})=>({...n("spacing"),full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),minWidth:({theme:n})=>({...n("spacing"),full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",15:"0.15",20:"0.2",25:"0.25",30:"0.3",35:"0.35",40:"0.4",45:"0.45",50:"0.5",55:"0.55",60:"0.6",65:"0.65",70:"0.7",75:"0.75",80:"0.8",85:"0.85",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},outlineColor:({theme:n})=>n("colors"),outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},padding:({theme:n})=>n("spacing"),placeholderColor:({theme:n})=>n("colors"),placeholderOpacity:({theme:n})=>n("opacity"),ringColor:({theme:n})=>({DEFAULT:n("colors.blue.500","#3b82f6"),...n("colors")}),ringOffsetColor:({theme:n})=>n("colors"),ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:({theme:n})=>({DEFAULT:"0.5",...n("opacity")}),ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},scrollMargin:({theme:n})=>({...n("spacing")}),scrollPadding:({theme:n})=>n("spacing"),sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:({theme:n})=>({...n("spacing")}),spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},stroke:({theme:n})=>({none:"none",...n("colors")}),strokeWidth:{0:"0",1:"1",2:"2"},supports:{},data:{},textColor:({theme:n})=>n("colors"),textDecorationColor:({theme:n})=>n("colors"),textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:({theme:n})=>({...n("spacing")}),textOpacity:({theme:n})=>n("opacity"),textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:({theme:n})=>({...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),size:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),width:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",svw:"100svw",lvw:"100lvw",dvw:"100dvw",min:"min-content",max:"max-content",fit:"fit-content"}),willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},plugins:[]};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});const e=r(vN),t=Vd;function r(s){return s&&s.__esModule?s:{default:s}}function i(s){var o;const a=((o=s==null?void 0:s.presets)!==null&&o!==void 0?o:[e.default]).slice().reverse().flatMap(f=>i(f instanceof Function?f():f)),u={respectDefaultRingColorOpacity:{theme:{ringColor:({theme:f})=>({DEFAULT:"#3b82f67f",...f("colors")})}},disableColorOpacityUtilitiesByDefault:{corePlugins:{backgroundOpacity:!1,borderOpacity:!1,divideOpacity:!1,placeholderOpacity:!1,ringOpacity:!1,textOpacity:!1}}},c=Object.keys(u).filter(f=>(0,t.flagEnabled)(s,f)).map(f=>u[f]);return[s,...c,...a]}})(nS);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});const e=r($C),t=r(nS);function r(s){return s&&s.__esModule?s:{default:s}}function i(...s){let[,...o]=(0,t.default)(s[0]);return(0,e.default)([...s,...o])}})(zC);let lm=zC;var xN=(lm.__esModule?lm:{default:lm}).default;const Oy=zd(xN),Ly={content:["./src/stories/**/*.{tsx,ts,js,jsx}","./src/components/**/*.{tsx,ts,js,jsx}","./src/layouts/**/*.{tsx,ts}"],darkMode:"class",theme:{fontFamily:{"teli-brand":['"Space Grotesk"',"system-ui","sans-serif"],"teli-body":["Figtree","Avenir","Corbel","source-sans-pro","sans-serif"]},colors:{transparent:"transparent","admin-app-color":"#20BCFA","document-app-color":"#FA6AAA","geo-app-color":"#9DDD31","graph-app-color":"#FFA22F","app-color":{DEFAULT:"rgba(var(--teli-app-color), <alpha-value>)",50:"rgba(var(--teli-app-color-50), <alpha-value>)",100:"rgba(var(--teli-app-color-100), <alpha-value>)",200:"rgba(var(--teli-app-color-200), <alpha-value>)",300:"rgba(var(--teli-app-color-300), <alpha-value>)",400:"rgba(var(--teli-app-color-400), <alpha-value>)",500:"rgba(var(--teli-app-color-500), <alpha-value>)",600:"rgba(var(--teli-app-color-600), <alpha-value>)",700:"rgba(var(--teli-app-color-700), <alpha-value>)",800:"rgba(var(--teli-app-color-800), <alpha-value>)",900:"rgba(var(--teli-app-color-900), <alpha-value>)",950:"rgba(var(--teli-app-color-950), <alpha-value>)"},"teli-whitesmoke":{DEFAULT:"#F5F5F5",50:"#F5F5F5",100:"#E9E9E9",200:"#DDDDDD",300:"#D0D0D0",400:"#C4C4C4",500:"#ACACAC",600:"#949494",700:"#7C7C7C",800:"#636363",900:"#4B4B4B",950:"#333333"},"teli-black":{DEFAULT:"#1D1D1D",50:"#A3A3A3",100:"#909090",200:"#7D7D7D",300:"#6A6A6A",400:"#575757",500:"#444444",600:"#303030",700:"#272727",800:"#1D1D1D",900:"#141414",950:"#0A0A0A"},"teli-red":{DEFAULT:"#DA1212",50:"#FBE7E7",100:"#F5BDBD",200:"#EE9292",300:"#E76767",400:"#E13D3D",500:"#DA1212",600:"#B30F0F",700:"#8C0C12",800:"#64080E",900:"#43040C",950:"#1B020A"},whiteSmoke:{DEFAULT:"#F5F5F5",50:"#E9E9E9",100:"#DDDDDD",200:"#D0D0D0",300:"#C4C4C4",400:"#ACACAC",500:"#949494",600:"#7C7C7C",700:"#636363",800:"#4B4B4B",900:"#333333"},black:{DEFAULT:"#0A0A0A",50:"#141414",100:"#1D1D1D",200:"#272727",300:"#303030",400:"#444444",500:"#575757",600:"#6A6A6A",700:"#7D7D7D",800:"#909090",900:"#A3A3A3"},"teli-green":{DEFAULT:"#59FAA3",50:"#EEFFF6",100:"#D1FEE5",200:"#B3FDD5",300:"#95FCC4",400:"#77FBB4",500:"#59FAA3",600:"#12DB8A",700:"#08B86E",800:"#06794B",900:"#144C31",950:"#051E11"}},extend:{borderWidth:{"1.5":"1.5px"},height:{"4.5":"18px"}}}},wN=Oy(Ly);var JE;const Qf=(JE=wN.theme)==null?void 0:JE.colors;getComputedStyle(document.body);Qf.whiteSmoke[50],Qf.whiteSmoke[200];Qf.black[300],Qf.black[100];const bN=Oy(Ly);var QE;const EN=(QE=bN.theme)==null?void 0:QE.fontFamily;EN["teli-body"].join(",");lC(["dark","light"]);const CN=Oy(Ly);var eC;(eC=CN.theme)==null||eC.colors;new U5({defaultOptions:{queries:{staleTime:60*5e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:!1}}});const d0=ie.forwardRef(({variant:n,linePosition:e="left",color:t,startIcon:r,endIcon:i,size:s="medium",disabled:o=!1,className:a,children:u,...c},f)=>{const d=n==="primary",g=n==="secondary",y=e==="left",m=e==="right",v=e==="center";return n==="link"?rt("div",{className:Qh("teli-button__link",{"teli-button__link-disabled":o}),children:[rt(ac,{ref:f,className:Qh("teli-button",{"teli-button__link--left":y,"teli-button__link--right":m},a),disabled:o,...c,children:[r,u,i]}),Q("div",{className:Qh("teli-button__link-line",{"teli-button__link--line-right":m,"teli-button__link--line-center":v})})]}):rt(ac,{ref:f,className:Qh("teli-button",{"teli-button--small":s==="small","teli-button--medium":s==="medium","teli-button--large":s==="large","teli-button__primary":d,"teli-button__secondary":g,"teli-button__tertiary":n==="tertiary","teli-button__primary--danger":d&&t==="danger"},a),disabled:o,...c,children:[r,u,i]})});d0.__docgenInfo={description:"",methods:[],displayName:"TeliButtonBase",props:{variant:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "tertiary" | "link" | "basic"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"tertiary"'},{name:"literal",value:'"link"'},{name:"literal",value:'"basic"'}]},description:`The variant to use.**Note**: Use primary instead of contained, secondary
instead of outline and tertiary instead of text. These variants will be
removed in the next version
@default primary`},linePosition:{required:!1,tsType:{name:"union",raw:'"left" | "right" | "center"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"center"'}]},description:"",defaultValue:{value:'"left"',computed:!1}},color:{required:!1,tsType:{name:"literal",value:'"danger"'},description:"The color of the component."},href:{required:!1,tsType:{name:"string"},description:`The URL to link to when the button is clicked. If defined, an a element
will be used as the root node.`},startIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed before the children."},endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the children."},size:{required:!1,tsType:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}]},description:"The size of the component.",defaultValue:{value:'"medium"',computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["MUIButtonBaseProps"]};const SN=ie.forwardRef(({tooltip:n,tooltipPlacement:e="bottom",...t},r)=>n?Q(Ty,{arrow:!0,title:n,placement:e,PopperProps:{disablePortal:!0,modifiers:[{name:"offset",options:{offset:[0,-4]}}]},children:Q(d0,{ref:r,...t})}):Q(d0,{ref:r,...t}));SN.__docgenInfo={description:"",methods:[],displayName:"TeliButton",props:{variant:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "tertiary" | "link" | "basic"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"tertiary"'},{name:"literal",value:'"link"'},{name:"literal",value:'"basic"'}]},description:`The variant to use.**Note**: Use primary instead of contained, secondary
instead of outline and tertiary instead of text. These variants will be
removed in the next version
@default primary`},linePosition:{required:!1,tsType:{name:"union",raw:'"left" | "right" | "center"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"center"'}]},description:""},color:{required:!1,tsType:{name:"literal",value:'"danger"'},description:"The color of the component."},href:{required:!1,tsType:{name:"string"},description:`The URL to link to when the button is clicked. If defined, an a element
will be used as the root node.`},startIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed before the children."},endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the children."},size:{required:!1,tsType:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}]},description:"The size of the component."},tooltip:{required:!1,tsType:{name:"string"},description:"Tooltip contents"},tooltipPlacement:{required:!1,tsType:{name:"union",raw:`| "bottom-end"
| "bottom-start"
| "bottom"
| "left-end"
| "left-start"
| "left"
| "right-end"
| "right-start"
| "right"
| "top-end"
| "top-start"
| "top"`,elements:[{name:"literal",value:'"bottom-end"'},{name:"literal",value:'"bottom-start"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left-end"'},{name:"literal",value:'"left-start"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right-end"'},{name:"literal",value:'"right-start"'},{name:"literal",value:'"right"'},{name:"literal",value:'"top-end"'},{name:"literal",value:'"top-start"'},{name:"literal",value:'"top"'}]},description:`Tooltip placement.
@default bottom`,defaultValue:{value:'"bottom"',computed:!1}}},composes:["MUIButtonBaseProps"]};const TN=Ls({uri:nr(),primaryName:nr(),types:Xf(nr()),literals:Ls({"telicent:primaryName":Xf(nr())}),isState:Dr(),inLocation:nr(),metadata:Ls({documentFormat:nr(),generatedBy:nr(),generatorVersion:nr()})}),RN=Ls({id:nr().url(),score:oc(),document:TN});Ls({maybeMore:Dr(),limit:oc(),offset:oc(),query:nr(),type:Yf("phrase"),results:Xf(RN)});var IN={value:()=>{}};function rS(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new zf(t)}function zf(n){this._=n}function AN(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}zf.prototype=rS.prototype={constructor:zf,on:function(n,e){var t=this._,r=AN(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=PN(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=rw(t[i],n.name,e);else if(e==null)for(i in t)t[i]=rw(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new zf(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function PN(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function rw(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=IN,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var p0="http://www.w3.org/1999/xhtml";const iw={svg:"http://www.w3.org/2000/svg",xhtml:p0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yd(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),iw.hasOwnProperty(e)?{space:iw[e],local:n}:n}function MN(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===p0&&e.documentElement.namespaceURI===p0?e.createElement(n):e.createElementNS(t,n)}}function ON(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function iS(n){var e=Yd(n);return(e.local?ON:MN)(e)}function LN(){}function ky(n){return n==null?LN:function(){return this.querySelector(n)}}function kN(n){typeof n!="function"&&(n=ky(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),u,c,f=0;f<o;++f)(u=s[f])&&(c=n.call(u,u.__data__,f,s))&&("__data__"in u&&(c.__data__=u.__data__),a[f]=c);return new Mi(r,this._parents)}function FN(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function DN(){return[]}function sS(n){return n==null?DN:function(){return this.querySelectorAll(n)}}function NN(n){return function(){return FN(n.apply(this,arguments))}}function zN(n){typeof n=="function"?n=NN(n):n=sS(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],a=o.length,u,c=0;c<a;++c)(u=o[c])&&(r.push(n.call(u,u.__data__,c,o)),i.push(u));return new Mi(r,i)}function oS(n){return function(){return this.matches(n)}}function aS(n){return function(e){return e.matches(n)}}var $N=Array.prototype.find;function BN(n){return function(){return $N.call(this.children,n)}}function UN(){return this.firstElementChild}function GN(n){return this.select(n==null?UN:BN(typeof n=="function"?n:aS(n)))}var qN=Array.prototype.filter;function WN(){return Array.from(this.children)}function jN(n){return function(){return qN.call(this.children,n)}}function HN(n){return this.selectAll(n==null?WN:jN(typeof n=="function"?n:aS(n)))}function VN(n){typeof n!="function"&&(n=oS(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,c=0;c<o;++c)(u=s[c])&&n.call(u,u.__data__,c,s)&&a.push(u);return new Mi(r,this._parents)}function lS(n){return new Array(n.length)}function XN(){return new Mi(this._enter||this._groups.map(lS),this._parents)}function ed(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}ed.prototype={constructor:ed,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function YN(n){return function(){return n}}function KN(n,e,t,r,i,s){for(var o=0,a,u=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new ed(n,s[o]);for(;o<u;++o)(a=e[o])&&(i[o]=a)}function ZN(n,e,t,r,i,s,o){var a,u,c=new Map,f=e.length,d=s.length,g=new Array(f),y;for(a=0;a<f;++a)(u=e[a])&&(g[a]=y=o.call(u,u.__data__,a,e)+"",c.has(y)?i[a]=u:c.set(y,u));for(a=0;a<d;++a)y=o.call(n,s[a],a,s)+"",(u=c.get(y))?(r[a]=u,u.__data__=s[a],c.delete(y)):t[a]=new ed(n,s[a]);for(a=0;a<f;++a)(u=e[a])&&c.get(g[a])===u&&(i[a]=u)}function JN(n){return n.__data__}function QN(n,e){if(!arguments.length)return Array.from(this,JN);var t=e?ZN:KN,r=this._parents,i=this._groups;typeof n!="function"&&(n=YN(n));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),c=0;c<s;++c){var f=r[c],d=i[c],g=d.length,y=ez(n.call(f,f&&f.__data__,c,r)),m=y.length,v=a[c]=new Array(m),x=o[c]=new Array(m),b=u[c]=new Array(g);t(f,d,v,x,b,y,e);for(var E=0,T=0,C,R;E<m;++E)if(C=v[E]){for(E>=T&&(T=E+1);!(R=x[T])&&++T<m;);C._next=R||null}}return o=new Mi(o,r),o._enter=a,o._exit=u,o}function ez(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function tz(){return new Mi(this._exit||this._groups.map(lS),this._parents)}function nz(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function rz(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var c=t[u],f=r[u],d=c.length,g=a[u]=new Array(d),y,m=0;m<d;++m)(y=c[m]||f[m])&&(g[m]=y);for(;u<i;++u)a[u]=t[u];return new Mi(a,this._parents)}function iz(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function sz(n){n||(n=oz);function e(d,g){return d&&g?n(d.__data__,g.__data__):!d-!g}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,u=i[s]=new Array(a),c,f=0;f<a;++f)(c=o[f])&&(u[f]=c);u.sort(e)}return new Mi(i,this._parents).order()}function oz(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function az(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function lz(){return Array.from(this)}function uz(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function cz(){let n=0;for(const e of this)++n;return n}function hz(){return!this.node()}function fz(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,a;s<o;++s)(a=i[s])&&n.call(a,a.__data__,s,i);return this}function dz(n){return function(){this.removeAttribute(n)}}function pz(n){return function(){this.removeAttributeNS(n.space,n.local)}}function gz(n,e){return function(){this.setAttribute(n,e)}}function mz(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function yz(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function _z(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function vz(n,e){var t=Yd(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?pz:dz:typeof e=="function"?t.local?_z:yz:t.local?mz:gz)(t,e))}function uS(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function xz(n){return function(){this.style.removeProperty(n)}}function wz(n,e,t){return function(){this.style.setProperty(n,e,t)}}function bz(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Ez(n,e,t){return arguments.length>1?this.each((e==null?xz:typeof e=="function"?bz:wz)(n,e,t??"")):jl(this.node(),n)}function jl(n,e){return n.style.getPropertyValue(e)||uS(n).getComputedStyle(n,null).getPropertyValue(e)}function Cz(n){return function(){delete this[n]}}function Sz(n,e){return function(){this[n]=e}}function Tz(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Rz(n,e){return arguments.length>1?this.each((e==null?Cz:typeof e=="function"?Tz:Sz)(n,e)):this.node()[n]}function cS(n){return n.trim().split(/^|\s+/)}function Fy(n){return n.classList||new hS(n)}function hS(n){this._node=n,this._names=cS(n.getAttribute("class")||"")}hS.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function fS(n,e){for(var t=Fy(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function dS(n,e){for(var t=Fy(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Iz(n){return function(){fS(this,n)}}function Az(n){return function(){dS(this,n)}}function Pz(n,e){return function(){(e.apply(this,arguments)?fS:dS)(this,n)}}function Mz(n,e){var t=cS(n+"");if(arguments.length<2){for(var r=Fy(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?Pz:e?Iz:Az)(t,e))}function Oz(){this.textContent=""}function Lz(n){return function(){this.textContent=n}}function kz(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Fz(n){return arguments.length?this.each(n==null?Oz:(typeof n=="function"?kz:Lz)(n)):this.node().textContent}function Dz(){this.innerHTML=""}function Nz(n){return function(){this.innerHTML=n}}function zz(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function $z(n){return arguments.length?this.each(n==null?Dz:(typeof n=="function"?zz:Nz)(n)):this.node().innerHTML}function Bz(){this.nextSibling&&this.parentNode.appendChild(this)}function Uz(){return this.each(Bz)}function Gz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qz(){return this.each(Gz)}function Wz(n){var e=typeof n=="function"?n:iS(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function jz(){return null}function Hz(n,e){var t=typeof n=="function"?n:iS(n),r=e==null?jz:typeof e=="function"?e:ky(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Vz(){var n=this.parentNode;n&&n.removeChild(this)}function Xz(){return this.each(Vz)}function Yz(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Kz(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Zz(n){return this.select(n?Kz:Yz)}function Jz(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Qz(n){return function(e){n.call(this,e,this.__data__)}}function e4(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function t4(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function n4(n,e,t){return function(){var r=this.__on,i,s=Qz(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function r4(n,e,t){var r=e4(n+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,f;u<c;++u)for(i=0,f=a[u];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(a=e?n4:t4,i=0;i<s;++i)this.each(a(r[i],e,t));return this}function pS(n,e,t){var r=uS(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function i4(n,e){return function(){return pS(this,n,e)}}function s4(n,e){return function(){return pS(this,n,e.apply(this,arguments))}}function o4(n,e){return this.each((typeof e=="function"?s4:i4)(n,e))}function*a4(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var l4=[null];function Mi(n,e){this._groups=n,this._parents=e}function $c(){return new Mi([[document.documentElement]],l4)}function u4(){return this}Mi.prototype=$c.prototype={constructor:Mi,select:kN,selectAll:zN,selectChild:GN,selectChildren:HN,filter:VN,data:QN,enter:XN,exit:tz,join:nz,merge:rz,selection:u4,order:iz,sort:sz,call:az,nodes:lz,node:uz,size:cz,empty:hz,each:fz,attr:vz,style:Ez,property:Rz,classed:Mz,text:Fz,html:$z,raise:Uz,lower:qz,append:Wz,insert:Hz,remove:Xz,clone:Zz,datum:Jz,on:r4,dispatch:o4,[Symbol.iterator]:a4};function Dy(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function gS(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Bc(){}var hc=.7,td=1/hc,Al="\\s*([+-]?\\d+)\\s*",fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c4=/^#([0-9a-f]{3,8})$/,h4=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),f4=new RegExp(`^rgb\\(${Zi},${Zi},${Zi}\\)$`),d4=new RegExp(`^rgba\\(${Al},${Al},${Al},${fc}\\)$`),p4=new RegExp(`^rgba\\(${Zi},${Zi},${Zi},${fc}\\)$`),g4=new RegExp(`^hsl\\(${fc},${Zi},${Zi}\\)$`),m4=new RegExp(`^hsla\\(${fc},${Zi},${Zi},${fc}\\)$`),sw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dy(Bc,dc,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ow,formatHex:ow,formatHex8:y4,formatHsl:_4,formatRgb:aw,toString:aw});function ow(){return this.rgb().formatHex()}function y4(){return this.rgb().formatHex8()}function _4(){return mS(this).formatHsl()}function aw(){return this.rgb().formatRgb()}function dc(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=c4.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?lw(e):t===3?new Cr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?uf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?uf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=h4.exec(n))?new Cr(e[1],e[2],e[3],1):(e=f4.exec(n))?new Cr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=d4.exec(n))?uf(e[1],e[2],e[3],e[4]):(e=p4.exec(n))?uf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=g4.exec(n))?hw(e[1],e[2]/100,e[3]/100,1):(e=m4.exec(n))?hw(e[1],e[2]/100,e[3]/100,e[4]):sw.hasOwnProperty(n)?lw(sw[n]):n==="transparent"?new Cr(NaN,NaN,NaN,0):null}function lw(n){return new Cr(n>>16&255,n>>8&255,n&255,1)}function uf(n,e,t,r){return r<=0&&(n=e=t=NaN),new Cr(n,e,t,r)}function v4(n){return n instanceof Bc||(n=dc(n)),n?(n=n.rgb(),new Cr(n.r,n.g,n.b,n.opacity)):new Cr}function g0(n,e,t,r){return arguments.length===1?v4(n):new Cr(n,e,t,r??1)}function Cr(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Dy(Cr,g0,gS(Bc,{brighter(n){return n=n==null?td:Math.pow(td,n),new Cr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?hc:Math.pow(hc,n),new Cr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Cr(Ta(this.r),Ta(this.g),Ta(this.b),nd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uw,formatHex:uw,formatHex8:x4,formatRgb:cw,toString:cw}));function uw(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function x4(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`}function cw(){const n=nd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ta(this.r)}, ${Ta(this.g)}, ${Ta(this.b)}${n===1?")":`, ${n})`}`}function nd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ta(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function da(n){return n=Ta(n),(n<16?"0":"")+n.toString(16)}function hw(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new wi(n,e,t,r)}function mS(n){if(n instanceof wi)return new wi(n.h,n.s,n.l,n.opacity);if(n instanceof Bc||(n=dc(n)),!n)return new wi;if(n instanceof wi)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new wi(o,a,u,n.opacity)}function w4(n,e,t,r){return arguments.length===1?mS(n):new wi(n,e,t,r??1)}function wi(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Dy(wi,w4,gS(Bc,{brighter(n){return n=n==null?td:Math.pow(td,n),new wi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?hc:Math.pow(hc,n),new wi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Cr(um(n>=240?n-240:n+120,i,r),um(n,i,r),um(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new wi(fw(this.h),cf(this.s),cf(this.l),nd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=nd(this.opacity);return`${n===1?"hsl(":"hsla("}${fw(this.h)}, ${cf(this.s)*100}%, ${cf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function fw(n){return n=(n||0)%360,n<0?n+360:n}function cf(n){return Math.max(0,Math.min(1,n||0))}function um(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const yS=n=>()=>n;function b4(n,e){return function(t){return n+t*e}}function E4(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function C4(n){return(n=+n)==1?_S:function(e,t){return t-e?E4(e,t,n):yS(isNaN(e)?t:e)}}function _S(n,e){var t=e-n;return t?b4(n,t):yS(isNaN(n)?e:n)}const dw=function n(e){var t=C4(e);function r(i,s){var o=t((i=g0(i)).r,(s=g0(s)).r),a=t(i.g,s.g),u=t(i.b,s.b),c=_S(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=a(f),i.b=u(f),i.opacity=c(f),i+""}}return r.gamma=n,r}(1);function mo(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var m0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cm=new RegExp(m0.source,"g");function S4(n){return function(){return n}}function T4(n){return function(e){return n(e)+""}}function R4(n,e){var t=m0.lastIndex=cm.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(n=n+"",e=e+"";(r=m0.exec(n))&&(i=cm.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:mo(r,i)})),t=cm.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?T4(u[0].x):S4(e):(e=u.length,function(c){for(var f=0,d;f<e;++f)a[(d=u[f]).i]=d.x(c);return a.join("")})}var pw=180/Math.PI,y0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vS(n,e,t,r,i,s){var o,a,u;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(u=n*t+e*r)&&(t-=n*u,r-=e*u),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,u/=a),n*r<e*t&&(n=-n,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*pw,skewX:Math.atan(u)*pw,scaleX:o,scaleY:a}}var hf;function I4(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?y0:vS(e.a,e.b,e.c,e.d,e.e,e.f)}function A4(n){return n==null||(hf||(hf=document.createElementNS("http://www.w3.org/2000/svg","g")),hf.setAttribute("transform",n),!(n=hf.transform.baseVal.consolidate()))?y0:(n=n.matrix,vS(n.a,n.b,n.c,n.d,n.e,n.f))}function xS(n,e,t,r){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,g,y,m){if(c!==d||f!==g){var v=y.push("translate(",null,e,null,t);m.push({i:v-4,x:mo(c,d)},{i:v-2,x:mo(f,g)})}else(d||g)&&y.push("translate("+d+e+g+t)}function o(c,f,d,g){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),g.push({i:d.push(i(d)+"rotate(",null,r)-2,x:mo(c,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(c,f,d,g){c!==f?g.push({i:d.push(i(d)+"skewX(",null,r)-2,x:mo(c,f)}):f&&d.push(i(d)+"skewX("+f+r)}function u(c,f,d,g,y,m){if(c!==d||f!==g){var v=y.push(i(y)+"scale(",null,",",null,")");m.push({i:v-4,x:mo(c,d)},{i:v-2,x:mo(f,g)})}else(d!==1||g!==1)&&y.push(i(y)+"scale("+d+","+g+")")}return function(c,f){var d=[],g=[];return c=n(c),f=n(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,g),o(c.rotate,f.rotate,d,g),a(c.skewX,f.skewX,d,g),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,g),c=f=null,function(y){for(var m=-1,v=g.length,x;++m<v;)d[(x=g[m]).i]=x.x(y);return d.join("")}}}var P4=xS(I4,"px, ","px)","deg)"),M4=xS(A4,", ",")",")"),Hl=0,ju=0,Lu=0,wS=1e3,rd,Hu,id=0,ka=0,Kd=0,pc=typeof performance=="object"&&performance.now?performance:Date,bS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ny(){return ka||(bS(O4),ka=pc.now()+Kd)}function O4(){ka=0}function sd(){this._call=this._time=this._next=null}sd.prototype=ES.prototype={constructor:sd,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Ny():+t)+(e==null?0:+e),!this._next&&Hu!==this&&(Hu?Hu._next=this:rd=this,Hu=this),this._call=n,this._time=t,_0()},stop:function(){this._call&&(this._call=null,this._time=1/0,_0())}};function ES(n,e,t){var r=new sd;return r.restart(n,e,t),r}function L4(){Ny(),++Hl;for(var n=rd,e;n;)(e=ka-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Hl}function gw(){ka=(id=pc.now())+Kd,Hl=ju=0;try{L4()}finally{Hl=0,F4(),ka=0}}function k4(){var n=pc.now(),e=n-id;e>wS&&(Kd-=e,id=n)}function F4(){for(var n,e=rd,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:rd=t);Hu=n,_0(r)}function _0(n){if(!Hl){ju&&(ju=clearTimeout(ju));var e=n-ka;e>24?(n<1/0&&(ju=setTimeout(gw,n-pc.now()-Kd)),Lu&&(Lu=clearInterval(Lu))):(Lu||(id=pc.now(),Lu=setInterval(k4,wS)),Hl=1,bS(gw))}}function mw(n,e,t){var r=new sd;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var D4=rS("start","end","cancel","interrupt"),N4=[],CS=0,yw=1,v0=2,$f=3,_w=4,x0=5,Bf=6;function Zd(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;z4(n,t,{name:e,index:r,group:i,on:D4,tween:N4,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:CS})}function zy(n,e){var t=Fi(n,e);if(t.state>CS)throw new Error("too late; already scheduled");return t}function ls(n,e){var t=Fi(n,e);if(t.state>$f)throw new Error("too late; already running");return t}function Fi(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function z4(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=ES(s,0,t.time);function s(c){t.state=yw,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var f,d,g,y;if(t.state!==yw)return u();for(f in r)if(y=r[f],y.name===t.name){if(y.state===$f)return mw(o);y.state===_w?(y.state=Bf,y.timer.stop(),y.on.call("interrupt",n,n.__data__,y.index,y.group),delete r[f]):+f<e&&(y.state=Bf,y.timer.stop(),y.on.call("cancel",n,n.__data__,y.index,y.group),delete r[f])}if(mw(function(){t.state===$f&&(t.state=_w,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=v0,t.on.call("start",n,n.__data__,t.index,t.group),t.state===v0){for(t.state=$f,i=new Array(g=t.tween.length),f=0,d=-1;f<g;++f)(y=t.tween[f].value.call(n,n.__data__,t.index,t.group))&&(i[++d]=y);i.length=d+1}}function a(c){for(var f=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(u),t.state=x0,1),d=-1,g=i.length;++d<g;)i[d].call(n,f);t.state===x0&&(t.on.call("end",n,n.__data__,t.index,t.group),u())}function u(){t.state=Bf,t.timer.stop(),delete r[e];for(var c in r)return;delete n.__transition}}function $4(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>v0&&r.state<x0,r.state=Bf,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function B4(n){return this.each(function(){$4(this,n)})}function U4(n,e){var t,r;return function(){var i=ls(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function G4(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=ls(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:t},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}s.tween=i}}function q4(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=Fi(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?U4:G4)(t,n,e))}function $y(n,e,t){var r=n._id;return n.each(function(){var i=ls(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return Fi(i,r).value[e]}}function SS(n,e){var t;return(typeof e=="number"?mo:e instanceof dc?dw:(t=dc(e))?(e=t,dw):R4)(n,e)}function W4(n){return function(){this.removeAttribute(n)}}function j4(n){return function(){this.removeAttributeNS(n.space,n.local)}}function H4(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function V4(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function X4(n,e,t){var r,i,s;return function(){var o,a=t(this),u;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function Y4(n,e,t){var r,i,s;return function(){var o,a=t(this),u;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function K4(n,e){var t=Yd(n),r=t==="transform"?M4:SS;return this.attrTween(n,typeof e=="function"?(t.local?Y4:X4)(t,r,$y(this,"attr."+n,e)):e==null?(t.local?j4:W4)(t):(t.local?V4:H4)(t,r,e))}function Z4(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function J4(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Q4(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&J4(n,s)),t}return i._value=e,i}function e$(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&Z4(n,s)),t}return i._value=e,i}function t$(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Yd(n);return this.tween(t,(r.local?Q4:e$)(r,e))}function n$(n,e){return function(){zy(this,n).delay=+e.apply(this,arguments)}}function r$(n,e){return e=+e,function(){zy(this,n).delay=e}}function i$(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?n$:r$)(e,n)):Fi(this.node(),e).delay}function s$(n,e){return function(){ls(this,n).duration=+e.apply(this,arguments)}}function o$(n,e){return e=+e,function(){ls(this,n).duration=e}}function a$(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?s$:o$)(e,n)):Fi(this.node(),e).duration}function l$(n,e){if(typeof e!="function")throw new Error;return function(){ls(this,n).ease=e}}function u$(n){var e=this._id;return arguments.length?this.each(l$(e,n)):Fi(this.node(),e).ease}function c$(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;ls(this,n).ease=t}}function h$(n){if(typeof n!="function")throw new Error;return this.each(c$(this._id,n))}function f$(n){typeof n!="function"&&(n=oS(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,c=0;c<o;++c)(u=s[c])&&n.call(u,u.__data__,c,s)&&a.push(u);return new Ns(r,this._parents,this._name,this._id)}function d$(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=e[a],c=t[a],f=u.length,d=o[a]=new Array(f),g,y=0;y<f;++y)(g=u[y]||c[y])&&(d[y]=g);for(;a<r;++a)o[a]=e[a];return new Ns(o,this._parents,this._name,this._id)}function p$(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function g$(n,e,t){var r,i,s=p$(e)?zy:ls;return function(){var o=s(this,n),a=o.on;a!==r&&(i=(r=a).copy()).on(e,t),o.on=i}}function m$(n,e){var t=this._id;return arguments.length<2?Fi(this.node(),t).on.on(n):this.each(g$(t,n,e))}function y$(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function _$(){return this.on("end.remove",y$(this._id))}function v$(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ky(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,c=s[o]=new Array(u),f,d,g=0;g<u;++g)(f=a[g])&&(d=n.call(f,f.__data__,g,a))&&("__data__"in f&&(d.__data__=f.__data__),c[g]=d,Zd(c[g],e,t,g,c,Fi(f,t)));return new Ns(s,this._parents,e,t)}function x$(n){var e=this._name,t=this._id;typeof n!="function"&&(n=sS(n));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],c=u.length,f,d=0;d<c;++d)if(f=u[d]){for(var g=n.call(f,f.__data__,d,u),y,m=Fi(f,t),v=0,x=g.length;v<x;++v)(y=g[v])&&Zd(y,e,t,v,g,m);s.push(g),o.push(f)}return new Ns(s,o,e,t)}var w$=$c.prototype.constructor;function b$(){return new w$(this._groups,this._parents)}function E$(n,e){var t,r,i;return function(){var s=jl(this,n),o=(this.style.removeProperty(n),jl(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function TS(n){return function(){this.style.removeProperty(n)}}function C$(n,e,t){var r,i=t+"",s;return function(){var o=jl(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function S$(n,e,t){var r,i,s;return function(){var o=jl(this,n),a=t(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(n),jl(this,n))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}function T$(n,e){var t,r,i,s="style."+e,o="end."+s,a;return function(){var u=ls(this,n),c=u.on,f=u.value[s]==null?a||(a=TS(e)):void 0;(c!==t||i!==f)&&(r=(t=c).copy()).on(o,i=f),u.on=r}}function R$(n,e,t){var r=(n+="")=="transform"?P4:SS;return e==null?this.styleTween(n,E$(n,r)).on("end.style."+n,TS(n)):typeof e=="function"?this.styleTween(n,S$(n,r,$y(this,"style."+n,e))).each(T$(this._id,n)):this.styleTween(n,C$(n,r,e),t).on("end.style."+n,null)}function I$(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function A$(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&I$(n,o,t)),r}return s._value=e,s}function P$(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,A$(n,e,t??""))}function M$(n){return function(){this.textContent=n}}function O$(n){return function(){var e=n(this);this.textContent=e??""}}function L$(n){return this.tween("text",typeof n=="function"?O$($y(this,"text",n)):M$(n==null?"":n+""))}function k$(n){return function(e){this.textContent=n.call(this,e)}}function F$(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&k$(i)),e}return r._value=n,r}function D$(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,F$(n))}function N$(){for(var n=this._name,e=this._id,t=RS(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,c=0;c<a;++c)if(u=o[c]){var f=Fi(u,e);Zd(u,n,t,c,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ns(r,this._parents,n,t)}function z$(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};t.each(function(){var c=ls(this,r),f=c.on;f!==n&&(e=(n=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),c.on=e}),i===0&&s()})}var $$=0;function Ns(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function RS(){return++$$}var bs=$c.prototype;Ns.prototype={constructor:Ns,select:v$,selectAll:x$,selectChild:bs.selectChild,selectChildren:bs.selectChildren,filter:f$,merge:d$,selection:b$,transition:N$,call:bs.call,nodes:bs.nodes,node:bs.node,size:bs.size,empty:bs.empty,each:bs.each,on:m$,attr:K4,attrTween:t$,style:R$,styleTween:P$,text:L$,textTween:D$,remove:_$,tween:q4,delay:i$,duration:a$,ease:u$,easeVarying:h$,end:z$,[Symbol.iterator]:bs[Symbol.iterator]};function B$(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var U$={time:null,delay:0,duration:250,ease:B$};function G$(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function q$(n){var e,t;n instanceof Ns?(e=n._id,n=n._name):(e=RS(),(t=U$).time=Ny(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,c=0;c<a;++c)(u=o[c])&&Zd(u,n,e,c,o,t||G$(u,e));return new Ns(r,this._parents,n,e)}$c.prototype.interrupt=B4;$c.prototype.transition=q$;function Vu(n,e,t){this.k=n,this.x=e,this.y=t}Vu.prototype={constructor:Vu,scale:function(n){return n===1?this:new Vu(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Vu(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vu.prototype;var od={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */od.exports;(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,g=2,y=4,m=1,v=2,x=1,b=2,E=4,T=8,C=16,R=32,F=64,O=128,$=256,L=512,N=30,B="...",z=800,H=16,Z=1,G=2,W=3,q=1/0,V=9007199254740991,ne=17976931348623157e292,re=NaN,me=4294967295,ce=me-1,Fe=me>>>1,le=[["ary",O],["bind",x],["bindKey",b],["curry",T],["curryRight",C],["flip",L],["partial",R],["partialRight",F],["rearg",$]],Oe="[object Arguments]",dt="[object Array]",ze="[object AsyncFunction]",Ie="[object Boolean]",Te="[object Date]",pt="[object DOMException]",Gt="[object Error]",Tt="[object Function]",en="[object GeneratorFunction]",ge="[object Map]",$e="[object Number]",be="[object Null]",ke="[object Object]",Ze="[object Promise]",rn="[object Proxy]",gt="[object RegExp]",k="[object Set]",Qe="[object String]",Be="[object Symbol]",En="[object Undefined]",Ht="[object WeakMap]",un="[object WeakSet]",Et="[object ArrayBuffer]",He="[object DataView]",Pe="[object Float32Array]",Le="[object Float64Array]",Ce="[object Int8Array]",xt="[object Int16Array]",Ue="[object Int32Array]",Ge="[object Uint8Array]",et="[object Uint8ClampedArray]",Rt="[object Uint16Array]",Kt="[object Uint32Array]",mn=/\b__p \+= '';/g,Dt=/\b(__p \+=) '' \+/g,Nt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ot=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,Yt=RegExp(ot.source),kt=RegExp(Ct.source),$t=/<%-([\s\S]+?)%>/g,Mn=/<%([\s\S]+?)%>/g,cn=/<%=([\s\S]+?)%>/g,yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,Dn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hn=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(hn.source),It=/^\s+/,Cn=/\s/,Ni=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,li=/\{\n\/\* \[wrapped with (.+)\] \*/,ui=/,? & /,_n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ci=/[()=,{}\[\]\/\s]/,gr=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,J=/\w*$/,we=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,wt=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,On=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tt=/($^)/,Xp=/['\n\r\u2028\u2029\\]/g,fs="\\ud800-\\udfff",ch="\\u0300-\\u036f",js="\\ufe20-\\ufe2f",S="\\u20d0-\\u20ff",A=ch+js+S,U="\\u2700-\\u27bf",M="a-z\\xdf-\\xf6\\xf8-\\xff",Y="\\xac\\xb1\\xd7\\xf7",pe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hs="\\u2000-\\u206f",gu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wo="A-Z\\xc0-\\xd6\\xd8-\\xde",Xa="\\ufe0e\\ufe0f",jo=Y+pe+Hs+gu,Ho="['‚Äô]",Q2="["+fs+"]",dv="["+jo+"]",hh="["+A+"]",pv="\\d+",eI="["+U+"]",gv="["+M+"]",mv="[^"+fs+jo+pv+U+M+Wo+"]",Yp="\\ud83c[\\udffb-\\udfff]",tI="(?:"+hh+"|"+Yp+")",yv="[^"+fs+"]",Kp="(?:\\ud83c[\\udde6-\\uddff]){2}",Zp="[\\ud800-\\udbff][\\udc00-\\udfff]",Ya="["+Wo+"]",_v="\\u200d",vv="(?:"+gv+"|"+mv+")",nI="(?:"+Ya+"|"+mv+")",xv="(?:"+Ho+"(?:d|ll|m|re|s|t|ve))?",wv="(?:"+Ho+"(?:D|LL|M|RE|S|T|VE))?",bv=tI+"?",Ev="["+Xa+"]?",rI="(?:"+_v+"(?:"+[yv,Kp,Zp].join("|")+")"+Ev+bv+")*",iI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cv=Ev+bv+rI,oI="(?:"+[eI,Kp,Zp].join("|")+")"+Cv,aI="(?:"+[yv+hh+"?",hh,Kp,Zp,Q2].join("|")+")",lI=RegExp(Ho,"g"),uI=RegExp(hh,"g"),Jp=RegExp(Yp+"(?="+Yp+")|"+aI+Cv,"g"),cI=RegExp([Ya+"?"+gv+"+"+xv+"(?="+[dv,Ya,"$"].join("|")+")",nI+"+"+wv+"(?="+[dv,Ya+vv,"$"].join("|")+")",Ya+"?"+vv+"+"+xv,Ya+"+"+wv,sI,iI,pv,oI].join("|"),"g"),hI=RegExp("["+_v+fs+A+Xa+"]"),fI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pI=-1,nn={};nn[Pe]=nn[Le]=nn[Ce]=nn[xt]=nn[Ue]=nn[Ge]=nn[et]=nn[Rt]=nn[Kt]=!0,nn[Oe]=nn[dt]=nn[Et]=nn[Ie]=nn[He]=nn[Te]=nn[Gt]=nn[Tt]=nn[ge]=nn[$e]=nn[ke]=nn[gt]=nn[k]=nn[Qe]=nn[Ht]=!1;var tn={};tn[Oe]=tn[dt]=tn[Et]=tn[He]=tn[Ie]=tn[Te]=tn[Pe]=tn[Le]=tn[Ce]=tn[xt]=tn[Ue]=tn[ge]=tn[$e]=tn[ke]=tn[gt]=tn[k]=tn[Qe]=tn[Be]=tn[Ge]=tn[et]=tn[Rt]=tn[Kt]=!0,tn[Gt]=tn[Tt]=tn[Ht]=!1;var gI={√Ä:"A",√Å:"A",√Ç:"A",√É:"A",√Ñ:"A",√Ö:"A",√†:"a",√°:"a",√¢:"a",√£:"a",√§:"a",√•:"a",√á:"C",√ß:"c",√ê:"D",√∞:"d",√à:"E",√â:"E",√ä:"E",√ã:"E",√®:"e",√©:"e",√™:"e",√´:"e",√å:"I",√ç:"I",√é:"I",√è:"I",√¨:"i",√≠:"i",√Æ:"i",√Ø:"i",√ë:"N",√±:"n",√í:"O",√ì:"O",√î:"O",√ï:"O",√ñ:"O",√ò:"O",√≤:"o",√≥:"o",√¥:"o",√µ:"o",√∂:"o",√∏:"o",√ô:"U",√ö:"U",√õ:"U",√ú:"U",√π:"u",√∫:"u",√ª:"u",√º:"u",√ù:"Y",√Ω:"y",√ø:"y",√Ü:"Ae",√¶:"ae",√û:"Th",√æ:"th",√ü:"ss",ƒÄ:"A",ƒÇ:"A",ƒÑ:"A",ƒÅ:"a",ƒÉ:"a",ƒÖ:"a",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",ƒé:"D",ƒê:"D",ƒè:"d",ƒë:"d",ƒí:"E",ƒî:"E",ƒñ:"E",ƒò:"E",ƒö:"E",ƒì:"e",ƒï:"e",ƒó:"e",ƒô:"e",ƒõ:"e",ƒú:"G",ƒû:"G",ƒ†:"G",ƒ¢:"G",ƒù:"g",ƒü:"g",ƒ°:"g",ƒ£:"g",ƒ§:"H",ƒ¶:"H",ƒ•:"h",ƒß:"h",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒÆ:"I",ƒ∞:"I",ƒ©:"i",ƒ´:"i",ƒ≠:"i",ƒØ:"i",ƒ±:"i",ƒ¥:"J",ƒµ:"j",ƒ∂:"K",ƒ∑:"k",ƒ∏:"k",ƒπ:"L",ƒª:"L",ƒΩ:"L",ƒø:"L",≈Å:"L",ƒ∫:"l",ƒº:"l",ƒæ:"l",≈Ä:"l",≈Ç:"l",≈É:"N",≈Ö:"N",≈á:"N",≈ä:"N",≈Ñ:"n",≈Ü:"n",≈à:"n",≈ã:"n",≈å:"O",≈é:"O",≈ê:"O",≈ç:"o",≈è:"o",≈ë:"o",≈î:"R",≈ñ:"R",≈ò:"R",≈ï:"r",≈ó:"r",≈ô:"r",≈ö:"S",≈ú:"S",≈û:"S",≈†:"S",≈õ:"s",≈ù:"s",≈ü:"s",≈°:"s",≈¢:"T",≈§:"T",≈¶:"T",≈£:"t",≈•:"t",≈ß:"t",≈®:"U",≈™:"U",≈¨:"U",≈Æ:"U",≈∞:"U",≈≤:"U",≈©:"u",≈´:"u",≈≠:"u",≈Ø:"u",≈±:"u",≈≥:"u",≈¥:"W",≈µ:"w",≈∂:"Y",≈∑:"y",≈∏:"Y",≈π:"Z",≈ª:"Z",≈Ω:"Z",≈∫:"z",≈º:"z",≈æ:"z",ƒ≤:"IJ",ƒ≥:"ij",≈í:"Oe",≈ì:"oe",≈â:"'n",≈ø:"s"},mI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_I={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vI=parseFloat,xI=parseInt,Sv=typeof As=="object"&&As&&As.Object===Object&&As,wI=typeof self=="object"&&self&&self.Object===Object&&self,Xn=Sv||wI||Function("return this")(),Qp=e&&!e.nodeType&&e,Vo=Qp&&!0&&n&&!n.nodeType&&n,Tv=Vo&&Vo.exports===Qp,eg=Tv&&Sv.process,jr=function(){try{var X=Vo&&Vo.require&&Vo.require("util").types;return X||eg&&eg.binding&&eg.binding("util")}catch{}}(),Rv=jr&&jr.isArrayBuffer,Iv=jr&&jr.isDate,Av=jr&&jr.isMap,Pv=jr&&jr.isRegExp,Mv=jr&&jr.isSet,Ov=jr&&jr.isTypedArray;function Ar(X,se,te){switch(te.length){case 0:return X.call(se);case 1:return X.call(se,te[0]);case 2:return X.call(se,te[0],te[1]);case 3:return X.call(se,te[0],te[1],te[2])}return X.apply(se,te)}function bI(X,se,te,Ee){for(var nt=-1,Bt=X==null?0:X.length;++nt<Bt;){var Nn=X[nt];se(Ee,Nn,te(Nn),X)}return Ee}function Hr(X,se){for(var te=-1,Ee=X==null?0:X.length;++te<Ee&&se(X[te],te,X)!==!1;);return X}function EI(X,se){for(var te=X==null?0:X.length;te--&&se(X[te],te,X)!==!1;);return X}function Lv(X,se){for(var te=-1,Ee=X==null?0:X.length;++te<Ee;)if(!se(X[te],te,X))return!1;return!0}function Vs(X,se){for(var te=-1,Ee=X==null?0:X.length,nt=0,Bt=[];++te<Ee;){var Nn=X[te];se(Nn,te,X)&&(Bt[nt++]=Nn)}return Bt}function fh(X,se){var te=X==null?0:X.length;return!!te&&Ka(X,se,0)>-1}function tg(X,se,te){for(var Ee=-1,nt=X==null?0:X.length;++Ee<nt;)if(te(se,X[Ee]))return!0;return!1}function sn(X,se){for(var te=-1,Ee=X==null?0:X.length,nt=Array(Ee);++te<Ee;)nt[te]=se(X[te],te,X);return nt}function Xs(X,se){for(var te=-1,Ee=se.length,nt=X.length;++te<Ee;)X[nt+te]=se[te];return X}function ng(X,se,te,Ee){var nt=-1,Bt=X==null?0:X.length;for(Ee&&Bt&&(te=X[++nt]);++nt<Bt;)te=se(te,X[nt],nt,X);return te}function CI(X,se,te,Ee){var nt=X==null?0:X.length;for(Ee&&nt&&(te=X[--nt]);nt--;)te=se(te,X[nt],nt,X);return te}function rg(X,se){for(var te=-1,Ee=X==null?0:X.length;++te<Ee;)if(se(X[te],te,X))return!0;return!1}var SI=ig("length");function TI(X){return X.split("")}function RI(X){return X.match(_n)||[]}function kv(X,se,te){var Ee;return te(X,function(nt,Bt,Nn){if(se(nt,Bt,Nn))return Ee=Bt,!1}),Ee}function dh(X,se,te,Ee){for(var nt=X.length,Bt=te+(Ee?1:-1);Ee?Bt--:++Bt<nt;)if(se(X[Bt],Bt,X))return Bt;return-1}function Ka(X,se,te){return se===se?$I(X,se,te):dh(X,Fv,te)}function II(X,se,te,Ee){for(var nt=te-1,Bt=X.length;++nt<Bt;)if(Ee(X[nt],se))return nt;return-1}function Fv(X){return X!==X}function Dv(X,se){var te=X==null?0:X.length;return te?og(X,se)/te:re}function ig(X){return function(se){return se==null?t:se[X]}}function sg(X){return function(se){return X==null?t:X[se]}}function Nv(X,se,te,Ee,nt){return nt(X,function(Bt,Nn,Jt){te=Ee?(Ee=!1,Bt):se(te,Bt,Nn,Jt)}),te}function AI(X,se){var te=X.length;for(X.sort(se);te--;)X[te]=X[te].value;return X}function og(X,se){for(var te,Ee=-1,nt=X.length;++Ee<nt;){var Bt=se(X[Ee]);Bt!==t&&(te=te===t?Bt:te+Bt)}return te}function ag(X,se){for(var te=-1,Ee=Array(X);++te<X;)Ee[te]=se(te);return Ee}function PI(X,se){return sn(se,function(te){return[te,X[te]]})}function zv(X){return X&&X.slice(0,Gv(X)+1).replace(It,"")}function Pr(X){return function(se){return X(se)}}function lg(X,se){return sn(se,function(te){return X[te]})}function mu(X,se){return X.has(se)}function $v(X,se){for(var te=-1,Ee=X.length;++te<Ee&&Ka(se,X[te],0)>-1;);return te}function Bv(X,se){for(var te=X.length;te--&&Ka(se,X[te],0)>-1;);return te}function MI(X,se){for(var te=X.length,Ee=0;te--;)X[te]===se&&++Ee;return Ee}var OI=sg(gI),LI=sg(mI);function kI(X){return"\\"+_I[X]}function FI(X,se){return X==null?t:X[se]}function Za(X){return hI.test(X)}function DI(X){return fI.test(X)}function NI(X){for(var se,te=[];!(se=X.next()).done;)te.push(se.value);return te}function ug(X){var se=-1,te=Array(X.size);return X.forEach(function(Ee,nt){te[++se]=[nt,Ee]}),te}function Uv(X,se){return function(te){return X(se(te))}}function Ys(X,se){for(var te=-1,Ee=X.length,nt=0,Bt=[];++te<Ee;){var Nn=X[te];(Nn===se||Nn===f)&&(X[te]=f,Bt[nt++]=te)}return Bt}function ph(X){var se=-1,te=Array(X.size);return X.forEach(function(Ee){te[++se]=Ee}),te}function zI(X){var se=-1,te=Array(X.size);return X.forEach(function(Ee){te[++se]=[Ee,Ee]}),te}function $I(X,se,te){for(var Ee=te-1,nt=X.length;++Ee<nt;)if(X[Ee]===se)return Ee;return-1}function BI(X,se,te){for(var Ee=te+1;Ee--;)if(X[Ee]===se)return Ee;return Ee}function Ja(X){return Za(X)?GI(X):SI(X)}function hi(X){return Za(X)?qI(X):TI(X)}function Gv(X){for(var se=X.length;se--&&Cn.test(X.charAt(se)););return se}var UI=sg(yI);function GI(X){for(var se=Jp.lastIndex=0;Jp.test(X);)++se;return se}function qI(X){return X.match(Jp)||[]}function WI(X){return X.match(cI)||[]}var jI=function X(se){se=se==null?Xn:Qa.defaults(Xn.Object(),se,Qa.pick(Xn,dI));var te=se.Array,Ee=se.Date,nt=se.Error,Bt=se.Function,Nn=se.Math,Jt=se.Object,cg=se.RegExp,HI=se.String,Vr=se.TypeError,gh=te.prototype,VI=Bt.prototype,el=Jt.prototype,mh=se["__core-js_shared__"],yh=VI.toString,Vt=el.hasOwnProperty,XI=0,qv=function(){var l=/[^.]+$/.exec(mh&&mh.keys&&mh.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),_h=el.toString,YI=yh.call(Jt),KI=Xn._,ZI=cg("^"+yh.call(Vt).replace(hn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vh=Tv?se.Buffer:t,Ks=se.Symbol,xh=se.Uint8Array,Wv=vh?vh.allocUnsafe:t,wh=Uv(Jt.getPrototypeOf,Jt),jv=Jt.create,Hv=el.propertyIsEnumerable,bh=gh.splice,Vv=Ks?Ks.isConcatSpreadable:t,yu=Ks?Ks.iterator:t,Xo=Ks?Ks.toStringTag:t,Eh=function(){try{var l=Qo(Jt,"defineProperty");return l({},"",{}),l}catch{}}(),JI=se.clearTimeout!==Xn.clearTimeout&&se.clearTimeout,QI=Ee&&Ee.now!==Xn.Date.now&&Ee.now,eA=se.setTimeout!==Xn.setTimeout&&se.setTimeout,Ch=Nn.ceil,Sh=Nn.floor,hg=Jt.getOwnPropertySymbols,tA=vh?vh.isBuffer:t,Xv=se.isFinite,nA=gh.join,rA=Uv(Jt.keys,Jt),zn=Nn.max,Jn=Nn.min,iA=Ee.now,sA=se.parseInt,Yv=Nn.random,oA=gh.reverse,fg=Qo(se,"DataView"),_u=Qo(se,"Map"),dg=Qo(se,"Promise"),tl=Qo(se,"Set"),vu=Qo(se,"WeakMap"),xu=Qo(Jt,"create"),Th=vu&&new vu,nl={},aA=ea(fg),lA=ea(_u),uA=ea(dg),cA=ea(tl),hA=ea(vu),Rh=Ks?Ks.prototype:t,wu=Rh?Rh.valueOf:t,Kv=Rh?Rh.toString:t;function I(l){if(vn(l)&&!it(l)&&!(l instanceof St)){if(l instanceof Xr)return l;if(Vt.call(l,"__wrapped__"))return Zx(l)}return new Xr(l)}var rl=function(){function l(){}return function(h){if(!fn(h))return{};if(jv)return jv(h);l.prototype=h;var p=new l;return l.prototype=t,p}}();function Ih(){}function Xr(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=t}I.templateSettings={escape:$t,evaluate:Mn,interpolate:cn,variable:"",imports:{_:I}},I.prototype=Ih.prototype,I.prototype.constructor=I,Xr.prototype=rl(Ih.prototype),Xr.prototype.constructor=Xr;function St(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function fA(){var l=new St(this.__wrapped__);return l.__actions__=mr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=mr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=mr(this.__views__),l}function dA(){if(this.__filtered__){var l=new St(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function pA(){var l=this.__wrapped__.value(),h=this.__dir__,p=it(l),_=h<0,w=p?l.length:0,P=TP(0,w,this.__views__),D=P.start,j=P.end,K=j-D,he=_?j:D-1,fe=this.__iteratees__,de=fe.length,ve=0,Me=Jn(K,this.__takeCount__);if(!p||!_&&w==K&&Me==K)return xx(l,this.__actions__);var We=[];e:for(;K--&&ve<Me;){he+=h;for(var mt=-1,je=l[he];++mt<de;){var bt=fe[mt],At=bt.iteratee,Lr=bt.type,lr=At(je);if(Lr==G)je=lr;else if(!lr){if(Lr==Z)continue e;break e}}We[ve++]=je}return We}St.prototype=rl(Ih.prototype),St.prototype.constructor=St;function Yo(l){var h=-1,p=l==null?0:l.length;for(this.clear();++h<p;){var _=l[h];this.set(_[0],_[1])}}function gA(){this.__data__=xu?xu(null):{},this.size=0}function mA(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function yA(l){var h=this.__data__;if(xu){var p=h[l];return p===u?t:p}return Vt.call(h,l)?h[l]:t}function _A(l){var h=this.__data__;return xu?h[l]!==t:Vt.call(h,l)}function vA(l,h){var p=this.__data__;return this.size+=this.has(l)?0:1,p[l]=xu&&h===t?u:h,this}Yo.prototype.clear=gA,Yo.prototype.delete=mA,Yo.prototype.get=yA,Yo.prototype.has=_A,Yo.prototype.set=vA;function ds(l){var h=-1,p=l==null?0:l.length;for(this.clear();++h<p;){var _=l[h];this.set(_[0],_[1])}}function xA(){this.__data__=[],this.size=0}function wA(l){var h=this.__data__,p=Ah(h,l);if(p<0)return!1;var _=h.length-1;return p==_?h.pop():bh.call(h,p,1),--this.size,!0}function bA(l){var h=this.__data__,p=Ah(h,l);return p<0?t:h[p][1]}function EA(l){return Ah(this.__data__,l)>-1}function CA(l,h){var p=this.__data__,_=Ah(p,l);return _<0?(++this.size,p.push([l,h])):p[_][1]=h,this}ds.prototype.clear=xA,ds.prototype.delete=wA,ds.prototype.get=bA,ds.prototype.has=EA,ds.prototype.set=CA;function ps(l){var h=-1,p=l==null?0:l.length;for(this.clear();++h<p;){var _=l[h];this.set(_[0],_[1])}}function SA(){this.size=0,this.__data__={hash:new Yo,map:new(_u||ds),string:new Yo}}function TA(l){var h=Uh(this,l).delete(l);return this.size-=h?1:0,h}function RA(l){return Uh(this,l).get(l)}function IA(l){return Uh(this,l).has(l)}function AA(l,h){var p=Uh(this,l),_=p.size;return p.set(l,h),this.size+=p.size==_?0:1,this}ps.prototype.clear=SA,ps.prototype.delete=TA,ps.prototype.get=RA,ps.prototype.has=IA,ps.prototype.set=AA;function Ko(l){var h=-1,p=l==null?0:l.length;for(this.__data__=new ps;++h<p;)this.add(l[h])}function PA(l){return this.__data__.set(l,u),this}function MA(l){return this.__data__.has(l)}Ko.prototype.add=Ko.prototype.push=PA,Ko.prototype.has=MA;function fi(l){var h=this.__data__=new ds(l);this.size=h.size}function OA(){this.__data__=new ds,this.size=0}function LA(l){var h=this.__data__,p=h.delete(l);return this.size=h.size,p}function kA(l){return this.__data__.get(l)}function FA(l){return this.__data__.has(l)}function DA(l,h){var p=this.__data__;if(p instanceof ds){var _=p.__data__;if(!_u||_.length<i-1)return _.push([l,h]),this.size=++p.size,this;p=this.__data__=new ps(_)}return p.set(l,h),this.size=p.size,this}fi.prototype.clear=OA,fi.prototype.delete=LA,fi.prototype.get=kA,fi.prototype.has=FA,fi.prototype.set=DA;function Zv(l,h){var p=it(l),_=!p&&ta(l),w=!p&&!_&&to(l),P=!p&&!_&&!w&&al(l),D=p||_||w||P,j=D?ag(l.length,HI):[],K=j.length;for(var he in l)(h||Vt.call(l,he))&&!(D&&(he=="length"||w&&(he=="offset"||he=="parent")||P&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||_s(he,K)))&&j.push(he);return j}function Jv(l){var h=l.length;return h?l[Cg(0,h-1)]:t}function NA(l,h){return Gh(mr(l),Zo(h,0,l.length))}function zA(l){return Gh(mr(l))}function pg(l,h,p){(p!==t&&!di(l[h],p)||p===t&&!(h in l))&&gs(l,h,p)}function bu(l,h,p){var _=l[h];(!(Vt.call(l,h)&&di(_,p))||p===t&&!(h in l))&&gs(l,h,p)}function Ah(l,h){for(var p=l.length;p--;)if(di(l[p][0],h))return p;return-1}function $A(l,h,p,_){return Zs(l,function(w,P,D){h(_,w,p(w),D)}),_}function Qv(l,h){return l&&$i(h,qn(h),l)}function BA(l,h){return l&&$i(h,_r(h),l)}function gs(l,h,p){h=="__proto__"&&Eh?Eh(l,h,{configurable:!0,enumerable:!0,value:p,writable:!0}):l[h]=p}function gg(l,h){for(var p=-1,_=h.length,w=te(_),P=l==null;++p<_;)w[p]=P?t:Yg(l,h[p]);return w}function Zo(l,h,p){return l===l&&(p!==t&&(l=l<=p?l:p),h!==t&&(l=l>=h?l:h)),l}function Yr(l,h,p,_,w,P){var D,j=h&d,K=h&g,he=h&y;if(p&&(D=w?p(l,_,w,P):p(l)),D!==t)return D;if(!fn(l))return l;var fe=it(l);if(fe){if(D=IP(l),!j)return mr(l,D)}else{var de=Qn(l),ve=de==Tt||de==en;if(to(l))return Ex(l,j);if(de==ke||de==Oe||ve&&!w){if(D=K||ve?{}:Gx(l),!j)return K?yP(l,BA(D,l)):mP(l,Qv(D,l))}else{if(!tn[de])return w?l:{};D=AP(l,de,j)}}P||(P=new fi);var Me=P.get(l);if(Me)return Me;P.set(l,D),y1(l)?l.forEach(function(je){D.add(Yr(je,h,p,je,l,P))}):g1(l)&&l.forEach(function(je,bt){D.set(bt,Yr(je,h,p,bt,l,P))});var We=he?K?Fg:kg:K?_r:qn,mt=fe?t:We(l);return Hr(mt||l,function(je,bt){mt&&(bt=je,je=l[bt]),bu(D,bt,Yr(je,h,p,bt,l,P))}),D}function UA(l){var h=qn(l);return function(p){return ex(p,l,h)}}function ex(l,h,p){var _=p.length;if(l==null)return!_;for(l=Jt(l);_--;){var w=p[_],P=h[w],D=l[w];if(D===t&&!(w in l)||!P(D))return!1}return!0}function tx(l,h,p){if(typeof l!="function")throw new Vr(o);return Au(function(){l.apply(t,p)},h)}function Eu(l,h,p,_){var w=-1,P=fh,D=!0,j=l.length,K=[],he=h.length;if(!j)return K;p&&(h=sn(h,Pr(p))),_?(P=tg,D=!1):h.length>=i&&(P=mu,D=!1,h=new Ko(h));e:for(;++w<j;){var fe=l[w],de=p==null?fe:p(fe);if(fe=_||fe!==0?fe:0,D&&de===de){for(var ve=he;ve--;)if(h[ve]===de)continue e;K.push(fe)}else P(h,de,_)||K.push(fe)}return K}var Zs=Ix(zi),nx=Ix(yg,!0);function GA(l,h){var p=!0;return Zs(l,function(_,w,P){return p=!!h(_,w,P),p}),p}function Ph(l,h,p){for(var _=-1,w=l.length;++_<w;){var P=l[_],D=h(P);if(D!=null&&(j===t?D===D&&!Or(D):p(D,j)))var j=D,K=P}return K}function qA(l,h,p,_){var w=l.length;for(p=ut(p),p<0&&(p=-p>w?0:w+p),_=_===t||_>w?w:ut(_),_<0&&(_+=w),_=p>_?0:v1(_);p<_;)l[p++]=h;return l}function rx(l,h){var p=[];return Zs(l,function(_,w,P){h(_,w,P)&&p.push(_)}),p}function Yn(l,h,p,_,w){var P=-1,D=l.length;for(p||(p=MP),w||(w=[]);++P<D;){var j=l[P];h>0&&p(j)?h>1?Yn(j,h-1,p,_,w):Xs(w,j):_||(w[w.length]=j)}return w}var mg=Ax(),ix=Ax(!0);function zi(l,h){return l&&mg(l,h,qn)}function yg(l,h){return l&&ix(l,h,qn)}function Mh(l,h){return Vs(h,function(p){return vs(l[p])})}function Jo(l,h){h=Qs(h,l);for(var p=0,_=h.length;l!=null&&p<_;)l=l[Bi(h[p++])];return p&&p==_?l:t}function sx(l,h,p){var _=h(l);return it(l)?_:Xs(_,p(l))}function or(l){return l==null?l===t?En:be:Xo&&Xo in Jt(l)?SP(l):zP(l)}function _g(l,h){return l>h}function WA(l,h){return l!=null&&Vt.call(l,h)}function jA(l,h){return l!=null&&h in Jt(l)}function HA(l,h,p){return l>=Jn(h,p)&&l<zn(h,p)}function vg(l,h,p){for(var _=p?tg:fh,w=l[0].length,P=l.length,D=P,j=te(P),K=1/0,he=[];D--;){var fe=l[D];D&&h&&(fe=sn(fe,Pr(h))),K=Jn(fe.length,K),j[D]=!p&&(h||w>=120&&fe.length>=120)?new Ko(D&&fe):t}fe=l[0];var de=-1,ve=j[0];e:for(;++de<w&&he.length<K;){var Me=fe[de],We=h?h(Me):Me;if(Me=p||Me!==0?Me:0,!(ve?mu(ve,We):_(he,We,p))){for(D=P;--D;){var mt=j[D];if(!(mt?mu(mt,We):_(l[D],We,p)))continue e}ve&&ve.push(We),he.push(Me)}}return he}function VA(l,h,p,_){return zi(l,function(w,P,D){h(_,p(w),P,D)}),_}function Cu(l,h,p){h=Qs(h,l),l=Hx(l,h);var _=l==null?l:l[Bi(Zr(h))];return _==null?t:Ar(_,l,p)}function ox(l){return vn(l)&&or(l)==Oe}function XA(l){return vn(l)&&or(l)==Et}function YA(l){return vn(l)&&or(l)==Te}function Su(l,h,p,_,w){return l===h?!0:l==null||h==null||!vn(l)&&!vn(h)?l!==l&&h!==h:KA(l,h,p,_,Su,w)}function KA(l,h,p,_,w,P){var D=it(l),j=it(h),K=D?dt:Qn(l),he=j?dt:Qn(h);K=K==Oe?ke:K,he=he==Oe?ke:he;var fe=K==ke,de=he==ke,ve=K==he;if(ve&&to(l)){if(!to(h))return!1;D=!0,fe=!1}if(ve&&!fe)return P||(P=new fi),D||al(l)?$x(l,h,p,_,w,P):EP(l,h,K,p,_,w,P);if(!(p&m)){var Me=fe&&Vt.call(l,"__wrapped__"),We=de&&Vt.call(h,"__wrapped__");if(Me||We){var mt=Me?l.value():l,je=We?h.value():h;return P||(P=new fi),w(mt,je,p,_,P)}}return ve?(P||(P=new fi),CP(l,h,p,_,w,P)):!1}function ZA(l){return vn(l)&&Qn(l)==ge}function xg(l,h,p,_){var w=p.length,P=w,D=!_;if(l==null)return!P;for(l=Jt(l);w--;){var j=p[w];if(D&&j[2]?j[1]!==l[j[0]]:!(j[0]in l))return!1}for(;++w<P;){j=p[w];var K=j[0],he=l[K],fe=j[1];if(D&&j[2]){if(he===t&&!(K in l))return!1}else{var de=new fi;if(_)var ve=_(he,fe,K,l,h,de);if(!(ve===t?Su(fe,he,m|v,_,de):ve))return!1}}return!0}function ax(l){if(!fn(l)||LP(l))return!1;var h=vs(l)?ZI:wt;return h.test(ea(l))}function JA(l){return vn(l)&&or(l)==gt}function QA(l){return vn(l)&&Qn(l)==k}function eP(l){return vn(l)&&Xh(l.length)&&!!nn[or(l)]}function lx(l){return typeof l=="function"?l:l==null?vr:typeof l=="object"?it(l)?hx(l[0],l[1]):cx(l):P1(l)}function wg(l){if(!Iu(l))return rA(l);var h=[];for(var p in Jt(l))Vt.call(l,p)&&p!="constructor"&&h.push(p);return h}function tP(l){if(!fn(l))return NP(l);var h=Iu(l),p=[];for(var _ in l)_=="constructor"&&(h||!Vt.call(l,_))||p.push(_);return p}function bg(l,h){return l<h}function ux(l,h){var p=-1,_=yr(l)?te(l.length):[];return Zs(l,function(w,P,D){_[++p]=h(w,P,D)}),_}function cx(l){var h=Ng(l);return h.length==1&&h[0][2]?Wx(h[0][0],h[0][1]):function(p){return p===l||xg(p,l,h)}}function hx(l,h){return $g(l)&&qx(h)?Wx(Bi(l),h):function(p){var _=Yg(p,l);return _===t&&_===h?Kg(p,l):Su(h,_,m|v)}}function Oh(l,h,p,_,w){l!==h&&mg(h,function(P,D){if(w||(w=new fi),fn(P))nP(l,h,D,p,Oh,_,w);else{var j=_?_(Ug(l,D),P,D+"",l,h,w):t;j===t&&(j=P),pg(l,D,j)}},_r)}function nP(l,h,p,_,w,P,D){var j=Ug(l,p),K=Ug(h,p),he=D.get(K);if(he){pg(l,p,he);return}var fe=P?P(j,K,p+"",l,h,D):t,de=fe===t;if(de){var ve=it(K),Me=!ve&&to(K),We=!ve&&!Me&&al(K);fe=K,ve||Me||We?it(j)?fe=j:Sn(j)?fe=mr(j):Me?(de=!1,fe=Ex(K,!0)):We?(de=!1,fe=Cx(K,!0)):fe=[]:Pu(K)||ta(K)?(fe=j,ta(j)?fe=x1(j):(!fn(j)||vs(j))&&(fe=Gx(K))):de=!1}de&&(D.set(K,fe),w(fe,K,_,P,D),D.delete(K)),pg(l,p,fe)}function fx(l,h){var p=l.length;if(p)return h+=h<0?p:0,_s(h,p)?l[h]:t}function dx(l,h,p){h.length?h=sn(h,function(P){return it(P)?function(D){return Jo(D,P.length===1?P[0]:P)}:P}):h=[vr];var _=-1;h=sn(h,Pr(qe()));var w=ux(l,function(P,D,j){var K=sn(h,function(he){return he(P)});return{criteria:K,index:++_,value:P}});return AI(w,function(P,D){return gP(P,D,p)})}function rP(l,h){return px(l,h,function(p,_){return Kg(l,_)})}function px(l,h,p){for(var _=-1,w=h.length,P={};++_<w;){var D=h[_],j=Jo(l,D);p(j,D)&&Tu(P,Qs(D,l),j)}return P}function iP(l){return function(h){return Jo(h,l)}}function Eg(l,h,p,_){var w=_?II:Ka,P=-1,D=h.length,j=l;for(l===h&&(h=mr(h)),p&&(j=sn(l,Pr(p)));++P<D;)for(var K=0,he=h[P],fe=p?p(he):he;(K=w(j,fe,K,_))>-1;)j!==l&&bh.call(j,K,1),bh.call(l,K,1);return l}function gx(l,h){for(var p=l?h.length:0,_=p-1;p--;){var w=h[p];if(p==_||w!==P){var P=w;_s(w)?bh.call(l,w,1):Rg(l,w)}}return l}function Cg(l,h){return l+Sh(Yv()*(h-l+1))}function sP(l,h,p,_){for(var w=-1,P=zn(Ch((h-l)/(p||1)),0),D=te(P);P--;)D[_?P:++w]=l,l+=p;return D}function Sg(l,h){var p="";if(!l||h<1||h>V)return p;do h%2&&(p+=l),h=Sh(h/2),h&&(l+=l);while(h);return p}function vt(l,h){return Gg(jx(l,h,vr),l+"")}function oP(l){return Jv(ll(l))}function aP(l,h){var p=ll(l);return Gh(p,Zo(h,0,p.length))}function Tu(l,h,p,_){if(!fn(l))return l;h=Qs(h,l);for(var w=-1,P=h.length,D=P-1,j=l;j!=null&&++w<P;){var K=Bi(h[w]),he=p;if(K==="__proto__"||K==="constructor"||K==="prototype")return l;if(w!=D){var fe=j[K];he=_?_(fe,K,j):t,he===t&&(he=fn(fe)?fe:_s(h[w+1])?[]:{})}bu(j,K,he),j=j[K]}return l}var mx=Th?function(l,h){return Th.set(l,h),l}:vr,lP=Eh?function(l,h){return Eh(l,"toString",{configurable:!0,enumerable:!1,value:Jg(h),writable:!0})}:vr;function uP(l){return Gh(ll(l))}function Kr(l,h,p){var _=-1,w=l.length;h<0&&(h=-h>w?0:w+h),p=p>w?w:p,p<0&&(p+=w),w=h>p?0:p-h>>>0,h>>>=0;for(var P=te(w);++_<w;)P[_]=l[_+h];return P}function cP(l,h){var p;return Zs(l,function(_,w,P){return p=h(_,w,P),!p}),!!p}function Lh(l,h,p){var _=0,w=l==null?_:l.length;if(typeof h=="number"&&h===h&&w<=Fe){for(;_<w;){var P=_+w>>>1,D=l[P];D!==null&&!Or(D)&&(p?D<=h:D<h)?_=P+1:w=P}return w}return Tg(l,h,vr,p)}function Tg(l,h,p,_){var w=0,P=l==null?0:l.length;if(P===0)return 0;h=p(h);for(var D=h!==h,j=h===null,K=Or(h),he=h===t;w<P;){var fe=Sh((w+P)/2),de=p(l[fe]),ve=de!==t,Me=de===null,We=de===de,mt=Or(de);if(D)var je=_||We;else he?je=We&&(_||ve):j?je=We&&ve&&(_||!Me):K?je=We&&ve&&!Me&&(_||!mt):Me||mt?je=!1:je=_?de<=h:de<h;je?w=fe+1:P=fe}return Jn(P,ce)}function yx(l,h){for(var p=-1,_=l.length,w=0,P=[];++p<_;){var D=l[p],j=h?h(D):D;if(!p||!di(j,K)){var K=j;P[w++]=D===0?0:D}}return P}function _x(l){return typeof l=="number"?l:Or(l)?re:+l}function Mr(l){if(typeof l=="string")return l;if(it(l))return sn(l,Mr)+"";if(Or(l))return Kv?Kv.call(l):"";var h=l+"";return h=="0"&&1/l==-q?"-0":h}function Js(l,h,p){var _=-1,w=fh,P=l.length,D=!0,j=[],K=j;if(p)D=!1,w=tg;else if(P>=i){var he=h?null:wP(l);if(he)return ph(he);D=!1,w=mu,K=new Ko}else K=h?[]:j;e:for(;++_<P;){var fe=l[_],de=h?h(fe):fe;if(fe=p||fe!==0?fe:0,D&&de===de){for(var ve=K.length;ve--;)if(K[ve]===de)continue e;h&&K.push(de),j.push(fe)}else w(K,de,p)||(K!==j&&K.push(de),j.push(fe))}return j}function Rg(l,h){return h=Qs(h,l),l=Hx(l,h),l==null||delete l[Bi(Zr(h))]}function vx(l,h,p,_){return Tu(l,h,p(Jo(l,h)),_)}function kh(l,h,p,_){for(var w=l.length,P=_?w:-1;(_?P--:++P<w)&&h(l[P],P,l););return p?Kr(l,_?0:P,_?P+1:w):Kr(l,_?P+1:0,_?w:P)}function xx(l,h){var p=l;return p instanceof St&&(p=p.value()),ng(h,function(_,w){return w.func.apply(w.thisArg,Xs([_],w.args))},p)}function Ig(l,h,p){var _=l.length;if(_<2)return _?Js(l[0]):[];for(var w=-1,P=te(_);++w<_;)for(var D=l[w],j=-1;++j<_;)j!=w&&(P[w]=Eu(P[w]||D,l[j],h,p));return Js(Yn(P,1),h,p)}function wx(l,h,p){for(var _=-1,w=l.length,P=h.length,D={};++_<w;){var j=_<P?h[_]:t;p(D,l[_],j)}return D}function Ag(l){return Sn(l)?l:[]}function Pg(l){return typeof l=="function"?l:vr}function Qs(l,h){return it(l)?l:$g(l,h)?[l]:Kx(qt(l))}var hP=vt;function eo(l,h,p){var _=l.length;return p=p===t?_:p,!h&&p>=_?l:Kr(l,h,p)}var bx=JI||function(l){return Xn.clearTimeout(l)};function Ex(l,h){if(h)return l.slice();var p=l.length,_=Wv?Wv(p):new l.constructor(p);return l.copy(_),_}function Mg(l){var h=new l.constructor(l.byteLength);return new xh(h).set(new xh(l)),h}function fP(l,h){var p=h?Mg(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.byteLength)}function dP(l){var h=new l.constructor(l.source,J.exec(l));return h.lastIndex=l.lastIndex,h}function pP(l){return wu?Jt(wu.call(l)):{}}function Cx(l,h){var p=h?Mg(l.buffer):l.buffer;return new l.constructor(p,l.byteOffset,l.length)}function Sx(l,h){if(l!==h){var p=l!==t,_=l===null,w=l===l,P=Or(l),D=h!==t,j=h===null,K=h===h,he=Or(h);if(!j&&!he&&!P&&l>h||P&&D&&K&&!j&&!he||_&&D&&K||!p&&K||!w)return 1;if(!_&&!P&&!he&&l<h||he&&p&&w&&!_&&!P||j&&p&&w||!D&&w||!K)return-1}return 0}function gP(l,h,p){for(var _=-1,w=l.criteria,P=h.criteria,D=w.length,j=p.length;++_<D;){var K=Sx(w[_],P[_]);if(K){if(_>=j)return K;var he=p[_];return K*(he=="desc"?-1:1)}}return l.index-h.index}function Tx(l,h,p,_){for(var w=-1,P=l.length,D=p.length,j=-1,K=h.length,he=zn(P-D,0),fe=te(K+he),de=!_;++j<K;)fe[j]=h[j];for(;++w<D;)(de||w<P)&&(fe[p[w]]=l[w]);for(;he--;)fe[j++]=l[w++];return fe}function Rx(l,h,p,_){for(var w=-1,P=l.length,D=-1,j=p.length,K=-1,he=h.length,fe=zn(P-j,0),de=te(fe+he),ve=!_;++w<fe;)de[w]=l[w];for(var Me=w;++K<he;)de[Me+K]=h[K];for(;++D<j;)(ve||w<P)&&(de[Me+p[D]]=l[w++]);return de}function mr(l,h){var p=-1,_=l.length;for(h||(h=te(_));++p<_;)h[p]=l[p];return h}function $i(l,h,p,_){var w=!p;p||(p={});for(var P=-1,D=h.length;++P<D;){var j=h[P],K=_?_(p[j],l[j],j,p,l):t;K===t&&(K=l[j]),w?gs(p,j,K):bu(p,j,K)}return p}function mP(l,h){return $i(l,zg(l),h)}function yP(l,h){return $i(l,Bx(l),h)}function Fh(l,h){return function(p,_){var w=it(p)?bI:$A,P=h?h():{};return w(p,l,qe(_,2),P)}}function il(l){return vt(function(h,p){var _=-1,w=p.length,P=w>1?p[w-1]:t,D=w>2?p[2]:t;for(P=l.length>3&&typeof P=="function"?(w--,P):t,D&&ar(p[0],p[1],D)&&(P=w<3?t:P,w=1),h=Jt(h);++_<w;){var j=p[_];j&&l(h,j,_,P)}return h})}function Ix(l,h){return function(p,_){if(p==null)return p;if(!yr(p))return l(p,_);for(var w=p.length,P=h?w:-1,D=Jt(p);(h?P--:++P<w)&&_(D[P],P,D)!==!1;);return p}}function Ax(l){return function(h,p,_){for(var w=-1,P=Jt(h),D=_(h),j=D.length;j--;){var K=D[l?j:++w];if(p(P[K],K,P)===!1)break}return h}}function _P(l,h,p){var _=h&x,w=Ru(l);function P(){var D=this&&this!==Xn&&this instanceof P?w:l;return D.apply(_?p:this,arguments)}return P}function Px(l){return function(h){h=qt(h);var p=Za(h)?hi(h):t,_=p?p[0]:h.charAt(0),w=p?eo(p,1).join(""):h.slice(1);return _[l]()+w}}function sl(l){return function(h){return ng(I1(R1(h).replace(lI,"")),l,"")}}function Ru(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var p=rl(l.prototype),_=l.apply(p,h);return fn(_)?_:p}}function vP(l,h,p){var _=Ru(l);function w(){for(var P=arguments.length,D=te(P),j=P,K=ol(w);j--;)D[j]=arguments[j];var he=P<3&&D[0]!==K&&D[P-1]!==K?[]:Ys(D,K);if(P-=he.length,P<p)return Fx(l,h,Dh,w.placeholder,t,D,he,t,t,p-P);var fe=this&&this!==Xn&&this instanceof w?_:l;return Ar(fe,this,D)}return w}function Mx(l){return function(h,p,_){var w=Jt(h);if(!yr(h)){var P=qe(p,3);h=qn(h),p=function(j){return P(w[j],j,w)}}var D=l(h,p,_);return D>-1?w[P?h[D]:D]:t}}function Ox(l){return ys(function(h){var p=h.length,_=p,w=Xr.prototype.thru;for(l&&h.reverse();_--;){var P=h[_];if(typeof P!="function")throw new Vr(o);if(w&&!D&&Bh(P)=="wrapper")var D=new Xr([],!0)}for(_=D?_:p;++_<p;){P=h[_];var j=Bh(P),K=j=="wrapper"?Dg(P):t;K&&Bg(K[0])&&K[1]==(O|T|R|$)&&!K[4].length&&K[9]==1?D=D[Bh(K[0])].apply(D,K[3]):D=P.length==1&&Bg(P)?D[j]():D.thru(P)}return function(){var he=arguments,fe=he[0];if(D&&he.length==1&&it(fe))return D.plant(fe).value();for(var de=0,ve=p?h[de].apply(this,he):fe;++de<p;)ve=h[de].call(this,ve);return ve}})}function Dh(l,h,p,_,w,P,D,j,K,he){var fe=h&O,de=h&x,ve=h&b,Me=h&(T|C),We=h&L,mt=ve?t:Ru(l);function je(){for(var bt=arguments.length,At=te(bt),Lr=bt;Lr--;)At[Lr]=arguments[Lr];if(Me)var lr=ol(je),kr=MI(At,lr);if(_&&(At=Tx(At,_,w,Me)),P&&(At=Rx(At,P,D,Me)),bt-=kr,Me&&bt<he){var Tn=Ys(At,lr);return Fx(l,h,Dh,je.placeholder,p,At,Tn,j,K,he-bt)}var pi=de?p:this,ws=ve?pi[l]:l;return bt=At.length,j?At=$P(At,j):We&&bt>1&&At.reverse(),fe&&K<bt&&(At.length=K),this&&this!==Xn&&this instanceof je&&(ws=mt||Ru(ws)),ws.apply(pi,At)}return je}function Lx(l,h){return function(p,_){return VA(p,l,h(_),{})}}function Nh(l,h){return function(p,_){var w;if(p===t&&_===t)return h;if(p!==t&&(w=p),_!==t){if(w===t)return _;typeof p=="string"||typeof _=="string"?(p=Mr(p),_=Mr(_)):(p=_x(p),_=_x(_)),w=l(p,_)}return w}}function Og(l){return ys(function(h){return h=sn(h,Pr(qe())),vt(function(p){var _=this;return l(h,function(w){return Ar(w,_,p)})})})}function zh(l,h){h=h===t?" ":Mr(h);var p=h.length;if(p<2)return p?Sg(h,l):h;var _=Sg(h,Ch(l/Ja(h)));return Za(h)?eo(hi(_),0,l).join(""):_.slice(0,l)}function xP(l,h,p,_){var w=h&x,P=Ru(l);function D(){for(var j=-1,K=arguments.length,he=-1,fe=_.length,de=te(fe+K),ve=this&&this!==Xn&&this instanceof D?P:l;++he<fe;)de[he]=_[he];for(;K--;)de[he++]=arguments[++j];return Ar(ve,w?p:this,de)}return D}function kx(l){return function(h,p,_){return _&&typeof _!="number"&&ar(h,p,_)&&(p=_=t),h=xs(h),p===t?(p=h,h=0):p=xs(p),_=_===t?h<p?1:-1:xs(_),sP(h,p,_,l)}}function $h(l){return function(h,p){return typeof h=="string"&&typeof p=="string"||(h=Jr(h),p=Jr(p)),l(h,p)}}function Fx(l,h,p,_,w,P,D,j,K,he){var fe=h&T,de=fe?D:t,ve=fe?t:D,Me=fe?P:t,We=fe?t:P;h|=fe?R:F,h&=~(fe?F:R),h&E||(h&=-4);var mt=[l,h,w,Me,de,We,ve,j,K,he],je=p.apply(t,mt);return Bg(l)&&Vx(je,mt),je.placeholder=_,Xx(je,l,h)}function Lg(l){var h=Nn[l];return function(p,_){if(p=Jr(p),_=_==null?0:Jn(ut(_),292),_&&Xv(p)){var w=(qt(p)+"e").split("e"),P=h(w[0]+"e"+(+w[1]+_));return w=(qt(P)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return h(p)}}var wP=tl&&1/ph(new tl([,-0]))[1]==q?function(l){return new tl(l)}:tm;function Dx(l){return function(h){var p=Qn(h);return p==ge?ug(h):p==k?zI(h):PI(h,l(h))}}function ms(l,h,p,_,w,P,D,j){var K=h&b;if(!K&&typeof l!="function")throw new Vr(o);var he=_?_.length:0;if(he||(h&=-97,_=w=t),D=D===t?D:zn(ut(D),0),j=j===t?j:ut(j),he-=w?w.length:0,h&F){var fe=_,de=w;_=w=t}var ve=K?t:Dg(l),Me=[l,h,p,_,w,fe,de,P,D,j];if(ve&&DP(Me,ve),l=Me[0],h=Me[1],p=Me[2],_=Me[3],w=Me[4],j=Me[9]=Me[9]===t?K?0:l.length:zn(Me[9]-he,0),!j&&h&(T|C)&&(h&=-25),!h||h==x)var We=_P(l,h,p);else h==T||h==C?We=vP(l,h,j):(h==R||h==(x|R))&&!w.length?We=xP(l,h,p,_):We=Dh.apply(t,Me);var mt=ve?mx:Vx;return Xx(mt(We,Me),l,h)}function Nx(l,h,p,_){return l===t||di(l,el[p])&&!Vt.call(_,p)?h:l}function zx(l,h,p,_,w,P){return fn(l)&&fn(h)&&(P.set(h,l),Oh(l,h,t,zx,P),P.delete(h)),l}function bP(l){return Pu(l)?t:l}function $x(l,h,p,_,w,P){var D=p&m,j=l.length,K=h.length;if(j!=K&&!(D&&K>j))return!1;var he=P.get(l),fe=P.get(h);if(he&&fe)return he==h&&fe==l;var de=-1,ve=!0,Me=p&v?new Ko:t;for(P.set(l,h),P.set(h,l);++de<j;){var We=l[de],mt=h[de];if(_)var je=D?_(mt,We,de,h,l,P):_(We,mt,de,l,h,P);if(je!==t){if(je)continue;ve=!1;break}if(Me){if(!rg(h,function(bt,At){if(!mu(Me,At)&&(We===bt||w(We,bt,p,_,P)))return Me.push(At)})){ve=!1;break}}else if(!(We===mt||w(We,mt,p,_,P))){ve=!1;break}}return P.delete(l),P.delete(h),ve}function EP(l,h,p,_,w,P,D){switch(p){case He:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case Et:return!(l.byteLength!=h.byteLength||!P(new xh(l),new xh(h)));case Ie:case Te:case $e:return di(+l,+h);case Gt:return l.name==h.name&&l.message==h.message;case gt:case Qe:return l==h+"";case ge:var j=ug;case k:var K=_&m;if(j||(j=ph),l.size!=h.size&&!K)return!1;var he=D.get(l);if(he)return he==h;_|=v,D.set(l,h);var fe=$x(j(l),j(h),_,w,P,D);return D.delete(l),fe;case Be:if(wu)return wu.call(l)==wu.call(h)}return!1}function CP(l,h,p,_,w,P){var D=p&m,j=kg(l),K=j.length,he=kg(h),fe=he.length;if(K!=fe&&!D)return!1;for(var de=K;de--;){var ve=j[de];if(!(D?ve in h:Vt.call(h,ve)))return!1}var Me=P.get(l),We=P.get(h);if(Me&&We)return Me==h&&We==l;var mt=!0;P.set(l,h),P.set(h,l);for(var je=D;++de<K;){ve=j[de];var bt=l[ve],At=h[ve];if(_)var Lr=D?_(At,bt,ve,h,l,P):_(bt,At,ve,l,h,P);if(!(Lr===t?bt===At||w(bt,At,p,_,P):Lr)){mt=!1;break}je||(je=ve=="constructor")}if(mt&&!je){var lr=l.constructor,kr=h.constructor;lr!=kr&&"constructor"in l&&"constructor"in h&&!(typeof lr=="function"&&lr instanceof lr&&typeof kr=="function"&&kr instanceof kr)&&(mt=!1)}return P.delete(l),P.delete(h),mt}function ys(l){return Gg(jx(l,t,e1),l+"")}function kg(l){return sx(l,qn,zg)}function Fg(l){return sx(l,_r,Bx)}var Dg=Th?function(l){return Th.get(l)}:tm;function Bh(l){for(var h=l.name+"",p=nl[h],_=Vt.call(nl,h)?p.length:0;_--;){var w=p[_],P=w.func;if(P==null||P==l)return w.name}return h}function ol(l){var h=Vt.call(I,"placeholder")?I:l;return h.placeholder}function qe(){var l=I.iteratee||Qg;return l=l===Qg?lx:l,arguments.length?l(arguments[0],arguments[1]):l}function Uh(l,h){var p=l.__data__;return OP(h)?p[typeof h=="string"?"string":"hash"]:p.map}function Ng(l){for(var h=qn(l),p=h.length;p--;){var _=h[p],w=l[_];h[p]=[_,w,qx(w)]}return h}function Qo(l,h){var p=FI(l,h);return ax(p)?p:t}function SP(l){var h=Vt.call(l,Xo),p=l[Xo];try{l[Xo]=t;var _=!0}catch{}var w=_h.call(l);return _&&(h?l[Xo]=p:delete l[Xo]),w}var zg=hg?function(l){return l==null?[]:(l=Jt(l),Vs(hg(l),function(h){return Hv.call(l,h)}))}:nm,Bx=hg?function(l){for(var h=[];l;)Xs(h,zg(l)),l=wh(l);return h}:nm,Qn=or;(fg&&Qn(new fg(new ArrayBuffer(1)))!=He||_u&&Qn(new _u)!=ge||dg&&Qn(dg.resolve())!=Ze||tl&&Qn(new tl)!=k||vu&&Qn(new vu)!=Ht)&&(Qn=function(l){var h=or(l),p=h==ke?l.constructor:t,_=p?ea(p):"";if(_)switch(_){case aA:return He;case lA:return ge;case uA:return Ze;case cA:return k;case hA:return Ht}return h});function TP(l,h,p){for(var _=-1,w=p.length;++_<w;){var P=p[_],D=P.size;switch(P.type){case"drop":l+=D;break;case"dropRight":h-=D;break;case"take":h=Jn(h,l+D);break;case"takeRight":l=zn(l,h-D);break}}return{start:l,end:h}}function RP(l){var h=l.match(li);return h?h[1].split(ui):[]}function Ux(l,h,p){h=Qs(h,l);for(var _=-1,w=h.length,P=!1;++_<w;){var D=Bi(h[_]);if(!(P=l!=null&&p(l,D)))break;l=l[D]}return P||++_!=w?P:(w=l==null?0:l.length,!!w&&Xh(w)&&_s(D,w)&&(it(l)||ta(l)))}function IP(l){var h=l.length,p=new l.constructor(h);return h&&typeof l[0]=="string"&&Vt.call(l,"index")&&(p.index=l.index,p.input=l.input),p}function Gx(l){return typeof l.constructor=="function"&&!Iu(l)?rl(wh(l)):{}}function AP(l,h,p){var _=l.constructor;switch(h){case Et:return Mg(l);case Ie:case Te:return new _(+l);case He:return fP(l,p);case Pe:case Le:case Ce:case xt:case Ue:case Ge:case et:case Rt:case Kt:return Cx(l,p);case ge:return new _;case $e:case Qe:return new _(l);case gt:return dP(l);case k:return new _;case Be:return pP(l)}}function PP(l,h){var p=h.length;if(!p)return l;var _=p-1;return h[_]=(p>1?"& ":"")+h[_],h=h.join(p>2?", ":" "),l.replace(Ni,`{
/* [wrapped with `+h+`] */
`)}function MP(l){return it(l)||ta(l)||!!(Vv&&l&&l[Vv])}function _s(l,h){var p=typeof l;return h=h??V,!!h&&(p=="number"||p!="symbol"&&_t.test(l))&&l>-1&&l%1==0&&l<h}function ar(l,h,p){if(!fn(p))return!1;var _=typeof h;return(_=="number"?yr(p)&&_s(h,p.length):_=="string"&&h in p)?di(p[h],l):!1}function $g(l,h){if(it(l))return!1;var p=typeof l;return p=="number"||p=="symbol"||p=="boolean"||l==null||Or(l)?!0:Zt.test(l)||!yn.test(l)||h!=null&&l in Jt(h)}function OP(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function Bg(l){var h=Bh(l),p=I[h];if(typeof p!="function"||!(h in St.prototype))return!1;if(l===p)return!0;var _=Dg(p);return!!_&&l===_[0]}function LP(l){return!!qv&&qv in l}var kP=mh?vs:rm;function Iu(l){var h=l&&l.constructor,p=typeof h=="function"&&h.prototype||el;return l===p}function qx(l){return l===l&&!fn(l)}function Wx(l,h){return function(p){return p==null?!1:p[l]===h&&(h!==t||l in Jt(p))}}function FP(l){var h=Hh(l,function(_){return p.size===c&&p.clear(),_}),p=h.cache;return h}function DP(l,h){var p=l[1],_=h[1],w=p|_,P=w<(x|b|O),D=_==O&&p==T||_==O&&p==$&&l[7].length<=h[8]||_==(O|$)&&h[7].length<=h[8]&&p==T;if(!(P||D))return l;_&x&&(l[2]=h[2],w|=p&x?0:E);var j=h[3];if(j){var K=l[3];l[3]=K?Tx(K,j,h[4]):j,l[4]=K?Ys(l[3],f):h[4]}return j=h[5],j&&(K=l[5],l[5]=K?Rx(K,j,h[6]):j,l[6]=K?Ys(l[5],f):h[6]),j=h[7],j&&(l[7]=j),_&O&&(l[8]=l[8]==null?h[8]:Jn(l[8],h[8])),l[9]==null&&(l[9]=h[9]),l[0]=h[0],l[1]=w,l}function NP(l){var h=[];if(l!=null)for(var p in Jt(l))h.push(p);return h}function zP(l){return _h.call(l)}function jx(l,h,p){return h=zn(h===t?l.length-1:h,0),function(){for(var _=arguments,w=-1,P=zn(_.length-h,0),D=te(P);++w<P;)D[w]=_[h+w];w=-1;for(var j=te(h+1);++w<h;)j[w]=_[w];return j[h]=p(D),Ar(l,this,j)}}function Hx(l,h){return h.length<2?l:Jo(l,Kr(h,0,-1))}function $P(l,h){for(var p=l.length,_=Jn(h.length,p),w=mr(l);_--;){var P=h[_];l[_]=_s(P,p)?w[P]:t}return l}function Ug(l,h){if(!(h==="constructor"&&typeof l[h]=="function")&&h!="__proto__")return l[h]}var Vx=Yx(mx),Au=eA||function(l,h){return Xn.setTimeout(l,h)},Gg=Yx(lP);function Xx(l,h,p){var _=h+"";return Gg(l,PP(_,BP(RP(_),p)))}function Yx(l){var h=0,p=0;return function(){var _=iA(),w=H-(_-p);if(p=_,w>0){if(++h>=z)return arguments[0]}else h=0;return l.apply(t,arguments)}}function Gh(l,h){var p=-1,_=l.length,w=_-1;for(h=h===t?_:h;++p<h;){var P=Cg(p,w),D=l[P];l[P]=l[p],l[p]=D}return l.length=h,l}var Kx=FP(function(l){var h=[];return l.charCodeAt(0)===46&&h.push(""),l.replace(Dn,function(p,_,w,P){h.push(w?P.replace(gr,"$1"):_||p)}),h});function Bi(l){if(typeof l=="string"||Or(l))return l;var h=l+"";return h=="0"&&1/l==-q?"-0":h}function ea(l){if(l!=null){try{return yh.call(l)}catch{}try{return l+""}catch{}}return""}function BP(l,h){return Hr(le,function(p){var _="_."+p[0];h&p[1]&&!fh(l,_)&&l.push(_)}),l.sort()}function Zx(l){if(l instanceof St)return l.clone();var h=new Xr(l.__wrapped__,l.__chain__);return h.__actions__=mr(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}function UP(l,h,p){(p?ar(l,h,p):h===t)?h=1:h=zn(ut(h),0);var _=l==null?0:l.length;if(!_||h<1)return[];for(var w=0,P=0,D=te(Ch(_/h));w<_;)D[P++]=Kr(l,w,w+=h);return D}function GP(l){for(var h=-1,p=l==null?0:l.length,_=0,w=[];++h<p;){var P=l[h];P&&(w[_++]=P)}return w}function qP(){var l=arguments.length;if(!l)return[];for(var h=te(l-1),p=arguments[0],_=l;_--;)h[_-1]=arguments[_];return Xs(it(p)?mr(p):[p],Yn(h,1))}var WP=vt(function(l,h){return Sn(l)?Eu(l,Yn(h,1,Sn,!0)):[]}),jP=vt(function(l,h){var p=Zr(h);return Sn(p)&&(p=t),Sn(l)?Eu(l,Yn(h,1,Sn,!0),qe(p,2)):[]}),HP=vt(function(l,h){var p=Zr(h);return Sn(p)&&(p=t),Sn(l)?Eu(l,Yn(h,1,Sn,!0),t,p):[]});function VP(l,h,p){var _=l==null?0:l.length;return _?(h=p||h===t?1:ut(h),Kr(l,h<0?0:h,_)):[]}function XP(l,h,p){var _=l==null?0:l.length;return _?(h=p||h===t?1:ut(h),h=_-h,Kr(l,0,h<0?0:h)):[]}function YP(l,h){return l&&l.length?kh(l,qe(h,3),!0,!0):[]}function KP(l,h){return l&&l.length?kh(l,qe(h,3),!0):[]}function ZP(l,h,p,_){var w=l==null?0:l.length;return w?(p&&typeof p!="number"&&ar(l,h,p)&&(p=0,_=w),qA(l,h,p,_)):[]}function Jx(l,h,p){var _=l==null?0:l.length;if(!_)return-1;var w=p==null?0:ut(p);return w<0&&(w=zn(_+w,0)),dh(l,qe(h,3),w)}function Qx(l,h,p){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return p!==t&&(w=ut(p),w=p<0?zn(_+w,0):Jn(w,_-1)),dh(l,qe(h,3),w,!0)}function e1(l){var h=l==null?0:l.length;return h?Yn(l,1):[]}function JP(l){var h=l==null?0:l.length;return h?Yn(l,q):[]}function QP(l,h){var p=l==null?0:l.length;return p?(h=h===t?1:ut(h),Yn(l,h)):[]}function eM(l){for(var h=-1,p=l==null?0:l.length,_={};++h<p;){var w=l[h];_[w[0]]=w[1]}return _}function t1(l){return l&&l.length?l[0]:t}function tM(l,h,p){var _=l==null?0:l.length;if(!_)return-1;var w=p==null?0:ut(p);return w<0&&(w=zn(_+w,0)),Ka(l,h,w)}function nM(l){var h=l==null?0:l.length;return h?Kr(l,0,-1):[]}var rM=vt(function(l){var h=sn(l,Ag);return h.length&&h[0]===l[0]?vg(h):[]}),iM=vt(function(l){var h=Zr(l),p=sn(l,Ag);return h===Zr(p)?h=t:p.pop(),p.length&&p[0]===l[0]?vg(p,qe(h,2)):[]}),sM=vt(function(l){var h=Zr(l),p=sn(l,Ag);return h=typeof h=="function"?h:t,h&&p.pop(),p.length&&p[0]===l[0]?vg(p,t,h):[]});function oM(l,h){return l==null?"":nA.call(l,h)}function Zr(l){var h=l==null?0:l.length;return h?l[h-1]:t}function aM(l,h,p){var _=l==null?0:l.length;if(!_)return-1;var w=_;return p!==t&&(w=ut(p),w=w<0?zn(_+w,0):Jn(w,_-1)),h===h?BI(l,h,w):dh(l,Fv,w,!0)}function lM(l,h){return l&&l.length?fx(l,ut(h)):t}var uM=vt(n1);function n1(l,h){return l&&l.length&&h&&h.length?Eg(l,h):l}function cM(l,h,p){return l&&l.length&&h&&h.length?Eg(l,h,qe(p,2)):l}function hM(l,h,p){return l&&l.length&&h&&h.length?Eg(l,h,t,p):l}var fM=ys(function(l,h){var p=l==null?0:l.length,_=gg(l,h);return gx(l,sn(h,function(w){return _s(w,p)?+w:w}).sort(Sx)),_});function dM(l,h){var p=[];if(!(l&&l.length))return p;var _=-1,w=[],P=l.length;for(h=qe(h,3);++_<P;){var D=l[_];h(D,_,l)&&(p.push(D),w.push(_))}return gx(l,w),p}function qg(l){return l==null?l:oA.call(l)}function pM(l,h,p){var _=l==null?0:l.length;return _?(p&&typeof p!="number"&&ar(l,h,p)?(h=0,p=_):(h=h==null?0:ut(h),p=p===t?_:ut(p)),Kr(l,h,p)):[]}function gM(l,h){return Lh(l,h)}function mM(l,h,p){return Tg(l,h,qe(p,2))}function yM(l,h){var p=l==null?0:l.length;if(p){var _=Lh(l,h);if(_<p&&di(l[_],h))return _}return-1}function _M(l,h){return Lh(l,h,!0)}function vM(l,h,p){return Tg(l,h,qe(p,2),!0)}function xM(l,h){var p=l==null?0:l.length;if(p){var _=Lh(l,h,!0)-1;if(di(l[_],h))return _}return-1}function wM(l){return l&&l.length?yx(l):[]}function bM(l,h){return l&&l.length?yx(l,qe(h,2)):[]}function EM(l){var h=l==null?0:l.length;return h?Kr(l,1,h):[]}function CM(l,h,p){return l&&l.length?(h=p||h===t?1:ut(h),Kr(l,0,h<0?0:h)):[]}function SM(l,h,p){var _=l==null?0:l.length;return _?(h=p||h===t?1:ut(h),h=_-h,Kr(l,h<0?0:h,_)):[]}function TM(l,h){return l&&l.length?kh(l,qe(h,3),!1,!0):[]}function RM(l,h){return l&&l.length?kh(l,qe(h,3)):[]}var IM=vt(function(l){return Js(Yn(l,1,Sn,!0))}),AM=vt(function(l){var h=Zr(l);return Sn(h)&&(h=t),Js(Yn(l,1,Sn,!0),qe(h,2))}),PM=vt(function(l){var h=Zr(l);return h=typeof h=="function"?h:t,Js(Yn(l,1,Sn,!0),t,h)});function MM(l){return l&&l.length?Js(l):[]}function OM(l,h){return l&&l.length?Js(l,qe(h,2)):[]}function LM(l,h){return h=typeof h=="function"?h:t,l&&l.length?Js(l,t,h):[]}function Wg(l){if(!(l&&l.length))return[];var h=0;return l=Vs(l,function(p){if(Sn(p))return h=zn(p.length,h),!0}),ag(h,function(p){return sn(l,ig(p))})}function r1(l,h){if(!(l&&l.length))return[];var p=Wg(l);return h==null?p:sn(p,function(_){return Ar(h,t,_)})}var kM=vt(function(l,h){return Sn(l)?Eu(l,h):[]}),FM=vt(function(l){return Ig(Vs(l,Sn))}),DM=vt(function(l){var h=Zr(l);return Sn(h)&&(h=t),Ig(Vs(l,Sn),qe(h,2))}),NM=vt(function(l){var h=Zr(l);return h=typeof h=="function"?h:t,Ig(Vs(l,Sn),t,h)}),zM=vt(Wg);function $M(l,h){return wx(l||[],h||[],bu)}function BM(l,h){return wx(l||[],h||[],Tu)}var UM=vt(function(l){var h=l.length,p=h>1?l[h-1]:t;return p=typeof p=="function"?(l.pop(),p):t,r1(l,p)});function i1(l){var h=I(l);return h.__chain__=!0,h}function GM(l,h){return h(l),l}function qh(l,h){return h(l)}var qM=ys(function(l){var h=l.length,p=h?l[0]:0,_=this.__wrapped__,w=function(P){return gg(P,l)};return h>1||this.__actions__.length||!(_ instanceof St)||!_s(p)?this.thru(w):(_=_.slice(p,+p+(h?1:0)),_.__actions__.push({func:qh,args:[w],thisArg:t}),new Xr(_,this.__chain__).thru(function(P){return h&&!P.length&&P.push(t),P}))});function WM(){return i1(this)}function jM(){return new Xr(this.value(),this.__chain__)}function HM(){this.__values__===t&&(this.__values__=_1(this.value()));var l=this.__index__>=this.__values__.length,h=l?t:this.__values__[this.__index__++];return{done:l,value:h}}function VM(){return this}function XM(l){for(var h,p=this;p instanceof Ih;){var _=Zx(p);_.__index__=0,_.__values__=t,h?w.__wrapped__=_:h=_;var w=_;p=p.__wrapped__}return w.__wrapped__=l,h}function YM(){var l=this.__wrapped__;if(l instanceof St){var h=l;return this.__actions__.length&&(h=new St(this)),h=h.reverse(),h.__actions__.push({func:qh,args:[qg],thisArg:t}),new Xr(h,this.__chain__)}return this.thru(qg)}function KM(){return xx(this.__wrapped__,this.__actions__)}var ZM=Fh(function(l,h,p){Vt.call(l,p)?++l[p]:gs(l,p,1)});function JM(l,h,p){var _=it(l)?Lv:GA;return p&&ar(l,h,p)&&(h=t),_(l,qe(h,3))}function QM(l,h){var p=it(l)?Vs:rx;return p(l,qe(h,3))}var eO=Mx(Jx),tO=Mx(Qx);function nO(l,h){return Yn(Wh(l,h),1)}function rO(l,h){return Yn(Wh(l,h),q)}function iO(l,h,p){return p=p===t?1:ut(p),Yn(Wh(l,h),p)}function s1(l,h){var p=it(l)?Hr:Zs;return p(l,qe(h,3))}function o1(l,h){var p=it(l)?EI:nx;return p(l,qe(h,3))}var sO=Fh(function(l,h,p){Vt.call(l,p)?l[p].push(h):gs(l,p,[h])});function oO(l,h,p,_){l=yr(l)?l:ll(l),p=p&&!_?ut(p):0;var w=l.length;return p<0&&(p=zn(w+p,0)),Yh(l)?p<=w&&l.indexOf(h,p)>-1:!!w&&Ka(l,h,p)>-1}var aO=vt(function(l,h,p){var _=-1,w=typeof h=="function",P=yr(l)?te(l.length):[];return Zs(l,function(D){P[++_]=w?Ar(h,D,p):Cu(D,h,p)}),P}),lO=Fh(function(l,h,p){gs(l,p,h)});function Wh(l,h){var p=it(l)?sn:ux;return p(l,qe(h,3))}function uO(l,h,p,_){return l==null?[]:(it(h)||(h=h==null?[]:[h]),p=_?t:p,it(p)||(p=p==null?[]:[p]),dx(l,h,p))}var cO=Fh(function(l,h,p){l[p?0:1].push(h)},function(){return[[],[]]});function hO(l,h,p){var _=it(l)?ng:Nv,w=arguments.length<3;return _(l,qe(h,4),p,w,Zs)}function fO(l,h,p){var _=it(l)?CI:Nv,w=arguments.length<3;return _(l,qe(h,4),p,w,nx)}function dO(l,h){var p=it(l)?Vs:rx;return p(l,Vh(qe(h,3)))}function pO(l){var h=it(l)?Jv:oP;return h(l)}function gO(l,h,p){(p?ar(l,h,p):h===t)?h=1:h=ut(h);var _=it(l)?NA:aP;return _(l,h)}function mO(l){var h=it(l)?zA:uP;return h(l)}function yO(l){if(l==null)return 0;if(yr(l))return Yh(l)?Ja(l):l.length;var h=Qn(l);return h==ge||h==k?l.size:wg(l).length}function _O(l,h,p){var _=it(l)?rg:cP;return p&&ar(l,h,p)&&(h=t),_(l,qe(h,3))}var vO=vt(function(l,h){if(l==null)return[];var p=h.length;return p>1&&ar(l,h[0],h[1])?h=[]:p>2&&ar(h[0],h[1],h[2])&&(h=[h[0]]),dx(l,Yn(h,1),[])}),jh=QI||function(){return Xn.Date.now()};function xO(l,h){if(typeof h!="function")throw new Vr(o);return l=ut(l),function(){if(--l<1)return h.apply(this,arguments)}}function a1(l,h,p){return h=p?t:h,h=l&&h==null?l.length:h,ms(l,O,t,t,t,t,h)}function l1(l,h){var p;if(typeof h!="function")throw new Vr(o);return l=ut(l),function(){return--l>0&&(p=h.apply(this,arguments)),l<=1&&(h=t),p}}var jg=vt(function(l,h,p){var _=x;if(p.length){var w=Ys(p,ol(jg));_|=R}return ms(l,_,h,p,w)}),u1=vt(function(l,h,p){var _=x|b;if(p.length){var w=Ys(p,ol(u1));_|=R}return ms(h,_,l,p,w)});function c1(l,h,p){h=p?t:h;var _=ms(l,T,t,t,t,t,t,h);return _.placeholder=c1.placeholder,_}function h1(l,h,p){h=p?t:h;var _=ms(l,C,t,t,t,t,t,h);return _.placeholder=h1.placeholder,_}function f1(l,h,p){var _,w,P,D,j,K,he=0,fe=!1,de=!1,ve=!0;if(typeof l!="function")throw new Vr(o);h=Jr(h)||0,fn(p)&&(fe=!!p.leading,de="maxWait"in p,P=de?zn(Jr(p.maxWait)||0,h):P,ve="trailing"in p?!!p.trailing:ve);function Me(Tn){var pi=_,ws=w;return _=w=t,he=Tn,D=l.apply(ws,pi),D}function We(Tn){return he=Tn,j=Au(bt,h),fe?Me(Tn):D}function mt(Tn){var pi=Tn-K,ws=Tn-he,M1=h-pi;return de?Jn(M1,P-ws):M1}function je(Tn){var pi=Tn-K,ws=Tn-he;return K===t||pi>=h||pi<0||de&&ws>=P}function bt(){var Tn=jh();if(je(Tn))return At(Tn);j=Au(bt,mt(Tn))}function At(Tn){return j=t,ve&&_?Me(Tn):(_=w=t,D)}function Lr(){j!==t&&bx(j),he=0,_=K=w=j=t}function lr(){return j===t?D:At(jh())}function kr(){var Tn=jh(),pi=je(Tn);if(_=arguments,w=this,K=Tn,pi){if(j===t)return We(K);if(de)return bx(j),j=Au(bt,h),Me(K)}return j===t&&(j=Au(bt,h)),D}return kr.cancel=Lr,kr.flush=lr,kr}var wO=vt(function(l,h){return tx(l,1,h)}),bO=vt(function(l,h,p){return tx(l,Jr(h)||0,p)});function EO(l){return ms(l,L)}function Hh(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new Vr(o);var p=function(){var _=arguments,w=h?h.apply(this,_):_[0],P=p.cache;if(P.has(w))return P.get(w);var D=l.apply(this,_);return p.cache=P.set(w,D)||P,D};return p.cache=new(Hh.Cache||ps),p}Hh.Cache=ps;function Vh(l){if(typeof l!="function")throw new Vr(o);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}function CO(l){return l1(2,l)}var SO=hP(function(l,h){h=h.length==1&&it(h[0])?sn(h[0],Pr(qe())):sn(Yn(h,1),Pr(qe()));var p=h.length;return vt(function(_){for(var w=-1,P=Jn(_.length,p);++w<P;)_[w]=h[w].call(this,_[w]);return Ar(l,this,_)})}),Hg=vt(function(l,h){var p=Ys(h,ol(Hg));return ms(l,R,t,h,p)}),d1=vt(function(l,h){var p=Ys(h,ol(d1));return ms(l,F,t,h,p)}),TO=ys(function(l,h){return ms(l,$,t,t,t,h)});function RO(l,h){if(typeof l!="function")throw new Vr(o);return h=h===t?h:ut(h),vt(l,h)}function IO(l,h){if(typeof l!="function")throw new Vr(o);return h=h==null?0:zn(ut(h),0),vt(function(p){var _=p[h],w=eo(p,0,h);return _&&Xs(w,_),Ar(l,this,w)})}function AO(l,h,p){var _=!0,w=!0;if(typeof l!="function")throw new Vr(o);return fn(p)&&(_="leading"in p?!!p.leading:_,w="trailing"in p?!!p.trailing:w),f1(l,h,{leading:_,maxWait:h,trailing:w})}function PO(l){return a1(l,1)}function MO(l,h){return Hg(Pg(h),l)}function OO(){if(!arguments.length)return[];var l=arguments[0];return it(l)?l:[l]}function LO(l){return Yr(l,y)}function kO(l,h){return h=typeof h=="function"?h:t,Yr(l,y,h)}function FO(l){return Yr(l,d|y)}function DO(l,h){return h=typeof h=="function"?h:t,Yr(l,d|y,h)}function NO(l,h){return h==null||ex(l,h,qn(h))}function di(l,h){return l===h||l!==l&&h!==h}var zO=$h(_g),$O=$h(function(l,h){return l>=h}),ta=ox(function(){return arguments}())?ox:function(l){return vn(l)&&Vt.call(l,"callee")&&!Hv.call(l,"callee")},it=te.isArray,BO=Rv?Pr(Rv):XA;function yr(l){return l!=null&&Xh(l.length)&&!vs(l)}function Sn(l){return vn(l)&&yr(l)}function UO(l){return l===!0||l===!1||vn(l)&&or(l)==Ie}var to=tA||rm,GO=Iv?Pr(Iv):YA;function qO(l){return vn(l)&&l.nodeType===1&&!Pu(l)}function WO(l){if(l==null)return!0;if(yr(l)&&(it(l)||typeof l=="string"||typeof l.splice=="function"||to(l)||al(l)||ta(l)))return!l.length;var h=Qn(l);if(h==ge||h==k)return!l.size;if(Iu(l))return!wg(l).length;for(var p in l)if(Vt.call(l,p))return!1;return!0}function jO(l,h){return Su(l,h)}function HO(l,h,p){p=typeof p=="function"?p:t;var _=p?p(l,h):t;return _===t?Su(l,h,t,p):!!_}function Vg(l){if(!vn(l))return!1;var h=or(l);return h==Gt||h==pt||typeof l.message=="string"&&typeof l.name=="string"&&!Pu(l)}function VO(l){return typeof l=="number"&&Xv(l)}function vs(l){if(!fn(l))return!1;var h=or(l);return h==Tt||h==en||h==ze||h==rn}function p1(l){return typeof l=="number"&&l==ut(l)}function Xh(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=V}function fn(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function vn(l){return l!=null&&typeof l=="object"}var g1=Av?Pr(Av):ZA;function XO(l,h){return l===h||xg(l,h,Ng(h))}function YO(l,h,p){return p=typeof p=="function"?p:t,xg(l,h,Ng(h),p)}function KO(l){return m1(l)&&l!=+l}function ZO(l){if(kP(l))throw new nt(s);return ax(l)}function JO(l){return l===null}function QO(l){return l==null}function m1(l){return typeof l=="number"||vn(l)&&or(l)==$e}function Pu(l){if(!vn(l)||or(l)!=ke)return!1;var h=wh(l);if(h===null)return!0;var p=Vt.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&yh.call(p)==YI}var Xg=Pv?Pr(Pv):JA;function eL(l){return p1(l)&&l>=-V&&l<=V}var y1=Mv?Pr(Mv):QA;function Yh(l){return typeof l=="string"||!it(l)&&vn(l)&&or(l)==Qe}function Or(l){return typeof l=="symbol"||vn(l)&&or(l)==Be}var al=Ov?Pr(Ov):eP;function tL(l){return l===t}function nL(l){return vn(l)&&Qn(l)==Ht}function rL(l){return vn(l)&&or(l)==un}var iL=$h(bg),sL=$h(function(l,h){return l<=h});function _1(l){if(!l)return[];if(yr(l))return Yh(l)?hi(l):mr(l);if(yu&&l[yu])return NI(l[yu]());var h=Qn(l),p=h==ge?ug:h==k?ph:ll;return p(l)}function xs(l){if(!l)return l===0?l:0;if(l=Jr(l),l===q||l===-q){var h=l<0?-1:1;return h*ne}return l===l?l:0}function ut(l){var h=xs(l),p=h%1;return h===h?p?h-p:h:0}function v1(l){return l?Zo(ut(l),0,me):0}function Jr(l){if(typeof l=="number")return l;if(Or(l))return re;if(fn(l)){var h=typeof l.valueOf=="function"?l.valueOf():l;l=fn(h)?h+"":h}if(typeof l!="string")return l===0?l:+l;l=zv(l);var p=Ne.test(l);return p||Re.test(l)?xI(l.slice(2),p?2:8):we.test(l)?re:+l}function x1(l){return $i(l,_r(l))}function oL(l){return l?Zo(ut(l),-V,V):l===0?l:0}function qt(l){return l==null?"":Mr(l)}var aL=il(function(l,h){if(Iu(h)||yr(h)){$i(h,qn(h),l);return}for(var p in h)Vt.call(h,p)&&bu(l,p,h[p])}),w1=il(function(l,h){$i(h,_r(h),l)}),Kh=il(function(l,h,p,_){$i(h,_r(h),l,_)}),lL=il(function(l,h,p,_){$i(h,qn(h),l,_)}),uL=ys(gg);function cL(l,h){var p=rl(l);return h==null?p:Qv(p,h)}var hL=vt(function(l,h){l=Jt(l);var p=-1,_=h.length,w=_>2?h[2]:t;for(w&&ar(h[0],h[1],w)&&(_=1);++p<_;)for(var P=h[p],D=_r(P),j=-1,K=D.length;++j<K;){var he=D[j],fe=l[he];(fe===t||di(fe,el[he])&&!Vt.call(l,he))&&(l[he]=P[he])}return l}),fL=vt(function(l){return l.push(t,zx),Ar(b1,t,l)});function dL(l,h){return kv(l,qe(h,3),zi)}function pL(l,h){return kv(l,qe(h,3),yg)}function gL(l,h){return l==null?l:mg(l,qe(h,3),_r)}function mL(l,h){return l==null?l:ix(l,qe(h,3),_r)}function yL(l,h){return l&&zi(l,qe(h,3))}function _L(l,h){return l&&yg(l,qe(h,3))}function vL(l){return l==null?[]:Mh(l,qn(l))}function xL(l){return l==null?[]:Mh(l,_r(l))}function Yg(l,h,p){var _=l==null?t:Jo(l,h);return _===t?p:_}function wL(l,h){return l!=null&&Ux(l,h,WA)}function Kg(l,h){return l!=null&&Ux(l,h,jA)}var bL=Lx(function(l,h,p){h!=null&&typeof h.toString!="function"&&(h=_h.call(h)),l[h]=p},Jg(vr)),EL=Lx(function(l,h,p){h!=null&&typeof h.toString!="function"&&(h=_h.call(h)),Vt.call(l,h)?l[h].push(p):l[h]=[p]},qe),CL=vt(Cu);function qn(l){return yr(l)?Zv(l):wg(l)}function _r(l){return yr(l)?Zv(l,!0):tP(l)}function SL(l,h){var p={};return h=qe(h,3),zi(l,function(_,w,P){gs(p,h(_,w,P),_)}),p}function TL(l,h){var p={};return h=qe(h,3),zi(l,function(_,w,P){gs(p,w,h(_,w,P))}),p}var RL=il(function(l,h,p){Oh(l,h,p)}),b1=il(function(l,h,p,_){Oh(l,h,p,_)}),IL=ys(function(l,h){var p={};if(l==null)return p;var _=!1;h=sn(h,function(P){return P=Qs(P,l),_||(_=P.length>1),P}),$i(l,Fg(l),p),_&&(p=Yr(p,d|g|y,bP));for(var w=h.length;w--;)Rg(p,h[w]);return p});function AL(l,h){return E1(l,Vh(qe(h)))}var PL=ys(function(l,h){return l==null?{}:rP(l,h)});function E1(l,h){if(l==null)return{};var p=sn(Fg(l),function(_){return[_]});return h=qe(h),px(l,p,function(_,w){return h(_,w[0])})}function ML(l,h,p){h=Qs(h,l);var _=-1,w=h.length;for(w||(w=1,l=t);++_<w;){var P=l==null?t:l[Bi(h[_])];P===t&&(_=w,P=p),l=vs(P)?P.call(l):P}return l}function OL(l,h,p){return l==null?l:Tu(l,h,p)}function LL(l,h,p,_){return _=typeof _=="function"?_:t,l==null?l:Tu(l,h,p,_)}var C1=Dx(qn),S1=Dx(_r);function kL(l,h,p){var _=it(l),w=_||to(l)||al(l);if(h=qe(h,4),p==null){var P=l&&l.constructor;w?p=_?new P:[]:fn(l)?p=vs(P)?rl(wh(l)):{}:p={}}return(w?Hr:zi)(l,function(D,j,K){return h(p,D,j,K)}),p}function FL(l,h){return l==null?!0:Rg(l,h)}function DL(l,h,p){return l==null?l:vx(l,h,Pg(p))}function NL(l,h,p,_){return _=typeof _=="function"?_:t,l==null?l:vx(l,h,Pg(p),_)}function ll(l){return l==null?[]:lg(l,qn(l))}function zL(l){return l==null?[]:lg(l,_r(l))}function $L(l,h,p){return p===t&&(p=h,h=t),p!==t&&(p=Jr(p),p=p===p?p:0),h!==t&&(h=Jr(h),h=h===h?h:0),Zo(Jr(l),h,p)}function BL(l,h,p){return h=xs(h),p===t?(p=h,h=0):p=xs(p),l=Jr(l),HA(l,h,p)}function UL(l,h,p){if(p&&typeof p!="boolean"&&ar(l,h,p)&&(h=p=t),p===t&&(typeof h=="boolean"?(p=h,h=t):typeof l=="boolean"&&(p=l,l=t)),l===t&&h===t?(l=0,h=1):(l=xs(l),h===t?(h=l,l=0):h=xs(h)),l>h){var _=l;l=h,h=_}if(p||l%1||h%1){var w=Yv();return Jn(l+w*(h-l+vI("1e-"+((w+"").length-1))),h)}return Cg(l,h)}var GL=sl(function(l,h,p){return h=h.toLowerCase(),l+(p?T1(h):h)});function T1(l){return Zg(qt(l).toLowerCase())}function R1(l){return l=qt(l),l&&l.replace(On,OI).replace(uI,"")}function qL(l,h,p){l=qt(l),h=Mr(h);var _=l.length;p=p===t?_:Zo(ut(p),0,_);var w=p;return p-=h.length,p>=0&&l.slice(p,w)==h}function WL(l){return l=qt(l),l&&kt.test(l)?l.replace(Ct,LI):l}function jL(l){return l=qt(l),l&&Ft.test(l)?l.replace(hn,"\\$&"):l}var HL=sl(function(l,h,p){return l+(p?"-":"")+h.toLowerCase()}),VL=sl(function(l,h,p){return l+(p?" ":"")+h.toLowerCase()}),XL=Px("toLowerCase");function YL(l,h,p){l=qt(l),h=ut(h);var _=h?Ja(l):0;if(!h||_>=h)return l;var w=(h-_)/2;return zh(Sh(w),p)+l+zh(Ch(w),p)}function KL(l,h,p){l=qt(l),h=ut(h);var _=h?Ja(l):0;return h&&_<h?l+zh(h-_,p):l}function ZL(l,h,p){l=qt(l),h=ut(h);var _=h?Ja(l):0;return h&&_<h?zh(h-_,p)+l:l}function JL(l,h,p){return p||h==null?h=0:h&&(h=+h),sA(qt(l).replace(It,""),h||0)}function QL(l,h,p){return(p?ar(l,h,p):h===t)?h=1:h=ut(h),Sg(qt(l),h)}function ek(){var l=arguments,h=qt(l[0]);return l.length<3?h:h.replace(l[1],l[2])}var tk=sl(function(l,h,p){return l+(p?"_":"")+h.toLowerCase()});function nk(l,h,p){return p&&typeof p!="number"&&ar(l,h,p)&&(h=p=t),p=p===t?me:p>>>0,p?(l=qt(l),l&&(typeof h=="string"||h!=null&&!Xg(h))&&(h=Mr(h),!h&&Za(l))?eo(hi(l),0,p):l.split(h,p)):[]}var rk=sl(function(l,h,p){return l+(p?" ":"")+Zg(h)});function ik(l,h,p){return l=qt(l),p=p==null?0:Zo(ut(p),0,l.length),h=Mr(h),l.slice(p,p+h.length)==h}function sk(l,h,p){var _=I.templateSettings;p&&ar(l,h,p)&&(h=t),l=qt(l),h=Kh({},h,_,Nx);var w=Kh({},h.imports,_.imports,Nx),P=qn(w),D=lg(w,P),j,K,he=0,fe=h.interpolate||tt,de="__p += '",ve=cg((h.escape||tt).source+"|"+fe.source+"|"+(fe===cn?oe:tt).source+"|"+(h.evaluate||tt).source+"|$","g"),Me="//# sourceURL="+(Vt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pI+"]")+`
`;l.replace(ve,function(je,bt,At,Lr,lr,kr){return At||(At=Lr),de+=l.slice(he,kr).replace(Xp,kI),bt&&(j=!0,de+=`' +
__e(`+bt+`) +
'`),lr&&(K=!0,de+=`';
`+lr+`;
__p += '`),At&&(de+=`' +
((__t = (`+At+`)) == null ? '' : __t) +
'`),he=kr+je.length,je}),de+=`';
`;var We=Vt.call(h,"variable")&&h.variable;if(!We)de=`with (obj) {
`+de+`
}
`;else if(ci.test(We))throw new nt(a);de=(K?de.replace(mn,""):de).replace(Dt,"$1").replace(Nt,"$1;"),de="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(j?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var mt=A1(function(){return Bt(P,Me+"return "+de).apply(t,D)});if(mt.source=de,Vg(mt))throw mt;return mt}function ok(l){return qt(l).toLowerCase()}function ak(l){return qt(l).toUpperCase()}function lk(l,h,p){if(l=qt(l),l&&(p||h===t))return zv(l);if(!l||!(h=Mr(h)))return l;var _=hi(l),w=hi(h),P=$v(_,w),D=Bv(_,w)+1;return eo(_,P,D).join("")}function uk(l,h,p){if(l=qt(l),l&&(p||h===t))return l.slice(0,Gv(l)+1);if(!l||!(h=Mr(h)))return l;var _=hi(l),w=Bv(_,hi(h))+1;return eo(_,0,w).join("")}function ck(l,h,p){if(l=qt(l),l&&(p||h===t))return l.replace(It,"");if(!l||!(h=Mr(h)))return l;var _=hi(l),w=$v(_,hi(h));return eo(_,w).join("")}function hk(l,h){var p=N,_=B;if(fn(h)){var w="separator"in h?h.separator:w;p="length"in h?ut(h.length):p,_="omission"in h?Mr(h.omission):_}l=qt(l);var P=l.length;if(Za(l)){var D=hi(l);P=D.length}if(p>=P)return l;var j=p-Ja(_);if(j<1)return _;var K=D?eo(D,0,j).join(""):l.slice(0,j);if(w===t)return K+_;if(D&&(j+=K.length-j),Xg(w)){if(l.slice(j).search(w)){var he,fe=K;for(w.global||(w=cg(w.source,qt(J.exec(w))+"g")),w.lastIndex=0;he=w.exec(fe);)var de=he.index;K=K.slice(0,de===t?j:de)}}else if(l.indexOf(Mr(w),j)!=j){var ve=K.lastIndexOf(w);ve>-1&&(K=K.slice(0,ve))}return K+_}function fk(l){return l=qt(l),l&&Yt.test(l)?l.replace(ot,UI):l}var dk=sl(function(l,h,p){return l+(p?" ":"")+h.toUpperCase()}),Zg=Px("toUpperCase");function I1(l,h,p){return l=qt(l),h=p?t:h,h===t?DI(l)?WI(l):RI(l):l.match(h)||[]}var A1=vt(function(l,h){try{return Ar(l,t,h)}catch(p){return Vg(p)?p:new nt(p)}}),pk=ys(function(l,h){return Hr(h,function(p){p=Bi(p),gs(l,p,jg(l[p],l))}),l});function gk(l){var h=l==null?0:l.length,p=qe();return l=h?sn(l,function(_){if(typeof _[1]!="function")throw new Vr(o);return[p(_[0]),_[1]]}):[],vt(function(_){for(var w=-1;++w<h;){var P=l[w];if(Ar(P[0],this,_))return Ar(P[1],this,_)}})}function mk(l){return UA(Yr(l,d))}function Jg(l){return function(){return l}}function yk(l,h){return l==null||l!==l?h:l}var _k=Ox(),vk=Ox(!0);function vr(l){return l}function Qg(l){return lx(typeof l=="function"?l:Yr(l,d))}function xk(l){return cx(Yr(l,d))}function wk(l,h){return hx(l,Yr(h,d))}var bk=vt(function(l,h){return function(p){return Cu(p,l,h)}}),Ek=vt(function(l,h){return function(p){return Cu(l,p,h)}});function em(l,h,p){var _=qn(h),w=Mh(h,_);p==null&&!(fn(h)&&(w.length||!_.length))&&(p=h,h=l,l=this,w=Mh(h,qn(h)));var P=!(fn(p)&&"chain"in p)||!!p.chain,D=vs(l);return Hr(w,function(j){var K=h[j];l[j]=K,D&&(l.prototype[j]=function(){var he=this.__chain__;if(P||he){var fe=l(this.__wrapped__),de=fe.__actions__=mr(this.__actions__);return de.push({func:K,args:arguments,thisArg:l}),fe.__chain__=he,fe}return K.apply(l,Xs([this.value()],arguments))})}),l}function Ck(){return Xn._===this&&(Xn._=KI),this}function tm(){}function Sk(l){return l=ut(l),vt(function(h){return fx(h,l)})}var Tk=Og(sn),Rk=Og(Lv),Ik=Og(rg);function P1(l){return $g(l)?ig(Bi(l)):iP(l)}function Ak(l){return function(h){return l==null?t:Jo(l,h)}}var Pk=kx(),Mk=kx(!0);function nm(){return[]}function rm(){return!1}function Ok(){return{}}function Lk(){return""}function kk(){return!0}function Fk(l,h){if(l=ut(l),l<1||l>V)return[];var p=me,_=Jn(l,me);h=qe(h),l-=me;for(var w=ag(_,h);++p<l;)h(p);return w}function Dk(l){return it(l)?sn(l,Bi):Or(l)?[l]:mr(Kx(qt(l)))}function Nk(l){var h=++XI;return qt(l)+h}var zk=Nh(function(l,h){return l+h},0),$k=Lg("ceil"),Bk=Nh(function(l,h){return l/h},1),Uk=Lg("floor");function Gk(l){return l&&l.length?Ph(l,vr,_g):t}function qk(l,h){return l&&l.length?Ph(l,qe(h,2),_g):t}function Wk(l){return Dv(l,vr)}function jk(l,h){return Dv(l,qe(h,2))}function Hk(l){return l&&l.length?Ph(l,vr,bg):t}function Vk(l,h){return l&&l.length?Ph(l,qe(h,2),bg):t}var Xk=Nh(function(l,h){return l*h},1),Yk=Lg("round"),Kk=Nh(function(l,h){return l-h},0);function Zk(l){return l&&l.length?og(l,vr):0}function Jk(l,h){return l&&l.length?og(l,qe(h,2)):0}return I.after=xO,I.ary=a1,I.assign=aL,I.assignIn=w1,I.assignInWith=Kh,I.assignWith=lL,I.at=uL,I.before=l1,I.bind=jg,I.bindAll=pk,I.bindKey=u1,I.castArray=OO,I.chain=i1,I.chunk=UP,I.compact=GP,I.concat=qP,I.cond=gk,I.conforms=mk,I.constant=Jg,I.countBy=ZM,I.create=cL,I.curry=c1,I.curryRight=h1,I.debounce=f1,I.defaults=hL,I.defaultsDeep=fL,I.defer=wO,I.delay=bO,I.difference=WP,I.differenceBy=jP,I.differenceWith=HP,I.drop=VP,I.dropRight=XP,I.dropRightWhile=YP,I.dropWhile=KP,I.fill=ZP,I.filter=QM,I.flatMap=nO,I.flatMapDeep=rO,I.flatMapDepth=iO,I.flatten=e1,I.flattenDeep=JP,I.flattenDepth=QP,I.flip=EO,I.flow=_k,I.flowRight=vk,I.fromPairs=eM,I.functions=vL,I.functionsIn=xL,I.groupBy=sO,I.initial=nM,I.intersection=rM,I.intersectionBy=iM,I.intersectionWith=sM,I.invert=bL,I.invertBy=EL,I.invokeMap=aO,I.iteratee=Qg,I.keyBy=lO,I.keys=qn,I.keysIn=_r,I.map=Wh,I.mapKeys=SL,I.mapValues=TL,I.matches=xk,I.matchesProperty=wk,I.memoize=Hh,I.merge=RL,I.mergeWith=b1,I.method=bk,I.methodOf=Ek,I.mixin=em,I.negate=Vh,I.nthArg=Sk,I.omit=IL,I.omitBy=AL,I.once=CO,I.orderBy=uO,I.over=Tk,I.overArgs=SO,I.overEvery=Rk,I.overSome=Ik,I.partial=Hg,I.partialRight=d1,I.partition=cO,I.pick=PL,I.pickBy=E1,I.property=P1,I.propertyOf=Ak,I.pull=uM,I.pullAll=n1,I.pullAllBy=cM,I.pullAllWith=hM,I.pullAt=fM,I.range=Pk,I.rangeRight=Mk,I.rearg=TO,I.reject=dO,I.remove=dM,I.rest=RO,I.reverse=qg,I.sampleSize=gO,I.set=OL,I.setWith=LL,I.shuffle=mO,I.slice=pM,I.sortBy=vO,I.sortedUniq=wM,I.sortedUniqBy=bM,I.split=nk,I.spread=IO,I.tail=EM,I.take=CM,I.takeRight=SM,I.takeRightWhile=TM,I.takeWhile=RM,I.tap=GM,I.throttle=AO,I.thru=qh,I.toArray=_1,I.toPairs=C1,I.toPairsIn=S1,I.toPath=Dk,I.toPlainObject=x1,I.transform=kL,I.unary=PO,I.union=IM,I.unionBy=AM,I.unionWith=PM,I.uniq=MM,I.uniqBy=OM,I.uniqWith=LM,I.unset=FL,I.unzip=Wg,I.unzipWith=r1,I.update=DL,I.updateWith=NL,I.values=ll,I.valuesIn=zL,I.without=kM,I.words=I1,I.wrap=MO,I.xor=FM,I.xorBy=DM,I.xorWith=NM,I.zip=zM,I.zipObject=$M,I.zipObjectDeep=BM,I.zipWith=UM,I.entries=C1,I.entriesIn=S1,I.extend=w1,I.extendWith=Kh,em(I,I),I.add=zk,I.attempt=A1,I.camelCase=GL,I.capitalize=T1,I.ceil=$k,I.clamp=$L,I.clone=LO,I.cloneDeep=FO,I.cloneDeepWith=DO,I.cloneWith=kO,I.conformsTo=NO,I.deburr=R1,I.defaultTo=yk,I.divide=Bk,I.endsWith=qL,I.eq=di,I.escape=WL,I.escapeRegExp=jL,I.every=JM,I.find=eO,I.findIndex=Jx,I.findKey=dL,I.findLast=tO,I.findLastIndex=Qx,I.findLastKey=pL,I.floor=Uk,I.forEach=s1,I.forEachRight=o1,I.forIn=gL,I.forInRight=mL,I.forOwn=yL,I.forOwnRight=_L,I.get=Yg,I.gt=zO,I.gte=$O,I.has=wL,I.hasIn=Kg,I.head=t1,I.identity=vr,I.includes=oO,I.indexOf=tM,I.inRange=BL,I.invoke=CL,I.isArguments=ta,I.isArray=it,I.isArrayBuffer=BO,I.isArrayLike=yr,I.isArrayLikeObject=Sn,I.isBoolean=UO,I.isBuffer=to,I.isDate=GO,I.isElement=qO,I.isEmpty=WO,I.isEqual=jO,I.isEqualWith=HO,I.isError=Vg,I.isFinite=VO,I.isFunction=vs,I.isInteger=p1,I.isLength=Xh,I.isMap=g1,I.isMatch=XO,I.isMatchWith=YO,I.isNaN=KO,I.isNative=ZO,I.isNil=QO,I.isNull=JO,I.isNumber=m1,I.isObject=fn,I.isObjectLike=vn,I.isPlainObject=Pu,I.isRegExp=Xg,I.isSafeInteger=eL,I.isSet=y1,I.isString=Yh,I.isSymbol=Or,I.isTypedArray=al,I.isUndefined=tL,I.isWeakMap=nL,I.isWeakSet=rL,I.join=oM,I.kebabCase=HL,I.last=Zr,I.lastIndexOf=aM,I.lowerCase=VL,I.lowerFirst=XL,I.lt=iL,I.lte=sL,I.max=Gk,I.maxBy=qk,I.mean=Wk,I.meanBy=jk,I.min=Hk,I.minBy=Vk,I.stubArray=nm,I.stubFalse=rm,I.stubObject=Ok,I.stubString=Lk,I.stubTrue=kk,I.multiply=Xk,I.nth=lM,I.noConflict=Ck,I.noop=tm,I.now=jh,I.pad=YL,I.padEnd=KL,I.padStart=ZL,I.parseInt=JL,I.random=UL,I.reduce=hO,I.reduceRight=fO,I.repeat=QL,I.replace=ek,I.result=ML,I.round=Yk,I.runInContext=X,I.sample=pO,I.size=yO,I.snakeCase=tk,I.some=_O,I.sortedIndex=gM,I.sortedIndexBy=mM,I.sortedIndexOf=yM,I.sortedLastIndex=_M,I.sortedLastIndexBy=vM,I.sortedLastIndexOf=xM,I.startCase=rk,I.startsWith=ik,I.subtract=Kk,I.sum=Zk,I.sumBy=Jk,I.template=sk,I.times=Fk,I.toFinite=xs,I.toInteger=ut,I.toLength=v1,I.toLower=ok,I.toNumber=Jr,I.toSafeInteger=oL,I.toString=qt,I.toUpper=ak,I.trim=lk,I.trimEnd=uk,I.trimStart=ck,I.truncate=hk,I.unescape=fk,I.uniqueId=Nk,I.upperCase=dk,I.upperFirst=Zg,I.each=s1,I.eachRight=o1,I.first=t1,em(I,function(){var l={};return zi(I,function(h,p){Vt.call(I.prototype,p)||(l[p]=h)}),l}(),{chain:!1}),I.VERSION=r,Hr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){I[l].placeholder=I}),Hr(["drop","take"],function(l,h){St.prototype[l]=function(p){p=p===t?1:zn(ut(p),0);var _=this.__filtered__&&!h?new St(this):this.clone();return _.__filtered__?_.__takeCount__=Jn(p,_.__takeCount__):_.__views__.push({size:Jn(p,me),type:l+(_.__dir__<0?"Right":"")}),_},St.prototype[l+"Right"]=function(p){return this.reverse()[l](p).reverse()}}),Hr(["filter","map","takeWhile"],function(l,h){var p=h+1,_=p==Z||p==W;St.prototype[l]=function(w){var P=this.clone();return P.__iteratees__.push({iteratee:qe(w,3),type:p}),P.__filtered__=P.__filtered__||_,P}}),Hr(["head","last"],function(l,h){var p="take"+(h?"Right":"");St.prototype[l]=function(){return this[p](1).value()[0]}}),Hr(["initial","tail"],function(l,h){var p="drop"+(h?"":"Right");St.prototype[l]=function(){return this.__filtered__?new St(this):this[p](1)}}),St.prototype.compact=function(){return this.filter(vr)},St.prototype.find=function(l){return this.filter(l).head()},St.prototype.findLast=function(l){return this.reverse().find(l)},St.prototype.invokeMap=vt(function(l,h){return typeof l=="function"?new St(this):this.map(function(p){return Cu(p,l,h)})}),St.prototype.reject=function(l){return this.filter(Vh(qe(l)))},St.prototype.slice=function(l,h){l=ut(l);var p=this;return p.__filtered__&&(l>0||h<0)?new St(p):(l<0?p=p.takeRight(-l):l&&(p=p.drop(l)),h!==t&&(h=ut(h),p=h<0?p.dropRight(-h):p.take(h-l)),p)},St.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},St.prototype.toArray=function(){return this.take(me)},zi(St.prototype,function(l,h){var p=/^(?:filter|find|map|reject)|While$/.test(h),_=/^(?:head|last)$/.test(h),w=I[_?"take"+(h=="last"?"Right":""):h],P=_||/^find/.test(h);w&&(I.prototype[h]=function(){var D=this.__wrapped__,j=_?[1]:arguments,K=D instanceof St,he=j[0],fe=K||it(D),de=function(bt){var At=w.apply(I,Xs([bt],j));return _&&ve?At[0]:At};fe&&p&&typeof he=="function"&&he.length!=1&&(K=fe=!1);var ve=this.__chain__,Me=!!this.__actions__.length,We=P&&!ve,mt=K&&!Me;if(!P&&fe){D=mt?D:new St(this);var je=l.apply(D,j);return je.__actions__.push({func:qh,args:[de],thisArg:t}),new Xr(je,ve)}return We&&mt?l.apply(this,j):(je=this.thru(de),We?_?je.value()[0]:je.value():je)})}),Hr(["pop","push","shift","sort","splice","unshift"],function(l){var h=gh[l],p=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);I.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var P=this.value();return h.apply(it(P)?P:[],w)}return this[p](function(D){return h.apply(it(D)?D:[],w)})}}),zi(St.prototype,function(l,h){var p=I[h];if(p){var _=p.name+"";Vt.call(nl,_)||(nl[_]=[]),nl[_].push({name:h,func:p})}}),nl[Dh(t,b).name]=[{name:"wrapper",func:t}],St.prototype.clone=fA,St.prototype.reverse=dA,St.prototype.value=pA,I.prototype.at=qM,I.prototype.chain=WM,I.prototype.commit=jM,I.prototype.next=HM,I.prototype.plant=XM,I.prototype.reverse=YM,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=KM,I.prototype.first=I.prototype.head,yu&&(I.prototype[yu]=VM),I},Qa=jI();Vo?((Vo.exports=Qa)._=Qa,Qp._=Qa):Xn._=Qa}).call(As)})(od,od.exports);od.exports;/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const vw={prefix:"far",iconName:"copy",icon:[448,512,[],"f0c5","M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"]},By=({color:n,...e})=>{const t=Bo();return Q(Gs,{icon:aC,css:zc({color:n==="primary"?t.palette.primary.main:"inherit"},"",""),...e})};By.__docgenInfo={description:"",methods:[],displayName:"SearchIcon",props:{color:{required:!1,tsType:{name:"union",raw:'"primary" | "inherit"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"inherit"'}]},description:""}}};const W$=n=>Q(vC,{...n}),j$=n=>Q(FC,{...n}),H$=n=>Q(Cy,{...n});W$.__docgenInfo={description:"",methods:[],displayName:"ListItem"};j$.__docgenInfo={description:"",methods:[],displayName:"ListItemButton"};H$.__docgenInfo={description:"",methods:[],displayName:"ListItemIcon"};const V$=ua.object({id:ua.string(),name:ua.string(),url:ua.string(),icon:ua.string()});var X$={name:"1k1rh22",styles:"width:25px;height:25px"};const Y$=({apps:n})=>{const[e,t]=my.useState(null),r=ki(),i=!!e,s=a=>{t(a.currentTarget)},o=()=>{t(null)};return rt("div",{children:[Q(Ao,{"aria-label":"app-switch","aria-controls":i?"app-switch-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:s,color:"primary",children:Q(KD,{})}),Q(xC,{id:"app-switch-menu",anchorEl:e,open:i,onClose:o,MenuListProps:{"aria-labelledby":"app-switch-button"},sx:{"& .MuiPaper-root":{backgroundColor:r.palette.mode==="dark"?"#2A2A2A":"#ffffff"}},children:n.map((a,u)=>{const c=V$.safeParse(a);if(!c.success){const d=c.error.issues.map(g=>`${g.path.toString().replace(","," > ")}: ${g.message}`).join(`
`);return rt(Ki,{role:"menuitem",children:[rt(Yi,{children:["Misconfiguration error: App Switch library ",a!=null&&a.id?`for id ${a.id}`:`at index ${u}`]}),Q(Yi,{children:d})]},d)}return rt(wC,{onClick:()=>{window.open(a.url,"_blank"),o()},sx:{display:"flex",alignItems:"center",marginX:1,borderRadius:"4px",border:"1px solid rgba(0, 0, 0, 0)","&:hover":{backgroundColor:r.palette.mode==="dark"?r.palette.background.default:"rgba(0, 0, 0, 0.04)",border:`1px solid ${r.palette.primary.main}`}},children:[Q(Cy,{children:Q("img",{src:a.icon,alt:`${a.name} icon`,css:X$})}),Q(Sy,{children:Q(Ps,{variant:"h1",sx:{marginTop:.5,fontFamily:"Figtree",fontSize:16,fontWeight:400,color:"primary",display:"flex",alignItems:"center"},children:a.name.toUpperCase()})})]},a.id)})})]})};Y$.__docgenInfo={description:"",methods:[],displayName:"AppSwitch",props:{apps:{required:!0,tsType:{name:"Array",elements:[{name:"zod.infer",elements:[{name:"AppSwitchLibrarySchema"}],raw:"zod.infer<typeof AppSwitchLibrarySchema>"}],raw:"zod.infer<typeof AppSwitchLibrarySchema>[]"},description:""}}};const K$=({backgroundColor:n,borderColor:e,color:t,iconClass:r,className:i,role:s="img",...o})=>Q(Zn,{component:"div",sx:{backgroundColor:n,color:t,borderColor:e,borderRadius:9999,width:34,height:34,borderWidth:2,borderStyle:"solid",display:"flex",justifyContent:"center",alignItems:"center"},children:Q("i",{role:s,"aria-hidden":"true",className:r+" "+i,...o})});K$.__docgenInfo={description:"",methods:[],displayName:"IESType",props:{backgroundColor:{required:!0,tsType:{name:"string"},description:""},borderColor:{required:!0,tsType:{name:"string"},description:""},color:{required:!0,tsType:{name:"string"},description:""},iconClass:{required:!0,tsType:{name:"string"},description:""},role:{defaultValue:{value:'"img"',computed:!1},required:!1}}};const Z$=({fullName:n,children:e})=>rt(na,{container:!0,children:[Q(Zn,{sx:{width:"100%"},marginBottom:2,children:Q(tF,{variant:"h4",children:"User Status"})}),rt(na,{container:!0,columns:6,alignItems:"center",children:[Q(na,{item:!0,xs:1,children:Q(iF,{variant:"circular-outlined",sx:{width:32,height:32},children:Q(e5,{color:"primary"})})}),Q(na,{item:!0,xs:5,children:Q(Yi,{variant:"subtitle1",children:n})})]}),rt(na,{container:!0,columns:6,children:[Q(na,{item:!0,xs:1}),Q(na,{item:!0,xs:5,children:e})]})]});Z$.__docgenInfo={description:"",methods:[],displayName:"UserStatus",props:{fullName:{required:!0,tsType:{name:"string"},description:""}}};const J$=({onClick:n,faIcon:e,id:t,icon:r,value:i,selected:s=!1})=>{const o=r,a=ki();return rt(wC,{onClick:()=>n(i),id:t,selected:s,sx:{display:"flex",alignItems:"center",marginX:1,borderRadius:"4px",border:"1px solid rgba(0, 0, 0, 0)","&.Mui-selected.Mui-selected":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)"},"&.Mui-selected.Mui-selected:hover":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)"},"&:hover":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)",border:`1px solid ${a.palette.primary.main}`}},children:[(o||e)&&rt(Cy,{children:[o&&Q(o,{color:s?"primary":"inherit"}),e&&Q(Gs,{icon:e,fontSize:"medium",color:s?a.palette.primary.main:"white"})]}),Q(Sy,{children:Q(Ps,{variant:"h1",sx:{marginTop:.5,fontFamily:"Figtree",fontSize:16,fontWeight:400,color:`${s?a.palette.primary.main:"primary"}`,display:"flex",alignItems:"center"},children:i})})]})},Q$=({ariaLabel:n,id:e,menuItems:t})=>{const[r,i]=ie.useState(null),[s,o]=ie.useState(t.find(d=>d.default)??t[0]),a=ki(),u=!!r,c=d=>{i(d.currentTarget)},f=()=>{i(null)};return rt(Ki,{children:[rt(Ao,{"aria-label":n,"aria-controls":u?e:void 0,"aria-haspopup":"true",sx:{border:0,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},"aria-expanded":u?"true":void 0,onClick:c,color:"primary",children:[s.icon&&Q(s.icon,{color:"primary",className:"mr-2"}),s.faIcon&&Q(Gs,{icon:s.faIcon,fontSize:"medium",color:a.palette.primary.main??"white",className:"mr-2"}),Q(sF,{})]}),Q(xC,{id:e,anchorEl:r,open:u,transformOrigin:{vertical:-20,horizontal:"left"},onClose:f,MenuListProps:{"aria-labelledby":e},sx:{"& .MuiPaper-root":{backgroundColor:a.palette.mode==="dark"?"#2A2A2A":"#ffffff"}},children:t.map((d,g)=>Q(J$,{id:`${e}-item-${g}`,onClick:()=>{d.onClick(d.value),o(d),f()},icon:d==null?void 0:d.icon,faIcon:d==null?void 0:d.faIcon,value:d.value,selected:d.value===s.value},`${e}-item-${g}`))})]})};Q$.__docgenInfo={description:"",methods:[],displayName:"DropdownButton",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:""},id:{required:!0,tsType:{name:"string"},description:""},menuItems:{required:!0,tsType:{name:"Array",elements:[{name:"DropDownButtonMenuItemProps"}],raw:"DropDownButtonMenuItemProps[]"},description:""}}};const e6=Pn(DC)({border:0}),t6=({tooltip:n,onClick:e,selected:t,children:r,...i})=>Q(Ty,{title:n??"",placement:"bottom",PopperProps:{modifiers:[{name:"offset",options:{offset:[0,-10]}}]},children:Q(e6,{color:"primary",onClick:e,selected:t,...i,children:r})});t6.__docgenInfo={description:"",methods:[],displayName:"TooltipToggleButton",props:{tooltip:{required:!1,tsType:{name:"string"},description:"Tooltip text"}},composes:["Omit"]};const n6=({value:n,onSave:e,error:t,errorText:r,helperText:i,label:s,fullWidth:o,...a})=>{const[u,c]=ie.useState(!1),[f,d]=ie.useState(n??""),g=ki(),y=()=>c(!0),m=()=>{e(f),c(!1)},v=()=>{d(n),c(!1)};return Q(Zn,{display:"flex",alignItems:"center",gap:1,children:u||n===""?rt(Ki,{direction:"row",alignItems:"baseline",gap:1,children:[Q(g5,{autoFocus:!0,label:s,value:f,onChange:x=>d(x.target.value),error:t,helperText:t?r:i,fullWidth:o,...a}),Q(Ao,{onClick:m,size:"small",children:Q(c5,{sx:{color:g.palette.primary.main,lineHeight:"inherit"}})}),Q(Ao,{onClick:v,size:"small",children:Q(h5,{sx:{color:g.palette.primary.main,lineHeight:"inherit"}})})]}):rt(Ki,{direction:"column",children:[s&&rt(Yi,{sx:{fontWeight:"bold"},children:[s,":"]}),rt(Ki,{direction:"row",alignItems:"center",gap:1,children:[Q(Ps,{children:n}),Q(Ao,{onClick:y,size:"small",children:Q(f5,{fontSize:"inherit"})})]})]})})};n6.__docgenInfo={description:"",methods:[],displayName:"EditableTextField",props:{value:{required:!0,tsType:{name:"string"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},errorText:{required:!1,tsType:{name:"string"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""}}};const r6=({checked:n,id:e,name:t,label:r,required:i=!1,...s})=>(ki(),r?Q(U3,{required:i,control:Q(Y1,{checked:n,id:e,name:t,...s,color:"primary"}),label:r}):Q(Y1,{checked:n,id:e,name:t,...s,color:"primary"}));r6.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["CheckboxProps"]};const i6=({text:n,successMsg:e="Copied!",ariaLabel:t="copy to clipboard",testFailure:r=!1,sx:i})=>{const[s,o]=ie.useState(vw),[a,u]=ie.useState(e),[c,f]=ie.useState(!1),d=ki(),g=()=>{f(!1)},y=async()=>{try{if(r)throw new Error("Simulated clipboard failure");await navigator.clipboard.writeText(n),f(!0),o(oF),u(e),setTimeout(()=>{o(vw),f(!1)},1500)}catch(m){const v=m instanceof Error?m.message:"Clipboard write failed";u(v),f(!0)}};return Q(Ty,{title:a,onClose:g,open:c,leaveDelay:1400,arrow:!0,placement:"right",componentsProps:{tooltip:{sx:{bgcolor:a!==e?d.palette.error.main:void 0,[`& .${Ms.arrow}`]:{color:a!==e?d.palette.error.main:void 0},fontSize:"0.75rem"}}},children:Q(ko,{style:"base",onClick:y,"aria-label":t,sx:{color:d.palette.primary.main,padding:.5,borderRadius:1,...i},children:Q(Gs,{icon:s})})})};i6.__docgenInfo={description:"",methods:[],displayName:"CopyToClipboard",props:{style:{required:!1,tsType:{name:"String"},description:""},text:{required:!0,tsType:{name:"string"},description:""},successMsg:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Copied!"',computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"copy to clipboard"',computed:!1}},testFailure:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const s6=o5("div")({position:"relative",width:360}),o6=ie.forwardRef(function(e,t){const{endIcon:r,error:i,id:s,loading:o,name:a,placeholder:u,progressProps:c,renderOption:f,onSearch:d,onKeyDown:g,freeSolo:y=!0,...m}=e,v=Bo(),{getRootProps:x,getInputProps:b,getListboxProps:E,getOptionProps:T,popupOpen:C,anchorEl:R,setAnchorEl:F,groupedOptions:O}=Z5({freeSolo:y,...m}),$=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='${encodeURIComponent(v.palette.primary.main)}'><path d='M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/></svg>") no-repeat center`,L=Bd(t,F);return rt("div",{children:[Q(VD,{ref:L,slotProps:{root:{...x()}},inputProps:b(),size:"small",type:"search",sx:{width:360,'& input[type="search"]::-webkit-search-cancel-button':{WebkitAppearance:"none",height:"1em",width:"1em",cursor:"pointer",background:$}},id:s,onKeyDown:g,name:a,error:i,endAdornment:Q(gy,{children:rt(Ki,{direction:"row",spacing:.5,children:[o?Q(b3,{id:"loading",size:"20px",...c}):Q(Ao,{size:"small",onClick:d,"aria-label":"search",children:Q(By,{fontSize:"inherit"})}),r]})}),placeholder:u||"Search"}),R&&Q(vy,{open:C,anchorEl:R,slots:{root:s6},children:O.length>0?Q(xy,{elevation:3,sx:{backgroundColor:v.palette.mode==="dark"?"#2A2A2A":"#eee",backgroundImage:"none",width:360,padding:2,marginTop:1},children:Q(Ki,{rowGap:1,children:Q(t5,{sx:{maxHeight:400,overflow:"auto"},...E(),children:O.map((N,B)=>{const z=T({option:N,index:B});if(f)return f(z,N);const{key:H,...Z}=z;return Q(vC,{disablePadding:!0,...Z,children:Q(FC,{onClick:G=>{d&&d(G)},children:rt(Ki,{direction:"row",columnGap:1,alignItems:"center",children:[N.isRecentSearch?Q(Gs,{icon:aF}):null,Q(Sy,{primary:N.label})]})})},`${H}-${B}`)})})})}):null})]})});o6.__docgenInfo={description:"",methods:[],displayName:"MiniSearchAutocomplete",props:{endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the search icon"},error:{required:!1,tsType:{name:"boolean"},description:"If `true`, the `input` will indicate an error."},id:{required:!1,tsType:{name:"string"},description:"The id of the `input` element."},loading:{required:!1,tsType:{name:"boolean"},description:"If true, a loading indicator will be visible."},name:{required:!1,tsType:{name:"string"},description:"Name attribute of the input element."},placeholder:{required:!1,tsType:{name:"string"},description:"The short hint displayed in the input before the user enters a value."},progressProps:{required:!1,tsType:{name:"ProgressProps"},description:`Props which will be applied to the circular progress indicator when loading
is set to true`},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  props: React.HTMLAttributes<HTMLLIElement> & {
    key: any;
  },
  option: Value
) => React.ReactNode`,signature:{arguments:[{type:{name:"intersection",raw:`React.HTMLAttributes<HTMLLIElement> & {
  key: any;
}`,elements:[{name:"ReactHTMLAttributes",raw:"React.HTMLAttributes<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},{name:"signature",type:"object",raw:`{
  key: any;
}`,signature:{properties:[{key:"key",value:{name:"any",required:!0}}]}}]},name:"props"},{type:{name:"Value"},name:"option"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:`Render the option
@param props The props to apply on the li element.
@param option The option to render.
@returns`},onSearch:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLElement>",elements:[{name:"HTMLElement"}]},description:"Callback fired when the search button is clicked\n\n`(event: React.MouseEvent<HTMLButtonElement>) => void;`"},onKeyDown:{required:!1,tsType:{name:"ReactKeyboardEventHandler",raw:"React.KeyboardEventHandler<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:"Callback fired when the a key is pressed\n\n`(event: React.KeyboardEvent<HTMLButtonElement>) => void;`"}},composes:["UseAutocompleteProps"]};const IS=ie.forwardRef((n,e)=>Q(EC,{variant:"contained",ref:e,color:"primary",...n,children:n.children}));IS.__docgenInfo={description:"",methods:[],displayName:"PrimaryButton"};const a6=({autoFocus:n=!1,placeholder:e="Search",inputRef:t,name:r,value:i,onBlur:s,onChange:o,onSearch:a})=>rt(Zn,{id:"search-box",height:44,width:600,display:"flex",alignItems:"center",component:"form",onSubmit:a,children:[Q(XD,{id:"search-box-input",type:"search",sx:{height:"100%",width:"100%",borderWidth:1,borderRightWidth:0,borderColor:"#6D6D6D",borderStyle:"solid",borderTopLeftRadius:4,borderBottomLeftRadius:4},inputProps:{sx:{paddingInline:1.5}},ref:t,autoFocus:n,placeholder:e,onBlur:s,onChange:o,value:i,name:r}),Q(IS,{id:"search-box-button","aria-label":"search",type:"submit",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:4,borderBottomRightRadius:4,height:"100%"},disableElevation:!0,children:Q(By,{size:"xl"})})]});a6.__docgenInfo={description:"",methods:[],displayName:"SearchBox",props:{autoFocus:{required:!1,tsType:{name:"boolean"},description:"If true, the input element is focused during the first mount.",defaultValue:{value:"false",computed:!1}},inputRef:{required:!1,tsType:{name:"union",raw:"React.ForwardedRef<HTMLInputElement> | React.RefObject<HTMLInputElement>",elements:[{name:"ReactForwardedRef",raw:"React.ForwardedRef<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]}]},description:"Pass a ref to the input element."},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the input looses focus (i.e. blurred).
Notice that the first argument (event) might be undefined.
@param event
@returns void`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the value is changed.
@param event The event source of the callback. You can pull out the new value by accessing event.target.value (string).
@returns void`},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<HTMLFormElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLFormElement>",elements:[{name:"HTMLFormElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the search button is clicked.
@param event
@returns`},name:{required:!1,tsType:{name:'InputBaseProps["name"]',raw:'InputBaseProps["name"]'},description:"Name attribute of the input element."},placeholder:{required:!1,tsType:{name:'InputBaseProps["placeholder"]',raw:'InputBaseProps["placeholder"]'},description:"The short hint displayed in the input before the user enters a value.",defaultValue:{value:'"Search"',computed:!1}},value:{required:!1,tsType:{name:"Value"},description:"The value of the input element, required for a controlled component."}}};var Jd={exports:{}},AS={};function PS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=PS(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function xw(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=PS(n))&&(r&&(r+=" "),r+=e);return r}const l6=Object.freeze(Object.defineProperty({__proto__:null,clsx:xw,default:xw},Symbol.toStringTag,{value:"Module"})),u6=tC(l6);var bn={},us={};Object.defineProperty(us,"__esModule",{value:!0});us.dontSetMe=p6;us.findInArray=c6;us.int=d6;us.isFunction=h6;us.isNum=f6;function c6(n,e){for(let t=0,r=n.length;t<r;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function h6(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function f6(n){return typeof n=="number"&&!isNaN(n)}function d6(n){return parseInt(n,10)}function p6(n,e,t){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.browserPrefixToKey=OS;Ga.browserPrefixToStyle=g6;Ga.default=void 0;Ga.getPrefix=MS;const hm=["Moz","Webkit","O","ms"];function MS(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!t||e in t)return"";for(let r=0;r<hm.length;r++)if(OS(e,hm[r])in t)return hm[r];return""}function OS(n,e){return e?"".concat(e).concat(m6(n)):n}function g6(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function m6(n){let e="",t=!0;for(let r=0;r<n.length;r++)t?(e+=n[r].toUpperCase(),t=!1):n[r]==="-"?t=!0:e+=n[r];return e}Ga.default=MS();Object.defineProperty(bn,"__esModule",{value:!0});bn.addClassName=FS;bn.addEvent=v6;bn.addUserSelectStyles=P6;bn.createCSSTransform=T6;bn.createSVGTransform=R6;bn.getTouch=I6;bn.getTouchIdentifier=A6;bn.getTranslation=Uy;bn.innerHeight=E6;bn.innerWidth=C6;bn.matchesSelector=kS;bn.matchesSelectorAndParentsTo=_6;bn.offsetXYFromParent=S6;bn.outerHeight=w6;bn.outerWidth=b6;bn.removeClassName=DS;bn.removeEvent=x6;bn.removeUserSelectStyles=M6;var Gr=us,ww=y6(Ga);function LS(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(LS=function(r){return r?t:e})(n)}function y6(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=LS(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}let ff="";function kS(n,e){return ff||(ff=(0,Gr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Gr.isFunction)(n[t])})),(0,Gr.isFunction)(n[ff])?n[ff](e):!1}function _6(n,e,t){let r=n;do{if(kS(r,e))return!0;if(r===t)return!1;r=r.parentNode}while(r);return!1}function v6(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.addEventListener?n.addEventListener(e,t,i):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function x6(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.removeEventListener?n.removeEventListener(e,t,i):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function w6(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Gr.int)(t.borderTopWidth),e+=(0,Gr.int)(t.borderBottomWidth),e}function b6(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Gr.int)(t.borderLeftWidth),e+=(0,Gr.int)(t.borderRightWidth),e}function E6(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Gr.int)(t.paddingTop),e-=(0,Gr.int)(t.paddingBottom),e}function C6(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Gr.int)(t.paddingLeft),e-=(0,Gr.int)(t.paddingRight),e}function S6(n,e,t){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-i.left)/t,o=(n.clientY+e.scrollTop-i.top)/t;return{x:s,y:o}}function T6(n,e){const t=Uy(n,e,"px");return{[(0,ww.browserPrefixToKey)("transform",ww.default)]:t}}function R6(n,e){return Uy(n,e,"")}function Uy(n,e,t){let{x:r,y:i}=n,s="translate(".concat(r).concat(t,",").concat(i).concat(t,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+t),a="".concat(typeof e.y=="string"?e.y:e.y+t);s="translate(".concat(o,", ").concat(a,")")+s}return s}function I6(n,e){return n.targetTouches&&(0,Gr.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,Gr.findInArray)(n.changedTouches,t=>e===t.identifier)}function A6(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function P6(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&FS(n.body,"react-draggable-transparent-selection")}function M6(n){if(n)try{if(n.body&&DS(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function FS(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function DS(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.canDragX=k6;cs.canDragY=F6;cs.createCoreData=N6;cs.createDraggableData=z6;cs.getBoundPosition=O6;cs.getControlPosition=D6;cs.snapToGrid=L6;var Fr=us,Rl=bn;function O6(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:r}=n.props;r=typeof r=="string"?r:$6(r);const i=Gy(n);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const u=a,c=o.getComputedStyle(i),f=o.getComputedStyle(u);r={left:-i.offsetLeft+(0,Fr.int)(f.paddingLeft)+(0,Fr.int)(c.marginLeft),top:-i.offsetTop+(0,Fr.int)(f.paddingTop)+(0,Fr.int)(c.marginTop),right:(0,Rl.innerWidth)(u)-(0,Rl.outerWidth)(i)-i.offsetLeft+(0,Fr.int)(f.paddingRight)-(0,Fr.int)(c.marginRight),bottom:(0,Rl.innerHeight)(u)-(0,Rl.outerHeight)(i)-i.offsetTop+(0,Fr.int)(f.paddingBottom)-(0,Fr.int)(c.marginBottom)}}return(0,Fr.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Fr.isNum)(r.bottom)&&(t=Math.min(t,r.bottom)),(0,Fr.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Fr.isNum)(r.top)&&(t=Math.max(t,r.top)),[e,t]}function L6(n,e,t){const r=Math.round(e/n[0])*n[0],i=Math.round(t/n[1])*n[1];return[r,i]}function k6(n){return n.props.axis==="both"||n.props.axis==="x"}function F6(n){return n.props.axis==="both"||n.props.axis==="y"}function D6(n,e,t){const r=typeof e=="number"?(0,Rl.getTouch)(n,e):null;if(typeof e=="number"&&!r)return null;const i=Gy(t),s=t.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Rl.offsetXYFromParent)(r||n,s,t.props.scale)}function N6(n,e,t){const r=!(0,Fr.isNum)(n.lastX),i=Gy(n);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:i,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function z6(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function $6(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function Gy(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Qd={},ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.default=B6;function B6(){}Object.defineProperty(Qd,"__esModule",{value:!0});Qd.default=void 0;var fm=G6(ie),xr=qy(CC),U6=qy(Gd),tr=bn,ro=cs,dm=us,ku=qy(ep);function qy(n){return n&&n.__esModule?n:{default:n}}function NS(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(NS=function(r){return r?t:e})(n)}function G6(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=NS(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=i?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}function ur(n,e,t){return e=q6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q6(n){var e=W6(n,"string");return typeof e=="symbol"?e:String(e)}function W6(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const mi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let io=mi.mouse,tp=class extends fm.Component{constructor(){super(...arguments),ur(this,"dragging",!1),ur(this,"lastX",NaN),ur(this,"lastY",NaN),ur(this,"touchIdentifier",null),ur(this,"mounted",!1),ur(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,tr.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,tr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const i=(0,tr.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,ro.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,u=(0,ro.createCoreData)(this,o,a);(0,ku.default)("DraggableCore: handleDragStart: %j",u),(0,ku.default)("calling",this.props.onStart),!(this.props.onStart(e,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,tr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,tr.addEvent)(r,io.move,this.handleDrag),(0,tr.addEvent)(r,io.stop,this.handleDragStop))}),ur(this,"handleDrag",e=>{const t=(0,ro.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let a=r-this.lastX,u=i-this.lastY;if([a,u]=(0,ro.snapToGrid)(this.props.grid,a,u),!a&&!u)return;r=this.lastX+a,i=this.lastY+u}const s=(0,ro.createCoreData)(this,r,i);if((0,ku.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(u)}return}this.lastX=r,this.lastY=i}),ur(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,ro.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let u=r-this.lastX||0,c=i-this.lastY||0;[u,c]=(0,ro.snapToGrid)(this.props.grid,u,c),r=this.lastX+u,i=this.lastY+c}const s=(0,ro.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,tr.removeUserSelectStyles)(a.ownerDocument),(0,ku.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,ku.default)("DraggableCore: Removing handlers"),(0,tr.removeEvent)(a.ownerDocument,io.move,this.handleDrag),(0,tr.removeEvent)(a.ownerDocument,io.stop,this.handleDragStop))}),ur(this,"onMouseDown",e=>(io=mi.mouse,this.handleDragStart(e))),ur(this,"onMouseUp",e=>(io=mi.mouse,this.handleDragStop(e))),ur(this,"onTouchStart",e=>(io=mi.touch,this.handleDragStart(e))),ur(this,"onTouchEnd",e=>(io=mi.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,tr.addEvent)(e,mi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,tr.removeEvent)(t,mi.mouse.move,this.handleDrag),(0,tr.removeEvent)(t,mi.touch.move,this.handleDrag),(0,tr.removeEvent)(t,mi.mouse.stop,this.handleDragStop),(0,tr.removeEvent)(t,mi.touch.stop,this.handleDragStop),(0,tr.removeEvent)(e,mi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,tr.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:U6.default.findDOMNode(this)}render(){return fm.cloneElement(fm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Qd.default=tp;ur(tp,"displayName","DraggableCore");ur(tp,"propTypes",{allowAnyClick:xr.default.bool,children:xr.default.node.isRequired,disabled:xr.default.bool,enableUserSelectHack:xr.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:xr.default.arrayOf(xr.default.number),handle:xr.default.string,cancel:xr.default.string,nodeRef:xr.default.object,onStart:xr.default.func,onDrag:xr.default.func,onStop:xr.default.func,onMouseDown:xr.default.func,scale:xr.default.number,className:dm.dontSetMe,style:dm.dontSetMe,transform:dm.dontSetMe});ur(tp,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var e=g(ie),t=f(CC),r=f(Gd),i=f(u6),s=bn,o=cs,a=us,u=f(Qd),c=f(ep);function f(E){return E&&E.__esModule?E:{default:E}}function d(E){if(typeof WeakMap!="function")return null;var T=new WeakMap,C=new WeakMap;return(d=function(R){return R?C:T})(E)}function g(E,T){if(E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var C=d(T);if(C&&C.has(E))return C.get(E);var R={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in E)if(O!=="default"&&Object.prototype.hasOwnProperty.call(E,O)){var $=F?Object.getOwnPropertyDescriptor(E,O):null;$&&($.get||$.set)?Object.defineProperty(R,O,$):R[O]=E[O]}return R.default=E,C&&C.set(E,R),R}function y(){return y=Object.assign?Object.assign.bind():function(E){for(var T=1;T<arguments.length;T++){var C=arguments[T];for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(E[R]=C[R])}return E},y.apply(this,arguments)}function m(E,T,C){return T=v(T),T in E?Object.defineProperty(E,T,{value:C,enumerable:!0,configurable:!0,writable:!0}):E[T]=C,E}function v(E){var T=x(E,"string");return typeof T=="symbol"?T:String(T)}function x(E,T){if(typeof E!="object"||E===null)return E;var C=E[Symbol.toPrimitive];if(C!==void 0){var R=C.call(E,T);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(E)}class b extends e.Component{static getDerivedStateFromProps(T,C){let{position:R}=T,{prevPropsPosition:F}=C;return R&&(!F||R.x!==F.x||R.y!==F.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:R,prevPropsPosition:F}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(T){super(T),m(this,"onDragStart",(C,R)=>{if((0,c.default)("Draggable: onDragStart: %j",R),this.props.onStart(C,(0,o.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(C,R)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",R);const F=(0,o.createDraggableData)(this,R),O={x:F.x,y:F.y,slackX:0,slackY:0};if(this.props.bounds){const{x:L,y:N}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[B,z]=(0,o.getBoundPosition)(this,O.x,O.y);O.x=B,O.y=z,O.slackX=this.state.slackX+(L-O.x),O.slackY=this.state.slackY+(N-O.y),F.x=O.x,F.y=O.y,F.deltaX=O.x-this.state.x,F.deltaY=O.y-this.state.y}if(this.props.onDrag(C,F)===!1)return!1;this.setState(O)}),m(this,"onDragStop",(C,R)=>{if(!this.state.dragging||this.props.onStop(C,(0,o.createDraggableData)(this,R))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",R);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:L,y:N}=this.props.position;O.x=L,O.y=N}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:T.position?T.position.x:T.defaultPosition.x,y:T.position?T.position.y:T.defaultPosition.y,prevPropsPosition:{...T.position},slackX:0,slackY:0,isElementSVG:!1},T.position&&!(T.onDrag||T.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var T,C;return(T=(C=this.props)===null||C===void 0||(C=C.nodeRef)===null||C===void 0?void 0:C.current)!==null&&T!==void 0?T:r.default.findDOMNode(this)}render(){const{axis:T,bounds:C,children:R,defaultPosition:F,defaultClassName:O,defaultClassNameDragging:$,defaultClassNameDragged:L,position:N,positionOffset:B,scale:z,...H}=this.props;let Z={},G=null;const q=!!!N||this.state.dragging,V=N||F,ne={x:(0,o.canDragX)(this)&&q?this.state.x:V.x,y:(0,o.canDragY)(this)&&q?this.state.y:V.y};this.state.isElementSVG?G=(0,s.createSVGTransform)(ne,B):Z=(0,s.createCSSTransform)(ne,B);const re=(0,i.default)(R.props.className||"",O,{[$]:this.state.dragging,[L]:this.state.dragged});return e.createElement(u.default,y({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(R),{className:re,style:{...R.props.style,...Z},transform:G}))}}n.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...u.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(b,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(AS);const{default:zS,DraggableCore:j6}=AS;Jd.exports=zS;Jd.exports.default=zS;Jd.exports.DraggableCore=j6;var H6=Jd.exports;const V6=zd(H6);var Ln=function(){return Ln=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ln.apply(this,arguments)},bw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Ew={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},df={width:"20px",height:"20px",position:"absolute",zIndex:1},X6={top:Ln(Ln({},bw),{top:"-5px"}),right:Ln(Ln({},Ew),{left:void 0,right:"-5px"}),bottom:Ln(Ln({},bw),{top:void 0,bottom:"-5px"}),left:Ln(Ln({},Ew),{left:"-5px"}),topRight:Ln(Ln({},df),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Ln(Ln({},df),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Ln(Ln({},df),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Ln(Ln({},df),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Y6=ie.memo(function(n){var e=n.onResizeStart,t=n.direction,r=n.children,i=n.replaceStyles,s=n.className,o=ie.useCallback(function(c){e(c,t)},[e,t]),a=ie.useCallback(function(c){e(c,t)},[e,t]),u=ie.useMemo(function(){return Ln(Ln({position:"absolute",userSelect:"none"},X6[t]),i??{})},[i,t]);return ft.jsx("div",{className:s||void 0,style:u,onMouseDown:o,onTouchStart:a,children:r})}),K6=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gi=function(){return Gi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Gi.apply(this,arguments)},Z6={width:"auto",height:"auto"},pf=function(n,e,t){return Math.max(Math.min(n,t),e)},Cw=function(n,e,t){var r=Math.round(n/e);return r*e+t*(r-1)},ul=function(n,e){return new RegExp(n,"i").test(e)},gf=function(n){return!!(n.touches&&n.touches.length)},J6=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},Sw=function(n,e,t){t===void 0&&(t=0);var r=e.reduce(function(s,o,a){return Math.abs(o-n)<Math.abs(e[s]-n)?a:s},0),i=Math.abs(e[r]-n);return t===0||i<t?e[r]:n},pm=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},mf=function(n,e,t,r){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var i=Number(n.replace("%",""))/100;return e*i}if(n.endsWith("vw")){var i=Number(n.replace("vw",""))/100;return t*i}if(n.endsWith("vh")){var i=Number(n.replace("vh",""))/100;return r*i}}return n},Q6=function(n,e,t,r,i,s,o){return r=mf(r,n.width,e,t),i=mf(i,n.height,e,t),s=mf(s,n.width,e,t),o=mf(o,n.height,e,t),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},eB=function(n){return Array.isArray(n)?n:[n,n]},tB=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Tw="__resizable_base__",nB=function(n){K6(e,n);function e(t){var r,i,s,o,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var u=a.parentNode;if(!u)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(Tw):c.className+=Tw,u.appendChild(c),c},a.removeBase=function(u){var c=a.parentNode;c&&c.removeChild(u)},a.state={isResizing:!1,width:(i=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Z6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,r=this.props.size,i=function(a){var u;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((u=t.propsSize[a])===null||u===void 0)&&u.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var c=t.getParentSize(),f=Number(t.state[a].toString().replace("px","")),d=f/c[a]*100;return"".concat(d,"%")}return pm(t.state[a])},s=r&&typeof r.width<"u"&&!this.state.isResizing?pm(r.width):i("width"),o=r&&typeof r.height<"u"&&!this.state.isResizing?pm(r.height):i("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===t&&(typeof i>"u"||i==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,r){var i=this.props.boundsByDirection,s=this.state.direction,o=i&&ul("left",s),a=i&&ul("top",s),u,c;if(this.props.bounds==="parent"){var f=this.parentNode;f&&(u=o?this.resizableRight-this.parentLeft:f.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:f.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(u=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(u=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return u&&Number.isFinite(u)&&(t=t&&t<u?t:u),c&&Number.isFinite(c)&&(r=r&&r<c?r:c),{maxWidth:t,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(t,r){var i=this.props.scale||1,s=eB(this.props.resizeRatio||1),o=s[0],a=s[1],u=this.state,c=u.direction,f=u.original,d=this.props,g=d.lockAspectRatio,y=d.lockAspectRatioExtraHeight,m=d.lockAspectRatioExtraWidth,v=f.width,x=f.height,b=y||0,E=m||0;return ul("right",c)&&(v=f.width+(t-f.x)*o/i,g&&(x=(v-E)/this.ratio+b)),ul("left",c)&&(v=f.width-(t-f.x)*o/i,g&&(x=(v-E)/this.ratio+b)),ul("bottom",c)&&(x=f.height+(r-f.y)*a/i,g&&(v=(x-b)*this.ratio+E)),ul("top",c)&&(x=f.height-(r-f.y)*a/i,g&&(v=(x-b)*this.ratio+E)),{newWidth:v,newHeight:x}},e.prototype.calculateNewSizeFromAspectRatio=function(t,r,i,s){var o=this.props,a=o.lockAspectRatio,u=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,f=typeof s.width>"u"?10:s.width,d=typeof i.width>"u"||i.width<0?t:i.width,g=typeof s.height>"u"?10:s.height,y=typeof i.height>"u"||i.height<0?r:i.height,m=u||0,v=c||0;if(a){var x=(g-m)*this.ratio+v,b=(y-m)*this.ratio+v,E=(f-v)/this.ratio+m,T=(d-v)/this.ratio+m,C=Math.max(f,x),R=Math.min(d,b),F=Math.max(g,E),O=Math.min(y,T);t=pf(t,C,R),r=pf(r,F,O)}else t=pf(t,f,d),r=pf(r,g,y);return{newWidth:t,newHeight:r}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,u=o.top,c=o.right,f=o.bottom;this.resizableLeft=a*t,this.resizableRight=c*t,this.resizableTop=u*t,this.resizableBottom=f*t}},e.prototype.onResizeStart=function(t,r){if(!(!this.resizable||!this.window)){var i=0,s=0;if(t.nativeEvent&&J6(t.nativeEvent)?(i=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&gf(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,r,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,u=this.window.getComputedStyle(this.resizable);if(u.flexBasis!=="auto"){var c=this.parentNode;if(c){var f=this.window.getComputedStyle(c).flexDirection;this.flexDir=f.startsWith("row")?"row":"column",a=u.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:i,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Gi(Gi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(d)}},e.prototype.onMouseMove=function(t){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&gf(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,s=i.maxWidth,o=i.maxHeight,a=i.minWidth,u=i.minHeight,c=gf(t)?t.touches[0].clientX:t.clientX,f=gf(t)?t.touches[0].clientY:t.clientY,d=this.state,g=d.direction,y=d.original,m=d.width,v=d.height,x=this.getParentSize(),b=Q6(x,this.window.innerWidth,this.window.innerHeight,s,o,a,u);s=b.maxWidth,o=b.maxHeight,a=b.minWidth,u=b.minHeight;var E=this.calculateNewSizeFromDirection(c,f),T=E.newHeight,C=E.newWidth,R=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(C=Sw(C,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=Sw(T,this.props.snap.y,this.props.snapGap));var F=this.calculateNewSizeFromAspectRatio(C,T,{width:R.maxWidth,height:R.maxHeight},{width:a,height:u});if(C=F.newWidth,T=F.newHeight,this.props.grid){var O=Cw(C,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),$=Cw(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),L=this.props.snapGap||0,N=L===0||Math.abs(O-C)<=L?O:C,B=L===0||Math.abs($-T)<=L?$:T;C=N,T=B}var z={width:C-y.width,height:T-y.height};if(this.delta=z,m&&typeof m=="string"){if(m.endsWith("%")){var H=C/x.width*100;C="".concat(H,"%")}else if(m.endsWith("vw")){var Z=C/this.window.innerWidth*100;C="".concat(Z,"vw")}else if(m.endsWith("vh")){var G=C/this.window.innerHeight*100;C="".concat(G,"vh")}}if(v&&typeof v=="string"){if(v.endsWith("%")){var H=T/x.height*100;T="".concat(H,"%")}else if(v.endsWith("vw")){var Z=T/this.window.innerWidth*100;T="".concat(Z,"vw")}else if(v.endsWith("vh")){var G=T/this.window.innerHeight*100;T="".concat(G,"vh")}}var W={width:this.createSizeForCssProperty(C,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?W.flexBasis=W.width:this.flexDir==="column"&&(W.flexBasis=W.height);var q=this.state.width!==W.width,V=this.state.height!==W.height,ne=this.state.flexBasis!==W.flexBasis,re=q||V||ne;re&&Gd.flushSync(function(){r.setState(W)}),this.props.onResize&&re&&this.props.onResize(t,g,this.resizable,z)}},e.prototype.onMouseUp=function(t){var r,i,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Gi(Gi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var r,i;this.setState({width:(r=t.width)!==null&&r!==void 0?r:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},e.prototype.renderResizer=function(){var t=this,r=this.props,i=r.enable,s=r.handleStyles,o=r.handleClasses,a=r.handleWrapperStyle,u=r.handleWrapperClass,c=r.handleComponent;if(!i)return null;var f=Object.keys(i).map(function(d){return i[d]!==!1?ft.jsx(Y6,{direction:d,onResizeStart:t.onResizeStart,replaceStyles:s&&s[d],className:o&&o[d],children:c&&c[d]?c[d]:null},d):null});return ft.jsx("div",{className:u,style:a,children:f})},e.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(o,a){return tB.indexOf(a)!==-1||(o[a]=t.props[a]),o},{}),i=Gi(Gi(Gi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return ft.jsxs(s,Gi({style:i,className:this.props.className},r,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&ft.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(ie.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var w0=function(n,e){return w0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},w0(n,e)};function rB(n,e){w0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$n.apply(this,arguments)};function iB(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var sB={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},oB=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},aB=function(n){rB(e,n);function e(t){var r=n.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,r=t.left,i=t.top,s=this.getDraggablePosition(),o=s.x,a=s.y;this.draggable.setState({x:o-r,y:a-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,r=t.x,i=t.y;return{x:r,y:i}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:r}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,r){this.props.onDragStart&&this.props.onDragStart(t,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var u=s.getBoundingClientRect(),c=u.left,f=u.top,d=document.body.getBoundingClientRect(),g=-(c-s.offsetLeft*o-d.left)/o,y=-(f-s.offsetTop*o-d.top)/o,m=(document.body.offsetWidth-this.resizable.size.width*o)/o+g,v=(document.body.offsetHeight-this.resizable.size.height*o)/o+y;return this.setState({bounds:{top:y,right:m,bottom:v,left:g}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var x=s.getBoundingClientRect(),b=x.left,E=x.top,T=-(b-s.offsetLeft*o)/o,C=-(E-s.offsetTop*o)/o,m=(window.innerWidth-this.resizable.size.width*o)/o+T,v=(window.innerHeight-this.resizable.size.height*o)/o+C;return this.setState({bounds:{top:C,right:m,bottom:v,left:T}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var R=a.getBoundingClientRect(),F=R.left,O=R.top,$=s.getBoundingClientRect(),L=$.left,N=$.top,B=(F-L)/o,z=O-N;if(this.resizable){this.updateOffsetFromParent();var H=this.offsetFromParent;this.setState({bounds:{top:z-H.top,right:B+(a.offsetWidth-this.resizable.size.width)-H.left/o,bottom:z+(a.offsetHeight-this.resizable.size.height)-H.top,left:B-H.left/o}})}}}},e.prototype.onDrag=function(t,r){if(this.props.onDrag){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,$n($n({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(t,$n($n({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,$n($n({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,r){if(this.props.onDragStop){var i=this.offsetFromParent,s=i.left,o=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,$n($n({},r),{x:r.x+s,y:r.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,$n($n({},r),{x:r.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,$n($n({},r),{x:this.originalPosition.x+s,y:r.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,r,i){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+o.left,y:a.y+o.top},this.originalPosition=a,this.props.bounds){var u=this.getParent(),c=void 0;this.props.bounds==="parent"?c=u:this.props.bounds==="body"?c=document.body:this.props.bounds==="window"?c=window:typeof this.props.bounds=="string"?c=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(c=this.props.bounds);var f=this.getSelfElement();if(f instanceof Element&&(c instanceof HTMLElement||c===window)&&u instanceof HTMLElement){var d=this.getMaxSizesFromProps(),g=d.maxWidth,y=d.maxHeight,m=this.getParentSize();if(g&&typeof g=="string")if(g.endsWith("%")){var v=Number(g.replace("%",""))/100;g=m.width*v}else g.endsWith("px")&&(g=Number(g.replace("px","")));if(y&&typeof y=="string")if(y.endsWith("%")){var v=Number(y.replace("%",""))/100;y=m.height*v}else y.endsWith("px")&&(y=Number(y.replace("px","")));var x=f.getBoundingClientRect(),b=x.left,E=x.top,T=this.props.bounds==="window"?{left:0,top:0}:c.getBoundingClientRect(),C=T.left,R=T.top,F=this.getOffsetWidth(c),O=this.getOffsetHeight(c),$=r.toLowerCase().endsWith("left"),L=r.toLowerCase().endsWith("right"),N=r.startsWith("top"),B=r.startsWith("bottom");if(($||N)&&this.resizable){var z=(b-C)/s+this.resizable.size.width;this.setState({maxWidth:z>Number(g)?g:z})}if(L||this.props.lockAspectRatio&&!$&&!N){var z=F+(C-b)/s;this.setState({maxWidth:z>Number(g)?g:z})}if((N||$)&&this.resizable){var z=(E-R)/s+this.resizable.size.height;this.setState({maxHeight:z>Number(y)?y:z})}if(B||this.props.lockAspectRatio&&!N&&!$){var z=O+(R-E)/s;this.setState({maxHeight:z>Number(y)?y:z})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,r,i)},e.prototype.onResize=function(t,r,i,s){var o=this,a={x:this.originalPosition.x,y:this.originalPosition.y},u=-s.width,c=-s.height,f=["top","left","topLeft","bottomLeft","topRight"];f.includes(r)&&(r==="bottomLeft"?a.x+=u:(r==="topRight"||(a.x+=u),a.y+=c));var d=this.draggable.state;(a.x!==d.x||a.y!==d.y)&&Gd.flushSync(function(){o.draggable.setState(a)}),this.updateOffsetFromParent();var g=this.offsetFromParent,y=this.getDraggablePosition().x+g.left,m=this.getDraggablePosition().y+g.top;this.resizingPosition={x:y,y:m},this.props.onResize&&this.props.onResize(t,r,i,s,{x:y,y:m})},e.prototype.onResizeStop=function(t,r,i,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),a=o.maxWidth,u=o.maxHeight;this.setState({maxWidth:a,maxHeight:u}),this.props.onResizeStop&&this.props.onResizeStop(t,r,i,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var s=r.getBoundingClientRect(),o=s.left,a=s.top,u=i.getBoundingClientRect(),c=this.getDraggablePosition(),f=r.scrollLeft,d=r.scrollTop;this.offsetFromParent={left:u.left-o+f-c.x*t,top:u.top-a+d-c.y*t}},e.prototype.render=function(){var t=this,r=this.props,i=r.disableDragging,s=r.style,o=r.dragHandleClassName,a=r.position,u=r.onMouseDown,c=r.onMouseUp,f=r.dragAxis,d=r.dragGrid,g=r.bounds,y=r.enableUserSelectHack,m=r.cancel,v=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var x=r.resizeHandleStyles,b=r.resizeHandleClasses,E=r.resizeHandleComponent,T=r.enableResizing,C=r.resizeGrid,R=r.resizeHandleWrapperClass,F=r.resizeHandleWrapperStyle,O=r.scale,$=r.allowAnyClick,L=r.dragPositionOffset,N=iB(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),B=this.props.default?$n({},this.props.default):void 0;delete N.default;var z=i||o?{cursor:"auto"}:{cursor:"move"},H=$n($n($n({},sB),z),s),Z=this.offsetFromParent,G=Z.left,W=Z.top,q;a&&(q={x:a.x-G,y:a.y-W});var V=this.state.resizing?void 0:q,ne=this.state.resizing?"both":f;return ie.createElement(V6,{ref:function(re){re&&(t.draggable=re)},handle:o?".".concat(o):void 0,defaultPosition:B,onMouseDown:u,onMouseUp:c,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ne,disabled:i,grid:d,bounds:g?this.state.bounds:void 0,position:V,enableUserSelectHack:y,cancel:m,scale:O,allowAnyClick:$,nodeRef:this.resizableElement,positionOffset:L},ie.createElement(nB,$n({},N,{ref:function(re){re&&(t.resizable=re,t.resizableElement.current=re.resizable)},defaultSize:B,size:this.props.size,enable:typeof T=="boolean"?oB(T):T,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:H,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:C,handleWrapperClass:R,handleWrapperStyle:F,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:x,handleClasses:b,handleComponent:E,scale:this.props.scale}),v))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(ie.PureComponent);const lB=ie.createContext(void 0),$S=()=>{const n=ie.useContext(lB);if(!n)throw new Error("FloatingPanel.ToggleButton must be used within a FloatingPanel.Provider");return n},BS=({count:n=0,iconBeforeTitle:e,targetId:t,title:r,children:i,dragHandle:s=null,...o})=>{var d,g;const a=Bo(),u=$S(),c=!((d=u.panels[t])!=null&&d.minimised)&&((g=u.panels[t])==null?void 0:g.visible),f=a.palette.mode==="dark"?a.palette.grey[900]:a.palette.grey[300];return rt(Zn,{sx:{width:"fit-content",height:"fit-content",visibility:c?"visible":"hidden"},...o,children:[rt(bC,{direction:"row",spacing:1,alignItems:"center",padding:1,sx:{backgroundColor:f,width:"fit-content",borderTopLeftRadius:4,borderTopRightRadius:4},children:[s,e,rt(Yi,{sx:{paddingRight:4},children:[r,n>0?rt("span",{css:zc({marginLeft:4,color:a.palette.primary.main},"",""),children:["(",n,")"]}):null]}),Q(Ao,{size:"small",onClick:()=>u==null?void 0:u.toggleVisibility(t),color:"primary","aria-label":"minimise",children:Q(ZD,{fontSize:"small"})})]}),Q(Zn,{sx:{backgroundColor:f,width:"fit-content",height:"fit-content",borderBottomLeftRadius:4,borderBottomRightRadius:4,borderTopRightRadius:4,padding:.4},children:!(u!=null&&u.get(t,"minimised"))&&i})]})};BS.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{targetId:{required:!0,tsType:{name:"string"},description:"For linking to associated ToggleButtonState"},title:{required:!0,tsType:{name:"string"},description:"Panel title."},count:{required:!1,tsType:{name:"number"},description:"Total number of items",defaultValue:{value:"0",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Component content"},dragHandle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",defaultValue:{value:"null",computed:!1}},dragHandleClassName:{required:!1,tsType:{name:"string"},description:`Specifies a selector to be used as the handle that initiates drag. Example:
drag-handle.`},iconBeforeTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The icon to be displayed before the title"},defaultPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:"The x and y property is used to set the default position of the component."}},composes:["HTMLAttributes"]};const uB=({bounds:n,defaultPosition:e={x:50,y:150},dragHandleClassName:t="drag-handle",targetId:r,children:i,...s})=>{var f,d;const o=$S(),a=Bo(),u=!((f=o.panels[r])!=null&&f.minimised)&&((d=o.panels[r])==null?void 0:d.visible),c=Q(JD,{className:t,sx:{fontSize:14,color:a.palette.grey[400],cursor:"move"}});return Q(aB,{bounds:n,enableResizing:!1,dragHandleClassName:t,default:{x:e.x,y:e.y,width:"auto",height:"auto"},css:zc({visibility:u?"visible":"hidden"},"",""),children:Q(BS,{targetId:r,dragHandle:c,...s,children:i})})};uB.__docgenInfo={description:"",methods:[],displayName:"DraggableFloatingPanel",props:{targetId:{required:!0,tsType:{name:"string"},description:"For linking to associated ToggleButtonState"},title:{required:!0,tsType:{name:"string"},description:"Panel title."},bounds:{required:!1,tsType:{name:"union",raw:'"parent" | "window" | "body" | string | Element',elements:[{name:"literal",value:'"parent"'},{name:"literal",value:'"window"'},{name:"literal",value:'"body"'},{name:"string"},{name:"Element"}]},description:`Specifies movement boundaries. Accepted values:

parent restricts movement
within the node's offsetParent (nearest node with position relative or
absolute), window, body, Selector like .fooClassName or Element.`},count:{required:!1,tsType:{name:"number"},description:"Total number of items"},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Component content"},dragHandleClassName:{required:!1,tsType:{name:"string"},description:`Specifies a selector to be used as the handle that initiates drag. Example:
drag-handle.`,defaultValue:{value:'"drag-handle"',computed:!1}},iconBeforeTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The icon to be displayed before the title"},defaultPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:"The x and y property is used to set the default position of the component.",defaultValue:{value:"{ x: 50, y: 150 }",computed:!1}}},composes:["HTMLAttributes"]};Pn(DC)(()=>({border:0}));const cB=({children:n,sx:e,...t})=>{const r=Bo();return Q(uN,{disableGutters:!0,variant:"dense",sx:{backgroundColor:r.palette.mode==="dark"?"#2e2e2e":"#eeeeee",paddingX:2,paddingY:1,...e},...t,children:n})};cB.__docgenInfo={description:"",methods:[],displayName:"Toolbar"};const hB=Ls({type:Kf([nr(),Sl(),hC(),Ls({}).passthrough()]),props:cC(yi()),key:Kf([nr(),oc(),uC()]).optional()}),fB=Ls({open:Dr(),children:hB,className:nr().optional(),id:nr().optional(),role:nr().optional(),closeAfterTransition:Dr().optional(),components:yi().optional(),componentsProps:yi().optional(),container:yi().optional(),disableAutoFocus:Dr().optional(),disableEnforceFocus:Dr().optional(),disableEscapeKeyDown:Dr().optional(),disablePortal:Dr().optional(),disableRestoreFocus:Dr().optional(),disableScrollLock:Dr().optional(),hideBackdrop:Dr().optional(),keepMounted:Dr().optional(),manager:yi().optional(),onBackdropClick:Sl().optional(),onClose:Sl().optional(),onTransitionEnter:Sl().optional(),onTransitionExit:Sl().optional(),sx:yi().optional(),BackdropComponent:yi().optional(),BackdropProps:yi().optional(),slots:yi().optional(),slotProps:yi().optional()}),dB=fB.omit({slots:!0,slotProps:!0,BackdropComponent:!0,BackdropProps:!0,closeAfterTransition:!0,components:!0,componentsProps:!0,container:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableEscapeKeyDown:!0,disableRestoreFocus:!0,hideBackdrop:!0,keepMounted:!0,onBackdropClick:!0,onTransitionEnter:!0,onTransitionExit:!0}).passthrough(),US=({children:n,hideCloseButton:e,...t})=>(dB.parse({children:n,...t}),Q(mC,{...t,children:rt(Zn,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:24,minWidth:300,maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[Q(Zn,{sx:{display:"flex",justifyContent:"flex-end"},children:!e&&rt(EC,{onClick:r=>{var i;return(i=t.onClose)==null?void 0:i.call(t,r,"closeButtonClick")},color:"inherit",sx:{fontSize:18},children:["Close¬†",Q(QD,{sx:{fontSize:14}})]})}),n]})}));US.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{onClose:{required:!0,tsType:{name:"union",raw:`| ((
    event: {},
    reason:
      | "backdropClick" // MUI in-built
      | "escapeKeyDown" // MUI in-built
      | "closeButtonClick" // custom event. Maybe delete and _misuse_ "backdropClick"
  ) => void)
| undefined`,elements:[{name:"unknown"},{name:"undefined"}]},description:""},hideCloseButton:{required:!1,tsType:{name:"boolean"},description:""}}};const pB=ie.createContext(null),gm={didCatch:!1,error:null};class GS extends ie.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=gm}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:s,reason:"imperative-api"}),this.setState(gm)}}componentDidCatch(e,t){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&t.error!==null&&gB(e.resetKeys,i)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(gm)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:i}=this.props,{didCatch:s,error:o}=this.state;let a=e;if(s){const u={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")a=t(u);else if(r)a=ie.createElement(r,u);else if(i!==void 0)a=i;else throw o}return ie.createElement(pB.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}}function gB(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,r)=>!Object.is(t,e[r]))}var mB="Expected a function",Rw=NaN,yB="[object Symbol]",_B=/^\s+|\s+$/g,vB=/^[-+]0x[0-9a-f]+$/i,xB=/^0b[01]+$/i,wB=/^0o[0-7]+$/i,bB=parseInt,EB=typeof As=="object"&&As&&As.Object===Object&&As,CB=typeof self=="object"&&self&&self.Object===Object&&self,SB=EB||CB||Function("return this")(),TB=Object.prototype,RB=TB.toString,IB=Math.max,AB=Math.min,mm=function(){return SB.Date.now()};function PB(n,e,t){var r,i,s,o,a,u,c=0,f=!1,d=!1,g=!0;if(typeof n!="function")throw new TypeError(mB);e=Iw(e)||0,b0(t)&&(f=!!t.leading,d="maxWait"in t,s=d?IB(Iw(t.maxWait)||0,e):s,g="trailing"in t?!!t.trailing:g);function y(F){var O=r,$=i;return r=i=void 0,c=F,o=n.apply($,O),o}function m(F){return c=F,a=setTimeout(b,e),f?y(F):o}function v(F){var O=F-u,$=F-c,L=e-O;return d?AB(L,s-$):L}function x(F){var O=F-u,$=F-c;return u===void 0||O>=e||O<0||d&&$>=s}function b(){var F=mm();if(x(F))return E(F);a=setTimeout(b,v(F))}function E(F){return a=void 0,g&&r?y(F):(r=i=void 0,o)}function T(){a!==void 0&&clearTimeout(a),c=0,r=u=i=a=void 0}function C(){return a===void 0?o:E(mm())}function R(){var F=mm(),O=x(F);if(r=arguments,i=this,u=F,O){if(a===void 0)return m(u);if(d)return a=setTimeout(b,e),y(u)}return a===void 0&&(a=setTimeout(b,e)),o}return R.cancel=T,R.flush=C,R}function b0(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function MB(n){return!!n&&typeof n=="object"}function OB(n){return typeof n=="symbol"||MB(n)&&RB.call(n)==yB}function Iw(n){if(typeof n=="number")return n;if(OB(n))return Rw;if(b0(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=b0(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(_B,"");var t=xB.test(n);return t||wB.test(n)?bB(n.slice(2),t?2:8):vB.test(n)?Rw:+n}var LB=PB;const kB=zd(LB);function qS(n){const{markers:e,geoPolygons:t,selected:r}=n,i=ie.useRef(null),[s,o]=ie.useState("auto"),a=ie.useRef([0,0]),u=()=>{o("auto")},c=kB(()=>{if(!i.current||t.features.length<1&&e.length<1)return;const d=i.current;let g;if(r.length<1)g=L1(e,t.features);else{const y=e.reduce((v,x)=>(r.find(b=>x.uri===b)&&v.push(x),v),[]),m=t.features.reduce((v,x)=>(r.find(b=>{var E;return(E=x.properties)==null?void 0:E.iso3166_a3.endsWith(b.split("#")[1])})&&v.push(x),v),[]);g=L1(y,m)}d.resize(),d.fitBounds(g,{padding:20,maxZoom:8,duration:500,offset:a.current})},0,{leading:!1,trailing:!0});return ie.useEffect(()=>{c()},[t,e,r]),{mapRef:i,cursor:s,onDragStart:()=>o("move"),onDragEnd:u,onMouseEnter:()=>o("pointer"),onMouseLeave:u,onLoad:()=>{c()},setOffset:d=>{a.current=d,c()}}}const FB=({markers:n=[],selected:e,geoPolygons:t=rC,initialViewState:r=iC,defaultStyle:i,onClickMarker:s,findByClassUri:o,attributionControl:a=!0,polygonLayers:u})=>{const{mapRef:c,cursor:f,onDragStart:d,onDragEnd:g,onMouseEnter:y,onMouseLeave:m,onLoad:v}=qS({markers:n,geoPolygons:t,selected:e});return Q(GS,{fallback:Q("p",{children:"Failed to load map"}),children:Q(Ud,{m:0,direction:"column",style:{width:"100%",height:"100%"},children:Q(lc,{flexGrow:1,children:Q(nC,{mapRef:c,initialViewState:r,cursor:f,onDragStart:d,onDragEnd:g,onMouseEnter:y,onMouseLeave:m,onLoad:v,defaultStyle:i,attributionControl:a,markers:n,geoPolygons:t,selected:e,onClickMarker:s,findByClassUri:o,polygonLayers:u})})})})};FB.__docgenInfo={description:"",methods:[],displayName:"BasicMap",props:{theme:{required:!1,tsType:{name:"zod.infer",elements:[{name:"UIThemeSchema"}],raw:"zod.infer<typeof UIThemeSchema>"},description:""},polygonLayers:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:`(
  | mapboxgl.FillLayer
  | mapboxgl.LineLayer
  | mapboxgl.SymbolLayer
)[]`},description:""},markers:{defaultValue:{value:"[]",computed:!1},required:!1},geoPolygons:{defaultValue:{value:'{ type: "FeatureCollection", features: [] }',computed:!1},required:!1},initialViewState:{defaultValue:{value:`{
  latitude: 53.42148743839479,
  longitude: -3.863068679356047,
  zoom: 3,
  maxZoom: 16,
}`,computed:!1},required:!1},attributionControl:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["RequiredRest","Optionalized"]};const iu=({borderColor:n,src:e,alt:t,title:r,role:i})=>Q(Zn,{sx:{border:`2px solid ${n}`,borderRadius:"3px",overflow:"hidden",display:"inline-block",height:"1em",fontSize:"1.5rem"},mr:1,children:Q("img",{src:e,alt:t,role:i,title:r,style:{width:25,height:20}})});iu.__docgenInfo={description:"",methods:[],displayName:"Image",props:{borderColor:{required:!0,tsType:{name:"string"},description:""},src:{required:!0,tsType:{name:"string"},description:""},alt:{required:!1,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},role:{required:!1,tsType:{name:"ReactAriaRole",raw:"React.AriaRole"},description:""}}};const WS=({data:n,selectedIndex:e,anchorEl:t,onClickDropdown:r,sx:i,variant:s,color:o})=>{var f;const a=ki(),u=!!t,c=u?"layer-selector-popover":void 0;return((f=n==null?void 0:n[e])==null?void 0:f.image)===void 0&&console.warn(`No image at ${e} in ${JSON.stringify(n)}`),rt(ko,{id:"layer-selector",size:"large","aria-describedby":c,onClick:r,sx:i,variant:s,color:o,children:[Q(iu,{borderColor:a.palette.primary.main,src:n[e].image,alt:n[e].label,title:n[e].label}),Q(Gs,{icon:u?yy:_y})]})},Wy=({data:n,selectedIndex:e,anchorEl:t,onCloseDropdown:r,onListItemClick:i})=>{const s=ki(),o=!!t;return Q(SC,{id:o?"layer-selector-popover":void 0,open:o,anchorEl:t,onClose:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Q(Ud,{direction:"column",children:n.map((u,c)=>Q(lc,{alignContent:"flex-start",children:rt(ko,{disabled:c===e,onClick:()=>i(c),variant:"text",sx:{width:"100%",justifyContent:"flex-start"},children:[Q(iu,{borderColor:c===e?s.palette.primary.main:"transparent",src:u.image,alt:u.label,title:u.label}),Q(Yi,{textTransform:"capitalize",variant:"body2",children:u.label})]},u.label)},u.label))})})};WS.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalButton",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};Wy.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalPopOver",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};const jS=({data:n,onChange:e})=>{const[t,r]=ie.useState(null),[i,s]=ie.useState(0);my.useEffect(()=>{e(n[i])},[]);const o=f=>{t?u():r(f.currentTarget)},a=()=>{r(null)},u=()=>{const f=(i+1)%n.length;s(f),e(n[f])};return{data:n,selectedIndex:i,anchorEl:t,onClickDropdown:o,onCloseDropdown:a,onListItemClick:f=>{s(f),e(n[f]),a()}}},HS=()=>{const n=sC(),e=jS(n.styleSelector.props);return n.styleSelector.props.data.length<=1?null:rt("div",{children:[Q(WS,{variant:"text",...e}),Q(Wy,{...e})]})};HS.__docgenInfo={description:"",methods:[],displayName:"LayerSelector"};const DB=({markers:n=[],selected:e,theme:t="DocumentPink",geoPolygons:r=rC,initialViewState:i=iC,defaultStyle:s,onClickMarker:o,findByClassUri:a,attributionControl:u=!0,polygonLayers:c})=>{const{mapRef:f,cursor:d,onDragStart:g,onDragEnd:y,onMouseEnter:m,onMouseLeave:v,onLoad:x}=qS({markers:n,geoPolygons:r,selected:e});return Q(s5,{dark:!0,theme:t,children:Q(GS,{fallback:Q("p",{children:"Failed to load map"}),children:Q("div",{className:"contents",children:rt(Ud,{m:0,direction:"column",style:{width:"100%",height:"100%"},children:[Q(lc,{flexGrow:1,children:Q(rF,{children:Q(nC,{mapRef:f,initialViewState:i,cursor:d,onDragStart:g,onDragEnd:y,onMouseEnter:m,onMouseLeave:v,onLoad:x,defaultStyle:s,attributionControl:u,markers:n,geoPolygons:r,selected:e,onClickMarker:o,findByClassUri:a,polygonLayers:c})})}),Q(lc,{flexGrow:0,p:1,children:Q(HS,{})})]})})})})};DB.__docgenInfo={description:"",methods:[],displayName:"FeatureMap",props:{theme:{required:!1,tsType:{name:"zod.infer",elements:[{name:"UIThemeSchema"}],raw:"zod.infer<typeof UIThemeSchema>"},description:"",defaultValue:{value:'"DocumentPink"',computed:!1}},polygonLayers:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:`(
  | mapboxgl.FillLayer
  | mapboxgl.LineLayer
  | mapboxgl.SymbolLayer
)[]`},description:""},markers:{defaultValue:{value:"[]",computed:!1},required:!1},geoPolygons:{defaultValue:{value:'{ type: "FeatureCollection", features: [] }',computed:!1},required:!1},initialViewState:{defaultValue:{value:`{
  latitude: 53.42148743839479,
  longitude: -3.863068679356047,
  zoom: 3,
  maxZoom: 16,
}`,computed:!1},required:!1},attributionControl:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["RequiredRest","Optionalized"]};const VS=({data:n,selectedIndex:e,anchorEl:t,onClickDropdown:r,sx:i,color:s,variant:o})=>{const a=ki(),u=!!t;return Q(Zn,{children:Q(xy,{children:rt(ko,{size:"large",id:"layer-selector","aria-describedby":u?"layer-selector-popover":void 0,onClick:r,sx:{display:"flex",alignItems:"center",height:"100%",width:"100%",...i},color:s,variant:o,children:[Q(iu,{borderColor:a.palette.primary.main,src:n[e].image,alt:n[e].label,title:n[e].label}),"¬†",Q(Zn,{component:"span",sx:{ml:1,display:"flex"},children:Q(Gs,{icon:u?yy:_y})})]})})})},NB=({variant:n,color:e,sx:t})=>{const r=sC(),i=jS(r.styleSelector.props);return r.styleSelector.props.data.length<=1?null:rt(gy,{children:[Q(VS,{variant:n,color:e,sx:t,...i}),Q(Wy,{...i})]})};VS.__docgenInfo={description:"",methods:[],displayName:"PresentationalButton",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};NB.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorInsetInMap"};const ad={left:{paper:{border:"none",borderRadius:"8 !important",borderTopLeftRadius:"0 !important",borderBottomLeftRadius:"0 !important"}},HACK_NO_BORDER:{border:"none !important",borderRadius:"0 !important"}},E0=({id:n,BoxSx:e,PaperSx:t,onClick:r,children:i})=>Q(Zn,{id:n,sx:{position:"absolute",top:"50%",transform:"translateY(-50%)",height:"100%",maxHeight:185,width:34,display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",pointerEvents:"auto",...e},children:Q(a5,{id:`${n}-Paper`,elevation:0,variant:"outlined",sx:{boxShadow:"none !important",height:"100%",width:"100%",...ad.HACK_NO_BORDER,...ad.left.paper,...t},children:Q(Ao,{id:`${n}-IconButton`,color:"inherit",onClick:r,disableRipple:!0,sx:{"&:hover":{backgroundColor:"transparent"},height:"100%",width:"100%",p:0},children:i})})});E0.__docgenInfo={description:"",methods:[],displayName:"TabButton",props:{id:{required:!0,tsType:{name:"string"},description:""},BoxSx:{required:!0,tsType:{name:'BoxProps["sx"]',raw:'BoxProps["sx"]'},description:""},onClick:{required:!0,tsType:{name:'IconButtonProps["onClick"]',raw:'IconButtonProps["onClick"]'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""}}};const cl="drawer-presentational",zB=(n,e,t=800)=>{if(n!=null)return n;const r=parseFloat(String(e));return Number.isFinite(r)?r:t},jy=ie.forwardRef(function({open:e,onClose:t,onToggle:r,PaperProps:i,PaperSx:s,drawerWidth:o,style:a,children:u,["id"]:c="",...f},d){const g=zB(o,a==null?void 0:a.width,800),y={width:g,boxSizing:"border-box",position:"relative",overflow:"visible",transform:e?"translateX(0)":`translateX(-${g}px) `,transition:"transform 300ms ease",...ad.HACK_NO_BORDER},m=Object.assign({},y,...Array.isArray(s)?s:[s],...i!=null&&i.sx?Array.isArray(i.sx)?i.sx:[i.sx]:[]);return rt(Zn,{id:c||cl,sx:{position:"relative",overflow:"visible",height:"100%"},children:[rt(F3,{id:`${cl}--drawer`,variant:"persistent",anchor:"left",open:e,onClose:t,ModalProps:{keepMounted:!0,sx:{overflow:"visible"}},SlideProps:{style:{overflow:"visible"}},PaperProps:{id:`${cl}--muidrawer-paper`,elevation:0,square:!0,sx:{...m,...ad.HACK_NO_BORDER},...i},style:a,...f,children:[Q(Zn,{id:`${cl}--box-scrollable`,ref:d,sx:{width:g,height:"100%",overflowY:"auto",position:"relative"},children:u}),r&&e&&Q(E0,{BoxSx:{right:-34},PaperSx:s,onClick:r,id:`${cl}--toggle-stand-in`,children:Q(d5,{id:"chevron-left-icon",fontSize:"large"})})]}),r&&Q(E0,{BoxSx:{transform:"translate(0%, -50%)",zIndex:v=>v.zIndex.drawer+1,transition:"transform 300ms ease 300ms, opacity 0ms ease",opacity:e?0:1,pointerEvents:e?"none":"auto",left:0},PaperSx:s,onClick:r,id:`${cl}--toggle-animated-slide`,children:Q(p5,{id:"chevron-right-icon",fontSize:"large"})})]})});jy.displayName="DrawerPresentational";jy.__docgenInfo={description:"",methods:[],displayName:"DrawerPresentational",props:{PaperProps:{required:!1,tsType:{name:'MuiMuiDrawerProps["PaperProps"]',raw:'MuiMuiDrawerProps["PaperProps"]'},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""},drawerWidth:{required:!1,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},onToggle:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""},id:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}},composes:["Omit"]};function $B(n){const[e,t]=ie.useState(n.initialOpen),r=ie.useRef(null),i=ie.useCallback(()=>t(!0),[]),s=ie.useCallback(()=>t(!1),[]),o=ie.useCallback(()=>t(a=>!a),[]);return ie.useEffect(()=>{var a;(a=n.onVisibilityChange)==null||a.call(n,e)},[e,n.onVisibilityChange]),ie.useImperativeHandle(n.ref,()=>({openDrawer:i,closeDrawer:s,toggleDrawer:o,getContainer:()=>r.current}),[i,s,o]),{open:e,openDrawer:i,closeDrawer:s,toggleDrawer:o,ref:r,drawerProps:{ref:r,onToggle:o,onClose:s,open:e}}}const XS=ie.forwardRef(({initialOpen:n=!0,onVisibilityChange:e,children:t,...r},i)=>{const{drawerProps:s}=$B({ref:i,initialOpen:n,onVisibilityChange:e});return Q(jy,{...s,...r,children:t})});XS.displayName="Drawer";XS.__docgenInfo={description:"",methods:[],displayName:"Drawer",props:{initialOpen:{required:!1,tsType:{name:"boolean"},description:"(default: true)",defaultValue:{value:"true",computed:!1}},onVisibilityChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""}},composes:["Omit"]};const YS=({position:n,children:e,sx:t,...r})=>{const i={position:"absolute"};switch(n){case"left":Object.assign(i,{left:0,top:"50%",transform:"translateY(-50%)"});break;case"topLeft":Object.assign(i,{left:0,top:0});break;case"bottomLeft":Object.assign(i,{left:0,bottom:0});break;case"right":Object.assign(i,{right:0,top:"50%",transform:"translateY(-50%)"});break;case"topRight":Object.assign(i,{right:0,top:0});break;case"bottomRight":Object.assign(i,{right:0,bottom:0});break;case"top":Object.assign(i,{top:0,left:"50%",transform:"translateX(-50%)"});break;case"center":Object.assign(i,{top:"50%",left:"50%",transform:"translate(-50%, -50%)"});break;case"bottom":Object.assign(i,{bottom:0,left:"50%",transform:"translateX(-50%)"});break}return Q(Zn,{...r,sx:{...i,...t},children:e})},KS=({sx:n=null,...e})=>Q(Zn,{sx:{position:"relative",width:"100%",height:"100%",...n},...e}),ZS=n=>Q(Zn,{...n,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden",...n.sx}}),BB={Background:KS,Content:ZS,ControlArea:YS};YS.__docgenInfo={description:"",methods:[],displayName:"ControlArea",props:{position:{required:!0,tsType:{name:"union",raw:`| "topLeft"
| "top"
| "topRight"
| "right"
| "bottomRight"
| "bottom"
| "bottomLeft"
| "left"
| "center"`,elements:[{name:"literal",value:'"topLeft"'},{name:"literal",value:'"top"'},{name:"literal",value:'"topRight"'},{name:"literal",value:'"right"'},{name:"literal",value:'"bottomRight"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"bottomLeft"'},{name:"literal",value:'"left"'},{name:"literal",value:'"center"'}]},description:""}},composes:["Omit"]};KS.__docgenInfo={description:"",methods:[],displayName:"Background",props:{sx:{defaultValue:{value:"null",computed:!1},required:!1}}};ZS.__docgenInfo={description:"",methods:[],displayName:"Content"};const{Background:UB,Content:GB,ControlArea:qB}=BB,WB=({content:n,controlArea:e={},sx:t,children:r,...i})=>rt(UB,{sx:t,...i,children:[Q(GB,{children:n}),Object.entries(e).map(([s,o])=>Q(qB,{position:s,children:o},s)),r]});WB.__docgenInfo={description:"",methods:[],displayName:"InsetInMap",props:{content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},controlArea:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:`| "topLeft"
| "top"
| "topRight"
| "right"
| "bottomRight"
| "bottom"
| "bottomLeft"
| "left"
| "center"`,elements:[{name:"literal",value:'"topLeft"'},{name:"literal",value:'"top"'},{name:"literal",value:'"topRight"'},{name:"literal",value:'"right"'},{name:"literal",value:'"bottomRight"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"bottomLeft"'},{name:"literal",value:'"left"'},{name:"literal",value:'"center"'}]},{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"Record<Position, React.ReactNode>"}],raw:"Partial<Record<Position, React.ReactNode>>"},description:"",defaultValue:{value:"{}",computed:!1}}}};const Vn={ADD:"add",REMOVE:"remove"},Vl={PROPERTYCHANGE:"propertychange"},Ve={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Uc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function jB(n,e,t){let r,i;t=t||Ji;let s=0,o=n.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+t(n[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function Ji(n,e){return n>e?1:n<e?-1:0}function HB(n,e){return n<e?1:n>e?-1:0}function np(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function VB(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function ri(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Uo(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function XB(n,e,t){const r=e||Ji;return n.every(function(i,s){if(s===0)return!0;const o=r(n[s-1],i);return!(o>0||o===0)})}function Fa(){return!0}function Gc(){return!1}function gc(){}function JS(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Uo(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Xl(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function su(n){for(const e in n)delete n[e]}function Fo(n){let e;for(e in n)return!1;return!e}class ai{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class qc extends Uc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new ai(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let u;for(let c=0,f=i.length;c<f;++c)if("handleEvent"in i[c]?u=i[c].handleEvent(s):u=i[c].call(this,s),u===!1||s.propagationStopped){u=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,gc);delete o[r]}return u}disposeInternal(){this.listeners_&&su(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=gc,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Ot(n,e,t,r,i){if(i){const o=t;t=function(a){return n.removeEventListener(e,t),o.call(r??this,a)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function ld(n,e,t,r){return Ot(n,e,t,r,!0)}function Qt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),su(n))}class Wc extends qc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ve.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ot(this,e[s],t);return i}return Ot(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=ld(this,e[s],t)}else r=ld(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)YB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Wc.prototype.on;Wc.prototype.once;Wc.prototype.un;function YB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Qt(n[e]);else Qt(n)}function Ke(){throw new Error("Unimplemented abstract method.")}let KB=0;function Xe(n){return n.ol_uid||(n.ol_uid=String(++KB))}class Aw extends ai{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class hs extends Wc{constructor(e){super(),this.on,this.once,this.un,Xe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Aw(r,e,t)),r=Vl.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Aw(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Fo(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const Pw={LENGTH:"length"};class yf extends ai{constructor(e,t,r){super(e),this.element=t,this.index=r}}class Ri extends hs{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Pw.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new yf(Vn.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new yf(Vn.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new yf(Vn.REMOVE,i,e)),this.dispatchEvent(new yf(Vn.ADD,t,e))}updateLength_(){this.set(Pw.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class xl extends ai{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class fo extends xl{constructor(e,t,r,i,s,o){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const on={SINGLECLICK:"singleclick",CLICK:Ve.CLICK,DBLCLICK:Ve.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Da=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",ZB=Da.includes("safari")&&!Da.includes("chrom");ZB&&(Da.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Da));const JB=Da.includes("webkit")&&!Da.includes("edge"),QS=Da.includes("macintosh"),QB=typeof devicePixelRatio<"u"?devicePixelRatio:1,Hy=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,eT=typeof Image<"u"&&Image.prototype.decode,eU=typeof createImageBitmap=="function",tT=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),C0={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class tU extends qc{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ot(r,C0.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ot(r,C0.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ve.TOUCHMOVE,this.boundHandleTouchMove_,tT?{passive:!1}:!1)}emulateClick_(e){let t=new fo(on.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new fo(on.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new fo(on.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==on.POINTERUP||t.type==on.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==on.POINTERDOWN||t.type==on.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new fo(on.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Qt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new fo(on.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ot(r,on.POINTERMOVE,this.handlePointerMove_,this),Ot(r,on.POINTERUP,this.handlePointerUp_,this),Ot(this.element_,on.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ot(this.element_.getRootNode(),on.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new fo(on.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new fo(on.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Qt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ve.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Qt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Qt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const po={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},jn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},_e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function zt(n,e){if(!n)throw new Error(e)}const ud=1/0;class nU{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,su(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){zt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=ud?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],o=r[e],a=e;for(;e<i>>1;){const u=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),f=c<i&&r[c]<r[u]?c:u;t[e]=t[f],r[e]=r[f],e=f}t[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],o=i[t];for(;t>e;){const a=this.getParentIndex_(t);if(i[a]>o)r[t]=r[a],i[t]=i[a],t=a;else break}r[t]=s,i[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let o,a,u;for(a=0;a<s;++a)o=t[a],u=e(o),u==ud?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=u,t[i++]=o);t.length=i,r.length=i,this.heapify_()}}class nT extends nU{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ve.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===_e.LOADED||r===_e.ERROR||r===_e.EMPTY){r!==_e.ERROR&&t.removeEventListener(Ve.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===_e.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function rU(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ud;const s=n.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}const an={ANIMATING:0,INTERACTING:1},gi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function pn(n,e,t){return Math.min(Math.max(n,e),t)}function iU(n,e,t,r,i,s){const o=i-t,a=s-r;if(o!==0||a!==0){const u=((n-t)*o+(e-r)*a)/(o*o+a*a);u>1?(t=i,r=s):u>0&&(t+=o*u,r+=a*u)}return Ra(n,e,t,r)}function Ra(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function sU(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let a=r+1;a<e;a++){const u=Math.abs(n[a][r]);u>s&&(s=u,i=a)}if(s===0)return null;const o=n[i];n[i]=n[r],n[r]=o;for(let a=r+1;a<e;a++){const u=-n[a][r]/n[r][r];for(let c=r;c<e+1;c++)r==c?n[a][c]=0:n[a][c]+=u*n[r][c]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function Mw(n){return n*180/Math.PI}function Po(n){return n*Math.PI/180}function Pl(n,e){const t=n%e;return t*e<0?t+e:t}function Nr(n,e,t){return n+t*(e-n)}function rp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function _f(n,e){return Math.floor(rp(n,e))}function Co(n,e){return Math.ceil(rp(n,e))}function S0(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Ow(n,e,t){return function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const u=e?0:s[0]*i,c=e?0:s[1]*i,f=a?a[0]:0,d=a?a[1]:0;let g=n[0]+u/2+f,y=n[2]-u/2+f,m=n[1]+c/2+d,v=n[3]-c/2+d;g>y&&(g=(y+g)/2,y=g),m>v&&(m=(v+m)/2,v=m);let x=pn(r[0],g,y),b=pn(r[1],m,v);if(o&&t&&i){const E=30*i;x+=-E*Math.log(1+Math.max(0,g-r[0])/E)+E*Math.log(1+Math.max(0,r[0]-y)/E),b+=-E*Math.log(1+Math.max(0,m-r[1])/E)+E*Math.log(1+Math.max(0,r[1]-v)/E)}return[x,b]}}function oU(n){return n}const Hn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function T0(n){const e=si();for(let t=0,r=n.length;t<r;++t)nc(e,n[t]);return e}function aU(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),o=Math.max.apply(null,e);return zs(r,i,s,o,t)}function Mo(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function rT(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function qa(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Na(n,e){return Vy(n,e[0],e[1])}function Os(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Vy(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function R0(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],o=e[0],a=e[1];let u=Hn.UNKNOWN;return o<t?u=u|Hn.LEFT:o>i&&(u=u|Hn.RIGHT),a<r?u=u|Hn.BELOW:a>s&&(u=u|Hn.ABOVE),u===Hn.UNKNOWN&&(u=Hn.INTERSECTING),u}function si(){return[1/0,1/0,-1/0,-1/0]}function zs(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function ou(n){return zs(1/0,1/0,-1/0,-1/0,n)}function iT(n,e){const t=n[0],r=n[1];return zs(t,r,t,r,e)}function Xy(n,e,t,r,i){const s=ou(i);return oT(s,n,e,t,r)}function $s(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function sT(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function nc(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function oT(n,e,t,r,i){for(;t<r;t+=i)lU(n,e[t],e[t+1]);return n}function lU(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function aT(n,e){let t;return t=e(ip(n)),t||(t=e(sp(n)),t)||(t=e(op(n)),t)||(t=e(qs(n)),t)?t:!1}function I0(n){let e=0;return Wa(n)||(e=Lt(n)*In(n)),e}function ip(n){return[n[0],n[1]]}function sp(n){return[n[2],n[1]]}function Wr(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uU(n,e){let t;if(e==="bottom-left")t=ip(n);else if(e==="bottom-right")t=sp(n);else if(e==="top-left")t=qs(n);else if(e==="top-right")t=op(n);else throw new Error("Invalid corner");return t}function cd(n,e,t,r,i){const[s,o,a,u,c,f,d,g]=lT(n,e,t,r);return zs(Math.min(s,a,c,d),Math.min(o,u,f,g),Math.max(s,a,c,d),Math.max(o,u,f,g),i)}function lT(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(t),a=Math.sin(t),u=i*o,c=i*a,f=s*o,d=s*a,g=n[0],y=n[1];return[g-u+d,y-c-f,g-u-d,y-c+f,g+u-d,y+c+f,g+u+d,y+c-f,g-u+d,y-c-f]}function In(n){return n[3]-n[1]}function Pi(n,e,t){const r=t||si();return wn(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):ou(r),r}function qs(n){return[n[0],n[3]]}function op(n){return[n[2],n[3]]}function Lt(n){return n[2]-n[0]}function wn(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Wa(n){return n[2]<n[0]||n[3]<n[1]}function cU(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function hU(n,e,t){let r=!1;const i=R0(n,e),s=R0(n,t);if(i===Hn.INTERSECTING||s===Hn.INTERSECTING)r=!0;else{const o=n[0],a=n[1],u=n[2],c=n[3],f=e[0],d=e[1],g=t[0],y=t[1],m=(y-d)/(g-f);let v,x;s&Hn.ABOVE&&!(i&Hn.ABOVE)&&(v=g-(y-c)/m,r=v>=o&&v<=u),!r&&s&Hn.RIGHT&&!(i&Hn.RIGHT)&&(x=y-(g-u)*m,r=x>=a&&x<=c),!r&&s&Hn.BELOW&&!(i&Hn.BELOW)&&(v=g-(y-a)/m,r=v>=o&&v<=u),!r&&s&Hn.LEFT&&!(i&Hn.LEFT)&&(x=y-(g-o)*m,r=x>=a&&x<=c)}return r}function fU(n,e,t,r){if(Wa(n))return ou(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],o=[];for(let a=0,u=i.length;a<u;a+=2)s.push(i[a]),o.push(i[a+1]);return aU(s,o,t)}function uT(n,e){const t=e.getExtent(),r=Wr(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Lt(t),o=Math.floor((r[0]-t[0])/i)*i;n[0]-=o,n[2]-=o}return n}function cT(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];uT(n,e);const i=Lt(r);if(Lt(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function dU(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function hd(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function Yy(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function pU(n,e){return n[0]*=e,n[1]*=e,n}function gU(n,e){const t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function mU(n,e){return Math.sqrt(gU(n,e))}function Ky(n,e){if(e.canWrapX()){const t=Lt(e.getExtent()),r=yU(n,e,t);r&&(n[0]-=r*t)}return n}function yU(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Lt(r),i=Math.floor((n[0]-r[0])/t)),i}function hT(n){return Math.pow(n,3)}function au(n){return 1-hT(1-n)}function _U(n){return 3*n*n-2*n*n*n}function vU(n){return n}const xU=63710088e-1;function Lw(n,e,t){t=t||xU;const r=Po(n[1]),i=Po(e[1]),s=(i-r)/2,o=Po(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function fT(...n){console.warn(...n)}const Do={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class ap{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Do[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jc=6378137,Il=Math.PI*jc,wU=[-Il,-Il,Il,Il],bU=[-180,-85,180,85],vf=jc*Math.log(Math.tan(Math.PI/2));class hl extends ap{constructor(e){super({code:e,units:"m",extent:wU,global:!0,worldExtent:bU,getPointResolution:function(t,r){return t/Math.cosh(r[1]/jc)}})}}const kw=[new hl("EPSG:3857"),new hl("EPSG:102100"),new hl("EPSG:102113"),new hl("EPSG:900913"),new hl("http://www.opengis.net/def/crs/EPSG/0/3857"),new hl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function EU(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=Il*n[s]/180;let o=jc*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));o>vf?o=vf:o<-vf&&(o=-vf),e[s+1]=o}return e}function CU(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/Il,e[s+1]=360*Math.atan(Math.exp(n[s+1]/jc))/Math.PI-90;return e}const SU=6378137,Fw=[-180,-90,180,90],TU=Math.PI*SU/180;class ra extends ap{constructor(e,t){super({code:e,units:"degrees",extent:Fw,axisOrientation:t,global:!0,metersPerUnit:TU,worldExtent:Fw})}}const Dw=[new ra("CRS:84"),new ra("EPSG:4326","neu"),new ra("urn:ogc:def:crs:OGC:1.3:CRS84"),new ra("urn:ogc:def:crs:OGC:2:84"),new ra("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ra("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ra("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let A0={};function RU(n){return A0[n]||A0[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function IU(n,e){A0[n]=e}let Ml={};function mc(n,e,t){const r=n.getCode(),i=e.getCode();r in Ml||(Ml[r]={}),Ml[r][i]=t}function ym(n,e){return n in Ml&&e in Ml[n]?Ml[n][e]:null}const fd=.9996,ii=.00669438,lp=ii*ii,up=lp*ii,pa=ii/(1-ii),Nw=Math.sqrt(1-ii),Yl=(1-Nw)/(1+Nw),dT=Yl*Yl,Zy=dT*Yl,Jy=Zy*Yl,pT=Jy*Yl,gT=1-ii/4-3*lp/64-5*up/256,AU=3*ii/8+3*lp/32+45*up/1024,PU=15*lp/256+45*up/1024,MU=35*up/3072,OU=3/2*Yl-27/32*Zy+269/512*pT,LU=21/16*dT-55/32*Jy,kU=151/96*Zy-417/128*pT,FU=1097/512*Jy,dd=6378137;function DU(n,e,t){const r=n-5e5,o=(t.north?e:e-1e7)/fd/(dd*gT),a=o+OU*Math.sin(2*o)+LU*Math.sin(4*o)+kU*Math.sin(6*o)+FU*Math.sin(8*o),u=Math.sin(a),c=u*u,f=Math.cos(a),d=u/f,g=d*d,y=g*g,m=1-ii*c,v=Math.sqrt(1-ii*c),x=dd/v,b=(1-ii)/m,E=pa*f**2,T=E*E,C=r/(x*fd),R=C*C,F=R*C,O=F*C,$=O*C,L=$*C,N=a-d/b*(R/2-O/24*(5+3*g+10*E-4*T-9*pa))+L/720*(61+90*g+298*E+45*y-252*pa-3*T);let B=(C-F/6*(1+2*g+E)+$/120*(5-2*E+28*g-3*T+8*pa+24*y))/f;return B=S0(B+Po(mT(t.number)),-Math.PI,Math.PI),[Mw(B),Mw(N)]}const zw=-80,$w=84,NU=-180,zU=180;function $U(n,e,t){n=S0(n,NU,zU),e<zw?e=zw:e>$w&&(e=$w);const r=Po(e),i=Math.sin(r),s=Math.cos(r),o=i/s,a=o*o,u=a*a,c=Po(n),f=mT(t.number),d=Po(f),g=dd/Math.sqrt(1-ii*i**2),y=pa*s**2,m=s*S0(c-d,-Math.PI,Math.PI),v=m*m,x=v*m,b=x*m,E=b*m,T=E*m,C=dd*(gT*r-AU*Math.sin(2*r)+PU*Math.sin(4*r)-MU*Math.sin(6*r)),R=fd*g*(m+x/6*(1-a+y)+E/120*(5-18*a+u+72*y-58*pa))+5e5;let F=fd*(C+g*o*(v/2+b/24*(5-a+9*y+4*y**2)+T/720*(61-58*a+u+600*y-330*pa)));return t.north||(F+=1e7),[R,F]}function mT(n){return(n-1)*6-180+3}const BU=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function yT(n){let e=0;for(const i of BU){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function Bw(n,e){return function(t,r,i,s){const o=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(o));for(let a=0;a<o;a+=s){const u=t[a],c=t[a+1],f=n(u,c,e);r[a]=f[0],r[a+1]=f[1]}return r}}function UU(n){return yT(n)?new ap({code:n,units:"m"}):null}function GU(n){const e=yT(n.getCode());return e?{forward:Bw($U,e),inverse:Bw(DU,e)}:null}const qU=[GU],WU=[UU];let P0=!0;function _T(n){P0=!1}function Qy(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function M0(n){IU(n.getCode(),n),mc(n,n,Qy)}function jU(n){n.forEach(M0)}function jt(n){if(typeof n!="string")return n;const e=RU(n);if(e)return e;for(const t of WU){const r=t(n);if(r)return r}return null}function O0(n,e,t,r){n=jt(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const o=n.getMetersPerUnit();o&&(i=i*o/Do[r])}}else{const o=n.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=Hc(n,jt("EPSG:4326"));if(!a&&o!=="degrees")i=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const f=Lw(c.slice(0,2),c.slice(2,4)),d=Lw(c.slice(4,6),c.slice(6,8));i=(f+d)/2}const u=r?Do[r]:n.getMetersPerUnit();u!==void 0&&(i/=u)}}return i}function Uw(n){jU(n),n.forEach(function(e){n.forEach(function(t){e!==t&&mc(e,t,Qy)})})}function HU(n,e,t,r){n.forEach(function(i){e.forEach(function(s){mc(i,s,t),mc(s,i,r)})})}function e_(n,e){return n?typeof n=="string"?jt(n):n:jt(e)}function VU(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=i){const a=n(e.slice(o,o+r)),u=a.length;for(let c=0,f=i;c<f;++c)t[o+c]=c>=u?e[o+c]:a[c]}return t}}function Kl(n,e){return _T(),t_(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Oo(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Hc(n,e)===Qy)&&t}function Hc(n,e){const t=n.getCode(),r=e.getCode();let i=ym(t,r);if(i)return i;let s=null,o=null;for(const u of qU)s||(s=u(n)),o||(o=u(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)i=_m(s.inverse,o.forward);else{const u=ym(t,a);u&&(i=_m(u,o.forward))}else{const u=ym(a,r);u&&(i=_m(s.inverse,u))}return i&&(M0(n),M0(e),mc(n,e,i)),i}function _m(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function yc(n,e){const t=jt(n),r=jt(e);return Hc(t,r)}function t_(n,e,t){const r=yc(e,t);if(!r){const i=jt(e).getCode(),s=jt(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let XU=null;function YU(){return XU}function L0(n,e){return n}function Ts(n,e){return P0&&!hd(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(P0=!1,fT("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function n_(n,e){return n}function Vi(n,e){return n}function KU(){Uw(kw),Uw(Dw),HU(Dw,kw,EU,CU)}KU();const vT=new Array(6);function Sr(){return[1,0,0,1,0,0]}function Gw(n){return i_(n,1,0,0,1,0,0)}function r_(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],o=n[4],a=n[5],u=e[0],c=e[1],f=e[2],d=e[3],g=e[4],y=e[5];return n[0]=t*u+i*c,n[1]=r*u+s*c,n[2]=t*f+i*d,n[3]=r*f+s*d,n[4]=t*g+i*y+o,n[5]=r*g+s*y+a,n}function i_(n,e,t,r,i,s,o){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=o,n}function ZU(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function kn(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function vm(n,e,t){return r_(n,i_(vT,e,0,0,t,0,0))}function JU(n,e,t){return r_(n,i_(vT,1,0,0,1,e,t))}function ss(n,e,t,r,i,s,o,a){const u=Math.sin(s),c=Math.cos(s);return n[0]=r*c,n[1]=i*u,n[2]=-r*u,n[3]=i*c,n[4]=o*r*c-a*r*u+e,n[5]=o*i*u+a*i*c+t,n}function xT(n,e){const t=QU(e);zt(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5];return n[0]=o/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*u-o*a)/t,n[5]=-(r*u-i*a)/t,n}function QU(n){return n[0]*n[3]-n[1]*n[2]}const eG=[1e5,1e5,1e5,1e5,2,2];function tG(n){return"matrix("+n.join(", ")+")"}function qw(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function nG(n,e){const t=qw(n),r=qw(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*eG[i])!==0)return!1;return!0}function Lo(n,e,t,r,i,s,o){s=s||[],o=o||2;let a=0;for(let u=e;u<t;u+=r){const c=n[u],f=n[u+1];s[a++]=i[0]*c+i[2]*f+i[4],s[a++]=i[1]*c+i[3]*f+i[5];for(let d=2;d<o;d++)s[a++]=n[u+d]}return s&&s.length!=a&&(s.length=a),s}function wT(n,e,t,r,i,s,o){o=o||[];const a=Math.cos(i),u=Math.sin(i),c=s[0],f=s[1];let d=0;for(let g=e;g<t;g+=r){const y=n[g]-c,m=n[g+1]-f;o[d++]=c+y*a-m*u,o[d++]=f+y*u+m*a;for(let v=g+2;v<g+r;++v)o[d++]=n[v]}return o&&o.length!=d&&(o.length=d),o}function rG(n,e,t,r,i,s,o,a){a=a||[];const u=o[0],c=o[1];let f=0;for(let d=e;d<t;d+=r){const g=n[d]-u,y=n[d+1]-c;a[f++]=u+i*g,a[f++]=c+s*y;for(let m=d+2;m<d+r;++m)a[f++]=n[m]}return a&&a.length!=f&&(a.length=f),a}function iG(n,e,t,r,i,s,o){o=o||[];let a=0;for(let u=e;u<t;u+=r){o[a++]=n[u]+i,o[a++]=n[u+1]+s;for(let c=u+2;c<u+r;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}const Ww=Sr(),sG=[NaN,NaN];class bT extends hs{constructor(){super(),this.extent_=si(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=JS((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ke()}closestPointXY(e,t,r,i){return Ke()}containsXY(e,t){return this.closestPointXY(e,t,sG,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ou(t),this.extentRevision_=this.getRevision()}return cU(this.extent_,e)}rotate(e,t){Ke()}scale(e,t,r){Ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ke()}getType(){return Ke()}applyTransform(e){Ke()}intersectsExtent(e){return Ke()}translate(e,t){Ke()}transform(e,t){const r=jt(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const u=r.getExtent(),c=r.getWorldExtent(),f=In(c)/In(u);ss(Ww,c[0],c[3],f,-f,0,0,0);const d=Lo(s,0,s.length,a,Ww,o),g=yc(r,t);return g?g(d,d,a):d}:yc(r,t);return this.applyTransform(i),this}}class ja extends bT{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Xy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=jw(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ke()}setLayout(e,t,r){let i;if(e)i=jw(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Ha(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();wT(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Wr(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();rG(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();iG(r,0,r.length,i,e,t,r),this.changed()}}}function Ha(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function jw(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function oG(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return Lo(r,0,r.length,i,e,t)}function ET(n,e,t,r){let i=0;const s=n[t-r],o=n[t-r+1];let a=0,u=0;for(;e<t;e+=r){const c=n[e]-s,f=n[e+1]-o;i+=u*c-a*f,a=c,u=f}return i/2}function CT(n,e,t,r){let i=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];i+=ET(n,e,a,r),e=a}return i}function aG(n,e,t,r){let i=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];i+=CT(n,e,a,r),e=a[a.length-1]}return i}function Hw(n,e,t,r,i,s,o){const a=n[e],u=n[e+1],c=n[t]-a,f=n[t+1]-u;let d;if(c===0&&f===0)d=e;else{const g=((i-a)*c+(s-u)*f)/(c*c+f*f);if(g>1)d=t;else if(g>0){for(let y=0;y<r;++y)o[y]=Nr(n[e+y],n[t+y],g);o.length=r;return}else d=e}for(let g=0;g<r;++g)o[g]=n[d+g];o.length=r}function s_(n,e,t,r,i){let s=n[e],o=n[e+1];for(e+=r;e<t;e+=r){const a=n[e],u=n[e+1],c=Ra(s,o,a,u);c>i&&(i=c),s=a,o=u}return i}function o_(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];i=s_(n,e,a,r,i),e=a}return i}function lG(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];i=o_(n,e,a,r,i),e=a[a.length-1]}return i}function a_(n,e,t,r,i,s,o,a,u,c,f){if(e==t)return c;let d,g;if(i===0){if(g=Ra(o,a,n[e],n[e+1]),g<c){for(d=0;d<r;++d)u[d]=n[e+d];return u.length=r,g}return c}f=f||[NaN,NaN];let y=e+r;for(;y<t;)if(Hw(n,y-r,y,r,o,a,f),g=Ra(o,a,f[0],f[1]),g<c){for(c=g,d=0;d<r;++d)u[d]=f[d];u.length=r,y+=r}else y+=r*Math.max((Math.sqrt(g)-Math.sqrt(c))/i|0,1);if(s&&(Hw(n,t-r,e,r,o,a,f),g=Ra(o,a,f[0],f[1]),g<c)){for(c=g,d=0;d<r;++d)u[d]=f[d];u.length=r}return c}function l_(n,e,t,r,i,s,o,a,u,c,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const y=t[d];c=a_(n,e,y,r,i,s,o,a,u,c,f),e=y}return c}function uG(n,e,t,r,i,s,o,a,u,c,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const y=t[d];c=l_(n,e,y,r,i,s,o,a,u,c,f),e=y[y.length-1]}return c}function cG(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function cp(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const o=t[i];for(let a=0;a<r;++a)n[e++]=o[a]}return e}function Vc(n,e,t,r,i){i=i||[];let s=0;for(let o=0,a=t.length;o<a;++o){const u=cp(n,e,t[o],r);i[s++]=u,e=u}return i.length=s,i}function ST(n,e,t,r,i){i=i||[];let s=0;for(let o=0,a=t.length;o<a;++o){const u=Vc(n,e,t[o],r,i[s]);u.length===0&&(u[0]=e),i[s++]=u,e=u[u.length-1]}return i.length=s,i}function So(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<t;o+=r)i[s++]=n.slice(o,o+r);return i.length=s,i}function _c(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=t.length;o<a;++o){const u=t[o];i[s++]=So(n,e,u,r,i[s]),e=u}return i.length=s,i}function k0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=t.length;o<a;++o){const u=t[o];i[s++]=u.length===1&&u[0]===e?[]:_c(n,e,u,r,i[s]),e=u[u.length-1]}return i.length=s,i}function hp(n,e,t,r,i,s,o){const a=(t-e)/r;if(a<3){for(;e<t;e+=r)s[o++]=n[e],s[o++]=n[e+1];return o}const u=new Array(a);u[0]=1,u[a-1]=1;const c=[e,t-r];let f=0;for(;c.length>0;){const d=c.pop(),g=c.pop();let y=0;const m=n[g],v=n[g+1],x=n[d],b=n[d+1];for(let E=g+r;E<d;E+=r){const T=n[E],C=n[E+1],R=iU(T,C,m,v,x,b);R>y&&(f=E,y=R)}y>i&&(u[(f-e)/r]=1,g+r<f&&c.push(g,f),f+r<d&&c.push(f,d))}for(let d=0;d<a;++d)u[d]&&(s[o++]=n[e+d*r],s[o++]=n[e+d*r+1]);return o}function TT(n,e,t,r,i,s,o,a){for(let u=0,c=t.length;u<c;++u){const f=t[u];o=hp(n,e,f,r,i,s,o),a.push(o),e=f}return o}function la(n,e){return e*Math.round(n/e)}function hG(n,e,t,r,i,s,o){if(e==t)return o;let a=la(n[e],i),u=la(n[e+1],i);e+=r,s[o++]=a,s[o++]=u;let c,f;do if(c=la(n[e],i),f=la(n[e+1],i),e+=r,e==t)return s[o++]=c,s[o++]=f,o;while(c==a&&f==u);for(;e<t;){const d=la(n[e],i),g=la(n[e+1],i);if(e+=r,d==c&&g==f)continue;const y=c-a,m=f-u,v=d-a,x=g-u;if(y*x==m*v&&(y<0&&v<y||y==v||y>0&&v>y)&&(m<0&&x<m||m==x||m>0&&x>m)){c=d,f=g;continue}s[o++]=c,s[o++]=f,a=c,u=f,c=d,f=g}return s[o++]=c,s[o++]=f,o}function u_(n,e,t,r,i,s,o,a){for(let u=0,c=t.length;u<c;++u){const f=t[u];o=hG(n,e,f,r,i,s,o),a.push(o),e=f}return o}function fG(n,e,t,r,i,s,o,a){for(let u=0,c=t.length;u<c;++u){const f=t[u],d=[];o=u_(n,e,f,r,i,s,o,d),a.push(d),e=f[f.length-1]}return o}class vc extends ja{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new vc(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<qa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return ET(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=hp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new vc(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cp(this.flatCoordinates,0,e,this.stride),this.changed()}}class os extends ja{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new os(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,o=Ra(e,t,s[0],s[1]);if(o<i){const a=this.stride;for(let u=0;u<a;++u)r[u]=s[u];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return iT(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Vy(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cG(this.flatCoordinates,0,e,this.stride),this.changed()}}function dG(n,e,t,r,i){return!aT(i,function(o){return!ga(n,e,t,r,o[0],o[1])})}function ga(n,e,t,r,i,s){let o=0,a=n[t-r],u=n[t-r+1];for(;e<t;e+=r){const c=n[e],f=n[e+1];u<=s?f>s&&(c-a)*(s-u)-(i-a)*(f-u)>0&&o++:f<=s&&(c-a)*(s-u)-(i-a)*(f-u)<0&&o--,a=c,u=f}return o!==0}function c_(n,e,t,r,i,s){if(t.length===0||!ga(n,e,t[0],r,i,s))return!1;for(let o=1,a=t.length;o<a;++o)if(ga(n,t[o-1],t[o],r,i,s))return!1;return!0}function pG(n,e,t,r,i,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const u=t[o];if(c_(n,e,u,r,i,s))return!0;e=u[u.length-1]}return!1}function h_(n,e,t,r,i,s,o){let a,u,c,f,d,g,y;const m=i[s+1],v=[];for(let E=0,T=t.length;E<T;++E){const C=t[E];for(f=n[C-r],g=n[C-r+1],a=e;a<C;a+=r)d=n[a],y=n[a+1],(m<=g&&y<=m||g<=m&&m<=y)&&(c=(m-g)/(y-g)*(d-f)+f,v.push(c)),f=d,g=y}let x=NaN,b=-1/0;for(v.sort(Ji),f=v[0],a=1,u=v.length;a<u;++a){d=v[a];const E=Math.abs(d-f);E>b&&(c=(f+d)/2,c_(n,e,t,r,c,m)&&(x=c,b=E)),f=d}return isNaN(x)&&(x=i[s]),o?(o.push(x,m,b),o):[x,m,b]}function RT(n,e,t,r,i){let s=[];for(let o=0,a=t.length;o<a;++o){const u=t[o];s=h_(n,e,u,r,i,2*o,s),e=u[u.length-1]}return s}function IT(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function fp(n,e,t,r,i,s){return s=s??oT(si(),n,e,t,r),wn(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:IT(n,e,t,r,function(o,a){return hU(i,o,a)}):!1}function gG(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){if(fp(n,e,t[s],r,i))return!0;e=t[s]}return!1}function AT(n,e,t,r,i){return!!(fp(n,e,t,r,i)||ga(n,e,t,r,i[0],i[1])||ga(n,e,t,r,i[0],i[3])||ga(n,e,t,r,i[2],i[1])||ga(n,e,t,r,i[2],i[3]))}function PT(n,e,t,r,i){if(!AT(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(dG(n,t[s-1],t[s],r,i)&&!fp(n,t[s-1],t[s],r,i))return!1;return!0}function mG(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(PT(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}function yG(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function f_(n,e,t,r){let i=0,s=n[t-r],o=n[t-r+1];for(;e<t;e+=r){const a=n[e],u=n[e+1];i+=(a-s)*(u+o),s=a,o=u}return i===0?void 0:i>0}function d_(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],u=f_(n,e,a,r);if(s===0){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;e=a}return!0}function MT(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!d_(n,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function pd(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],u=f_(n,e,a,r);(s===0?i&&u||!i&&!u:i&&!u||!i&&u)&&yG(n,e,a,r),e=a}return e}function F0(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s)e=pd(n,e,t[s],r,i);return e}function OT(n,e){const t=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const u=e[o],c=f_(n,r,u,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(i,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=o+1,r=u}return t}class oi extends ja{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ri(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new oi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return c_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return CT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),pd(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,_c(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Wr(this.getExtent());this.flatInteriorPoint_=h_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new os(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new vc(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const u=r[o],c=new vc(t.slice(s,u),e);i.push(c),s=u}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;d_(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=pd(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=u_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new oi(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return PT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Vc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function Vw(n){if(Wa(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new oi(s,"XY",[s.length])}function p_(n,e,t,r){const i=Lt(e)/t[0],s=In(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function g_(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),pn(r,t/2,e*2)}function _G(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,o,a){if(i!==void 0){const u=n[0],c=n[n.length-1],f=t?p_(u,t,o,r):u;if(a)return e?g_(i,f,c):pn(i,c,f);const d=Math.min(f,i),g=Math.floor(np(n,d,s));return n[g]>f&&g<n.length-1?n[g+1]:n[g]}}}function vG(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(o,a,u,c){if(o!==void 0){const f=i?p_(e,i,u,s):e;if(c)return r?g_(o,f,t):pn(o,t,f);const d=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(n)-d),y=-a*(.5-d)+.5,m=Math.min(f,o),v=Math.floor(Math.log(e/m)/Math.log(n)+y),x=Math.max(g,v),b=e/Math.pow(n,x);return pn(b,t,f)}}}function Xw(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,o,a,u){if(s!==void 0){const c=r?p_(n,r,a,i):n;return!t||!u?pn(s,e,c):g_(s,c,e)}}}function m_(n){if(n!==void 0)return 0}function Yw(n){if(n!==void 0)return n}function xG(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function wG(n){const e=Po(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const LT=42,y_=256,xm=0;class bi extends hs{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=e_(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&_T(),e.center&&(e.center=Ts(e.center,this.projection_)),e.extent&&(e.extent=Vi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in gi)delete t[a];this.setProperties(t,!0);const r=EG(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=bG(e),s=r.constraint,o=CG(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-t[3]+t[1]-i[1]),a=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Ts(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Ts(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&xf(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_;const c=[];for(;i<t;++i){const f=arguments[i],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||_U,callback:r};if(f.center&&(d.sourceCenter=o,d.targetCenter=f.center.slice(),o=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(f.zoom),a=d.targetResolution):f.resolution&&(d.sourceResolution=a,d.targetResolution=f.resolution,a=d.targetResolution),f.rotation!==void 0){d.sourceRotation=u;const g=Pl(f.rotation-u+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=u+g,u=d.targetRotation}SG(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(an.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[an.ANIMATING]>0}getInteracting(){return this.hints_[an.INTERACTING]>0}cancelAnimations(){this.setHint(an.ANIMATING,-this.hints_[an.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&xf(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u.complete)continue;const c=e-u.start;let f=u.duration>0?c/u.duration:1;f>=1?(u.complete=!0,f=1):s=!1;const d=u.easing(f);if(u.sourceCenter){const g=u.sourceCenter[0],y=u.sourceCenter[1],m=u.targetCenter[0],v=u.targetCenter[1];this.nextCenter_=u.targetCenter;const x=g+d*(m-g),b=y+d*(v-y);this.targetCenter_=[x,b]}if(u.sourceResolution&&u.targetResolution){const g=d===1?u.targetResolution:u.sourceResolution+d*(u.targetResolution-u.sourceResolution);if(u.anchor){const y=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(g,0,y,!0);this.targetCenter_=this.calculateCenterZoom(m,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){const g=d===1?Pl(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+d*(u.targetRotation-u.sourceRotation);if(u.anchor){const y=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(y,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!u.complete)break}if(s){this.animations_[r]=null,this.setHint(an.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&xf(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],Yy(r,e-this.getRotation()),dU(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-i[0])/s,a=t[1]-e*(t[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&L0(e,this.getProjection())}getCenterInternal(){return this.get(gi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return n_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();zt(t,"The view center is not defined");const r=this.getResolution();zt(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return zt(i!==void 0,"The view rotation is not defined"),cd(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(gi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Vi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Lt(e)/t[0],i=In(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(gi.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(o){return Math.log(r/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=wm(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=np(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=pn(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,pn(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(zt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){zt(!Wa(e),"Cannot fit empty extent provided as `geometry`");const i=Vi(e,this.getProjection());r=Vw(i)}else if(e.getType()==="Circle"){const i=Vi(e.getExtent(),this.getProjection());r=Vw(i),r.rotate(this.getRotation(),Wr(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,u=1/0,c=-1/0,f=-1/0;for(let d=0,g=s.length;d<g;d+=o){const y=s[d]*r-s[d+1]*i,m=s[d]*i+s[d+1]*r;a=Math.min(a,y),u=Math.min(u,m),c=Math.max(c,y),f=Math.max(f,m)}return[a,u,c,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let u=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,s?0:1);const c=this.getRotation(),f=Math.sin(c),d=Math.cos(c),g=Wr(a);g[0]+=(i[1]-i[3])/2*u,g[1]+=(i[0]-i[2])/2*u;const y=g[0]*d-g[1]*f,m=g[1]*d+g[0]*f,v=this.getConstrainedCenter([y,m],u),x=t.callback?t.callback:gc;t.duration!==void 0?this.animateInternal({resolution:u,center:v,duration:t.duration,easing:t.easing},x):(this.targetResolution_=u,this.targetCenter_=v,this.applyTargetState_(!1,!0),xf(x,!0))}centerOn(e,t,r){this.centerOnInternal(Ts(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(wm(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),u=wm(e,i,[a[0]/2+o[3],a[1]/2+o[0]],t,r);s=[e[0]-u[0],e[1]-u[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=L0(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ts(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ts(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ts(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(gi.ROTATION)!==i&&this.set(gi.ROTATION,i),this.get(gi.RESOLUTION)!==o&&(this.set(gi.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(gi.CENTER)||!hd(this.get(gi.CENTER),a))&&this.set(gi.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),u=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=u,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!hd(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:u,resolution:a,duration:e,easing:au,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(an.INTERACTING,1)}endInteraction(e,t,r){r=r&&Ts(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(an.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function xf(n,e){setTimeout(function(){n(e)},0)}function bG(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Ow(n.extent,n.constrainOnlyCenter,t)}const e=e_(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ow(t,!1,!1)}return oU}function EG(n){let e,t,r,o=n.minZoom!==void 0?n.minZoom:xm,a=n.maxZoom!==void 0?n.maxZoom:28;const u=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,g=e_(n.projection,"EPSG:3857"),y=g.getExtent();let m=n.constrainOnlyCenter,v=n.extent;if(!c&&!v&&g.isGlobal()&&(m=!1,v=y),n.resolutions!==void 0){const x=n.resolutions;t=x[o],r=x[a]!==void 0?x[a]:x[x.length-1],n.constrainResolution?e=_G(x,f,!m&&v,d):e=Xw(t,r,f,!m&&v,d)}else{const b=(y?Math.max(Lt(y),In(y)):360*Do.degrees/g.getMetersPerUnit())/y_/Math.pow(2,xm),E=b/Math.pow(2,28-xm);t=n.maxResolution,t!==void 0?o=0:t=b/Math.pow(u,o),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(u,a):r=b/Math.pow(u,a):r=E),a=o+Math.floor(Math.log(t/r)/Math.log(u)),r=t/Math.pow(u,a-o),n.constrainResolution?e=vG(u,t,r,f,!m&&v,d):e=Xw(t,r,f,!m&&v,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:o,zoomFactor:u}}function CG(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?wG():t===!1?Yw:typeof t=="number"?xG(t):Yw}return m_}function SG(n){return!(n.sourceCenter&&n.targetCenter&&!hd(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function wm(n,e,t,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=n[0]*s-n[1]*o,u=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*r,u+=(t[1]-e[1]/2)*r,o=-o;const c=a*s-u*o,f=u*s+a*o;return[c,f]}const wf="ol-hidden",Xc="ol-unselectable",Kw="ol-unsupported",dp="ol-control",Zw="ol-collapsed",TG=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Jw=["style","variant","weight","size","lineHeight","family"],D0={normal:400,bold:700},N0=function(n){const e=n.match(TG);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=Jw.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[Jw[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in D0&&(t.weight=D0[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t};function gn(n,e,t,r){let i;return t&&t.length?i=t.shift():Hy?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let bm;function gd(){return bm||(bm=gn(1,1)),bm}function Yc(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function md(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function RG(n){for(;n.lastChild;)n.lastChild.remove()}function IG(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}class pp extends hs{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)Qt(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==gc&&this.listenerKeys.push(Ot(e,po.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class AG extends pp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"‚Ä∫",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(Ve.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Xc+" "+dp+(this.collapsed_&&this.collapsible_?" "+Zw:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=c,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Xl(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Uo(t,this.renderedAttributions_)){RG(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const o=document.createElement("li");o.innerHTML=t[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Zw),this.collapsed_?md(this.collapseLabel_,this.label_):md(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class kT extends pp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"‚áß",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Ve.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Xc+" "+dp,u=this.element;u.className=a,u.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(wf)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:au}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(wf);!s&&r===0?this.element.classList.add(wf):s&&r!==0&&this.element.classList.remove(wf)}this.label_.style.transform=i}this.rotation_=r}}class FT extends pp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"‚Äì",u=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(Ve.CLICK,this.handleClick_.bind(this,r),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Ve.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Xc+" "+dp,y=this.element;y.className=g,y.appendChild(f),y.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:au})):r.setZoom(s)}}}function DT(n){n=n||{};const e=new Ri;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new FT(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new kT(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new AG(n.attributionOptions)),e}class PG{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Qw={ACTIVE:"active"};class lu extends hs{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Qw.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Qw.ACTIVE,e)}setMap(e){this.map_=e}}function MG(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:vU,center:n.getConstrainedCenter(i)})}}function __(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:r!==void 0?r:250,easing:au})}class OG extends lu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==on.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();__(a,o,s,this.duration_),r.preventDefault(),t=!0}return!t}}function z0(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const LG=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},kG=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},NT=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?kG(n):!0},FG=Fa,DG=function(n){return n.type==on.CLICK},zT=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(JB&&QS&&e.ctrlKey)},eb=Gc,NG=function(n){return n.type==on.SINGLECLICK},$T=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},zG=function(n){const e=n.originalEvent;return QS?e.metaKey:e.ctrlKey},BT=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},UT=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Em=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},$G=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Kc extends lu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==on.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==on.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==on.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==on.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function v_(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class BG extends Kc{constructor(e){super({stopDown:Gc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:z0($T,$G);this.condition_=e.onFocusOnly?z0(NT,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(v_(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();pU(s,a.getResolution()),Yy(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),u=t.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(u),duration:500,easing:au})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class UG extends Kc{constructor(e){e=e||{},super({stopDown:Gc}),this.condition_=e.condition?e.condition:LG,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Em(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===m_)return;const i=t.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Em(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Em(e)&&zT(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class GG extends Uc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new oi([i])}getGeometry(){return this.geometry_}}const fl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fu extends ai{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class qG extends Kc{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new GG(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??zT,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Fu(fl.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Fu(t?fl.BOXEND:fl.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fu(fl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fu(fl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fu(fl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class WG extends qG{constructor(e){e=e||{};const t=e.condition?e.condition:BT;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:au})}}const ia={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class jG extends lu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return $T(t)&&UT(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ve.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==ia.DOWN||i==ia.LEFT||i==ia.RIGHT||i==ia.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let u=0,c=0;i==ia.DOWN?c=-a:i==ia.LEFT?u=-a:i==ia.RIGHT?u=a:c=a;const f=[u,c];Yy(f,o.getRotation()),MG(o,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class HG extends lu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!zG(t)&&UT(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ve.KEYDOWN||e.type==Ve.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();__(a,o,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const VG=40,XG=300;class YG extends lu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:FG;this.condition_=e.onFocusOnly?z0(NT,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ve.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=VG;break;case WheelEvent.DOM_DELTA_PAGE:s*=XG;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const u=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),u),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-pn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),__(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class KG extends Kc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gc),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==m_&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(v_(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class ZG extends Kc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gc),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const u=e.map,c=u.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(v_(this.targetPointers))),u.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function JG(n){n=n||{};const e=new Ri,t=new PG(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new UG),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new OG({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new BG({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new KG),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new ZG({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new jG),e.push(new HG({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new YG({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new WG({duration:n.zoomDuration})),e}const Xt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class GT extends hs{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Xt.OPACITY]=e.opacity!==void 0?e.opacity:1,zt(typeof t[Xt.OPACITY]=="number","Layer opacity must be a number"),t[Xt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Xt.Z_INDEX]=e.zIndex,t[Xt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Xt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Xt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Xt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=pn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ke()}getLayerStatesArray(e){return Ke()}getExtent(){return this.get(Xt.EXTENT)}getMaxResolution(){return this.get(Xt.MAX_RESOLUTION)}getMinResolution(){return this.get(Xt.MIN_RESOLUTION)}getMinZoom(){return this.get(Xt.MIN_ZOOM)}getMaxZoom(){return this.get(Xt.MAX_ZOOM)}getOpacity(){return this.get(Xt.OPACITY)}getSourceState(){return Ke()}getVisible(){return this.get(Xt.VISIBLE)}getZIndex(){return this.get(Xt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Xt.EXTENT,e)}setMaxResolution(e){this.set(Xt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Xt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Xt.MAX_ZOOM,e)}setMinZoom(e){this.set(Xt.MIN_ZOOM,e)}setOpacity(e){zt(typeof e=="number","Layer opacity must be a number"),this.set(Xt.OPACITY,e)}setVisible(e){this.set(Xt.VISIBLE,e)}setZIndex(e){this.set(Xt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class yo extends ai{constructor(e,t){super(e),this.layer=t}}const Cm={LAYERS:"layers"};class No extends GT{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Cm.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Ri(r.slice(),{unique:!0}):zt(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Ri(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Qt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ot(e,Vn.ADD,this.handleLayersAdd_,this),Ot(e,Vn.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Qt);su(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new yo("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ot(e,Vl.PROPERTYCHANGE,this.handleLayerChange_,this),Ot(e,Ve.CHANGE,this.handleLayerChange_,this)];e instanceof No&&t.push(Ot(e,"addlayer",this.handleLayerGroupAdd_,this),Ot(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Xe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new yo("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new yo("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new yo("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Xe(t);this.listenerKeys_[r].forEach(Qt),delete this.listenerKeys_[r],this.dispatchEvent(new yo("removelayer",t)),this.changed()}getLayers(){return this.get(Cm.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new yo("removelayer",r[i]))}this.set(Cm.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=t.length;o<a;o++){const u=t[o];u.opacity*=i.opacity,u.visible=u.visible&&i.visible,u.maxResolution=Math.min(u.maxResolution,i.maxResolution),u.minResolution=Math.max(u.minResolution,i.minResolution),u.minZoom=Math.max(u.minZoom,i.minZoom),u.maxZoom=Math.min(u.maxZoom,i.maxZoom),i.extent!==void 0&&(u.extent!==void 0?u.extent=Pi(u.extent,i.extent):u.extent=i.extent),u.zIndex===void 0&&(u.zIndex=s)}return t}getSourceState(){return"ready"}}const ti={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class uu extends GT{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Xt.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Xt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Qt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ot(e,Ve.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof bi?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return x_(i,t.viewState)&&(!s||wn(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof bi?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Xt.MAP,e)}getMapInternal(){return this.get(Xt.MAP)}setMap(e){this.mapPrecomposeKey_&&(Qt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Qt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ot(e,ti.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ot(this,Ve.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);zt(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Xt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function x_(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function qT(n,e,t=0,r=n.length-1,i=QG){for(;r>t;){if(r-t>600){const u=r-t+1,c=e-t+1,f=Math.log(u),d=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),y=Math.max(t,Math.floor(e-c*d/u+g)),m=Math.min(r,Math.floor(e+(u-c)*d/u+g));qT(n,e,y,m,i)}const s=n[e];let o=t,a=r;for(Du(n,t,e),i(n[r],s)>0&&Du(n,t,r);o<a;){for(Du(n,o,a),o++,a--;i(n[o],s)<0;)o++;for(;i(n[a],s)>0;)a--}i(n[t],s)===0?Du(n,t,a):(a++,Du(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}}function Du(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function QG(n,e){return n<e?-1:n>e?1:0}let WT=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Ef(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],u=t.leaf?i(a):a;Ef(e,u)&&(t.leaf?r.push(a):Tm(e,u)?this._all(a,r):s.push(a))}t=s.pop()}return r}collides(e){let t=this.data;if(!Ef(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],o=t.leaf?this.toBBox(s):s;if(Ef(e,o)){if(t.leaf||Tm(e,o))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=wl([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,u,c;for(;r||s.length;){if(r||(r=s.pop(),u=s[s.length-1],a=o.pop(),c=!0),r.leaf){const f=e8(e,r.children,t);if(f!==-1)return r.children.splice(f,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&Tm(r,i)?(s.push(r),o.push(a),a=0,u=r,r=r.children[0]):u?(a++,r=u.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let o=this._maxEntries,a;if(s<=o)return a=wl(e.slice(t,r+1)),dl(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=wl([]),a.leaf=!1,a.height=i;const u=Math.ceil(s/o),c=u*Math.ceil(Math.sqrt(o));tb(e,t,r,c,this.compareMinX);for(let f=t;f<=r;f+=c){const d=Math.min(f+c-1,r);tb(e,f,d,u,this.compareMinY);for(let g=f;g<=d;g+=u){const y=Math.min(g+u-1,d);a.children.push(this._build(e,g,y,i-1))}}return dl(a,this.toBBox),a}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let u=0;u<t.children.length;u++){const c=t.children[u],f=Sm(c),d=r8(e,c)-f;d<o?(o=d,s=f<s?f:s,a=c):d===o&&f<s&&(s=f,a=c)}t=a||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),Yu(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=wl(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,dl(r,this.toBBox),dl(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=wl([e,t]),this.data.height=e.height+1,this.data.leaf=!1,dl(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,o=1/0;for(let a=t;a<=r-t;a++){const u=Xu(e,0,a,this.toBBox),c=Xu(e,a,r,this.toBBox),f=i8(u,c),d=Sm(u)+Sm(c);f<s?(s=f,i=a,o=d<o?d:o):f===s&&d<o&&(o=d,i=a)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:t8,s=e.leaf?this.compareMinY:n8,o=this._allDistMargin(e,t,r,i),a=this._allDistMargin(e,t,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,o=Xu(e,0,t,s),a=Xu(e,r-t,r,s);let u=bf(o)+bf(a);for(let c=t;c<r-t;c++){const f=e.children[c];Yu(o,e.leaf?s(f):f),u+=bf(o)}for(let c=r-t-1;c>=t;c--){const f=e.children[c];Yu(a,e.leaf?s(f):f),u+=bf(a)}return u}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Yu(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():dl(e[t],this.toBBox)}};function e8(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function dl(n,e){Xu(n,0,n.children.length,e,n)}function Xu(n,e,t,r,i){i||(i=wl(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Yu(i,n.leaf?r(o):o)}return i}function Yu(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function t8(n,e){return n.minX-e.minX}function n8(n,e){return n.minY-e.minY}function Sm(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function bf(n){return n.maxX-n.minX+(n.maxY-n.minY)}function r8(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function i8(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function Tm(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Ef(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function wl(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function tb(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const o=e+Math.ceil((t-e)/r/2)*r;qT(n,o,e,t,i),s.push(e,o,o,t)}}const w_=[NaN,NaN,NaN,0];let Rm;function s8(){return Rm||(Rm=gn(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Rm}const o8=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,a8=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,l8=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,u8=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Cf(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function rc(n){throw new Error('failed to parse "'+n+'" as color')}function jT(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(a8)||n.match(o8)||n.match(l8);if(s){const o=s[4],a=100/255;return[pn(Cf(s[1],a)+.5|0,0,255),pn(Cf(s[2],a)+.5|0,0,255),pn(Cf(s[3],a)+.5|0,0,255),o!==void 0?pn(Cf(o,100),0,1):1]}rc(n)}if(n.startsWith("#")){if(u8.test(n)){const s=n.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let u=0,c=s.length;u<c;u+=o){let f=parseInt(s.substring(u,u+o),16);o===1&&(f+=f<<4),a[u/o]=f}return a[3]=a[3]/255,a}rc(n)}const e=s8();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&rc(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return jT(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=rp(i[3]/255,3),i}function c8(n){return typeof n=="string"?n:E_(n)}const h8=1024,Nu={};let Im=0;function f8(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function Am(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function Pm(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function Mm(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function Om(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function nb(n){const e=Mm(n[0]),t=Mm(n[1]),r=Mm(n[2]),i=Om(e*.222488403+t*.716873169+r*.06060791),s=500*(Om(e*.452247074+t*.399439023+r*.148375274)-i),o=200*(i-Om(e*.016863605+t*.117638439+r*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+o*o),a<0?a+360:a,n[3]]}function d8(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=Pm(e),s=Pm(e+t/500*Math.cos(r)),o=Pm(e-t/200*Math.sin(r)),a=Am(s*3.021973625-i*1.617392459-o*.404875592),u=Am(s*-.943766287+i*1.916279586+o*.027607165),c=Am(s*.069407491-i*.22898585+o*1.159737864);return[pn(a+.5|0,0,255),pn(u+.5|0,0,255),pn(c+.5|0,0,255),n[3]]}function b_(n){if(n==="none")return w_;if(Nu.hasOwnProperty(n))return Nu[n];if(Im>=h8){let t=0;for(const r in Nu)t++&3||(delete Nu[r],--Im)}const e=jT(n);e.length!==4&&rc(n);for(const t of e)isNaN(t)&&rc(n);return Nu[n]=e,++Im,e}function Zl(n){return Array.isArray(n)?n:b_(n)}function E_(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function rb(n){return n[0]>0&&n[1]>0}function p8(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function sr(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let Va=0;const fr=1<<Va++,Mt=1<<Va++,wr=1<<Va++,Ei=1<<Va++,za=1<<Va++,Ku=1<<Va++,Sf=Math.pow(2,Va)-1,C_={[fr]:"boolean",[Mt]:"number",[wr]:"string",[Ei]:"color",[za]:"number[]",[Ku]:"size"},g8=Object.keys(C_).map(Number).sort(Ji);function m8(n){return n in C_}function Zu(n){const e=[];for(const t of g8)Ju(n,t)&&e.push(C_[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Ju(n,e){return(n&e)===e}function so(n,e){return n===e}class Bn{constructor(e,t){if(!m8(e))throw new Error(`literal expressions must have a specific type, got ${Zu(e)}`);this.type=e,this.value=t}}class y8{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function HT(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Kn(n,e,t){switch(typeof n){case"boolean":{if(so(e,wr))return new Bn(wr,n?"true":"false");if(!Ju(e,fr))throw new Error(`got a boolean, but expected ${Zu(e)}`);return new Bn(fr,n)}case"number":{if(so(e,Ku))return new Bn(Ku,sr(n));if(so(e,fr))return new Bn(fr,!!n);if(so(e,wr))return new Bn(wr,n.toString());if(!Ju(e,Mt))throw new Error(`got a number, but expected ${Zu(e)}`);return new Bn(Mt,n)}case"string":{if(so(e,Ei))return new Bn(Ei,b_(n));if(so(e,fr))return new Bn(fr,!!n);if(!Ju(e,wr))throw new Error(`got a string, but expected ${Zu(e)}`);return new Bn(wr,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return I8(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(so(e,Ku)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Bn(Ku,n)}if(so(e,Ei)){if(n.length===3)return new Bn(Ei,[...n,1]);if(n.length===4)return new Bn(Ei,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Ju(e,za))throw new Error(`got an array of numbers, but expected ${Zu(e)}`);return new Bn(za,n)}const ue={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},_8={[ue.Get]:Ye(ht(1,1/0),ib),[ue.Var]:Ye(ht(1,1),v8),[ue.Has]:Ye(ht(1,1/0),ib),[ue.Id]:Ye(x8,pl),[ue.Concat]:Ye(ht(2,1/0),Ut(wr)),[ue.GeometryType]:Ye(w8,pl),[ue.LineMetric]:Ye(pl),[ue.Resolution]:Ye(Lm,pl),[ue.Zoom]:Ye(Lm,pl),[ue.Time]:Ye(Lm,pl),[ue.Any]:Ye(ht(2,1/0),Ut(fr)),[ue.All]:Ye(ht(2,1/0),Ut(fr)),[ue.Not]:Ye(ht(1,1),Ut(fr)),[ue.Equal]:Ye(ht(2,2),Ut(Sf)),[ue.NotEqual]:Ye(ht(2,2),Ut(Sf)),[ue.GreaterThan]:Ye(ht(2,2),Ut(Mt)),[ue.GreaterThanOrEqualTo]:Ye(ht(2,2),Ut(Mt)),[ue.LessThan]:Ye(ht(2,2),Ut(Mt)),[ue.LessThanOrEqualTo]:Ye(ht(2,2),Ut(Mt)),[ue.Multiply]:Ye(ht(2,1/0),sb),[ue.Coalesce]:Ye(ht(2,1/0),sb),[ue.Divide]:Ye(ht(2,2),Ut(Mt)),[ue.Add]:Ye(ht(2,1/0),Ut(Mt)),[ue.Subtract]:Ye(ht(2,2),Ut(Mt)),[ue.Clamp]:Ye(ht(3,3),Ut(Mt)),[ue.Mod]:Ye(ht(2,2),Ut(Mt)),[ue.Pow]:Ye(ht(2,2),Ut(Mt)),[ue.Abs]:Ye(ht(1,1),Ut(Mt)),[ue.Floor]:Ye(ht(1,1),Ut(Mt)),[ue.Ceil]:Ye(ht(1,1),Ut(Mt)),[ue.Round]:Ye(ht(1,1),Ut(Mt)),[ue.Sin]:Ye(ht(1,1),Ut(Mt)),[ue.Cos]:Ye(ht(1,1),Ut(Mt)),[ue.Atan]:Ye(ht(1,2),Ut(Mt)),[ue.Sqrt]:Ye(ht(1,1),Ut(Mt)),[ue.Match]:Ye(ht(4,1/0),ob,E8),[ue.Between]:Ye(ht(3,3),Ut(Mt)),[ue.Interpolate]:Ye(ht(6,1/0),ob,C8),[ue.Case]:Ye(ht(3,1/0),b8,S8),[ue.In]:Ye(ht(2,2),T8),[ue.Number]:Ye(ht(1,1/0),Ut(Sf)),[ue.String]:Ye(ht(1,1/0),Ut(Sf)),[ue.Array]:Ye(ht(1,1/0),Ut(Mt)),[ue.Color]:Ye(ht(1,4),Ut(Mt)),[ue.Band]:Ye(ht(1,3),Ut(Mt)),[ue.Palette]:Ye(ht(2,2),R8),[ue.ToString]:Ye(ht(1,1),Ut(fr|Mt|wr|Ei))};function ib(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=n[s+1];switch(typeof o){case"number":{i[s]=new Bn(Mt,o);break}case"string":{i[s]=new Bn(wr,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return i}function v8(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Bn(wr,r)]}function x8(n,e,t){t.featureId=!0}function w8(n,e,t){t.geometryType=!0}function Lm(n,e,t){t.mapState=!0}function pl(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function ht(n,e){return function(t,r,i){const s=t[0],o=t.length-1;if(n===e){if(o!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${s}, got ${o}`)}}else if(o<n||o>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function sb(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=Kn(n[s+1],e,t);i[s]=o}return i}function Ut(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=Kn(e[o+1],n,r);s[o]=a}return s}}function b8(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function ob(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function E8(n,e,t){const r=n.length-1,i=wr|Mt|fr,s=Kn(n[1],i,t),o=Kn(n[n.length-1],e,t),a=new Array(r-2);for(let u=0;u<r-2;u+=2){try{const c=Kn(n[u+2],s.type,t);a[u]=c}catch(c){throw new Error(`failed to parse argument ${u+1} of match expression: ${c.message}`)}try{const c=Kn(n[u+3],o.type,t);a[u+1]=c}catch(c){throw new Error(`failed to parse argument ${u+2} of match expression: ${c.message}`)}}return[s,...a,o]}function C8(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const u=r[1];if(typeof u!="number"||u<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(u)} instead`);i=u;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Bn(Mt,i);let o;try{o=Kn(n[2],Mt,t)}catch(u){throw new Error(`failed to parse argument 1 in interpolate expression: ${u.message}`)}const a=new Array(n.length-3);for(let u=0;u<a.length;u+=2){try{const c=Kn(n[u+3],Mt,t);a[u]=c}catch(c){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${c.message}`)}try{const c=Kn(n[u+4],e,t);a[u+1]=c}catch(c){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function S8(n,e,t){const r=Kn(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const o=Kn(n[s+1],fr,t);i[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Kn(n[s+2],r.type,t);i[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function T8(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=wr}else i=Mt;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const u=Kn(r[a],i,t);s[a]=u}catch(u){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${u.message}`)}return[Kn(n[1],i,t),...s]}function R8(n,e,t){let r;try{r=Kn(n[1],Mt,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let o=0;o<s.length;o++){let a;try{a=Kn(i[o],Ei,t)}catch(u){throw new Error(`failed to parse color at index ${o} in palette expression: ${u.message}`)}if(!(a instanceof Bn))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[r,...s]}function Ye(...n){return function(e,t,r){const i=e[0];let s;for(let o=0;o<n.length;o++){const a=n[o](e,t,r);if(o==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new y8(t,i,...s)}}function I8(n,e,t){const r=n[0],i=_8[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function VT(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return VT(n.getGeometries()[0]);default:return""}}function XT(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ws(n,e,t){const r=Kn(n,e,t);return Oi(r)}function Oi(n,e){if(n instanceof Bn){if(n.type===Ei&&typeof n.value=="string"){const r=b_(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case ue.Number:case ue.String:case ue.Coalesce:return A8(n);case ue.Get:case ue.Var:case ue.Has:return P8(n);case ue.Id:return r=>r.featureId;case ue.GeometryType:return r=>r.geometryType;case ue.Concat:{const r=n.args.map(i=>Oi(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case ue.Resolution:return r=>r.resolution;case ue.Any:case ue.All:case ue.Between:case ue.In:case ue.Not:return O8(n);case ue.Equal:case ue.NotEqual:case ue.LessThan:case ue.LessThanOrEqualTo:case ue.GreaterThan:case ue.GreaterThanOrEqualTo:return M8(n);case ue.Multiply:case ue.Divide:case ue.Add:case ue.Subtract:case ue.Clamp:case ue.Mod:case ue.Pow:case ue.Abs:case ue.Floor:case ue.Ceil:case ue.Round:case ue.Sin:case ue.Cos:case ue.Atan:case ue.Sqrt:return L8(n);case ue.Case:return k8(n);case ue.Match:return F8(n);case ue.Interpolate:return D8(n);case ue.ToString:return N8(n);default:throw new Error(`Unsupported operator ${t}`)}}function A8(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Oi(n.args[s]);switch(t){case ue.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case ue.Number:case ue.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function P8(n,e){const r=n.args[0].value;switch(n.operator){case ue.Get:return i=>{const s=n.args;let o=i.properties[r];for(let a=1,u=s.length;a<u;++a){const f=s[a].value;o=o[f]}return o};case ue.Var:return i=>i.variables[r];case ue.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let a=1,u=s.length;a<u;++a){const f=s[a].value;if(!o||!Object.hasOwn(o,f))return!1;o=o[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function M8(n,e){const t=n.operator,r=Oi(n.args[0]),i=Oi(n.args[1]);switch(t){case ue.Equal:return s=>r(s)===i(s);case ue.NotEqual:return s=>r(s)!==i(s);case ue.LessThan:return s=>r(s)<i(s);case ue.LessThanOrEqualTo:return s=>r(s)<=i(s);case ue.GreaterThan:return s=>r(s)>i(s);case ue.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function O8(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Oi(n.args[s]);switch(t){case ue.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case ue.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case ue.Between:return s=>{const o=i[0](s),a=i[1](s),u=i[2](s);return o>=a&&o<=u};case ue.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case ue.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function L8(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Oi(n.args[s]);switch(t){case ue.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case ue.Divide:return s=>i[0](s)/i[1](s);case ue.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case ue.Subtract:return s=>i[0](s)-i[1](s);case ue.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const u=i[2](s);return o>u?u:o};case ue.Mod:return s=>i[0](s)%i[1](s);case ue.Pow:return s=>Math.pow(i[0](s),i[1](s));case ue.Abs:return s=>Math.abs(i[0](s));case ue.Floor:return s=>Math.floor(i[0](s));case ue.Ceil:return s=>Math.ceil(i[0](s));case ue.Round:return s=>Math.round(i[0](s));case ue.Sin:return s=>Math.sin(i[0](s));case ue.Cos:return s=>Math.cos(i[0](s));case ue.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case ue.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function k8(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Oi(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function F8(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Oi(n.args[i]);return i=>{const s=r[0](i);for(let o=1;o<t-1;o+=2)if(s===r[o](i))return r[o+1](i);return r[t-1](i)}}function D8(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Oi(n.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,u;for(let c=2;c<t;c+=2){const f=r[c](i);let d=r[c+1](i);const g=Array.isArray(d);if(g&&(d=f8(d)),f>=o)return c===2?d:g?z8(s,o,a,u,f,d):Qu(s,o,a,u,f,d);a=f,u=d}return u}}function N8(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Oi(n.args[s]);switch(t){case ue.ToString:return s=>{const o=i[0](s);return n.args[0].type===Ei?E_(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Qu(n,e,t,r,i,s){const o=i-t;if(o===0)return r;const a=e-t,u=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return r+u*(s-r)}function z8(n,e,t,r,i,s){if(i-t===0)return r;const a=nb(r),u=nb(s);let c=u[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const f=[Qu(n,e,t,a[0],i,u[0]),Qu(n,e,t,a[1],i,u[1]),a[2]+Qu(n,e,t,0,i,c),Qu(n,e,t,r[3],i,s[3])];return d8(f)}const Se={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class S_ extends qc{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?Se.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(Ve.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Se.IDLE&&this.loader){this.state=Se.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Xl(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||eU&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=Se.LOADED}).catch(r=>{this.state=Se.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function $8(n,e,t){const r=n;let i=!0,s=!1,o=!1;const a=[ld(r,Ve.LOAD,function(){o=!0,s||e()})];return r.src&&eT?(s=!0,r.decode().then(function(){i&&e()}).catch(function(u){i&&(o?e():t())})):a.push(ld(r,Ve.ERROR,t)),function(){i=!1,a.forEach(Qt)}}function B8(n,e){return new Promise((t,r)=>{function i(){o(),t(n)}function s(){o(),r(new Error("Image load error"))}function o(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function U8(n,e){return e&&(n.src=e),n.src&&eT?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):B8(n)}class G8{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=km(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=km(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const o=km(e,t,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===Se.IDLE&&i.load(),i.getImageState()===Se.LOADING?i.ready().then(()=>{this.patternCache_[o]=gd().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=gd().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function km(n,e,t){const r=t?Zl(t):"null";return e+":"+n+":"+r}const ni=new G8;let zu=null;class YT extends qc{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?Se.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Se.LOADED){zu||(zu=gn(1,1,void 0,{willReadFrequently:!0})),zu.drawImage(this.image_,0,0);try{zu.getImageData(0,0,1,1),this.tainted_=!1}catch{zu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ve.CHANGE)}handleImageError_(){this.imageState_=Se.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Se.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=gn(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Se.IDLE){this.image_||this.initializeImage_(),this.imageState_=Se.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&U8(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Se.LOADED)return;const t=this.image_,r=gn(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=c8(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Se.LOADED||this.imageState_===Se.ERROR)e();else{const t=()=>{(this.imageState_===Se.LOADED||this.imageState_===Se.ERROR)&&(this.removeEventListener(Ve.CHANGE,t),e())};this.addEventListener(Ve.CHANGE,t)}})),this.ready_}}function T_(n,e,t,r,i,s){let o=e===void 0?void 0:ni.get(e,t,i);return o||(o=new YT(n,n&&"src"in n?n.src||void 0:e,t,r,i),ni.set(e,t,i,o,s)),s&&o&&!ni.getPattern(e,t,i)&&ni.set(e,t,i,o,s),o}function Xi(n){return n?Array.isArray(n)?E_(n):typeof n=="object"&&"src"in n?q8(n):n:null}function q8(n){if(!n.offset||!n.size)return ni.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ni.getPattern(e,void 0,n.color);if(t)return t;const r=ni.get(n.src,"anonymous",null);if(r.getImageState()!==Se.LOADED)return null;const i=gn(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),T_(i.canvas,e,void 0,Se.LOADED,n.color,!0),ni.getPattern(e,void 0,n.color)}const KT="10px sans-serif",br="#000",Jl="round",ks=[],Fs=0,Ql="round",xc=10,wc="#000",bc="center",yd="middle",ma=[0,0,0,0],Ec=1,ca=new hs;let $u=null,ab;const $0={},W8=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function j8(n,e,t){return`${n} ${e} 16px "${t}"`}const H8=function(){let e,t;async function r(s){await t.ready;const o=await t.load(s);if(o.length===0)return!1;const a=N0(s),u=a.families[0].toLowerCase(),c=a.weight;return o.some(f=>{const d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=D0[f.weight]||f.weight;return d===u&&f.style===a.style&&g==c})}async function i(){await t.ready;let s=!0;const o=ca.getProperties(),a=Object.keys(o).filter(u=>o[u]<100);for(let u=a.length-1;u>=0;--u){const c=a[u];let f=o[c];f<100&&(await r(c)?(su($0),ca.set(c,100)):(f+=10,ca.set(c,f,!0),f<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Hy?self.fonts:document.fonts);const o=N0(s);if(!o)return;const a=o.families;let u=!1;for(const c of a){if(W8.has(c))continue;const f=j8(o.style,o.weight,c);ca.get(f)===void 0&&(ca.set(f,0,!0),u=!0)}u&&(clearTimeout(e),e=setTimeout(i,100))}}(),V8=function(){let n;return function(e){let t=$0[e];if(t==null){if(Hy){const r=N0(e),i=ZT(e,"≈Ωg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);$0[e]=t}return t}}();function ZT(n,e){return $u||($u=gn(1,1)),n!=ab&&($u.font=n,ab=$u.font),$u.measureText(e)}function JT(n,e){return ZT(n,e).width}function lb(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,JT(n,s)),0);return t[e]=r,r}function X8(n,e){const t=[],r=[],i=[];let s=0,o=0,a=0,u=0;for(let c=0,f=e.length;c<=f;c+=2){const d=e[c];if(d===`
`||c===f){s=Math.max(s,o),i.push(o),o=0,a+=u,u=0;continue}const g=e[c+1]||n.font,y=JT(g,d);t.push(y),o+=y;const m=V8(g);r.push(m),u=Math.max(u,m)}return{width:s,height:a,widths:t,heights:r,lineWidths:i}}function Y8(n,e,t,r,i,s,o,a,u,c,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(u,c),n.scale(f[0],f[1]),K8(r,n)):f[0]<0||f[1]<0?(n.translate(u,c),n.scale(f[0],f[1]),n.drawImage(r,i,s,o,a,0,0,o,a)):n.drawImage(r,i,s,o,a,u,c,o*f[0],a*f[1]),n.restore()}function K8(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class gp{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=sr(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new gp({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ke()}getImage(e){return Ke()}getHitDetectionImage(){return Ke()}getPixelRatio(e){return 1}getImageState(){return Ke()}getImageSize(){return Ke()}getOrigin(){return Ke()}getSize(){return Ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=sr(e)}listenImageChange(e){Ke()}load(){Ke()}unlistenImageChange(e){Ke()}ready(){return Promise.resolve()}}class mp extends gp{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Se.LOADING:Se.LOADED,this.imageState_===Se.LOADING&&this.ready().then(()=>this.imageState_=Se.LOADED),this.render()}clone(){const e=this.getScale(),t=new mp({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,o;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(o=ni.get(r,null,null))==null?void 0:o.getImage(1);if(!i){const a=this.renderOptions_,u=Math.ceil(a.size*e),c=gn(u,u);this.draw_(a,c,e),i=c.canvas,ni.set(r,null,null,new YT(i,void 0,null,Se.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const F=i;i=s,s=F}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,u=s*Math.sin(a),c=Math.sqrt(s*s-u*u),f=i-c,d=Math.sqrt(u*u+f*f),g=d/u;if(e==="miter"&&g<=r)return g*t;const y=t/2/g,m=t/2*(f/d),x=Math.sqrt((i+y)*(i+y)+m*m)-i;if(this.radius2_===void 0||e==="bevel")return x*2;const b=i*Math.sin(a),E=Math.sqrt(i*i-b*b),T=s-E,R=Math.sqrt(b*b+T*T)/b;if(R<=r){const F=R*t/2-s-i;return 2*Math.max(x,F)}return x*2}createRenderOptions(){let e=Jl,t=Ql,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=Xi(this.stroke_.getColor()??wc),a=this.stroke_.getWidth()??Ec,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ql,e=this.stroke_.getLineCap()??Jl,r=this.stroke_.getMiterLimit()??xc);const u=this.calculateLineJoinSize_(t,a,r),c=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*c+u);return{strokeStyle:o,strokeWidth:a,size:f,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=br),t.fillStyle=Xi(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Zl(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=gn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const u=s+a*o,c=a%2===0?r:i;e.lineTo(c*Math.cos(u),c*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=br,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Go extends mp{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Go({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class dr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new dr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=T_(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Se.IDLE&&t.load(),t.getImageState()===Se.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Xe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Zl(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ub(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}class $a extends gp{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;zt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Xe(o)),zt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),zt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let u;if(e.src!==void 0?u=Se.IDLE:o!==void 0&&("complete"in o?o.complete?u=o.src?Se.LOADED:Se.IDLE:u=Se.LOADING:u=Se.LOADED),this.color_=e.color!==void 0?Zl(e.color):null,this.iconImage_=T_(o,a,this.crossOrigin_,u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,f;if(e.size)[c,f]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)c=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const y=this.iconImage_.getSize();this.setScale(ub(y[0],y[1],e.width,e.height))};this.listenImageChange(g);return}}c!==void 0&&this.setScale(ub(c,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new $a({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Se.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Se.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ve.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ve.CHANGE,e)}ready(){return this.iconImage_.ready()}}class pr{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new pr({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Rn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=cb,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Rn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=cb,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Z8(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(zt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let Fm=null;function QT(n,e){if(!Fm){const t=new dr({color:"rgba(255,255,255,0.4)"}),r=new pr({color:"#3399CC",width:1.25});Fm=[new Rn({image:new Go({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return Fm}function J8(){const n={},e=[255,255,255,1],t=[0,153,255,1],r=3;return n.Polygon=[new Rn({fill:new dr({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Rn({stroke:new pr({color:e,width:r+2})}),new Rn({stroke:new pr({color:t,width:r})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Rn({image:new Go({radius:r*2,fill:new dr({color:t}),stroke:new pr({color:e,width:r/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function cb(n){return n.getGeometry()}const Q8="#333";class yp{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=sr(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new dr({color:Q8}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new yp({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=sr(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function eq(n){return!0}function tq(n){const e=HT(),t=nq(n,e),r=XT();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=VT(i.getGeometry())),t(r)}}function hb(n){const e=HT(),t=n.length,r=new Array(t);for(let o=0;o<t;++o)r[o]=B0(n[o],e);const i=XT(),s=new Array(t);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const c=o.getId();c!==void 0?i.featureId=c:i.featureId=null}let u=0;for(let c=0;c<t;++c){const f=r[c](i);f&&(s[u]=f,u+=1)}return s.length=u,s}}function nq(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],o="filter"in s?Ws(s.filter,fr,e):eq;let a;if(Array.isArray(s.style)){const u=s.style.length;a=new Array(u);for(let c=0;c<u;++c)a[c]=B0(s.style[c],e)}else a=[B0(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<t;++a){const u=r[a].filter;if(u(i)&&!(n[a].else&&o)){o=!0;for(const c of r[a].styles){const f=c(i);f&&s.push(f)}}}return s}}function B0(n,e){const t=Cc(n,"",e),r=Sc(n,"",e),i=rq(n,e),s=iq(n,e),o=Er(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Fo(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new Rn;return function(u){let c=!0;if(t){const f=t(u);f&&(c=!1),a.setFill(f)}if(r){const f=r(u);f&&(c=!1),a.setStroke(f)}if(i){const f=i(u);f&&(c=!1),a.setText(f)}if(s){const f=s(u);f&&(c=!1),a.setImage(f)}return o&&a.setZIndex(o(u)),c?null:a}}function Cc(n,e,t){let r;if(e+"fill-pattern-src"in n)r=lq(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=R_(n,e+"fill-color",t)}if(!r)return null;const i=new dr;return function(s){const o=r(s);return o===w_?null:(i.setColor(o),i)}}function Sc(n,e,t){const r=Er(n,e+"stroke-width",t),i=R_(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Rs(n,e+"stroke-line-cap",t),o=Rs(n,e+"stroke-line-join",t),a=eR(n,e+"stroke-line-dash",t),u=Er(n,e+"stroke-line-dash-offset",t),c=Er(n,e+"stroke-miter-limit",t),f=new pr;return function(d){if(i){const g=i(d);if(g===w_)return null;f.setColor(g)}if(r&&f.setWidth(r(d)),s){const g=s(d);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(o){const g=o(d);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return a&&f.setLineDash(a(d)),u&&f.setLineDashOffset(u(d)),c&&f.setMiterLimit(c(d)),f}}function rq(n,e){const t="text-",r=Rs(n,t+"value",e);if(!r)return null;const i=Cc(n,t,e),s=Cc(n,t+"background-",e),o=Sc(n,t,e),a=Sc(n,t+"background-",e),u=Rs(n,t+"font",e),c=Er(n,t+"max-angle",e),f=Er(n,t+"offset-x",e),d=Er(n,t+"offset-y",e),g=Ol(n,t+"overflow",e),y=Rs(n,t+"placement",e),m=Er(n,t+"repeat",e),v=_p(n,t+"scale",e),x=Ol(n,t+"rotate-with-view",e),b=Er(n,t+"rotation",e),E=Rs(n,t+"align",e),T=Rs(n,t+"justify",e),C=Rs(n,t+"baseline",e),R=Ol(n,t+"keep-upright",e),F=eR(n,t+"padding",e),O=vp(n,t+"declutter-mode"),$=new yp({declutterMode:O});return function(L){if($.setText(r(L)),i&&$.setFill(i(L)),s&&$.setBackgroundFill(s(L)),o&&$.setStroke(o(L)),a&&$.setBackgroundStroke(a(L)),u&&$.setFont(u(L)),c&&$.setMaxAngle(c(L)),f&&$.setOffsetX(f(L)),d&&$.setOffsetY(d(L)),g&&$.setOverflow(g(L)),y){const N=y(L);if(N!=="point"&&N!=="line")throw new Error("Expected point or line for text-placement");$.setPlacement(N)}if(m&&$.setRepeat(m(L)),v&&$.setScale(v(L)),x&&$.setRotateWithView(x(L)),b&&$.setRotation(b(L)),E){const N=E(L);if(N!=="left"&&N!=="center"&&N!=="right"&&N!=="end"&&N!=="start")throw new Error("Expected left, right, center, start, or end for text-align");$.setTextAlign(N)}if(T){const N=T(L);if(N!=="left"&&N!=="right"&&N!=="center")throw new Error("Expected left, right, or center for text-justify");$.setJustify(N)}if(C){const N=C(L);if(N!=="bottom"&&N!=="top"&&N!=="middle"&&N!=="alphabetic"&&N!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");$.setTextBaseline(N)}return F&&$.setPadding(F(L)),R&&$.setKeepUpright(R(L)),$}}function iq(n,e){return"icon-src"in n?sq(n,e):"shape-points"in n?oq(n,e):"circle-radius"in n?aq(n,e):null}function sq(n,e){const t="icon-",r=t+"src",i=tR(n[r],r),s=_d(n,t+"anchor",e),o=_p(n,t+"scale",e),a=Er(n,t+"opacity",e),u=_d(n,t+"displacement",e),c=Er(n,t+"rotation",e),f=Ol(n,t+"rotate-with-view",e),d=db(n,t+"anchor-origin"),g=pb(n,t+"anchor-x-units"),y=pb(n,t+"anchor-y-units"),m=fq(n,t+"color"),v=cq(n,t+"cross-origin"),x=hq(n,t+"offset"),b=db(n,t+"offset-origin"),E=vd(n,t+"width"),T=vd(n,t+"height"),C=uq(n,t+"size"),R=vp(n,t+"declutter-mode"),F=new $a({src:i,anchorOrigin:d,anchorXUnits:g,anchorYUnits:y,color:m,crossOrigin:v,offset:x,offsetOrigin:b,height:T,width:E,size:C,declutterMode:R});return function(O){return a&&F.setOpacity(a(O)),u&&F.setDisplacement(u(O)),c&&F.setRotation(c(O)),f&&F.setRotateWithView(f(O)),o&&F.setScale(o(O)),s&&F.setAnchor(s(O)),F}}function oq(n,e){const t="shape-",r=t+"points",i=t+"radius",s=U0(n[r],r),o=U0(n[i],i),a=Cc(n,t,e),u=Sc(n,t,e),c=_p(n,t+"scale",e),f=_d(n,t+"displacement",e),d=Er(n,t+"rotation",e),g=Ol(n,t+"rotate-with-view",e),y=vd(n,t+"radius2"),m=vd(n,t+"angle"),v=vp(n,t+"declutter-mode"),x=new mp({points:s,radius:o,radius2:y,angle:m,declutterMode:v});return function(b){return a&&x.setFill(a(b)),u&&x.setStroke(u(b)),f&&x.setDisplacement(f(b)),d&&x.setRotation(d(b)),g&&x.setRotateWithView(g(b)),c&&x.setScale(c(b)),x}}function aq(n,e){const t="circle-",r=Cc(n,t,e),i=Sc(n,t,e),s=Er(n,t+"radius",e),o=_p(n,t+"scale",e),a=_d(n,t+"displacement",e),u=Er(n,t+"rotation",e),c=Ol(n,t+"rotate-with-view",e),f=vp(n,t+"declutter-mode"),d=new Go({radius:5,declutterMode:f});return function(g){return s&&d.setRadius(s(g)),r&&d.setFill(r(g)),i&&d.setStroke(i(g)),a&&d.setDisplacement(a(g)),u&&d.setRotation(u(g)),c&&d.setRotateWithView(c(g)),o&&d.setScale(o(g)),d}}function Er(n,e,t){if(!(e in n))return;const r=Ws(n[e],Mt,t);return function(i){return U0(r(i),e)}}function Rs(n,e,t){if(!(e in n))return null;const r=Ws(n[e],wr,t);return function(i){return tR(r(i),e)}}function lq(n,e,t){const r=Rs(n,e+"pattern-src",t),i=fb(n,e+"pattern-offset",t),s=fb(n,e+"pattern-size",t),o=R_(n,e+"color",t);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function Ol(n,e,t){if(!(e in n))return null;const r=Ws(n[e],fr,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function R_(n,e,t){if(!(e in n))return null;const r=Ws(n[e],Ei,t);return function(i){return nR(r(i),e)}}function eR(n,e,t){if(!(e in n))return null;const r=Ws(n[e],za,t);return function(i){return Zc(r(i),e)}}function _d(n,e,t){if(!(e in n))return null;const r=Ws(n[e],za,t);return function(i){const s=Zc(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function fb(n,e,t){if(!(e in n))return null;const r=Ws(n[e],za,t);return function(i){return rR(r(i),e)}}function _p(n,e,t){if(!(e in n))return null;const r=Ws(n[e],za|Mt,t);return function(i){return dq(r(i),e)}}function vd(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function uq(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return sr(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function cq(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function db(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function pb(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function hq(n,e){const t=n[e];if(t!==void 0)return Zc(t,e)}function vp(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function fq(n,e){const t=n[e];if(t!==void 0)return nR(t,e)}function Zc(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function tR(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function U0(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function nR(n,e){if(typeof n=="string")return n;const t=Zc(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function rR(n,e){const t=Zc(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function dq(n,e){return typeof n=="number"?n:rR(n,e)}const gb={RENDER_ORDER:"renderOrder"};class I_ extends uu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(gb.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new WT(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(gb.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?QT:e;const t=pq(e);this.styleFunction_=e===null?void 0:Z8(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function pq(n){if(n===void 0)return QT;if(!n)return null;if(typeof n=="function"||n instanceof Rn)return n;if(!Array.isArray(n))return hb([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Rn){const i=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!(o instanceof Rn))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return tq(i)}return hb(n)}class iR extends ai{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class gq extends Uc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ke()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;ss(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),xT(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,o,a,u){let c;const f=t.viewState;function d(C,R,F,O){return s.call(o,R,C?F:null,O)}const g=f.projection,y=Ky(e.slice(),g),m=[[0,0]];if(g.canWrapX()&&i){const C=g.getExtent(),R=Lt(C);m.push([-R,0],[R,0])}const v=t.layerStatesArray,x=v.length,b=[],E=[];for(let C=0;C<m.length;C++)for(let R=x-1;R>=0;--R){const F=v[R],O=F.layer;if(O.hasRenderer()&&x_(F,f)&&a.call(u,O)){const $=O.getRenderer(),L=O.getSource();if($&&L){const N=L.getWrapX()?y:e,B=d.bind(null,F.managed);E[0]=N[0]+m[C][0],E[1]=N[1]+m[C][1],c=$.forEachFeatureAtCoordinate(E,t,r,B,b)}if(c)return c}}if(b.length===0)return;const T=1/b.length;return b.forEach((C,R)=>C.distanceSq+=R*T),b.sort((C,R)=>C.distanceSq-R.distanceSq),b.some(C=>c=C.callback(C.feature,C.layer,C.geometry)),c}hasFeatureAtCoordinate(e,t,r,i,s,o){return this.forEachFeatureAtCoordinate(e,t,r,i,Fa,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ke()}scheduleExpireIconCache(e){ni.canExpireCache()&&e.postRenderFunctions.push(mq)}}function mq(n,e){ni.expire()}class yq extends gq{constructor(e){super(e),this.fontChangeListenerKey_=Ot(ca,Vl.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Xc+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new iR(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Qt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ti.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,u)=>a.zIndex-u.zIndex);t.some(a=>a.layer instanceof I_&&a.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,u=t.length;a<u;++a){const c=t[a];e.layerIndex=a;const f=c.layer,d=f.getSourceState();if(!x_(c,i)||d!="ready"&&d!="undefined"){f.unrender();continue}const g=f.render(e,o);g&&(g!==o&&(this.children_.push(g),o=g),s.push(c))}this.declutter(e,s),IG(this.element_,this.children_),this.dispatchRenderEvent(ti.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function sR(n){if(n instanceof uu){n.setMapInternal(null);return}n instanceof No&&n.getLayers().forEach(sR)}function oR(n,e){if(n instanceof uu){n.setMapInternal(e);return}if(n instanceof No){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)oR(t[r],e)}}let xp=class extends hs{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=_q(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:QB,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Sr(),this.pixelToCoordinateTransform_=Sr(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||DT(),this.interactions=t.interactions||JG({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new nT(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(jn.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(jn.VIEW,this.handleViewChanged_),this.addChangeListener(jn.SIZE,this.handleSizeChanged_),this.addChangeListener(jn.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof bi)&&e.view.then(function(i){r.setView(new bi(i))}),this.controls.addEventListener(Vn.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Vn.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Vn.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Vn.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Vn.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Vn.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){oR(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Fa,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof No?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Fa,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(jn.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return L0(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?kn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(jn.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Ri){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ts(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?kn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(jn.SIZE)}getView(){return this.get(jn.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return rU(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new fo(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===C0.POINTERDOWN||r===Ve.WHEEL||r===Ve.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[an.ANIMATING]||o[an.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ti.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ti.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new xl(po.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new xl(po.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Qt(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ve.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ve.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new yq(this)),this.mapBrowserEventHandler_=new tU(this,this.moveTolerance_);for(const s in on)this.mapBrowserEventHandler_.addEventListener(on[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ve.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ve.WHEEL,this.boundHandleBrowserEvent_,tT?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ot(r,Ve.KEYDOWN,this.handleBrowserEvent,this),Ot(r,Ve.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Qt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Qt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ot(e,Vl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ot(e,Ve.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Qt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new yo("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ot(e,Vl.PROPERTYCHANGE,this.render,this),Ot(e,Ve.CHANGE,this.render,this),Ot(e,"addlayer",this.handleLayerAdd_,this),Ot(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){sR(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&rb(t)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:cd(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Xe(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const u=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=cd(a.nextCenter,a.nextResolution,u,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Wa(this.previousExtent_)&&!$s(s.extent,this.previousExtent_))&&(this.dispatchEvent(new xl(po.MOVESTART,this,i)),this.previousExtent_=ou(this.previousExtent_)),this.previousExtent_&&!s.viewHints[an.ANIMATING]&&!s.viewHints[an.INTERACTING]&&!$s(s.extent,this.previousExtent_)&&(this.dispatchEvent(new xl(po.MOVEEND,this,s)),rT(s.extent,this.previousExtent_))),this.dispatchEvent(new xl(po.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(po.LOADSTART)||this.hasListener(po.LOADEND)||this.hasListener(ti.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new yo("removelayer",t)),this.set(jn.LAYERGROUP,e)}setSize(e){this.set(jn.SIZE,e)}setTarget(e){this.set(jn.TARGET,e)}setView(e){if(!e||e instanceof bi){this.set(jn.VIEW,e);return}this.set(jn.VIEW,new bi);const t=this;e.then(function(r){t.setView(new bi(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[Math.max(0,s),Math.max(0,o)],!rb(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&fT("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Uo(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function _q(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new No({layers:n.layers});t[jn.LAYERGROUP]=r,t[jn.TARGET]=n.target,t[jn.VIEW]=n.view instanceof bi?n.view:new bi;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new Ri(n.controls.slice()):(zt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Ri(n.interactions.slice()):(zt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Ri(n.overlays.slice()):(zt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Ri,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const mb=(n,e)=>{const t=[];return n.forEach(r=>{if("getSource"in r&&typeof r.getSource=="function"){const i=r.getSource();if(!(i!=null&&i.getFeatureById))return;e.forEach(s=>{const o=i.getFeatureById(s);o&&t.push(o)})}}),t},vq=(n,e)=>{if(!e)return e;const t=n.getResolutions();return t?t.reduce((r,i)=>Math.abs(i-e)<Math.abs(r-e)?i:r):e},xq=(n,e)=>{const t=n.getView(),r=t.getResolutionForExtent(e,n.getSize());if(!r)return t.getZoom()??0;const i=t.getResolutions()?vq(t,r):r;return t.getZoomForResolution(i??t.getResolution()??0)??t.getZoom()??0},Uf=(n,e,t={})=>{const r=e.getGeometry();if(!r)return;const i=n.getView();if(!i)return;let s;if(r instanceof os)s=r.getCoordinates();else if(r instanceof oi){const o=r.getExtent();s=[(o[0]+o[2])/2,(o[1]+o[3])/2]}else{const o=r.getExtent();s=o?[(o[0]+o[2])/2,(o[1]+o[3])/2]:void 0}s&&i.animate({center:s,duration:t.duration??600})},aR=(n,e,t={})=>{const{padding:r=[50,50,50,50],maxZoom:i=16,duration:s=600}=t;if(!e.length)return;const o=e.map(d=>{var g;return(g=d.getGeometry())==null?void 0:g.getExtent()}).filter(d=>!!d);if(!o.length)return;const a=o.reduce((d,g)=>[Math.min(d[0],g[0]),Math.min(d[1],g[1]),Math.max(d[2],g[2]),Math.max(d[3],g[3])],o[0]),u=n.getView();if(!u)return;const c=xq(n,a),f=Math.round(Math.min(c,i));u.setZoom(f),u.fit(a,{padding:r,duration:s})};class Bs extends hs{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Bs(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Qt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ot(e,Ve.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?wq(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function wq(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(zt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}class lR{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const De={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Tf=[De.FILL],To=[De.STROKE],ya=[De.BEGIN_PATH],yb=[De.CLOSE_PATH];class Jc extends lR{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,u=e.length;a<u;a+=t)i[0]=e[a],i[1]=e[a+1],Na(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,t,r,i,s,o){const a=this.coordinates;let u=a.length;const c=this.getBufferedMaxExtent();o&&(t+=i);let f=e[t],d=e[t+1];const g=this.tmpCoordinate_;let y=!0,m,v,x;for(m=t+i;m<r;m+=i)g[0]=e[m],g[1]=e[m+1],x=R0(c,g),x!==v?(y&&(a[u++]=f,a[u++]=d,y=!1),a[u++]=g[0],a[u++]=g[1]):x===Hn.INTERSECTING?(a[u++]=g[0],a[u++]=g[1],y=!1):y=!0,f=g[0],d=g[1],v=x;return(s&&y||m===t+i)&&(a[u++]=f,a[u++]=d),u}drawCustomCoordinates_(e,t,r,i,s){for(let o=0,a=r.length;o<a;++o){const u=r[o],c=this.appendFlatLineCoordinates(e,t,u,i,!1,!1);s.push(c),t=u}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),u=this.coordinates.length;let c,f,d,g,y;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),g=[];const m=e.getEndss();y=0;for(let v=0,x=m.length;v<x;++v){const b=[];y=this.drawCustomCoordinates_(c,y,m[v],a,b),g.push(b)}this.instructions.push([De.CUSTOM,u,g,e,r,k0,s]),this.hitDetectionInstructions.push([De.CUSTOM,u,g,e,i||r,k0,s]);break;case"Polygon":case"MultiLineString":d=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),y=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([De.CUSTOM,u,d,e,r,_c,s]),this.hitDetectionInstructions.push([De.CUSTOM,u,d,e,i||r,_c,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([De.CUSTOM,u,f,e,r,So,s]),this.hitDetectionInstructions.push([De.CUSTOM,u,f,e,i||r,So,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(c,a),f>u&&(this.instructions.push([De.CUSTOM,u,f,e,r,So,s]),this.hitDetectionInstructions.push([De.CUSTOM,u,f,e,i||r,So,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),f=this.coordinates.length,this.instructions.push([De.CUSTOM,u,f,e,r,void 0,s]),this.hitDetectionInstructions.push([De.CUSTOM,u,f,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[De.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[De.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,o=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==De.END_GEOMETRY?o=t:s==De.BEGIN_GEOMETRY&&(i[2]=t,VB(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Xi(r||br)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Xi(r||wc);const i=e.getLineCap();t.lineCap=i!==void 0?i:Jl;const s=e.getLineDash();t.lineDash=s?s.slice():ks;const o=e.getLineDashOffset();t.lineDashOffset=o||Fs;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:Ql;const u=e.getWidth();t.lineWidth=u!==void 0?u:Ec;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:xc,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[De.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[De.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,u=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Uo(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=u||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=u,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[De.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=rT(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Mo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class bq extends Jc{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Na(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([De.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([De.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let u=0,c=i.length;u<c;u+=e.getStride())(!this.maxExtent||Na(this.maxExtent,i.slice(u,u+2)))&&s.push(i[u],i[u+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([De.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([De.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Eq extends Jc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),a=[De.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([De.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ks,Fs],ya);const a=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(a,0,a.length,u),this.hitDetectionInstructions.push(To),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([De.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ks,Fs],ya);const a=e.getEnds(),u=e.getFlatCoordinates(),c=e.getStride();let f=0;for(let d=0,g=a.length;d<g;++d)f=this.drawFlatCoordinates_(u,f,a[d],c);this.hitDetectionInstructions.push(To),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(To),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(To),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ya)}}class _b extends Jc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,u=r.length;this.instructions.push(ya),this.hitDetectionInstructions.push(ya);for(let c=0;c<u;++c){const f=r[c],d=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,f,i,!0,!a),y=[De.MOVE_TO_LINE_TO,d,g];this.instructions.push(y),this.hitDetectionInstructions.push(y),a&&(this.instructions.push(yb),this.hitDetectionInstructions.push(yb)),t=f}return o&&(this.instructions.push(Tf),this.hitDetectionInstructions.push(Tf)),a&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_FILL_STYLE,br]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ks,Fs]);const a=e.getFlatCoordinates(),u=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,u,!1,!1);const f=[De.CIRCLE,c];this.instructions.push(ya,f),this.hitDetectionInstructions.push(ya,f),i.fillStyle!==void 0&&(this.instructions.push(Tf),this.hitDetectionInstructions.push(Tf)),i.strokeStyle!==void 0&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_FILL_STYLE,br]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ks,Fs]);const a=e.getEnds(),u=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(u,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_FILL_STYLE,br]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([De.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ks,Fs]);const a=e.getEndss(),u=e.getOrientedFlatCoordinates(),c=e.getStride();let f=0;for(let d=0,g=a.length;d<g;++d)f=this.drawFlatCoordinatess_(u,f,a[d],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=la(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Cq(n,e,t,r,i){const s=[];let o=t,a=0,u=e.slice(t,2);for(;a<n&&o+i<r;){const[c,f]=u.slice(-2),d=e[o+i],g=e[o+i+1],y=Math.sqrt((d-c)*(d-c)+(g-f)*(g-f));if(a+=y,a>=n){const m=(n-a+y)/y,v=Nr(c,d,m),x=Nr(f,g,m);u.push(v,x),s.push(u),u=[v,x],a==n&&(o+=i),a=0}else if(a<n)u.push(e[o+i],e[o+i+1]),o+=i;else{const m=y-a,v=Nr(c,d,m/y),x=Nr(f,g,m/y);u.push(v,x),s.push(u),u=[v,x],a=0,o+=i}}return a>0&&s.push(u),s}function Sq(n,e,t,r,i){let s=t,o=t,a=0,u=0,c=t,f,d,g,y,m,v,x,b,E,T;for(d=t;d<r;d+=i){const C=e[d],R=e[d+1];m!==void 0&&(E=C-m,T=R-v,y=Math.sqrt(E*E+T*T),x!==void 0&&(u+=g,f=Math.acos((x*E+b*T)/(g*y)),f>n&&(u>a&&(a=u,s=c,o=d),u=0,c=d-i)),g=y,x=E,b=T),m=C,v=R}return u+=y,u>a?[c,d]:[s,o]}const xd={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Tq extends Jc{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[br]={fillStyle:br},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let u=a.length;const c=e.getType();let f=null,d=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!wn(this.maxExtent,e.getExtent()))return;let g;if(f=e.getFlatCoordinates(),c=="LineString")g=[f.length];else if(c=="MultiLineString")g=e.getEnds();else if(c=="Polygon")g=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const x=e.getEndss();g=[];for(let b=0,E=x.length;b<E;++b)g.push(x[b][0])}this.beginGeometry(e,t,r);const y=o.repeat,m=y?void 0:o.textAlign;let v=0;for(let x=0,b=g.length;x<b;++x){let E;y?E=Cq(y*this.resolution,f,v,g[x],d):E=[f.slice(v,g[x])];for(let T=0,C=E.length;T<C;++T){const R=E[T];let F=0,O=R.length;if(m==null){const L=Sq(o.maxAngle,R,0,R.length,2);F=L[0],O=L[1]}for(let L=F;L<O;L+=d)a.push(R[L],R[L+1]);const $=a.length;v=g[x],this.drawChars_(u,$),u=$}}this.endGeometry(t)}else{let g=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),o.overflow||g.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":const C=e.getFlatInteriorPoints();f=[];for(let R=0,F=C.length;R<F;R+=3)o.overflow||g.push(C[R+2]/this.resolution),f.push(C[R],C[R+1]);if(f.length===0)return;d=2;break}const y=this.appendFlatPointCoordinates(f,d);if(y===u)return;if(g&&(y-u)/2!==f.length/d){let C=u/2;g=g.filter((R,F)=>{const O=a[(C+F)*2]===f[F*d]&&a[(C+F)*2+1]===f[F*d+1];return O||--C,O})}this.saveTextStates_();const m=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,v=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,r);let x=o.padding;if(x!=ma&&(o.scale[0]<0||o.scale[1]<0)){let C=o.padding[0],R=o.padding[1],F=o.padding[2],O=o.padding[3];o.scale[0]<0&&(R=-R,O=-O),o.scale[1]<0&&(C=-C,F=-F),x=[C,R,F,O]}const b=this.pixelRatio;this.instructions.push([De.DRAW_IMAGE,u,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,x==ma?ma:x.map(function(C){return C*b}),m,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const E=1/b,T=m?m.slice(0):null;T&&(T[1]=br),this.hitDetectionInstructions.push([De.DRAW_IMAGE,u,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[E,E],NaN,this.declutterMode_,this.declutterImageWithText_,x,T,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?br:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||bc,justify:t.justify,textBaseline:t.textBaseline||yd,scale:t.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,c=xd[i.textBaseline],f=this.textOffsetY_*u,d=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([De.DRAW_CHARS,e,t,c,i.overflow,a,i.maxAngle,u,f,s,g*u,d,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([De.DRAW_CHARS,e,t,c,i.overflow,a&&br,i.maxAngle,u,f,s,g*u,d,o,1/u,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Xi(o.getColor()||br)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=a.getLineDash(),x=a.getLineDashOffset(),b=a.getWidth(),E=a.getMiterLimit();s.lineCap=a.getLineCap()||Jl,s.lineDash=v?v.slice():ks,s.lineDashOffset=x===void 0?Fs:x,s.lineJoin=a.getLineJoin()||Ql,s.lineWidth=b===void 0?Ec:b,s.miterLimit=E===void 0?xc:E,s.strokeStyle=Xi(a.getColor()||wc)}r=this.textState_;const u=e.getFont()||KT;H8(u);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=u,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||yd,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||ma,r.scale=c===void 0?[1,1]:c;const f=e.getOffsetX(),d=e.getOffsetY(),g=e.getRotateWithView(),y=e.getKeepUpright(),m=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=y===void 0?!0:y,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Xe(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Xe(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Rq={Circle:_b,Default:Jc,Image:bq,LineString:Eq,Polygon:_b,Text:Tq};class uR{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const o=Rq[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function A_(n,e,t,r){let i=n[e],s=n[e+1],o=0;for(let a=e+r;a<t;a+=r){const u=n[a],c=n[a+1];o+=Math.sqrt((u-i)*(u-i)+(c-s)*(c-s)),i=u,s=c}return o}function Iq(n,e,t,r,i,s,o,a,u,c,f,d,g=!0){let y=n[e],m=n[e+1],v=0,x=0,b=0,E=0;function T(){v=y,x=m,e+=r,y=n[e],m=n[e+1],E+=b,b=Math.sqrt((y-v)*(y-v)+(m-x)*(m-x))}do T();while(e<t-r&&E+b<s);let C=b===0?0:(s-E)/b;const R=Nr(v,y,C),F=Nr(x,m,C),O=e-r,$=E,L=s+a*u(c,i,f);for(;e<t-r&&E+b<L;)T();C=b===0?0:(L-E)/b;const N=Nr(v,y,C),B=Nr(x,m,C);let z=!1;if(g)if(d){const q=[R,F,N,B];wT(q,0,4,2,d,q,q),z=q[0]>q[2]}else z=R>N;const H=Math.PI,Z=[],G=O+r===e;e=O,b=0,E=$,y=n[e],m=n[e+1];let W;if(G){T(),W=Math.atan2(m-x,y-v),z&&(W+=W>0?-H:H);const q=(N+R)/2,V=(B+F)/2;return Z[0]=[q,V,(L-s)/2,W,i],Z}i=i.replace(/\n/g," ");for(let q=0,V=i.length;q<V;){T();let ne=Math.atan2(m-x,y-v);if(z&&(ne+=ne>0?-H:H),W!==void 0){let Oe=ne-W;if(Oe+=Oe>H?-2*H:Oe<-H?2*H:0,Math.abs(Oe)>o)return null}W=ne;const re=q;let me=0;for(;q<V;++q){const Oe=z?V-q-1:q,dt=a*u(c,i[Oe],f);if(e+r<t&&E+b<s+me+dt/2)break;me+=dt}if(q===re)continue;const ce=z?i.substring(V-re,V-q):i.substring(re,q);C=b===0?0:(s+me/2-E)/b;const Fe=Nr(v,y,C),le=Nr(x,m,C);Z.push([Fe,le,me/2,ne,ce]),s+=me}return Z}class P_{constructor(){Zh(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(gd(),{get:(e,t)=>{if(typeof gd()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const o=t[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const gl=si(),oo=[],Es=[],Cs=[],ao=[];function vb(n){return n[3].declutterBox}const xb=new RegExp("[÷ë-‡£øÔ¨ù-Ô∑øÔπ∞-Ôªº‡†Ä-‡øøÓ†Ä-Óøø]");function Dm(n,e){return e==="start"?e=xb.test(n)?"right":"left":e==="end"&&(e=xb.test(n)?"left":"right"),xd[e]}function Aq(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Pq(n,e,t){return t%2===0&&(n+=e),n}class Mq{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Sr(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new P_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,u=this.textStates[t],c=this.pixelRatio,f=[u.scale[0]*c,u.scale[1]*c],d=u.justify?xd[u.justify]:Dm(Array.isArray(e)?e[0]:e,u.textAlign||bc),g=i&&o.lineWidth?o.lineWidth:0,y=Array.isArray(e)?e:String(e).split(`
`).reduce(Aq,[]),{width:m,height:v,widths:x,heights:b,lineWidths:E}=X8(u,y),T=m+g,C=[],R=(T+2)*f[0],F=(v+g)*f[1],O={width:R<0?Math.floor(R):Math.ceil(R),height:F<0?Math.floor(F):Math.ceil(F),contextInstructions:C};(f[0]!=1||f[1]!=1)&&C.push("scale",f),i&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",g),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),r&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const $=.5-d;let L=d*T+$*g;const N=[],B=[];let z=0,H=0,Z=0,G=0,W;for(let q=0,V=y.length;q<V;q+=2){const ne=y[q];if(ne===`
`){H+=z,z=0,L=d*T+$*g,++G;continue}const re=y[q+1]||u.font;re!==W&&(i&&N.push("font",re),r&&B.push("font",re),W=re),z=Math.max(z,b[Z]);const me=[ne,L+$*x[Z]+d*(x[Z]-E[G]),.5*(g+z)+H];L+=x[Z],i&&N.push("strokeText",me),r&&B.push("fillText",me),++Z}return Array.prototype.push.apply(C,N),Array.prototype.push.apply(C,B),this.labels_[s]=O,O}replayTextBackground_(e,t,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,o,a,u,c,f,d,g,y,m,v,x){a*=g[0],u*=g[1];let b=r-a,E=i-u;const T=s+c>e?e-c:s,C=o+f>t?t-f:o,R=m[3]+T*g[0]+m[1],F=m[0]+C*g[1]+m[2],O=b-m[3],$=E-m[0];(v||d!==0)&&(oo[0]=O,ao[0]=O,oo[1]=$,Es[1]=$,Es[0]=O+R,Cs[0]=Es[0],Cs[1]=$+F,ao[1]=Cs[1]);let L;return d!==0?(L=ss(Sr(),r,i,1,1,d,-r,-i),kn(L,oo),kn(L,Es),kn(L,Cs),kn(L,ao),zs(Math.min(oo[0],Es[0],Cs[0],ao[0]),Math.min(oo[1],Es[1],Cs[1],ao[1]),Math.max(oo[0],Es[0],Cs[0],ao[0]),Math.max(oo[1],Es[1],Cs[1],ao[1]),gl)):zs(Math.min(O,O+R),Math.min($,$+F),Math.max(O,O+R),Math.max($,$+F),gl),y&&(b=Math.round(b),E=Math.round(E)),{drawImageX:b,drawImageY:E,drawImageW:T,drawImageH:C,originX:c,originY:f,declutterBox:{minX:gl[0],minY:gl[1],maxX:gl[2],maxY:gl[3],value:x},canvasTransform:L,scale:g}}replayImageOrLabel_(e,t,r,i,s,o,a){const u=!!(o||a),c=i.declutterBox,f=a?a[2]*i.scale[0]/2:0;return c.minX-f<=t[0]&&c.maxX+f>=0&&c.minY-f<=t[1]&&c.maxY+f>=0&&(u&&this.replayTextBackground_(e,oo,Es,Cs,ao,o,a),Y8(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=kn(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],o=this.createLabel(e,t,i,r),a=this.strokeStates[r],u=this.pixelRatio,c=Dm(Array.isArray(e)?e[0]:e,s.textAlign||bc),f=xd[s.textBaseline||yd],d=a&&a.lineWidth?a.lineWidth:0,g=o.width/u-2*s.scale[0],y=c*g+2*(.5-c)*d,m=f*o.height/u+2*(.5-f)*d;return{label:o,anchorX:y,anchorY:m}}execute_(e,t,r,i,s,o,a,u){const c=this.zIndexContext_;let f;this.pixelCoordinates_&&Uo(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=Lo(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),ZU(this.renderedTransform_,r));let d=0;const g=i.length;let y=0,m,v,x,b,E,T,C,R,F,O,$,L,N,B=0,z=0;const H=this.coordinateCache_,Z=this.viewRotation_,G=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,W={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Z},q=this.instructions!=i||this.overlaps?0:200;let V,ne,re,me;for(;d<g;){const ce=i[d];switch(ce[0]){case De.BEGIN_GEOMETRY:V=ce[1],me=ce[3],V.getGeometry()?a!==void 0&&!wn(a,me.getExtent())?d=ce[2]+1:++d:d=ce[2],c&&(c.zIndex=ce[4]);break;case De.BEGIN_PATH:B>q&&(this.fill_(e),B=0),z>q&&(e.stroke(),z=0),!B&&!z&&(e.beginPath(),E=NaN,T=NaN),++d;break;case De.CIRCLE:y=ce[1];const le=f[y],Oe=f[y+1],dt=f[y+2],ze=f[y+3],Ie=dt-le,Te=ze-Oe,pt=Math.sqrt(Ie*Ie+Te*Te);e.moveTo(le+pt,Oe),e.arc(le,Oe,pt,0,2*Math.PI,!0),++d;break;case De.CLOSE_PATH:e.closePath(),++d;break;case De.CUSTOM:y=ce[1],m=ce[2];const Gt=ce[3],Tt=ce[4],en=ce[5];W.geometry=Gt,W.feature=V,d in H||(H[d]=[]);const ge=H[d];en?en(f,y,m,2,ge):(ge[0]=f[y],ge[1]=f[y+1],ge.length=2),c&&(c.zIndex=ce[6]),Tt(ge,W),++d;break;case De.DRAW_IMAGE:y=ce[1],m=ce[2],F=ce[3],v=ce[4],x=ce[5];let $e=ce[6];const be=ce[7],ke=ce[8],Ze=ce[9],rn=ce[10];let gt=ce[11];const k=ce[12];let Qe=ce[13];b=ce[14]||"declutter";const Be=ce[15];if(!F&&ce.length>=20){O=ce[19],$=ce[20],L=ce[21],N=ce[22];const $t=this.drawLabelWithPointPlacement_(O,$,L,N);F=$t.label,ce[3]=F;const Mn=ce[23];v=($t.anchorX-Mn)*this.pixelRatio,ce[4]=v;const cn=ce[24];x=($t.anchorY-cn)*this.pixelRatio,ce[5]=x,$e=F.height,ce[6]=$e,Qe=F.width,ce[13]=Qe}let En;ce.length>25&&(En=ce[25]);let Ht,un,Et;ce.length>17?(Ht=ce[16],un=ce[17],Et=ce[18]):(Ht=ma,un=null,Et=null),rn&&G?gt+=Z:!rn&&!G&&(gt-=Z);let He=0;for(;y<m;y+=2){if(En&&En[He++]<Qe/this.pixelRatio)continue;const $t=this.calculateImageOrLabelDimensions_(F.width,F.height,f[y],f[y+1],Qe,$e,v,x,ke,Ze,gt,k,s,Ht,!!un||!!Et,V),Mn=[e,t,F,$t,be,un,Et];if(u){let cn,yn,Zt;if(Be){const Ft=m-y;if(!Be[Ft]){Be[Ft]={args:Mn,declutterMode:b};continue}const It=Be[Ft];cn=It.args,yn=It.declutterMode,delete Be[Ft],Zt=vb(cn)}let Dn,hn;if(cn&&(yn!=="declutter"||!u.collides(Zt))&&(Dn=!0),(b!=="declutter"||!u.collides($t.declutterBox))&&(hn=!0),yn==="declutter"&&b==="declutter"){const Ft=Dn&&hn;Dn=Ft,hn=Ft}Dn&&(yn!=="none"&&u.insert(Zt),this.replayImageOrLabel_.apply(this,cn)),hn&&(b!=="none"&&u.insert($t.declutterBox),this.replayImageOrLabel_.apply(this,Mn))}else this.replayImageOrLabel_.apply(this,Mn)}++d;break;case De.DRAW_CHARS:const Pe=ce[1],Le=ce[2],Ce=ce[3],xt=ce[4];N=ce[5];const Ue=ce[6],Ge=ce[7],et=ce[8];L=ce[9];const Rt=ce[10];O=ce[11],Array.isArray(O)&&(O=O.reduce(Pq,"")),$=ce[12];const Kt=[ce[13],ce[13]];b=ce[14]||"declutter";const mn=ce[15],Dt=this.textStates[$],Nt=Dt.font,ot=[Dt.scale[0]*Ge,Dt.scale[1]*Ge];let Ct;Nt in this.widths_?Ct=this.widths_[Nt]:(Ct={},this.widths_[Nt]=Ct);const Yt=A_(f,Pe,Le,2),kt=Math.abs(ot[0])*lb(Nt,O,Ct);if(xt||kt<=Yt){const $t=this.textStates[$].textAlign,Mn=(Yt-kt)*Dm(O,$t),cn=Iq(f,Pe,Le,2,O,Mn,Ue,Math.abs(ot[0]),lb,Nt,Ct,G?0:this.viewRotation_,mn);e:if(cn){const yn=[];let Zt,Dn,hn,Ft,It;if(L)for(Zt=0,Dn=cn.length;Zt<Dn;++Zt){It=cn[Zt],hn=It[4],Ft=this.createLabel(hn,$,"",L),v=It[2]+(ot[0]<0?-Rt:Rt),x=Ce*Ft.height+(.5-Ce)*2*Rt*ot[1]/ot[0]-et;const Cn=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,It[0],It[1],Ft.width,Ft.height,v,x,0,0,It[3],Kt,!1,ma,!1,V);if(u&&b==="declutter"&&u.collides(Cn.declutterBox))break e;yn.push([e,t,Ft,Cn,1,null,null])}if(N)for(Zt=0,Dn=cn.length;Zt<Dn;++Zt){It=cn[Zt],hn=It[4],Ft=this.createLabel(hn,$,N,""),v=It[2],x=Ce*Ft.height-et;const Cn=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,It[0],It[1],Ft.width,Ft.height,v,x,0,0,It[3],Kt,!1,ma,!1,V);if(u&&b==="declutter"&&u.collides(Cn.declutterBox))break e;yn.push([e,t,Ft,Cn,1,null,null])}u&&b!=="none"&&u.load(yn.map(vb));for(let Cn=0,Ni=yn.length;Cn<Ni;++Cn)this.replayImageOrLabel_.apply(this,yn[Cn])}}++d;break;case De.END_GEOMETRY:if(o!==void 0){V=ce[1];const $t=o(V,me,b);if($t)return $t}++d;break;case De.FILL:q?B++:this.fill_(e),++d;break;case De.MOVE_TO_LINE_TO:for(y=ce[1],m=ce[2],ne=f[y],re=f[y+1],e.moveTo(ne,re),E=ne+.5|0,T=re+.5|0,y+=2;y<m;y+=2)ne=f[y],re=f[y+1],C=ne+.5|0,R=re+.5|0,(y==m-2||C!==E||R!==T)&&(e.lineTo(ne,re),E=C,T=R);++d;break;case De.SET_FILL_STYLE:this.alignAndScaleFill_=ce[2],B&&(this.fill_(e),B=0,z&&(e.stroke(),z=0)),e.fillStyle=ce[1],++d;break;case De.SET_STROKE_STYLE:z&&(e.stroke(),z=0),this.setStrokeStyle_(e,ce),++d;break;case De.STROKE:q?z++:e.stroke(),++d;break;default:++d;break}}B&&this.fill_(e),z&&e.stroke()}execute(e,t,r,i,s,o){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ha=["Polygon","Circle","LineString","Image","Text","Default"],wd=["Image","Text"],Oq=ha.filter(n=>!wd.includes(n));class cR{constructor(e,t,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Sr(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new Mq(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,o){i=Math.round(i);const a=i*2+1,u=ss(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=gn(a,a));const f=this.hitDetectionContext_;f.canvas.width!==a||f.canvas.height!==a?(f.canvas.width=a,f.canvas.height=a):c||f.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=si(),nc(d,e),Mo(d,t*(this.renderBuffer_+i),d));const g=Lq(i);let y;function m(R,F,O){const $=f.getImageData(0,0,a,a).data;for(let L=0,N=g.length;L<N;L++)if($[g[L]]>0){if(!o||O==="none"||y!=="Image"&&y!=="Text"||o.includes(R)){const B=(g[L]-3)/4,z=i-B%a,H=i-(B/a|0),Z=s(R,F,z*z+H*H);if(Z)return Z}f.clearRect(0,0,a,a);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Ji);let x,b,E,T,C;for(x=v.length-1;x>=0;--x){const R=v[x].toString();for(E=this.executorsByZIndex_[R],b=ha.length-1;b>=0;--b)if(y=ha[b],T=E[y],T!==void 0&&(C=T.executeHitDetection(f,u,r,m,d),C))return C}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],o=t[3],a=[r,i,r,o,s,o,s,i];return Lo(a,0,8,2,e,a),a}isEmpty(){return Fo(this.executorsByZIndex_)}execute(e,t,r,i,s,o,a){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(a?HB:Ji),o=o||ha;const c=ha.length;for(let f=0,d=u.length;f<d;++f){const g=u[f].toString(),y=this.executorsByZIndex_[g];for(let m=0,v=o.length;m<v;++m){const x=o[m],b=y[x];if(b!==void 0){const E=a===null?void 0:b.getZIndexContext(),T=E?E.getContext():e,C=this.maxExtent_&&x!=="Image"&&x!=="Text";if(C&&(T.save(),this.clip(T,r)),!E||x==="Text"||x==="Image"?b.execute(T,t,r,i,s,a):E.pushFunction(R=>b.execute(R,t,r,i,s,a)),C&&T.restore(),E){E.offset();const R=u[f]*c+ha.indexOf(x);this.deferredZIndexContexts_[R]||(this.deferredZIndexContexts_[R]=[]),this.deferredZIndexContexts_[R].push(E)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ji);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const Nm={};function Lq(n){if(Nm[n]!==void 0)return Nm[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let u=r[a];u||(u=[],r[a]=u),u.push(((n+s)*e+(n+o))*4+3),s>0&&u.push(((n-s)*e+(n+o))*4+3),o>0&&(u.push(((n+s)*e+(n-o))*4+3),s>0&&u.push(((n-s)*e+(n-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return Nm[n]=i,i}class kq extends lR{constructor(e,t,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?rp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Sr()}drawImages_(e,t,r,i){if(!this.image_)return;const s=Lo(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,u=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=u*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const g=s[f]-this.imageAnchorX_,y=s[f+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=g+this.imageAnchorX_,v=y+this.imageAnchorY_;ss(a,m,v,1,1,c,-m,-v),o.save(),o.transform.apply(o,a),o.translate(m,v),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,y,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=u)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Lo(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=i){const u=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(u-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,u,c),this.textFillState_&&o.fillText(this.text_,u,c))}}moveToLineTo_(e,t,r,i,s){const o=this.context_,a=Lo(e,t,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let u=a.length;s&&(u-=2);for(let c=2;c<u;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,t,r,i){for(let s=0,o=r.length;s<o;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=oG(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(wn(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let u=0,c=o.length;u<c;++u)s=this.moveToLineTo_(i,s,o[u],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,u=s.length;a<u;++a){const c=s[a];i=this.drawRings_(r,i,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Uo(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:bc;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Xi(r||br)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),u=t.getWidth(),c=t.getMiterLimit(),f=s||ks;this.strokeState_={lineCap:i!==void 0?i:Jl,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(o||Fs)*this.pixelRatio_,lineJoin:a!==void 0?a:Ql,lineWidth:(u!==void 0?u:Ec)*this.pixelRatio_,miterLimit:c!==void 0?c:xc,strokeStyle:Xi(r||wc)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const y=t.getColor();this.textFillState_={fillStyle:Xi(y||br)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const y=r.getColor(),m=r.getLineCap(),v=r.getLineDash(),x=r.getLineDashOffset(),b=r.getLineJoin(),E=r.getWidth(),T=r.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:Jl,lineDash:v||ks,lineDashOffset:x||Fs,lineJoin:b!==void 0?b:Ql,lineWidth:E!==void 0?E:Ec,miterLimit:T!==void 0?T:xc,strokeStyle:Xi(y||wc)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),u=e.getRotation(),c=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:KT,textAlign:d!==void 0?d:bc,textBaseline:g!==void 0?g:yd},this.text_=f!==void 0?Array.isArray(f)?f.reduce((y,m,v)=>y+=v%2?" ":m,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const zr=.5;function hR(n,e,t,r,i,s,o,a,u){const c=u?n_(i):i,f=n[0]*zr,d=n[1]*zr,g=gn(f,d);g.imageSmoothingEnabled=!1;const y=g.canvas,m=new kq(g,zr,i,null,o,a,u?Hc(YU(),u):null),v=t.length,x=Math.floor((256*256*256-1)/v),b={};for(let T=1;T<=v;++T){const C=t[T-1],R=C.getStyleFunction()||r;if(!R)continue;let F=R(C,s);if(!F)continue;Array.isArray(F)||(F=[F]);const $=(T*x).toString(16).padStart(7,"#00000");for(let L=0,N=F.length;L<N;++L){const B=F[L],z=B.getGeometryFunction()(C);if(!z||!wn(c,z.getExtent()))continue;const H=B.clone(),Z=H.getFill();Z&&Z.setColor($);const G=H.getStroke();G&&(G.setColor($),G.setLineDash(null)),H.setText(void 0);const W=B.getImage();if(W){const re=W.getImageSize();if(!re)continue;const me=gn(re[0],re[1],void 0,{alpha:!1}),ce=me.canvas;me.fillStyle=$,me.fillRect(0,0,ce.width,ce.height),H.setImage(new $a({img:ce,anchor:W.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:W.getOrigin(),opacity:1,size:W.getSize(),scale:W.getScale(),rotation:W.getRotation(),rotateWithView:W.getRotateWithView()}))}const q=H.getZIndex()||0;let V=b[q];V||(V={},b[q]=V,V.Polygon=[],V.Circle=[],V.LineString=[],V.Point=[]);const ne=z.getType();if(ne==="GeometryCollection"){const re=z.getGeometriesArrayRecursive();for(let me=0,ce=re.length;me<ce;++me){const Fe=re[me];V[Fe.getType().replace("Multi","")].push(Fe,H)}}else V[ne.replace("Multi","")].push(z,H)}}const E=Object.keys(b).map(Number).sort(Ji);for(let T=0,C=E.length;T<C;++T){const R=b[E[T]];for(const F in R){const O=R[F];for(let $=0,L=O.length;$<L;$+=2){m.setStyle(O[$+1]);for(let N=0,B=e.length;N<B;++N)m.setTransform(e[N]),m.drawGeometry(O[$])}}}return g.getImageData(0,0,y.width,y.height)}function fR(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*zr),s=Math.floor(Math.round(n[1])*zr),o=(pn(i,0,t.width-1)+pn(s,0,t.height-1)*t.width)*4,a=t.data[o],u=t.data[o+1],f=t.data[o+2]+256*(u+256*a),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}const Fq=.5,dR={Point:qq,LineString:Bq,Polygon:jq,MultiPoint:Wq,MultiLineString:Uq,MultiPolygon:Gq,GeometryCollection:$q,Circle:Nq};function Dq(n,e){return parseInt(Xe(n),10)-parseInt(Xe(e),10)}function G0(n,e){const t=pR(n,e);return t*t}function pR(n,e){return Fq*n/e}function Nq(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(s||o){const u=n.getBuilder(t.getZIndex(),"Circle");u.setFillStrokeStyle(s,o),u.drawCircle(e,r,i)}const a=t.getText();if(a&&a.getText()){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,r)}}function bd(n,e,t,r,i,s,o,a){const u=[],c=t.getImage();if(c){let g=!0;const y=c.getImageState();y==Se.LOADED||y==Se.ERROR?g=!1:y==Se.IDLE&&c.load(),g&&u.push(c.ready())}const f=t.getFill();f&&f.loading()&&u.push(f.ready());const d=u.length>0;return d&&Promise.all(u).then(()=>i(null)),zq(n,e,t,r,s,o,a),d}function zq(n,e,t,r,i,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const u=a.simplifyTransformed(r,i);if(t.getRenderer())gR(n,u,t,e,o);else{const f=dR[u.getType()];f(n,u,t,e,o,s)}}function gR(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,u=o.length;a<u;++a)gR(n,o[a],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function $q(n,e,t,r,i,s){const o=e.getGeometriesArray();let a,u;for(a=0,u=o.length;a<u;++a){const c=dR[o[a].getType()];c(n,o[a],t,r,i,s)}}function Bq(n,e,t,r,i){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function Uq(n,e,t,r,i){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function Gq(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(o||s){const u=n.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,o),u.drawMultiPolygon(e,r,i)}const a=t.getText();if(a&&a.getText()){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,r,i)}}function qq(n,e,t,r,i,s){const o=t.getImage(),a=t.getText(),u=a&&a.getText(),c=s&&o&&u?{}:void 0;if(o){if(o.getImageState()!=Se.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(o,c),f.drawPoint(e,r,i)}if(u){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(a,c),f.drawText(e,r,i)}}function Wq(n,e,t,r,i,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,u=t.getText(),c=u&&u.getText(),f=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Se.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,f),d.drawMultiPoint(e,r,i)}if(c){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(u,f),d.drawText(e,r,i)}}function jq(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(s||o){const u=n.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,o),u.drawPolygon(e,r,i)}const a=t.getText();if(a&&a.getText()){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,r,i)}}const Hq=5;class Vq extends Wc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Hq}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ke()}getData(e){return null}prepareFrame(e){return Ke()}renderFrame(e,t){return Ke()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Se.LOADED||t.getState()===Se.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Se.LOADED&&t!=Se.ERROR&&e.addEventListener(Ve.CHANGE,this.boundHandleImageChange_),t==Se.IDLE&&(e.load(),t=e.getState()),t==Se.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const wb=[];let bl=null;function Xq(){bl=gn(1,1,void 0,{willReadFrequently:!0})}class M_ extends Vq{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Sr(),this.pixelTransform=Sr(),this.inversePixelTransform=Sr(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){bl||Xq(),bl.clearRect(0,0,1,1);let i;try{bl.drawImage(e,t,r,1,1,0,0,1,1),i=bl.getImageData(0,0,1,1).data}catch{return bl=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Uo(Zl(e.style.backgroundColor),Zl(r)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&nG(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=gn();const u=o.canvas;s.appendChild(u),a=u.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=qs(r),s=op(r),o=sp(r),a=ip(r);kn(t.coordinateToPixelTransform,i),kn(t.coordinateToPixelTransform,s),kn(t.coordinateToPixelTransform,o),kn(t.coordinateToPixelTransform,a);const u=this.inversePixelTransform;kn(u,i),kn(u,s),kn(u,o),kn(u,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Lt(r)/i*o),u=Math.round(In(r)/i*o);ss(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-u/2),xT(this.inversePixelTransform,this.pixelTransform);const c=tG(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=a||f.height!=u?(f.width=a,f.height=u):this.context.clearRect(0,0,a,u),c!==f.style.transform&&(f.style.transform=c)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new iR(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(ti.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(ti.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new P_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(ti.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(ti.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,o,a){const u=s/2,c=o/2,f=i/t,d=-f,g=-e[0]+a,y=-e[1];return ss(this.tempTransform,u,c,f,d,-r,g,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Yq extends M_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=si(),this.wrappedRenderedExtent_=si(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,o=s.center,a=s.resolution,u=s.projection,c=s.rotation,f=u.getExtent(),d=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),y=t.pixelRatio,m=t.viewHints,v=!(m[an.ANIMATING]||m[an.INTERACTING]),x=this.context,b=Math.round(Lt(i)/a*y),E=Math.round(In(i)/a*y),T=d.getWrapX()&&u.canWrapX(),C=T?Lt(f):null,R=T?Math.ceil((i[2]-f[2])/C)+1:1;let F=T?Math.floor((i[0]-f[0])/C):0;do{let O=this.getRenderTransform(o,a,0,y,b,E,F*C);t.declutter&&(O=O.slice(0)),e.execute(x,[x.canvas.width,x.canvas.height],O,c,v,r===void 0?ha:r?wd:Oq,r?g&&t.declutter[g]:void 0)}while(++F<R)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=gn(this.context.canvas.width,this.context.canvas.height,wb))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Yc(this.context),wb.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(ti.PRERENDER)||this.getLayer().hasListener(ti.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const u=Vi(r.extent);a=wn(u,e.extent),this.clipped_=a&&!Os(u,e.extent),this.clipped_&&this.clipUnrotated(s,e,u)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,u=this.wrappedRenderedExtent_,c=this.getLayer(),f=[],d=r[0]*zr,g=r[1]*zr;f.push(this.getRenderTransform(i,s,o,zr,d,g,0).slice());const y=c.getSource(),m=a.getExtent();if(y.getWrapX()&&a.canWrapX()&&!Os(m,u)){let v=u[0];const x=Lt(m);let b=0,E;for(;v<m[0];)--b,E=x*b,f.push(this.getRenderTransform(i,s,o,zr,d,g,E).slice()),v+=x;for(b=0,v=u[2];v>m[2];)++b,E=x*b,f.push(this.getRenderTransform(i,s,o,zr,d,g,E).slice()),v-=x}this.hitDetectionImageData_=hR(r,f,this.renderedFeatures_,c.getStyleFunction(),u,s,o,G0(s,this.renderedPixelRatio_),null)}t(fR(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var g,y;if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,u=this.getLayer(),c={},f=function(m,v,x){const b=Xe(m),E=c[b];if(E){if(E!==!0&&x<E.distanceSq){if(x===0)return c[b]=!0,s.splice(s.lastIndexOf(E),1),i(m,u,v);E.geometry=v,E.distanceSq=x}}else{if(x===0)return c[b]=!0,i(m,u,v);s.push(c[b]={feature:m,layer:u,geometry:v,distanceSq:x,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,f,d?(y=(g=t.declutter)==null?void 0:g[d])==null?void 0:y.all().map(m=>m.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[an.ANIMATING],s=e.viewHints[an.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,c=e.viewState,f=c.projection,d=c.resolution,g=e.pixelRatio,y=t.getRevision(),m=t.getRenderBuffer();let v=t.getRenderOrder();v===void 0&&(v=Dq);const x=c.center.slice(),b=Mo(u,m*d),E=b.slice(),T=[b.slice()],C=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Os(C,e.extent)){const Z=Lt(C),G=Math.max(Lt(b)/2,Z);b[0]=C[0]-G,b[2]=C[2]+G,Ky(x,f);const W=uT(T[0],f);W[0]<C[0]&&W[2]<C[2]?T.push([W[0]+Z,W[1],W[2]+Z,W[3]]):W[0]>C[0]&&W[2]>C[2]&&T.push([W[0]-Z,W[1],W[2]-Z,W[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==y&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!e.declutter&&Os(this.wrappedRenderedExtent_,b))return Uo(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const R=new uR(pR(d,g),b,d,g);let F;for(let Z=0,G=T.length;Z<G;++Z)r.loadFeatures(T[Z],d,f);const O=G0(d,g);let $=!0;const L=(Z,G)=>{let W;const q=Z.getStyleFunction()||t.getStyleFunction();if(q&&(W=q(Z,d)),W){const V=this.renderFeature(Z,O,W,R,F,this.getLayer().getDeclutter(),G);$=$&&!V}},N=n_(b),B=r.getFeaturesInExtent(N);v&&B.sort(v);for(let Z=0,G=B.length;Z<G;++Z)L(B[Z],Z);this.renderedFeatures_=B,this.ready=$;const z=R.finish(),H=new cR(b,d,g,r.getOverlaps(),z,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=y,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=E,this.wrappedRenderedExtent_=b,this.renderedCenter_=x,this.renderedProjection_=f,this.renderedPixelRatio_=g,this.replayGroup_=H,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,o,a){if(!r)return!1;let u=!1;if(Array.isArray(r))for(let c=0,f=r.length;c<f;++c)u=bd(i,e,r[c],t,this.boundHandleStyleImageChange_,s,o,a)||u;else u=bd(i,e,r,t,this.boundHandleStyleImageChange_,s,o,a);return u}}class Qc extends I_{constructor(e){super(e)}createRenderer(){return new Yq(this)}}const Kq={SELECT:"select"};class Zq extends ai{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}}const Rf={};class O_ extends lu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:NG,this.addCondition_=e.addCondition?e.addCondition:eb,this.removeCondition_=e.removeCondition?e.removeCondition:eb,this.toggleCondition_=e.toggleCondition?e.toggleCondition:BT,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Fa,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:Jq(),this.features_=e.features||new Ri;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const r=e.layers;t=function(i){return r.includes(i)}}else t=Fa;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Xe(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Xe(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Vn.ADD,this.boundAddFeature_),this.features_.addEventListener(Vn.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Vn.ADD,this.boundAddFeature_),this.features_.removeEventListener(Vn.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const r=this.getMap().getAllLayers().find(function(i){if(i instanceof Qc&&i.getSource()&&i.getSource().hasFeature(t))return i});r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Xe(e);t in Rf||(Rf[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const s=t[i];if(s!==this&&s instanceof O_&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=Xe(e);e.setStyle(Rf[r]),delete Rf[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Xe(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!t&&!r&&!i,o=e.map,a=this.getFeatures(),u=[],c=[];if(s){su(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(f,d)=>{if(!(!(f instanceof Bs)||!this.filter_(f,d)))return this.addFeatureLayerAssociation_(f,d),c.push(f),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=a.getLength()-1;f>=0;--f){const d=a.item(f),g=c.indexOf(d);g>-1?c.splice(g,1):(a.remove(d),u.push(d))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(e.pixel,(f,d)=>{if(!(!(f instanceof Bs)||!this.filter_(f,d)))return(t||i)&&!a.getArray().includes(f)?(this.addFeatureLayerAssociation_(f,d),c.push(f)):(r||i)&&a.getArray().includes(f)&&(u.push(f),this.removeFeatureLayerAssociation_(f)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=u.length-1;f>=0;--f)a.remove(u[f]);a.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new Zq(Kq.SELECT,c,u,e)),!0}}function Jq(){const n=J8();return ri(n.Polygon,n.LineString),ri(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}const Qq=({map:n,layer:e,onSelect:t})=>{const r=new O_({layers:[e],condition:DG,style:i=>{const s=i.get("originalStyle");return Array.isArray(s)?s:s?[s]:[]}});return n.addInteraction(r),t&&r.on("select",i=>{const s=i.selected;t(s)}),r},eW=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="36" viewBox="0 0 24 36">
  <path d="M12 0C7 0 3 4 3 9c0 7.5 9 27 9 27s9-19.5 9-27c0-5-4-9-9-9z" fill="#FF6600"/>
  <circle cx="12" cy="9" r="4" fill="#fff"/>
</svg>
`,tW=`data:image/svg+xml;base64,${btoa(eW)}`;new Rn({fill:new dr({color:"rgba(0, 0, 255, 0.1)"}),stroke:new pr({color:"#3399CC",width:1}),image:new Go({radius:5,fill:new dr({color:"#3399CC"}),stroke:new pr({color:"#000",width:1})}),text:void 0});const nW=n=>{var i;const e=n.geohash.includes("http")?n.geohash.split("http://geohash.org/")[1]:n.geohash,{latitude:t,longitude:r}=oC.decode(e);return{type:"Point",coordinates:[r,t],label:(i=n.meta)==null?void 0:i.label,marker:(n==null?void 0:n.style)??tW,meta:n.meta}},mR=(n,e)=>n.find(t=>t.get("id")===e);var rW=8,iW={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sW={"*":{type:"source"}},oW=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],aW={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},lW={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},uW={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},cW={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},hW={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},fW={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},dW={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},pW=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],gW={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mW={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yW={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_W={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vW={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xW={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wW={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bW={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},EW={type:"array",value:"*"},CW={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},SW={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},TW={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},RW={type:"array",value:"*",minimum:1},IW={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},AW={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},PW={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},MW={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},OW=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],LW={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},kW={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},FW={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},DW={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},NW={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},zW={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$W={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},BW={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},UW={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},GW={"*":{type:"string"}},qW={$version:rW,$root:iW,sources:sW,source:oW,source_vector:aW,source_raster:lW,source_raster_dem:uW,source_geojson:cW,source_video:hW,source_image:fW,layer:dW,layout:pW,layout_background:gW,layout_fill:mW,layout_circle:yW,layout_heatmap:_W,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:vW,layout_symbol:xW,layout_raster:wW,layout_hillshade:bW,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:EW,filter_operator:CW,geometry_type:SW,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:TW,expression:RW,light:IW,sky:AW,terrain:PW,projection:MW,paint:OW,paint_fill:LW,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:kW,paint_circle:FW,paint_heatmap:DW,paint_symbol:NW,paint_raster:zW,paint_hillshade:$W,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:BW,transition:UW,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:GW};const WW=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function jW(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return WW.forEach(r=>{r in e&&(t[r]=e[r])}),t}function yR(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=jW(n[t],e[n[t].ref]));return n}class Hi extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class L_{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new L_(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const wp={kind:"null"},ye={kind:"number"},yt={kind:"string"},at={kind:"boolean"},Qi={kind:"color"},bp={kind:"projectionDefinition"},Ia={kind:"object"},st={kind:"value"},HW={kind:"error"},Ep={kind:"collator"},Cp={kind:"formatted"},Sp={kind:"padding"},Tc={kind:"colorArray"},Tp={kind:"numberArray"},eh={kind:"resolvedImage"},Rp={kind:"variableAnchorOffsetCollection"};function $r(n,e){return{kind:"array",itemType:n,N:e}}function ln(n){if(n.kind==="array"){const e=ln(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const VW=[wp,ye,yt,at,Qi,bp,Cp,Ia,$r(st),Sp,Tp,Tc,eh,Rp];function Rc(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Rc(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of VW)if(!Rc(t,e))return null}}return`Expected ${ln(n)} but found ${ln(e)} instead.`}function k_(n,e){return e.some(t=>t.kind===n.kind)}function Aa(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function lo(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const _R=.96422,vR=1,xR=.82521,wR=4/29,Ll=6/29,bR=3*Ll*Ll,XW=Ll*Ll*Ll,YW=Math.PI/180,KW=180/Math.PI;function ER(n){return n=n%360,n<0&&(n+=360),n}function CR([n,e,t,r]){n=zm(n),e=zm(e),t=zm(t);let i,s;const o=$m((.2225045*n+.7168786*e+.0606169*t)/vR);n===e&&e===t?i=s=o:(i=$m((.4360747*n+.3850649*e+.1430804*t)/_R),s=$m((.0139322*n+.0971045*e+.7141733*t)/xR));const a=116*o-16;return[a<0?0:a,500*(i-o),200*(o-s),r]}function zm(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function $m(n){return n>XW?Math.pow(n,1/3):n/bR+wR}function SR([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,o=isNaN(t)?i:i-t/200;return i=vR*Um(i),s=_R*Um(s),o=xR*Um(o),[Bm(3.1338561*s-1.6168667*i-.4906146*o),Bm(-.9787684*s+1.9161415*i+.033454*o),Bm(.0719453*s-.2289914*i+1.4052427*o),r]}function Bm(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function Um(n){return n>Ll?n*n*n:bR*(n-wR)}function ZW(n){const[e,t,r,i]=CR(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?ER(Math.atan2(r,t)*KW):NaN,s,e,i]}function JW([n,e,t,r]){return n=isNaN(n)?0:n*YW,SR([t,Math.cos(n)*e,Math.sin(n)*e,r])}function QW([n,e,t,r]){n=ER(n),e/=100,t/=100;function i(s){const o=(s+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(o-3,9-o,1))}return[i(0),i(8),i(4),r]}const ej=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function TR(n,e){return ej(n,e)?n[e]:void 0}function tj(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=TR(nj,n);if(e){const[i,s,o]=e;return[i/255,s/255,o/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let o=1;return[If(n.slice(o,o+=s)),If(n.slice(o,o+=s)),If(n.slice(o,o+=s)),If(n.slice(o,o+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[o,a,u,c,f,d,g,y,m,v,x,b]=s,E=[c||" ",g||" ",v].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const T=[u,d,m].join(""),C=T==="%%%"?100:T===""?255:0;if(C){const R=[El(+a/C,0,1),El(+f/C,0,1),El(+y/C,0,1),x?bb(+x,b):1];if(Eb(R))return R}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,o,a,u,c,f,d,g]=r,y=[o||" ",u||" ",f].join("");if(y==="  "||y==="  /"||y===",,"||y===",,,"){const m=[+s,El(+a,0,100),El(+c,0,100),d?bb(+d,g):1];if(Eb(m))return QW(m)}}}function If(n){return parseInt(n.padEnd(2,n),16)/255}function bb(n,e){return El(e?n/100:n,0,1)}function El(n,e,t){return Math.min(Math.max(e,n),t)}function Eb(n){return!n.some(Number.isNaN)}const nj={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Pa(n,e,t){return n+t*(e-n)}function Ic(n,e,t){return n.map((r,i)=>Pa(r,e[i],t))}class Wt{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof Wt)return e;if(typeof e!="string")return;const t=tj(e);if(t)return new Wt(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",ZW(this.rgb))}get lab(){return this.overwriteGetter("lab",CR(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,o,a,u]=Ic(e.rgb,t.rgb,r);return new Wt(s,o,a,u,!1)}case"hcl":{const[s,o,a,u]=e.hcl,[c,f,d,g]=t.hcl;let y,m;if(!isNaN(s)&&!isNaN(c)){let T=c-s;c>s&&T>180?T-=360:c<s&&s-c>180&&(T+=360),y=s+r*T}else isNaN(s)?isNaN(c)?y=NaN:(y=c,(a===1||a===0)&&(m=f)):(y=s,(d===1||d===0)&&(m=o));const[v,x,b,E]=JW([y,m??Pa(o,f,r),Pa(a,d,r),Pa(u,g,r)]);return new Wt(v,x,b,E,!1)}case"lab":{const[s,o,a,u]=SR(Ic(e.lab,t.lab,r));return new Wt(s,o,a,u,!1)}}}}Wt.black=new Wt(0,0,0,1);Wt.white=new Wt(1,1,1,1);Wt.transparent=new Wt(0,0,0,0);Wt.red=new Wt(1,0,0,1);class F_{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const rj=["bottom","center","top"];class q0{constructor(e,t,r,i,s,o){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=o}}class Ds{constructor(e){this.sections=e}static fromString(e){return new Ds([new q0(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ds?e:Ds.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Ii{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ii)return e;if(typeof e=="number")return new Ii([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Ii(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Ii(Ic(e.values,t.values,r))}}class Ai{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ai)return e;if(typeof e=="number")return new Ai([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Ai(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Ai(Ic(e.values,t.values,r))}}class Br{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Br)return e;if(typeof e=="string"){const r=Wt.parse(e);return r?new Br([r]):void 0}if(!Array.isArray(e))return;const t=[];for(const r of e){if(typeof r!="string")return;const i=Wt.parse(r);if(!i)return;t.push(i)}return new Br(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r,i="rgb"){const s=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let o=0;o<e.values.length;o++)s.push(Wt.interpolate(e.values[o],t.values[o],r,i));return new Br(s)}}class dn extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const ij=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class es{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof es)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!ij.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new es(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new dn(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let a=0;a<i.length;a+=2){if(i[a]!==s[a])throw new dn(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${i[a]}, to[${a}]: ${s[a]}`);o.push(i[a]);const[u,c]=i[a+1],[f,d]=s[a+1];o.push([Pa(u,f,r),Pa(c,d,r)])}return new es(o)}}class qo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new qo({name:e,available:!1}):null}}class Ci{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Ci(e,t,r)}static parse(e){if(e instanceof Ci)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Ci(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Ci(e.from,e.to,e.transition);if(typeof e=="string")return new Ci(e,e,1)}}function RR(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ac(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Ci||n instanceof Wt||n instanceof F_||n instanceof Ds||n instanceof Ii||n instanceof Ai||n instanceof Br||n instanceof es||n instanceof qo)return!0;if(Array.isArray(n)){for(const e of n)if(!Ac(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Ac(n[e]))return!1;return!0}else return!1}function Fn(n){if(n===null)return wp;if(typeof n=="string")return yt;if(typeof n=="boolean")return at;if(typeof n=="number")return ye;if(n instanceof Wt)return Qi;if(n instanceof Ci)return bp;if(n instanceof F_)return Ep;if(n instanceof Ds)return Cp;if(n instanceof Ii)return Sp;if(n instanceof Ai)return Tp;if(n instanceof Br)return Tc;if(n instanceof es)return Rp;if(n instanceof qo)return eh;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=Fn(r);if(!t)t=i;else{if(t===i)continue;t=st;break}}return $r(t||st,e)}else return Ia}function ic(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Wt||n instanceof Ci||n instanceof Ds||n instanceof Ii||n instanceof Ai||n instanceof Br||n instanceof es||n instanceof qo?n.toString():JSON.stringify(n)}class eu{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ac(e[1]))return t.error("invalid value");const r=e[1];let i=Fn(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new eu(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Af={string:yt,number:ye,boolean:at,object:Ia};class Si{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let a;if(e.length>2){const c=e[1];if(typeof c!="string"||!(c in Af)||c==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Af[c],r++}else a=st;let u;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);u=e[2],r++}i=$r(a,u)}else{if(!Af[s])throw new Error(`Types doesn't contain name = ${s}`);i=Af[s]}const o=[];for(;r<e.length;r++){const a=t.parse(e[r],r,st);if(!a)return null;o.push(a)}return new Si(i,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(Rc(this.type,Fn(r))){if(t===this.args.length-1)throw new dn(`Expected value to be of type ${ln(this.type)}, but found ${ln(Fn(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Cb={"to-boolean":at,"to-color":Qi,"to-number":ye,"to-string":yt};class Ro{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!Cb[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=Cb[r],s=[];for(let o=1;o<e.length;o++){const a=t.parse(e[o],o,st);if(!a)return null;s.push(a)}return new Ro(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Wt)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=RR(t[0],t[1],t[2],t[3]),!r))return new Wt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new dn(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Ii.parse(t);if(i)return i}throw new dn(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Ai.parse(t);if(i)return i}throw new dn(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Br.parse(t);if(i)return i}throw new dn(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=es.parse(t);if(i)return i}throw new dn(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new dn(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ds.fromString(ic(this.args[0].evaluate(e)));case"resolvedImage":return qo.fromString(ic(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return ic(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const sj=["Unknown","Point","LineString","Polygon"];class IR{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sj[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Wt.parse(e),this._parseColorCache.set(e,t)),t}}class Ip{constructor(e,t,r=[],i,s=new L_,o=[]){this.registry=e,this.path=r,this.key=r.map(a=>`[${a}]`).join(""),this.scope=s,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,o){return o==="assert"?new Si(s,[i]):o==="coerce"?new Ro(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,u=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&u.kind==="value")o=r(o,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(u.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(u.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(u.kind)||a.kind==="colorArray"&&["value","string","array"].includes(u.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(u.kind))o=r(o,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,u))return null}if(!(o instanceof eu)&&o.type.kind!=="resolvedImage"&&this._isConstant(o)){const a=new IR;try{o=new eu(o.type,o.evaluate(a))}catch(u){return this.error(u.message),null}}return o}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new Ip(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Hi(r,e))}checkSubtype(e,t){const r=Rc(e,t);return r&&this.error(r),r}}class Ap{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const o=e[s];if(typeof o!="string")return t.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=t.parse(e[s+1],s+1);if(!a)return null;r.push([o,a])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new Ap(r,i):null}outputDefined(){return this.result.outputDefined()}}class Pp{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Pp(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class D_{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ye),i=t.parse(e[2],2,$r(t.expectedType||st));if(!r||!i)return null;const s=i.type;return new D_(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new dn(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new dn(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new dn(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class N_{constructor(e,t){this.type=at,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,st),i=t.parse(e[2],2,st);return!r||!i?null:k_(r.type,[at,yt,ye,wp,st])?new N_(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ln(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Aa(t,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${ln(Fn(t))} instead.`);if(!Aa(r,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${ln(Fn(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Ed{constructor(e,t,r){this.type=ye,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,st),i=t.parse(e[2],2,st);if(!r||!i)return null;if(!k_(r.type,[at,yt,ye,wp,st]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ln(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,ye);return s?new Ed(r,i,s):null}else return new Ed(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Aa(t,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${ln(Fn(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Aa(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Aa(r,["array"]))return r.indexOf(t,i);throw new dn(`Expected second argument to be of type array or string, but found ${ln(Fn(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class z_{constructor(e,t,r,i,s,o){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},o=[];for(let c=2;c<e.length-1;c+=2){let f=e[c];const d=e[c+1];Array.isArray(f)||(f=[f]);const g=t.concat(c);if(f.length===0)return g.error("Expected at least one branch label.");for(const m of f){if(typeof m!="number"&&typeof m!="string")return g.error("Branch labels must be numbers or strings.");if(typeof m=="number"&&Math.abs(m)>Number.MAX_SAFE_INTEGER)return g.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof m=="number"&&Math.floor(m)!==m)return g.error("Numeric branch labels must be integer values.");if(!r)r=Fn(m);else if(g.checkSubtype(r,Fn(m)))return null;if(typeof s[String(m)]<"u")return g.error("Branch labels must be unique.");s[String(m)]=o.length}const y=t.parse(d,c,i);if(!y)return null;i=i||y.type,o.push(y)}const a=t.parse(e[1],1,st);if(!a)return null;const u=t.parse(e[e.length-1],e.length-1,i);return!u||a.type.kind!=="value"&&t.concat(1).checkSubtype(r,a.type)?null:new z_(r,i,a,s,o,u)}evaluate(e){const t=this.input.evaluate(e);return(Fn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class $_{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const a=t.parse(e[o],o,at);if(!a)return null;const u=t.parse(e[o+1],o+1,r);if(!u)return null;i.push([a,u]),r=r||u.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new $_(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Cd{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,st),i=t.parse(e[2],2,ye);if(!r||!i)return null;if(!k_(r.type,[$r(st),yt,st]))return t.error(`Expected first argument to be of type array or string, but found ${ln(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,ye);return s?new Cd(r.type,r,i,s):null}else return new Cd(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Aa(t,["string"]))return[...t].slice(r,i).join("");if(Aa(t,["array"]))return t.slice(r,i);throw new dn(`Expected first argument to be of type array or string, but found ${ln(Fn(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function AR(n,e){const t=n.length-1;let r=0,i=t,s=0,o,a;for(;r<=i;)if(s=Math.floor((r+i)/2),o=n[s],a=n[s+1],o<=e){if(s===t||e<a)return s;r=s+1}else if(o>e)i=s-1;else throw new dn("Input is not a number.");return 0}class Mp{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ye);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let o=1;o<e.length;o+=2){const a=o===1?-1/0:e[o],u=e[o+1],c=o,f=o+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);const d=t.parse(u,f,s);if(!d)return null;s=s||d.type,i.push([a,d])}return new Mp(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const o=AR(t,i);return r[o].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function oj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gm,Sb;function aj(){if(Sb)return Gm;Sb=1,Gm=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-s/o}var a=0,u=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?a=r:u=r,r=(u-a)*.5+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Gm}var lj=aj(),uj=oj(lj);class ts{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=qm(t,e.base,r,i);else if(e.name==="linear")s=qm(t,1,r,i);else if(e.name==="cubic-bezier"){const o=e.controlPoints;s=new uj(o[0],o[1],o[2],o[3]).solve(qm(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...o]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const c=i[1];if(typeof c!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:c}}else if(i[0]==="cubic-bezier"){const c=i.slice(1);if(c.length!==4||c.some(f=>typeof f!="number"||f<0||f>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:c}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,ye),!s)return null;const a=[];let u=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&t.expectedType!=Tc?u=Qi:t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(let c=0;c<o.length;c+=2){const f=o[c],d=o[c+1],g=c+3,y=c+4;if(typeof f!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(a.length&&a[a.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',g);const m=t.parse(d,y,u);if(!m)return null;u=u||m.type,a.push([f,m])}return!lo(u,ye)&&!lo(u,bp)&&!lo(u,Qi)&&!lo(u,Sp)&&!lo(u,Tp)&&!lo(u,Tc)&&!lo(u,Rp)&&!lo(u,$r(ye))?t.error(`Type ${ln(u)} is not interpolatable.`):new ts(u,r,i,s,a)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const o=AR(t,i),a=t[o],u=t[o+1],c=ts.interpolationFactor(this.interpolation,i,a,u),f=r[o].evaluate(e),d=r[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Pa(f,d,c);case"color":return Wt.interpolate(f,d,c);case"padding":return Ii.interpolate(f,d,c);case"colorArray":return Br.interpolate(f,d,c);case"numberArray":return Ai.interpolate(f,d,c);case"variableAnchorOffsetCollection":return es.interpolate(f,d,c);case"array":return Ic(f,d,c);case"projectionDefinition":return Ci.interpolate(f,d,c)}case"interpolate-hcl":switch(this.type.kind){case"color":return Wt.interpolate(f,d,c,"hcl");case"colorArray":return Br.interpolate(f,d,c,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Wt.interpolate(f,d,c,"lab");case"colorArray":return Br.interpolate(f,d,c,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function qm(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class Pc{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const a of e.slice(1)){const u=t.parse(a,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,s.push(u)}if(!r)throw new Error("No output type");return i&&s.some(a=>Rc(i,a.type))?new Pc(st,s):new Pc(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof qo&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Tb(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function cj(n,e,t){return e===t}function hj(n,e,t){return e!==t}function fj(n,e,t){return e<t}function dj(n,e,t){return e>t}function pj(n,e,t){return e<=t}function gj(n,e,t){return e>=t}function PR(n,e,t,r){return r.compare(e,t)===0}function mj(n,e,t,r){return!PR(n,e,t,r)}function yj(n,e,t,r){return r.compare(e,t)<0}function _j(n,e,t,r){return r.compare(e,t)>0}function vj(n,e,t,r){return r.compare(e,t)<=0}function xj(n,e,t,r){return r.compare(e,t)>=0}function cu(n,e,t){const r=n!=="=="&&n!=="!=";return class MR{constructor(s,o,a){this.type=at,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let u=o.parse(s[1],1,st);if(!u)return null;if(!Tb(a,u.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${ln(u.type)}'.`);let c=o.parse(s[2],2,st);if(!c)return null;if(!Tb(a,c.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${ln(c.type)}'.`);if(u.type.kind!==c.type.kind&&u.type.kind!=="value"&&c.type.kind!=="value")return o.error(`Cannot compare types '${ln(u.type)}' and '${ln(c.type)}'.`);r&&(u.type.kind==="value"&&c.type.kind!=="value"?u=new Si(c.type,[u]):u.type.kind!=="value"&&c.type.kind==="value"&&(c=new Si(u.type,[c])));let f=null;if(s.length===4){if(u.type.kind!=="string"&&c.type.kind!=="string"&&u.type.kind!=="value"&&c.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(f=o.parse(s[3],3,Ep),!f)return null}return new MR(u,c,f)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const u=Fn(o),c=Fn(a);if(u.kind!==c.kind||!(u.kind==="string"||u.kind==="number"))throw new dn(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${u.kind}, ${c.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const u=Fn(o),c=Fn(a);if(u.kind!=="string"||c.kind!=="string")return e(s,o,a)}return this.collator?t(s,o,a,this.collator.evaluate(s)):e(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const wj=cu("==",cj,PR),bj=cu("!=",hj,mj),Ej=cu("<",fj,yj),Cj=cu(">",dj,_j),Sj=cu("<=",pj,vj),Tj=cu(">=",gj,xj);class Op{constructor(e,t,r){this.type=Ep,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,at);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,at);if(!s)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,yt),!o)?null:new Op(i,s,o)}evaluate(e){return new F_(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class B_{constructor(e,t,r,i,s){this.type=yt,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ye);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,yt),!s))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,yt),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,ye),!a))return null;let u=null;return i["max-fraction-digits"]&&(u=t.parse(i["max-fraction-digits"],1,ye),!u)?null:new B_(r,s,o,a,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class U_{constructor(e){this.type=Cp,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let o=1;o<=e.length-1;++o){const a=e[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let u=null;if(a["font-scale"]&&(u=t.parse(a["font-scale"],1,ye),!u))return null;let c=null;if(a["text-font"]&&(c=t.parse(a["text-font"],1,$r(yt)),!c))return null;let f=null;if(a["text-color"]&&(f=t.parse(a["text-color"],1,Qi),!f))return null;let d=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!rj.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(d=t.parse(a["vertical-align"],1,yt),!d)return null}const g=i[i.length-1];g.scale=u,g.font=c,g.textColor=f,g.verticalAlign=d}else{const u=t.parse(e[o],1,st);if(!u)return null;const c=u.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:u,scale:null,font:null,textColor:null,verticalAlign:null})}}return new U_(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return Fn(i)===eh?new q0("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new q0(ic(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Ds(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class G_{constructor(e){this.type=eh,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,yt);return r?new G_(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=qo.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class q_{constructor(e){this.type=ye,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${ln(r.type)} instead.`):new q_(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new dn(`Expected value to be of type string or array, but found ${ln(Fn(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const ns=8192;function Rj(n,e){const t=Ij(n[0]),r=Pj(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*ns),Math.round(r*i*ns)]}function W_(n,e){const t=Math.pow(2,e.z),r=(n[0]/ns+e.x)/t,i=(n[1]/ns+e.y)/t;return[Aj(r),Mj(i)]}function Ij(n){return(180+n)/360}function Aj(n){return n*360-180}function Pj(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Mj(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function th(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Mc(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Oj(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function Lj(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],o=n[1]-t[1];return r*o-s*i===0&&r*s<=0&&i*o<=0}function Lp(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return Nj(s,i)===0?!1:!!(Rb(n,e,t,r)&&Rb(t,r,n,e))}function kj(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Lp(n,e,r[i],r[i+1]))return!0;return!1}function hu(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(Lj(n,i[s],i[s+1]))return t;Oj(n,i[s],i[s+1])&&(r=!r)}return r}function Fj(n,e){for(const t of e)if(hu(n,t))return!0;return!1}function OR(n,e){for(const t of n)if(!hu(t,e))return!1;for(let t=0;t<n.length-1;++t)if(kj(n[t],n[t+1],e))return!1;return!0}function Dj(n,e){for(const t of e)if(OR(n,t))return!0;return!1}function Nj(n,e){return n[0]*e[1]-n[1]*e[0]}function Rb(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1],u=r[0]-t[0],c=r[1]-t[1],f=i*c-u*s,d=o*c-u*a;return f>0&&d<0||f<0&&d>0}function j_(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let o=0;o<n[i].length;o++){const a=Rj(n[i][o],t);th(e,a),s.push(a)}r.push(s)}return r}function LR(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=j_(n[i],e,t);r.push(s)}return r}function kR(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}th(e,n)}function zj(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Ib(n,e,t,r){const i=Math.pow(2,r.z)*ns,s=[r.x*ns,r.y*ns],o=[];for(const a of n)for(const u of a){const c=[u.x+s[0],u.y+s[1]];kR(c,e,t,i),o.push(c)}return o}function Ab(n,e,t,r){const i=Math.pow(2,r.z)*ns,s=[r.x*ns,r.y*ns],o=[];for(const a of n){const u=[];for(const c of a){const f=[c.x+s[0],c.y+s[1]];th(e,f),u.push(f)}o.push(u)}if(e[2]-e[0]<=i/2){zj(e);for(const a of o)for(const u of a)kR(u,e,t,i)}return o}function $j(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=j_(e.coordinates,r,i),o=Ib(n.geometry(),t,r,i);if(!Mc(t,r))return!1;for(const a of o)if(!hu(a,s))return!1}if(e.type==="MultiPolygon"){const s=LR(e.coordinates,r,i),o=Ib(n.geometry(),t,r,i);if(!Mc(t,r))return!1;for(const a of o)if(!Fj(a,s))return!1}return!0}function Bj(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=j_(e.coordinates,r,i),o=Ab(n.geometry(),t,r,i);if(!Mc(t,r))return!1;for(const a of o)if(!OR(a,s))return!1}if(e.type==="MultiPolygon"){const s=LR(e.coordinates,r,i),o=Ab(n.geometry(),t,r,i);if(!Mc(t,r))return!1;for(const a of o)if(!Dj(a,s))return!1}return!0}class Ma{constructor(e,t){this.type=at,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ac(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:o,coordinates:a}=s.geometry;o==="Polygon"&&i.push(a),o==="MultiPolygon"&&i.push(...a)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Ma(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Ma(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Ma(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return $j(e,this.geometries);if(e.geometryType()==="LineString")return Bj(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class FR{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(r(i,o)>=0)break;t[e]=o,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let o=(e<<1)+1;const a=o+1;if(a<this.length&&r(t[a],t[o])<0&&(o=a),r(t[o],s)>=0)break;t[e]=t[o],e=o}t[e]=s}}function Uj(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const o of n){const a=Gj(o);a!==0&&(o.area=Math.abs(a),s===void 0&&(s=a<0),s===a<0?(i&&r.push(i),i=[o]):i.push(o))}return i&&r.push(i),r}function Gj(n){let e=0;for(let t=0,r=n.length,i=r-1,s,o;t<r;i=t++)s=n[t],o=n[i],e+=(o.x-s.x)*(s.y+o.y);return e}const qj=6378.137,Pb=1/298.257223563,Mb=Pb*(2-Pb),Ob=Math.PI/180;class H_{constructor(e){const t=Ob*qj*1e3,r=Math.cos(e*Ob),i=1/(1-Mb*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-Mb)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,o,a;for(let u=0;u<e.length-1;u++){let c=e[u][0],f=e[u][1],d=this.wrap(e[u+1][0]-c)*this.kx,g=(e[u+1][1]-f)*this.ky,y=0;(d!==0||g!==0)&&(y=(this.wrap(t[0]-c)*this.kx*d+(t[1]-f)*this.ky*g)/(d*d+g*g),y>1?(c=e[u+1][0],f=e[u+1][1]):y>0&&(c+=d/this.kx*y,f+=g/this.ky*y)),d=this.wrap(t[0]-c)*this.kx,g=(t[1]-f)*this.ky;const m=d*d+g*g;m<r&&(r=m,i=c,s=f,o=u,a=y)}return{point:[i,s],index:o,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const W0=100,j0=50;function DR(n,e){return e[0]-n[0]}function Sd(n){return n[1]-n[0]+1}function Us(n,e){return n[1]>=n[0]&&n[1]<e}function H0(n,e){if(n[0]>n[1])return[null,null];const t=Sd(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function V0(n,e){if(!Us(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)th(t,n[r]);return t}function X0(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)th(e,r);return e}function Lb(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function V_(n,e,t){if(!Lb(n)||!Lb(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function _a(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function X_(n,e,t,r,i){const s=Math.min(_a(n,[t,r],i),_a(e,[t,r],i)),o=Math.min(_a(t,[n,e],i),_a(r,[n,e],i));return Math.min(s,o)}function Wj(n,e,t,r,i){if(!(Us(e,n.length)&&Us(r,t.length)))return 1/0;let o=1/0;for(let a=e[0];a<e[1];++a){const u=n[a],c=n[a+1];for(let f=r[0];f<r[1];++f){const d=t[f],g=t[f+1];if(Lp(u,c,d,g))return 0;o=Math.min(o,X_(u,c,d,g,i))}}return o}function jj(n,e,t,r,i){if(!(Us(e,n.length)&&Us(r,t.length)))return NaN;let o=1/0;for(let a=e[0];a<=e[1];++a)for(let u=r[0];u<=r[1];++u)if(o=Math.min(o,i.distance(n[a],t[u])),o===0)return o;return o}function Hj(n,e,t){if(hu(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],o=i[i.length-1];if(s!==o&&(r=Math.min(r,_a(n,[o,s],t)),r===0))return r;const a=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,a.point)),r===0)return r}return r}function Vj(n,e,t,r){if(!Us(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(hu(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const o=n[s],a=n[s+1];for(const u of t)for(let c=0,f=u.length,d=f-1;c<f;d=c++){const g=u[d],y=u[c];if(Lp(o,a,g,y))return 0;i=Math.min(i,X_(o,a,g,y,r))}}return i}function kb(n,e){for(const t of n)for(const r of t)if(hu(r,e,!0))return!0;return!1}function Xj(n,e,t,r=1/0){const i=X0(n),s=X0(e);if(r!==1/0&&V_(i,s,t)>=r)return r;if(Mc(i,s)){if(kb(n,e))return 0}else if(kb(e,n))return 0;let o=1/0;for(const a of n)for(let u=0,c=a.length,f=c-1;u<c;f=u++){const d=a[f],g=a[u];for(const y of e)for(let m=0,v=y.length,x=v-1;m<v;x=m++){const b=y[x],E=y[m];if(Lp(d,g,b,E))return 0;o=Math.min(o,X_(d,g,b,E,t))}}return o}function Fb(n,e,t,r,i,s){if(!s)return;const o=V_(V0(r,s),i,t);o<e&&n.push([o,s,[0,0]])}function Pf(n,e,t,r,i,s,o){if(!s||!o)return;const a=V_(V0(r,s),V0(i,o),t);a<e&&n.push([a,s,o])}function Td(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const o=new FR([[0,[0,n.length-1],[0,0]]],DR),a=X0(t);for(;o.length>0;){const u=o.pop();if(u[0]>=s)continue;const c=u[1],f=e?j0:W0;if(Sd(c)<=f){if(!Us(c,n.length))return NaN;if(e){const d=Vj(n,c,t,r);if(isNaN(d)||d===0)return d;s=Math.min(s,d)}else for(let d=c[0];d<=c[1];++d){const g=Hj(n[d],t,r);if(s=Math.min(s,g),s===0)return 0}}else{const d=H0(c,e);Fb(o,s,r,n,a,d[0]),Fb(o,s,r,n,a,d[1])}}return s}function Rd(n,e,t,r,i,s=1/0){let o=Math.min(s,i.distance(n[0],t[0]));if(o===0)return o;const a=new FR([[0,[0,n.length-1],[0,t.length-1]]],DR);for(;a.length>0;){const u=a.pop();if(u[0]>=o)continue;const c=u[1],f=u[2],d=e?j0:W0,g=r?j0:W0;if(Sd(c)<=d&&Sd(f)<=g){if(!Us(c,n.length)&&Us(f,t.length))return NaN;let y;if(e&&r)y=Wj(n,c,t,f,i),o=Math.min(o,y);else if(e&&!r){const m=n.slice(c[0],c[1]+1);for(let v=f[0];v<=f[1];++v)if(y=_a(t[v],m,i),o=Math.min(o,y),o===0)return o}else if(!e&&r){const m=t.slice(f[0],f[1]+1);for(let v=c[0];v<=c[1];++v)if(y=_a(n[v],m,i),o=Math.min(o,y),o===0)return o}else y=jj(n,c,t,f,i),o=Math.min(o,y)}else{const y=H0(c,e),m=H0(f,r);Pf(a,o,i,n,t,y[0],m[0]),Pf(a,o,i,n,t,y[0],m[1]),Pf(a,o,i,n,t,y[1],m[0]),Pf(a,o,i,n,t,y[1],m[1])}}return o}function Yj(n,e){const t=n.geometry(),r=t.flat().map(o=>W_([o.x,o.y],n.canonical));if(t.length===0)return NaN;const i=new H_(r[0][1]);let s=1/0;for(const o of e){switch(o.type){case"Point":s=Math.min(s,Rd(r,!1,[o.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Rd(r,!1,o.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Td(r,!1,o.coordinates,i,s));break}if(s===0)return s}return s}function Kj(n,e){const t=n.geometry(),r=t.flat().map(o=>W_([o.x,o.y],n.canonical));if(t.length===0)return NaN;const i=new H_(r[0][1]);let s=1/0;for(const o of e){switch(o.type){case"Point":s=Math.min(s,Rd(r,!0,[o.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Rd(r,!0,o.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Td(r,!0,o.coordinates,i,s));break}if(s===0)return s}return s}function Zj(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=Uj(t).map(o=>o.map(a=>a.map(u=>W_([u.x,u.y],n.canonical)))),i=new H_(r[0][0][0][1]);let s=1/0;for(const o of e)for(const a of r){switch(o.type){case"Point":s=Math.min(s,Td([o.coordinates],!1,a,i,s));break;case"LineString":s=Math.min(s,Td(o.coordinates,!0,a,i,s));break;case"Polygon":s=Math.min(s,Xj(a,o.coordinates,i,s));break}if(s===0)return s}return s}function Wm(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Oa{constructor(e,t){this.type=ye,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ac(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Oa(r,r.features.map(i=>Wm(i.geometry)).flat());if(r.type==="Feature")return new Oa(r,Wm(r.geometry));if("type"in r&&"coordinates"in r)return new Oa(r,Wm(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Yj(e,this.geometries);if(e.geometryType()==="LineString")return Kj(e,this.geometries);if(e.geometryType()==="Polygon")return Zj(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class nh{constructor(e){this.type=st,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?t.error("Global state property must be defined."):typeof r!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new nh(r)}evaluate(e){var t;const r=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!r||Object.keys(r).length===0?null:TR(r,this.key)}eachChild(){}outputDefined(){return!1}}const kp={"==":wj,"!=":bj,">":Cj,"<":Ej,">=":Tj,"<=":Sj,array:Si,at:D_,boolean:Si,case:$_,coalesce:Pc,collator:Op,format:U_,image:G_,in:N_,"index-of":Ed,interpolate:ts,"interpolate-hcl":ts,"interpolate-lab":ts,length:q_,let:Ap,literal:eu,match:z_,number:Si,"number-format":B_,object:Si,slice:Cd,step:Mp,string:Si,"to-boolean":Ro,"to-color":Ro,"to-number":Ro,"to-string":Ro,var:Pp,within:Ma,distance:Oa,"global-state":nh};class Ur{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Ur.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter(([c])=>!Array.isArray(c)||c.length===e.length-1);let u=null;for(const[c,f]of a){u=new Ip(t.registry,Id,t.path,null,t.scope);const d=[];let g=!1;for(let y=1;y<e.length;y++){const m=e[y],v=Array.isArray(c)?c[y-1]:c.type,x=u.parse(m,1+d.length,v);if(!x){g=!0;break}d.push(x)}if(!g){if(Array.isArray(c)&&c.length!==d.length){u.error(`Expected ${c.length} arguments, but found ${d.length} instead.`);continue}for(let y=0;y<d.length;y++){const m=Array.isArray(c)?c[y]:c.type,v=d[y];u.concat(y+1).checkSubtype(m,v.type)}if(u.errors.length===0)return new Ur(r,s,f,d)}}if(a.length===1)t.errors.push(...u.errors);else{const f=(a.length?a:o).map(([g])=>Qj(g)).join(" | "),d=[];for(let g=1;g<e.length;g++){const y=t.parse(e[g],1+d.length);if(!y)return null;d.push(ln(y.type))}t.error(`Expected arguments of type ${f}, but found (${d.join(", ")}) instead.`)}return null}static register(e,t){Ur.definitions=t;for(const r in t)e[r]=Ur}}function Db(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,o=RR(e,t,r,s);if(o)throw new dn(o);return new Wt(e/255,t/255,r/255,s,!1)}function Nb(n,e){return n in e}function jm(n,e){const t=e[n];return typeof t>"u"?null:t}function Jj(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function sa(n){return{type:n}}Ur.register(kp,{error:[HW,[yt],(n,[e])=>{throw new dn(e.evaluate(n))}],typeof:[yt,[st],(n,[e])=>ln(Fn(e.evaluate(n)))],"to-rgba":[$r(ye,4),[Qi],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[Qi,[ye,ye,ye],Db],rgba:[Qi,[ye,ye,ye,ye],Db],has:{type:at,overloads:[[[yt],(n,[e])=>Nb(e.evaluate(n),n.properties())],[[yt,Ia],(n,[e,t])=>Nb(e.evaluate(n),t.evaluate(n))]]},get:{type:st,overloads:[[[yt],(n,[e])=>jm(e.evaluate(n),n.properties())],[[yt,Ia],(n,[e,t])=>jm(e.evaluate(n),t.evaluate(n))]]},"feature-state":[st,[yt],(n,[e])=>jm(e.evaluate(n),n.featureState||{})],properties:[Ia,[],n=>n.properties()],"geometry-type":[yt,[],n=>n.geometryType()],id:[st,[],n=>n.id()],zoom:[ye,[],n=>n.globals.zoom],"heatmap-density":[ye,[],n=>n.globals.heatmapDensity||0],elevation:[ye,[],n=>n.globals.elevation||0],"line-progress":[ye,[],n=>n.globals.lineProgress||0],accumulated:[st,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ye,sa(ye),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[ye,sa(ye),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:ye,overloads:[[[ye,ye],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ye],(n,[e])=>-e.evaluate(n)]]},"/":[ye,[ye,ye],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ye,[ye,ye],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ye,[],()=>Math.LN2],pi:[ye,[],()=>Math.PI],e:[ye,[],()=>Math.E],"^":[ye,[ye,ye],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ye,[ye],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ye,[ye],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ye,[ye],(n,[e])=>Math.log(e.evaluate(n))],log2:[ye,[ye],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ye,[ye],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ye,[ye],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ye,[ye],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ye,[ye],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ye,[ye],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ye,[ye],(n,[e])=>Math.atan(e.evaluate(n))],min:[ye,sa(ye),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ye,sa(ye),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ye,[ye],(n,[e])=>Math.abs(e.evaluate(n))],round:[ye,[ye],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ye,[ye],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ye,[ye],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[at,[yt,st],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[at,[st],(n,[e])=>n.id()===e.value],"filter-type-==":[at,[yt],(n,[e])=>n.geometryType()===e.value],"filter-<":[at,[yt,st],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[at,[st],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[at,[yt,st],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[at,[st],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[at,[yt,st],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[at,[st],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[at,[yt,st],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[at,[st],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[at,[st],(n,[e])=>e.value in n.properties()],"filter-has-id":[at,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[at,[$r(yt)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[at,[$r(st)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[at,[yt,$r(st)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[at,[yt,$r(st)],(n,[e,t])=>Jj(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:at,overloads:[[[at,at],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[sa(at),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:at,overloads:[[[at,at],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[sa(at),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[at,[at],(n,[e])=>!e.evaluate(n)],"is-supported-script":[at,[yt],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[yt,[yt],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[yt,[yt],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[yt,sa(st),(n,e)=>e.map(t=>ic(t.evaluate(n))).join("")],"resolved-locale":[yt,[Ep],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Qj(n){return Array.isArray(n)?`(${n.map(ln).join(", ")})`:`(${ln(n.type)}...)`}function Id(n){if(n instanceof Pp)return Id(n.boundExpression);if(n instanceof Ur&&n.name==="error")return!1;if(n instanceof Op)return!1;if(n instanceof Ma)return!1;if(n instanceof Oa)return!1;if(n instanceof nh)return!1;const e=n instanceof Ro||n instanceof Si;let t=!0;return n.eachChild(r=>{e?t=t&&Id(r):t=t&&r instanceof eu}),t?Y_(n)&&Z_(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function Y_(n){if(n instanceof Ur){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Ma||n instanceof Oa)return!1;let e=!0;return n.eachChild(t=>{e&&!Y_(t)&&(e=!1)}),e}function K_(n){if(n instanceof Ur&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!K_(t)&&(e=!1)}),e}function Z_(n,e){if(n instanceof Ur&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Z_(r,e)&&(t=!1)}),t}function Y0(n){return{result:"success",value:n}}function Cl(n){return{result:"error",value:n}}function e7(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function t7(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function n7(n){return!!n.expression&&n.expression.interpolated}function NR(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Fn(n)===Ia}class r7{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new IR,this._defaultValue=t?a7(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new dn(`Expected value to be one of ${Object.keys(this._enumValues).map(u=>JSON.stringify(u)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function i7(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in kp}function zR(n,e){const t=new Ip(kp,Id,[],e?o7(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?Y0(new r7(r,e)):Cl(t.errors)}class zb{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!K_(t.expression),this.globalStateRefs=Fp(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,o)}evaluate(e,t,r,i,s,o){return this._styleExpression.evaluate(e,t,r,i,s,o)}}class $b{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!K_(t.expression),this.globalStateRefs=Fp(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,o)}evaluate(e,t,r,i,s,o){return this._styleExpression.evaluate(e,t,r,i,s,o)}interpolationFactor(e,t,r){return this.interpolationType?ts.interpolationFactor(this.interpolationType,e,t,r):0}}function s7(n,e){const t=zR(n,e);if(t.result==="error")return t;const r=t.value.expression,i=Y_(r);if(!i&&!e7(e))return Cl([new Hi("","data expressions not supported")]);const s=Z_(r,["zoom"]);if(!s&&!t7(e))return Cl([new Hi("","zoom expressions not supported")]);const o=Gf(r);if(!o&&!s)return Cl([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Hi)return Cl([o]);if(o instanceof ts&&!n7(e))return Cl([new Hi("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Y0(i?new zb("constant",t.value):new zb("source",t.value));const a=o instanceof ts?o.interpolation:void 0;return Y0(i?new $b("camera",t.value,o.labels,a):new $b("composite",t.value,o.labels,a))}function Gf(n){let e=null;if(n instanceof Ap)e=Gf(n.result);else if(n instanceof Pc){for(const t of n.args)if(e=Gf(t),e)break}else(n instanceof Mp||n instanceof ts)&&n.input instanceof Ur&&n.input.name==="zoom"&&(e=n);return e instanceof Hi||n.eachChild(t=>{const r=Gf(t);r instanceof Hi?e=r:!e&&r?e=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Fp(n,e=new Set){return n instanceof nh&&e.add(n.key),n.eachChild(t=>{Fp(t,e)}),e}function o7(n){const e={color:Qi,string:yt,number:ye,enum:yt,boolean:at,formatted:Cp,padding:Sp,numberArray:Tp,colorArray:Tc,projectionDefinition:bp,resolvedImage:eh,variableAnchorOffsetCollection:Rp};return n.type==="array"?$r(e[n.value]||st,n.length):e[n.type]}function a7(n){if(n.type==="color"&&NR(n.default))return new Wt(0,0,0,0);switch(n.type){case"color":return Wt.parse(n.default)||null;case"padding":return Ii.parse(n.default)||null;case"numberArray":return Ai.parse(n.default)||null;case"colorArray":return Br.parse(n.default)||null;case"variableAnchorOffsetCollection":return es.parse(n.default)||null;case"projectionDefinition":return Ci.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function $R(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!$R(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const l7={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function u7(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};$R(n)||(n=Ad(n));const e=zR(n,l7);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=BR(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t,getGlobalStateRefs:()=>Fp(e.value.expression)}}}function c7(n,e){return n<e?-1:n>e?1:0}function BR(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(BR(n[e]))return!0;return!1}function Ad(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Hm(n[1],n[2],"=="):e==="!="?Mf(Hm(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Hm(n[1],n[2],e):e==="any"?h7(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Ad)):e==="none"?["all"].concat(n.slice(1).map(Ad).map(Mf)):e==="in"?Bb(n[1],n.slice(2)):e==="!in"?Mf(Bb(n[1],n.slice(2))):e==="has"?Ub(n[1]):e==="!has"?Mf(Ub(n[1])):!0}function Hm(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function h7(n){return["any"].concat(n.map(Ad))}function Bb(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(c7)]]:["filter-in-small",n,["literal",e]]}}function Ub(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Mf(n){return["!",n]}function Oc(n){return typeof n=="object"?["literal",n]:n}function f7(n,e){let t=n.stops;if(!t)return d7(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(o=>!i&&e.tokens&&typeof o[1]=="string"?[o[0],y7(o[1])]:[o[0],Oc(o[1])]),r?p7(n,e,t):s?m7(n,e,t):K0(n,e,t)}function d7(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,Oc(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function J_(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function p7(n,e,t){const r={},i={},s=[];for(let a=0;a<t.length;a++){const u=t[a],c=u[0].zoom;r[c]===void 0&&(r[c]={zoom:c,type:n.type,property:n.property,default:n.default},i[c]=[],s.push(c)),i[c].push([u[0].value,u[1]])}if(ev({},e)==="exponential"){const a=[J_(n),["linear"],["zoom"]];for(const u of s){const c=K0(r[u],e,i[u]);kl(a,u,c,!1)}return a}else{const a=["step",["zoom"]];for(const u of s){const c=K0(r[u],e,i[u]);kl(a,u,c,!0)}return Q_(a),a}}function g7(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Gb(n,e){const t=Oc(g7(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function K0(n,e,t){const r=ev(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const o of t)s.push(["==",i,o[0]],o[1]);return s.push(Gb(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const o of t)kl(s,o[0],o[1],!1);return s.push(Gb(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const o of t)kl(s,o[0],o[1],!0);return Q_(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,Oc(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,o=[J_(n),s===1?["linear"]:["exponential",s],["number",i]];for(const a of t)kl(o,a[0],a[1],!1);return n.default===void 0?o:["case",["==",["typeof",i],"number"],o,Oc(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function m7(n,e,t,r=["zoom"]){const i=ev(n,e);let s,o=!1;if(i==="interval")s=["step",r],o=!0;else if(i==="exponential"){const a=n.base!==void 0?n.base:1;s=[J_(n),a===1?["linear"]:["exponential",a],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const a of t)kl(s,a[0],a[1],o);return Q_(s),s}function Q_(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function kl(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function ev(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function y7(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}const _7=qW;var qb={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Bu=" ",Wb=/(italic|oblique)$/i,jb={};function Z0(n,e,t){var r=jb[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",o=[],a,u,c=0,f=n.length;c<f;++c){var d=n[c],g=d.split(" "),y=g[g.length-1].toLowerCase();y=="normal"||y=="italic"||y=="oblique"?(s=u?s:y,u=!0,g.pop(),y=g[g.length-1].toLowerCase()):Wb.test(y)&&(y=y.replace(Wb,""),s=u?s:g[g.length-1].replace(y,""),u=!0);for(var m in qb){var v=g.length>1?g[g.length-2].toLowerCase():"";if(y==m||y==m.replace("-","")||v+"-"+y==m){i=a?i:qb[m],g.pop(),v&&m.startsWith(v)&&g.pop();break}}!a&&typeof y=="number"&&(i=y,a=!0);var x=g.join(Bu).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");x.indexOf(Bu)!==-1&&(x='"'+x+'"'),o.push(x)}r=jb[n]=[s,i,o]}return r[0]+Bu+r[1]+Bu+e+"px"+(t?"/"+t:"")+Bu+r[2]}function UR(n,e,t,r){const i=[];let s=si();for(let o=0,a=t.length;o<a;++o){const u=t[o];s=Xy(n,e,u[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=u[u.length-1]}return i}function Pd(n,e,t,r,i,s,o){let a,u;const c=(t-e)/r;if(c===1)a=e;else if(c===2)a=e,u=i;else if(c!==0){let f=n[e],d=n[e+1],g=0;const y=[0];for(let x=e+r;x<t;x+=r){const b=n[x],E=n[x+1];g+=Math.sqrt((b-f)*(b-f)+(E-d)*(E-d)),y.push(g),f=b,d=E}const m=i*g,v=jB(y,m);v<0?(u=(m-y[-v-2])/(y[-v-1]-y[-v-2]),a=e+(-v-2)*r):a=e+v*r}o=o>1?o:2,s=s||new Array(o);for(let f=0;f<o;++f)s[f]=a===void 0?NaN:u===void 0?n[a+f]:Nr(n[a+f],n[a+r+f],u);return s}function J0(n,e,t,r,i,s){if(t==e)return null;let o;if(i<n[e+r-1])return s?(o=n.slice(e,e+r),o[r-1]=i,o):null;if(n[t-1]<i)return s?(o=n.slice(t-r,t),o[r-1]=i,o):null;if(i==n[e+r-1])return n.slice(e,e+r);let a=e/r,u=t/r;for(;a<u;){const g=a+u>>1;i<n[(g+1)*r-1]?u=g:a=g+1}const c=n[a*r-1];if(i==c)return n.slice((a-1)*r,(a-1)*r+r);const f=n[(a+1)*r-1],d=(i-c)/(f-c);o=[];for(let g=0;g<r-1;++g)o.push(Nr(n[(a-1)*r+g],n[a*r+g],d));return o.push(i),o}function v7(n,e,t,r,i,s,o){if(o)return J0(n,e,t[t.length-1],r,i,s);let a;if(i<n[r-1])return s?(a=n.slice(0,r),a[r-1]=i,a):null;if(n[n.length-1]<i)return s?(a=n.slice(n.length-r),a[r-1]=i,a):null;for(let u=0,c=t.length;u<c;++u){const f=t[u];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return J0(n,e,f,r,i,!1);e=f}}return null}class Md extends bT{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Qt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ot(e[t],Ve.CHANGE,this.changed,this))}clone(){const e=new Md(Vm(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qa(this.getExtent(),e,t))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){ou(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)sT(e,t[r].getExtent());return e}getGeometries(){return Vm(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],u=a.getSimplifiedGeometry(e);t.push(u),u!==a&&(i=!0)}return i?new Md(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Wr(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(Vm(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Vm(n){return n.map(e=>e.clone())}class Ba extends ja{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){ri(this.flatCoordinates,e),this.changed()}clone(){const e=new Ba(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return IT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,J0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return A_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=hp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ba(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return fp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cp(this.flatCoordinates,0,e,this.stride),this.changed()}}class Lc extends ja{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],o=[];for(let u=0,c=i.length;u<c;++u){const f=i[u];ri(s,f.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){ri(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Lc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,v7(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return _c(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ba(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=t.length;o<a;++o){const u=t[o],c=new Ba(e.slice(s,u),r);i.push(c),s=u}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=A_(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const u=i[o],c=Pd(t,r,u,s,.5);ri(e,c),r=u}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=TT(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Lc(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return gG(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Vc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class rh extends ja{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){ri(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new rh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qa(this.getExtent(),e,t))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,u=s.length;a<u;a+=o){const c=Ra(e,t,s[a],s[a+1]);if(c<i){i=c;for(let f=0;f<o;++f)r[f]=s[a+f];r.length=o}}return i}getCoordinates(){return So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new os(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new os(e.slice(s,s+r),t);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const o=t[i],a=t[i+1];if(Vy(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cp(this.flatCoordinates,0,e,this.stride),this.changed()}}class tu extends ja{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,u=i.length;a<u;++a){const c=i[a],f=s.length,d=c.getEnds();for(let g=0,y=d.length;g<y;++g)d[g]+=f;ri(s,c.getFlatCoordinates()),o.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;ri(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new tu(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<qa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lG(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return pG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return aG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),F0(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,k0(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=UR(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=RT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new rh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;MT(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=F0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=fG(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new tu(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=t;return new oi(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const u=r[o].slice(),c=u[u.length-1];if(s!==0)for(let d=0,g=u.length;d<g;++d)u[d]-=s;const f=new oi(t.slice(s,c),e,u);i.push(f),s=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return mG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=ST(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const Hb=Sr();class rr{constructor(e,t,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?iT(this.flatCoordinates_):Xy(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Wr(this.getExtent());this.flatInteriorPoints_=h_(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=OT(this.flatCoordinates_,this.ends_),t=UR(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=RT(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Pd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=Pd(e,t,o,2,.5);ri(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=jt(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=In(r)/In(t);ss(Hb,r[0],r[3],i,-i,0,0,0),Lo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Hb,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new rr(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=JS((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=hp(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=TT(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=u_(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new rr(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}rr.prototype.getFlatCoordinates=rr.prototype.getOrientedFlatCoordinates;let x7=!1;function GR(n,e,t,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=x7,a.onload=function(u){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let f;c=="text"||c=="json"?f=a.responseText:c=="xml"?f=a.responseXML||a.responseText:c=="arraybuffer"&&(f=a.response),f?s(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function Vb(n,e){return function(t,r,i,s,o){GR(n,e,t,r,i,(a,u)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function w7(n,e){return[[-1/0,-1/0,1/0,1/0]]}function b7(n,e){return[n]}class Xb{constructor(e){this.rbush_=new WT(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Xe(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const o=e[i],a=t[i],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=u,this.items_[Xe(a)]=u}this.rbush_.load(r)}remove(e){const t=Xe(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Xe(t)],i=[r.minX,r.minY,r.maxX,r.maxY];$s(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Fo(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return zs(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class fu extends hs{constructor(e){super(),this.projection=jt(e.projection),this.attributions_=Yb(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Yb(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Yb(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Qr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class uo extends ai{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class sc extends fu{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=gc,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(zt(this.format_,"`format` must be set when `url` is set"),this.loader_=Vb(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:w7;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Xb:null,this.loadedExtentsRtree_=new Xb,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new Ri(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Xe(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new uo(Qr.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof rr||(this.featureChangeKeys_[e]=[Ot(t,Ve.CHANGE,this.handleFeatureChange_,this),Ot(t,Vl.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof rr){const s=this.idIndex_[i];s instanceof rr?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(zt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],u=Xe(a);this.addToIndex_(u,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],u=Xe(a);this.setupChangeEvents_(u,a);const c=a.getGeometry();if(c){const f=c.getExtent();t.push(f),i.push(a)}else this.nullGeometryFeatures_[u]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Qr.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new uo(Qr.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Qr.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Qr.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(Vn.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(Vn.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Qt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new uo(Qr.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof rr||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof rr||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Fo(this.nullGeometryFeatures_)||ri(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=cT(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const u=[-1/0,-1/0,1/0,1/0];return t=t||Fa,this.featuresRtree_.forEachInExtent(u,function(c){if(t(c)){const f=c.getGeometry(),d=a;if(a=f instanceof rr?0:f.closestPointXY(r,i,o,a),a<d){s=c;const g=Math.sqrt(a);u[0]=r-g,u[1]=i-g,u[2]=r+g,u[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Xe(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new uo(Qr.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Xe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Fo(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let o=0,a=s.length;o<a;++o){const u=s[o];i.forEachInExtent(u,function(f){return Os(f.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new uo(Qr.FEATURESLOADSTART)),this.loader_.call(this,u,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new uo(Qr.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new uo(Qr.FEATURESLOADERROR))}),i.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if($s(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Xe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Qt),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Qr.REMOVEFEATURE)&&this.dispatchEvent(new uo(Qr.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){zt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Vb(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class E7 extends S_{constructor(e,t,r,i,s){const o=s!==void 0?Se.IDLE:Se.LOADED;super(e,t,r,o),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Se.ERROR):this.state=Se.LOADED,this.changed()}load(){this.state==Se.IDLE&&(this.state=Se.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class ih extends qc{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Ve.CHANGE)}release(){this.setState(_e.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==_e.EMPTY){if(this.state!==_e.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Ke()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:hT(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class qR extends ih{constructor(e,t,r,i,s,o){super(e,t,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=_e.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=_e.ERROR,this.unlistenImage_(),this.image_=C7(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=_e.LOADED:this.state=_e.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==_e.ERROR&&(this.state=_e.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==_e.IDLE&&(this.state=_e.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$8(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function C7(){const n=gn(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class tv{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ml(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new tv(n,e,t,r)}const Kb=[];class S7 extends ih{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=gn(1,1,Kb)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Xe(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Yc(this.context_),Kb.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let WR=class extends ih{constructor(e,t,r,i,s,o){super(e,t,o),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==_e.IDLE&&(this.setState(_e.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(_e.ERROR)}setFeatures(e){this.features_=e,this.setState(_e.LOADED)}setLoader(e){this.loader_=e}};const jR="https://api.mapbox.com";function nv(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function T7(n,e,t){if(typeof n=="string")return[{id:"default",url:Zb(n,e,t)}];for(const r of n)r.url=Zb(r.url,e,t);return n}function Zb(n,e,t){const r=nv(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${jR}/styles/v1/${s}/sprite?access_token=${e}`}function Od(n,e){const t=nv(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${jR}/styles/v1/${i}?&access_token=${e}`}const R7=["a","b","c","d"];function qf(n,e,t,r){const i=new URL(n,r||location.href),s=nv(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${o}.webp?access_token=${e}`]}return R7.map(o=>`https://${o}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Ti=Object.freeze({}),Jb={},Qb={};let I7=0;function rv(n){return n.id||(n.id=I7++),n.id}function A7(n,e){return rv(n)+"."+Xe(e)}function HR(n){let e=Jb[n.id];return e||(e={},Jb[rv(n)]=e),e}function P7(n){let e=Qb[n.id];return e||(e={},Qb[rv(n)]=e),e}function Xm(n){return n*Math.PI/180}const rs=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function Dp(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function iv(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function ec(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const yl={};function nu(n,e,t={},r){if(e in yl)return r&&(r.url=yl[e][0].url),yl[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(u){return delete yl[e],Promise.reject(new Error("Error fetching source "+e))},o=function(u){return delete yl[e],u.ok?u.json():Promise.reject(new Error("Error fetching source "+e))},a=Xl(()=>i).then(u=>u instanceof Response?(r&&(r.url=u.url),o(u)):(u instanceof Request||(u=new Request(u)),u.headers.get("Accept")||u.headers.set("Accept","application/json"),r&&(r.url=u.url),fetch(u).then(o).catch(s))).catch(s);return yl[e]=[i,a],a}function VR(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=Od(n,e.accessToken),nu("Style",n,e);else return Promise.resolve(n)}const eE={};function XR(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=eE[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(a,u)=>{const c=t.transformRequest&&t.transformRequest(u,"Tiles")||u;if(a instanceof WR)a.setLoader((f,d,g)=>{const y=function(m){m.arrayBuffer().then(v=>{const b=a.getFormat().readFeatures(v,{extent:f,featureProjection:g});a.setFeatures(b)})};Xl(()=>c).then(m=>{if(m instanceof Response)return y(m);fetch(m).then(y).catch(v=>a.setState(_e.ERROR))}).catch(m=>a.setState(_e.ERROR))});else{const f=a.getImage();Xl(()=>c).then(d=>{if(typeof d=="string"){f.src=d;return}const g=y=>y.blob().then(m=>{const v=URL.createObjectURL(m);f.addEventListener("load",()=>URL.revokeObjectURL(v)),f.addEventListener("error",()=>URL.revokeObjectURL(v)),f.src=v});if(d instanceof Response)return g(d);fetch(d).then(g).catch(y=>a.setState(_e.ERROR))}).catch(d=>a.setState(_e.ERROR))}});const o=n.url;if(o&&!n.tiles){const a=qf(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:s});else{const u={};i=nu("Source",a[0],t,u).then(function(c){return c.tiles=c.tiles.map(function(f){return c.scheme==="tms"&&(f=f.replace("{y}","{-y}")),qf(f,t.accessToken,t.accessTokenParam||"access_token",u.url)[0]}),Promise.resolve({tileJson:c,tileLoadFunction:s})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),qf(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));eE[r]=i}return i}function tE(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=Dp(i[0],i[1]),o=s.getContext("2d");o.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const u=a.data;for(let c=0,f=a.width;c<f;++c)for(let d=0,g=a.height;d<g;++d){const y=(d*f+c)*4;u[y+3]>0&&o.arc(c,d,t*e.pixelRatio,0,2*Math.PI)}return o.fill(),s}function M7(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function nE(n,e,t){const r=Dp(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0,u=s.width;a<u;++a)for(let c=0,f=s.height;c<f;++c){const d=(c*u+a)*4,g=o[d+3]/255,y=.75,m=.1,v=M7(y-m,y+m,g);v>0?(o[d+0]=Math.round(255*t.r*v),o[d+1]=Math.round(255*t.g*v),o[d+2]=Math.round(255*t.b*v),o[d+3]=Math.round(255*v)):o[d+3]=0}return i.putImageData(s,0,0),r}const O7=Array(256).join("‚Ää");function Q0(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=O7.slice(0,Math.round(e/.1));for(let s=0,o=r.length;s<o;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let Ym;function YR(){return Ym||(Ym=Dp(1,1).getContext("2d")),Ym}function oa(n,e){return YR().measureText(n).width+(n.length-1)*e}const Ld={};ca.on("propertychange",()=>{for(const n in Ld)delete Ld[n]});function ey(n,e,t,r){if(n.indexOf(`
`)!==-1){const o=n.split(`
`),a=[];for(let u=0,c=o.length;u<c;++u)a.push(ey(o[u],e,t,r));return a.join(`
`)}const i=t+","+e+","+n+","+r;let s=Ld[i];if(!s){const o=n.split(" ");if(o.length>1){const a=YR();a.font=e;const c=a.measureText("M").width*t;let f="";const d=[];for(let g=0,y=o.length;g<y;++g){const m=o[g],v=f+(f?" ":"")+m;oa(v,r)<=c?f=v:(f&&d.push(f),f=m)}f&&d.push(f);for(let g=0,y=d.length;g<y&&y>1;++g){const m=d[g];if(oa(m,r)<c*.35){const v=g>0?oa(d[g-1],r):1/0,x=g<y-1?oa(d[g+1],r):1/0;d.splice(g,1),y-=1,v<x?(d[g-1]+=" "+m,g-=1):d[g]=m+" "+d[g]}}for(let g=0,y=d.length-1;g<y;++g){const m=d[g],v=d[g+1];if(oa(m,r)>c*.7&&oa(v,r)<c*.6){const x=m.split(" "),b=x.pop();oa(b,r)<c*.2&&(d[g]=x.join(" "),d[g+1]=b+" "+v),y-=1}}s=d.join(`
`)}else s=n;s=Q0(s,r),Ld[i]=s}return s}const L7=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],rE={};function k7(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let r=0,i=n.length;r<i;++r){const s=n[r];if(s in rE)continue;rE[s]=!0;const a=Z0(s,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let r=0,i=t.length;r<i;++r){const s=t[r],o=s[0];if(L7.includes(o))continue;const a=s[1],u=s[2];if(!(await document.fonts.load(`${u} ${a} 16px "${o}"`)).some(f=>f.family.replace(/^['"]|['"]$/g,"").toLowerCase()===o.toLowerCase()&&f.weight==a&&f.style===u)){const f=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",u.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",u);if(!document.querySelector('link[href="'+f+'"]')){const d=document.createElement("link");d.href=f,d.rel="stylesheet",document.head.appendChild(d)}}}})(),n}const F7={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},D7={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},N7=function(n,e){const t=s7(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},qr={zoom:0,distanceFromCenter:0};Ur.register(kp,{...Ur.definitions,pitch:[{kind:"number"},[],n=>qr.pitch||90],"distance-from-center":[{kind:"number"},[],n=>qr.distanceFromCenter||0]});let Of,Km;function Ae(n,e,t,r,i,s){const o=n.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[o]||(i[o]={});const a=i[o];if(!a[t]){let u=(n[e]||Ti)[t];const c=_7[`${e}_${n.type}`][t];u===void 0&&(u=c.default);let f=i7(u);if(!f&&NR(u)&&(u=f7(u,c),f=!0),f){const d=N7(u,c);a[t]=d.evaluate.bind(d)}else c.type=="color"&&(u=Wt.parse(u)),a[t]=function(){return u}}return a[t](qr,r,s)}function iE(n,e,t,r){return Ae(n,"layout",`${t}-allow-overlap`,e,r)?Ae(n,"layout",`${t}-ignore-placement`,e,r)?"none":"obstacle":"declutter"}function z7(n,e,t,r){if(r||console.warn("No filterCache provided to evaluateFilter()"),!(n in r))try{r[n]=u7(e).filter}catch(i){console.warn("Filter will evaluate to false: "+i.message),r[n]=function(){return!1}}return r[n](qr,t)}function go(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const $7=/\{[^{}}]*\}/g;function Zm(n,e){return n.replace($7,function(t){return e[t.slice(1,-1)]||""})}function sE(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const B7={};function U7(n,e,t,r=rs,i=void 0,s=void 0,o=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");B7[A7(e,n)]=Array.from(arguments);const u={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(const R in s){const F=s[R];Xl(()=>F).then(async O=>{let $;if(typeof Image<"u"){const L=new Image;if(typeof O=="string")L.crossOrigin="anonymous",L.src=O;else{let N;O instanceof Request?N=await fetch(O):O instanceof Response&&(N=O);const B=await N.blob();$=URL.createObjectURL(B),L.src=$}L.addEventListener("load",function N(){L.removeEventListener("load",N),u[R]={image:L,size:[L.width,L.height]},n.changed(),$&&URL.revokeObjectURL($)}),L.addEventListener("error",function N(){URL.revokeObjectURL($),L.removeEventListener("error",N)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const L=self;L.postMessage({action:"loadImage",src:O}),L.addEventListener("message",function(B){B.data.action==="imageLoaded"&&B.data.src===O&&(u[R]={image:B.data.image,size:[B.data.image.width,B.data.image.height]})})}})}const c=yR(e.layers),f={},d=[],g={},y={},m=HR(e),v=P7(e);let x;for(let R=0,F=c.length;R<F;++R){const O=c[R],$=O.id;if(typeof t=="string"&&O.source==t||Array.isArray(t)&&t.indexOf($)!==-1){const L=O["source-layer"];if(x){if(O.source!==x)throw new Error(`Layer "${$}" does not use source "${x}`)}else{x=O.source;const B=e.sources[x];if(!B)throw new Error(`Source "${x}" is not defined`);const z=B.type;if(z!=="vector"&&z!=="geojson")throw new Error(`Source "${x}" is not of type "vector" or "geojson", but "${z}"`)}let N=f[L];N||(N=[],f[L]=N),N.push({layer:O,index:R}),d.push($)}}const b=new pr,E=new dr,T=[],C=function(R,F,O){var V,ne,re;const $=((re=(ne=(V=n.getSource)==null?void 0:V.call(n))==null?void 0:ne.format_)==null?void 0:re.layerName_)??"mvt:layer",L=R.getProperties(),N=f[L[$]];if(!N)return;let B=r.indexOf(F);B==-1&&(B=iv(F,r)),qr.zoom=B,qr.distanceFromCenter=0;const z=R.getGeometry(),H=F7[z.getType()],Z=n.get("map");if(Z&&Z instanceof xp&&H===1){const me=Z.getSize();if(me){const ce=Z.getView().getCenter(),Fe=Wr(z.getExtent());qr.distanceFromCenter=mU(ce,Fe)/F/me[1]}}const G={id:R.getId(),properties:L,type:H},W=n.get("mapbox-featurestate")[R.getId()];let q=-1;for(let me=0,ce=N.length;me<ce;++me){const Fe=N[me],le=Fe.layer,Oe=le.id;if(O!==void 0&&O!==Oe)continue;const dt=le.layout||Ti,ze=le.paint||Ti;if(dt.visibility==="none"||"minzoom"in le&&B<le.minzoom||"maxzoom"in le&&B>=le.maxzoom)continue;const Ie=le.filter;if(!Ie||z7(Oe,Ie,G,v)){let Te,pt,Gt,Tt,en,ge;const $e=Fe.index;if(H==3&&(le.type=="fill"||le.type=="fill-extrusion"))if(pt=Ae(le,"paint",le.type+"-opacity",G,m,W),le.type+"-pattern"in ze){const He=Ae(le,"paint",le.type+"-pattern",G,m,W);if(He){const Pe=typeof He=="string"?Zm(He,L):He.toString(),Le=sE(Pe,u);if(i&&i[Pe]&&Le){++q,ge=T[q],(!ge||!ge.getFill()||ge.getStroke()||ge.getText())&&(ge=new Rn({fill:new dr}),T[q]=ge),Gt=ge.getFill(),ge.setZIndex($e);const Ce=Pe+"."+pt;let xt=y[Ce];if(!xt){const Ue=i[Pe],Ge=Dp(Ue.width,Ue.height),et=Ge.getContext("2d");et.globalAlpha=pt,et.drawImage(Le.image,Ue.x,Ue.y,Ue.width,Ue.height,0,0,Ue.width,Ue.height),xt=et.createPattern(Ge,"repeat"),y[Ce]=xt}Gt.setColor(xt)}}}else Te=go(Ae(le,"paint",le.type+"-color",G,m,W),pt),le.type+"-outline-color"in ze&&(en=go(Ae(le,"paint",le.type+"-outline-color",G,m,W),pt)),en||(en=Te),(Te||en)&&(++q,ge=T[q],(!ge||Te&&!ge.getFill()||!Te&&ge.getFill()||en&&!ge.getStroke()||!en&&ge.getStroke()||ge.getText())&&(ge=new Rn({fill:Te?new dr:void 0,stroke:en?new pr:void 0}),T[q]=ge),Te&&(Gt=ge.getFill(),Gt.setColor(Te)),en&&(Tt=ge.getStroke(),Tt.setColor(en),Tt.setWidth(.5)),ge.setZIndex($e));if(H!=1&&le.type=="line"){"line-pattern"in ze?Te=void 0:Te=go(Ae(le,"paint","line-color",G,m,W),Ae(le,"paint","line-opacity",G,m,W));const He=Ae(le,"paint","line-width",G,m,W);Te&&He>0&&(++q,ge=T[q],(!ge||!ge.getStroke()||ge.getFill()||ge.getText())&&(ge=new Rn({stroke:new pr}),T[q]=ge),Tt=ge.getStroke(),Tt.setLineCap(Ae(le,"layout","line-cap",G,m,W)),Tt.setLineJoin(Ae(le,"layout","line-join",G,m,W)),Tt.setMiterLimit(Ae(le,"layout","line-miter-limit",G,m,W)),Tt.setColor(Te),Tt.setWidth(He),Tt.setLineDash(ze["line-dasharray"]?Ae(le,"paint","line-dasharray",G,m,W).map(function(Pe){return Pe*He}):null),ge.setZIndex($e))}let be=!1,ke=null,Ze=0,rn,gt,k;if((H==1||H==2)&&"icon-image"in dt){const He=Ae(le,"layout","icon-image",G,m,W);if(He){rn=typeof He=="string"?Zm(He,L):He.toString();let Pe;const Le=a?a(n,rn):void 0,Ce=sE(rn,u);if(i&&i[rn]&&Ce||Le){const xt=Ae(le,"layout","icon-rotation-alignment",G,m,W);if(H==2){const Ue=R.getGeometry();if(Ue.getFlatMidpoint||Ue.getFlatMidpoints){const Ge=Ue.getExtent();if(Math.sqrt(Math.max(Math.pow((Ge[2]-Ge[0])/F,2),Math.pow((Ge[3]-Ge[1])/F,2)))>150){const Rt=Ue.getType()==="MultiLineString"?Ue.getFlatMidpoints():Ue.getFlatMidpoint();if(Km||(Of=[NaN,NaN],Km=new rr("Point",Of,[],2,{},void 0)),Pe=Km,Of[0]=Rt[0],Of[1]=Rt[1],Ae(le,"layout","symbol-placement",G,m,W)==="line"&&xt==="map"){const mn=Ue.getStride(),Dt=Ue.getFlatCoordinates();for(let Nt=0,ot=Dt.length-mn;Nt<ot;Nt+=mn){const Ct=Dt[Nt],Yt=Dt[Nt+1],kt=Dt[Nt+mn],$t=Dt[Nt+mn+1],Mn=Math.min(Ct,kt),cn=Math.max(Ct,kt),yn=Rt[0],Zt=Rt[1],Dn=($t-Yt)*(yn-Ct)-(kt-Ct)*(Zt-Yt);if(Math.abs(Dn)<.001&&yn<=cn&&yn>=Mn){Ze=Math.atan2(Yt-$t,kt-Ct);break}}}}}}if(H!==2||Pe){const Ue=Ae(le,"layout","icon-size",G,m,W),Ge=ze["icon-color"]!==void 0?Ae(le,"paint","icon-color",G,m,W):null;if(!Ge||Ge.a!==0){const et=Ae(le,"paint","icon-halo-color",G,m,W),Rt=Ae(le,"paint","icon-halo-width",G,m,W);let Kt=`${rn}.${Ue}.${Rt}.${et}`;if(Ge!==null&&(Kt+=`.${Ge}`),gt=g[Kt],!gt){const mn=iE(le,G,"icon",m);let Dt;"icon-offset"in dt&&(Dt=Ae(le,"layout","icon-offset",G,m,W).slice(0),Dt[0]*=Ue,Dt[1]*=-Ue);let Nt=Ge?[Ge.r*255,Ge.g*255,Ge.b*255,Ge.a]:void 0;if(Le){const ot={color:Nt,rotateWithView:xt==="map",displacement:Dt,declutterMode:mn,scale:Ue};typeof Le=="string"?ot.src=Le:(ot.img=Le,ot.imgSize=[Le.width,Le.height]),gt=new $a(ot)}else{const ot=i[rn];let Ct,Yt,kt;if(Rt)ot.sdf?(Ct=tE(nE(Ce.image,ot,Ge||[0,0,0,1]),{x:0,y:0,width:ot.width,height:ot.height,pixelRatio:ot.pixelRatio},Rt,et),Nt=void 0):Ct=tE(Ce.image,ot,Rt,et);else{if(ot.sdf&&!Ce.unSDFed){const $t=nE(Ce.image,{x:0,y:0,width:Ce.size[0],height:Ce.size[1]},{r:1,g:1,b:1});Ce.image=$t,Ce.unSDFed=!0}Ct=Ce.image,Yt=[ot.width,ot.height],kt=[ot.x,ot.y]}gt=new $a({color:Nt,img:Ct,imgSize:Ce.size,size:Yt,offset:kt,rotateWithView:xt==="map",scale:Ue/ot.pixelRatio,displacement:Dt,declutterMode:mn})}g[Kt]=gt}}gt&&(++q,ge=T[q],(!ge||!ge.getImage()||ge.getFill()||ge.getStroke())&&(ge=new Rn,T[q]=ge),ge.setGeometry(Pe),gt.setRotation(Ze+Xm(Ae(le,"layout","icon-rotate",G,m,W))),gt.setOpacity(Ae(le,"paint","icon-opacity",G,m,W)),gt.setAnchor(D7[Ae(le,"layout","icon-anchor",G,m,W)]),ge.setImage(gt),ke=ge.getText(),ge.setText(void 0),ge.setZIndex($e),be=!0,k=!1)}else k=!0}}}if(H==1&&le.type==="circle"){++q,ge=T[q],(!ge||!ge.getImage()||ge.getFill()||ge.getStroke())&&(ge=new Rn,T[q]=ge);const He="circle-radius"in ze?Ae(le,"paint","circle-radius",G,m,W):5,Pe=go(Ae(le,"paint","circle-stroke-color",G,m,W),Ae(le,"paint","circle-stroke-opacity",G,m,W)),Le=Ae(le,"paint","circle-translate",G,m,W),Ce=go(Ae(le,"paint","circle-color",G,m,W),Ae(le,"paint","circle-opacity",G,m,W)),xt=Ae(le,"paint","circle-stroke-width",G,m,W),Ue=He+"."+Pe+"."+Ce+"."+xt+"."+Le[0]+"."+Le[1];gt=g[Ue],gt||(gt=new Go({radius:He,displacement:[Le[0],-Le[1]],stroke:Pe&&xt>0?new pr({width:xt,color:Pe}):void 0,fill:Ce?new dr({color:Ce}):void 0,declutterMode:"none"}),g[Ue]=gt),ge.setImage(gt),ke=ge.getText(),ge.setText(void 0),ge.setGeometry(void 0),ge.setZIndex($e),be=!0}let Qe,Be,En,Ht,un,Et;if("text-field"in dt){Ht=Math.round(Ae(le,"layout","text-size",G,m,W));const He=Ae(le,"layout","text-font",G,m,W);En=Ae(le,"layout","text-line-height",G,m,W),Be=Z0(o?o(He,e.metadata?e.metadata["ol:webfonts"]:void 0):He,Ht,En),Be.includes("sans-serif")||(Be+=",sans-serif"),un=Ae(le,"layout","text-letter-spacing",G,m,W),Et=Ae(le,"layout","text-max-width",G,m,W);const Pe=Ae(le,"layout","text-field",G,m,W);typeof Pe=="object"&&Pe.sections?Pe.sections.length===1?Qe=Pe.toString():Qe=Pe.sections.reduce((Le,Ce,xt)=>{const Ue=Ce.fontStack?Ce.fontStack.split(","):He,Ge=Z0(o?o(Ue):Ue,Ht*(Ce.scale||1),En);let et=Ce.text;if(et===`
`)return Le.push(`
`,""),Le;if(H==2)return Le.push(Q0(et,un),Ge),Le;et=ey(et,Ge,Et,un).split(`
`);for(let Rt=0,Kt=et.length;Rt<Kt;++Rt)Rt>0&&Le.push(`
`,""),Le.push(et[Rt],Ge);return Le},[]):Qe=Zm(Pe,L).trim(),pt=Ae(le,"paint","text-opacity",G,m,W)}if(Qe&&pt&&!k){be||(++q,ge=T[q],(!ge||!ge.getText()||ge.getFill()||ge.getStroke())&&(ge=new Rn,T[q]=ge),ge.setImage(void 0),ge.setGeometry(void 0));const He=iE(le,G,"text",m);ge.getText()||ge.setText(ke),ke=ge.getText(),(!ke||"getDeclutterMode"in ke&&ke.getDeclutterMode()!==He)&&(ke=new yp({padding:[2,2,2,2],declutterMode:He}),ge.setText(ke));const Pe=Ae(le,"layout","text-transform",G,m,W);Pe=="uppercase"?Qe=Array.isArray(Qe)?Qe.map((kt,$t)=>$t%2?kt:kt.toUpperCase()):Qe.toUpperCase():Pe=="lowercase"&&(Qe=Array.isArray(Qe)?Qe.map((kt,$t)=>$t%2?kt:kt.toLowerCase()):Qe.toLowerCase());const Le=Array.isArray(Qe)?Qe:H==2?Q0(Qe,un):ey(Qe,Be,Et,un);if(ke.setText(Le),ke.setFont(Be),ke.setRotation(Xm(Ae(le,"layout","text-rotate",G,m,W))),typeof ke.setKeepUpright=="function"){const kt=Ae(le,"layout","text-keep-upright",G,m,W);ke.setKeepUpright(kt)}const Ce=Ae(le,"layout","text-anchor",G,m,W),xt=be||H==1?"point":Ae(le,"layout","symbol-placement",G,m,W);let Ue;if(xt==="line-center"?(ke.setPlacement("line"),Ue="center"):ke.setPlacement(xt),xt==="line"&&typeof ke.setRepeat=="function"){const kt=Ae(le,"layout","symbol-spacing",G,m,W);ke.setRepeat(kt*2)}ke.setOverflow(xt==="point");let Ge=Ae(le,"paint","text-halo-width",G,m,W);const et=Ae(le,"layout","text-offset",G,m,W),Rt=Ae(le,"paint","text-translate",G,m,W);let Kt=0,mn=0;if(xt=="point"){Ue="center",Ce.indexOf("left")!==-1?(Ue="left",mn=Ge):Ce.indexOf("right")!==-1&&(Ue="right",mn=-Ge);const kt=Ae(le,"layout","text-rotation-alignment",G,m,W);ke.setRotateWithView(kt=="map")}else ke.setMaxAngle(Xm(Ae(le,"layout","text-max-angle",G,m,W))*Qe.length/Le.length),ke.setRotateWithView(!1);ke.setTextAlign(Ue);let Dt="middle";Ce.indexOf("bottom")==0?(Dt="bottom",Kt=-Ge-.5*(En-1)*Ht):Ce.indexOf("top")==0&&(Dt="top",Kt=Ge+.5*(En-1)*Ht),ke.setTextBaseline(Dt);const Nt=Ae(le,"layout","text-justify",G,m,W);ke.setJustify(Nt==="auto"?void 0:Nt),ke.setOffsetX(et[0]*Ht+mn+Rt[0]),ke.setOffsetY(et[1]*Ht+Kt+Rt[1]),E.setColor(go(Ae(le,"paint","text-color",G,m,W),pt)),ke.setFill(E);const ot=go(Ae(le,"paint","text-halo-color",G,m,W),pt);if(ot&&Ge>0){b.setColor(ot),Ge*=2;const kt=.5*Ht;b.setWidth(Ge<=kt?Ge:kt),ke.setStroke(b)}else ke.setStroke(void 0);const Ct=Ae(le,"layout","text-padding",G,m,W),Yt=ke.getPadding();Ct!==Yt[0]&&(Yt[0]=Ct,Yt[1]=Ct,Yt[2]=Ct,Yt[3]=Ct),ge.setZIndex($e)}}}if(q>-1)return T.length=q+1,T};return n.setStyle(C),n.set("mapbox-layers",d),n.set("mapbox-source",x),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),C}class KR{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Bs,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?jt(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=jt(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Ke()}readFeature(e,t){return Ke()}readFeatures(e,t){return Ke()}readGeometry(e,t){return Ke()}readProjection(e){return Ke()}writeFeature(e,t){return Ke()}writeFeatures(e,t){return Ke()}writeGeometry(e,t){return Ke()}}function Np(n,e,t){const r=t?jt(t.featureProjection):null,i=t?jt(t.dataProjection):null;let s=n;if(r&&i&&!Oo(r,i)){e&&(s=n.clone());const o=e?r:i,a=e?i:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(yc(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(u){for(let c=0,f=u.length;c<f;++c)u[c]=Math.round(u[c]*o)/o;return u};s===n&&(s=n.clone()),s.applyTransform(a)}return s}const G7={Point:os,LineString:Ba,Polygon:oi,MultiPoint:rh,MultiLineString:Lc,MultiPolygon:tu};function q7(n,e,t){return Array.isArray(e[0])?(MT(n,0,e,t)||(n=n.slice(),F0(n,0,e,t)),n):(d_(n,0,e,t)||(n=n.slice(),pd(n,0,e,t)),n)}function ZR(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>ZR({...n,geometry:o})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Np(new rr(r,r==="Polygon"?q7(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function sv(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>sv(i,e));return new Md(r)}const t=G7[n.type];return Np(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class W7 extends KR{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Lf(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Lf(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Ke()}readFeaturesFromObject(e,t){return Ke()}readGeometry(e,t){return this.readGeometryFromObject(Lf(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Ke()}readProjection(e){return this.readProjectionFromObject(Lf(e))}readProjectionFromObject(e){return Ke()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Ke()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Ke()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Ke()}}function Lf(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class oE extends W7{constructor(e){e=e||{},super(),this.dataProjection=jt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=jt(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=ov(r.geometry);if(this.featureClass===rr)return ZR({geometry:i,id:r.id,properties:r.properties},t);const s=new Bs;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(sv(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const o=s.features;for(let a=0,u=o.length;a<u;++a){const c=this.readFeatureFromObject(o[a],t);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return j7(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=jt(t.properties.name);else if(t.type==="EPSG")r=jt("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=ty(o,t),delete s[e.getGeometryName()]),Fo(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return ty(e,this.adaptOptions(t))}}function ov(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=V7(n);break}case"LineString":{t=X7(n);break}case"Polygon":{t=J7(n);break}case"MultiPoint":{t=K7(n);break}case"MultiLineString":{t=Y7(n);break}case"MultiPolygon":{t=Z7(n);break}case"GeometryCollection":{t=H7(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function j7(n,e){const t=ov(n);return sv(t,e)}function H7(n,e){return n.geometries.map(function(r){return ov(r)})}function V7(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Ha(e.length)}}function X7(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Ha(((r=e[0])==null?void 0:r.length)||2)}}function Y7(n){var s,o;const e=n.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,r=[],i=Vc(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Ha(t)}}function K7(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Ha(((t=e[0])==null?void 0:t.length)||2)}}function Z7(n){var s,o;const e=n.coordinates,t=[],r=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,i=ST(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Ha(r)}}function J7(n){var s,o;const e=n.coordinates,t=[],r=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,i=Vc(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Ha(r)}}function ty(n,e){n=Np(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=i9(n);break}case"LineString":{r=e9(n);break}case"Polygon":{r=s9(n,e);break}case"MultiPoint":{r=n9(n);break}case"MultiLineString":{r=t9(n);break}case"MultiPolygon":{r=r9(n,e);break}case"GeometryCollection":{r=Q7(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Q7(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return ty(r,e)})}}function e9(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function t9(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function n9(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function r9(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function i9(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function s9(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const ny=65536*65536,aE=1/ny,o9=12,lE=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Jm=0,kf=1,Uu=2,Ff=5;class a9{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,o=this.pos;this.type=i&7,e(s,t,this),this.pos===o&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*ny;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*ny;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,l9(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=o9&&lE?lE.decode(this.buf.subarray(t,e)):w9(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Uu?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===Jm)for(;this.buf[this.pos++]>127;);else if(t===Uu)this.pos=this.readVarint()+this.pos;else if(t===Ff)this.pos+=4;else if(t===kf)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*aE),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*aE),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){u9(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=b9(this.buf,e,this.pos);const r=this.pos-t;r>=128&&uE(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&uE(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Uu),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,f9,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,d9,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,m9,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,p9,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,g9,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,y9,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,_9,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,v9,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,x9,t)}writeBytesField(e,t){this.writeTag(e,Uu),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Ff),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Ff),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,kf),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,kf),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,Jm),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,Jm),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Uu),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Ff),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,kf),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function l9(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return _l(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function _l(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function u9(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),c9(t,r,e),h9(r,e)}function c9(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function h9(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function uE(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function f9(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function d9(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function p9(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function g9(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function m9(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function y9(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function _9(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function v9(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function x9(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function w9(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a>t)break;let u,c,f;a===1?s<128&&(o=s):a===2?(u=n[i+1],(u&192)===128&&(o=(s&31)<<6|u&63,o<=127&&(o=null))):a===3?(u=n[i+1],c=n[i+2],(u&192)===128&&(c&192)===128&&(o=(s&15)<<12|(u&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(u=n[i+1],c=n[i+2],f=n[i+3],(u&192)===128&&(c&192)===128&&(f&192)===128&&(o=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),i+=a}return r}function b9(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class av extends KR{constructor(e){super(),e=e||{},this.dataProjection=new ap({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:rr,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,u=0,c=0,f=0,d=0;for(;e.pos<s;){if(!a){const g=e.readVarint();o=g&7,a=g>>3}if(a--,o===1||o===2)u+=e.readSVarint(),c+=e.readSVarint(),o===1&&f>d&&(i.push(f),d=f),r.push(u,c),f+=2;else if(o===7)f>d&&(r.push(r[d],r[d+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>d&&(i.push(f),d=f)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const u=[],c=[];this.readRawGeometry_(e,t,u,c);const f=R9(i,c.length);if(this.featureClass===rr)s=new this.featureClass(f,u,c,2,o,a),s.transform(r.dataProjection);else{let d;if(f=="Polygon"){const m=OT(u,c);d=m.length>1?new tu(u,"XY",m):new oi(u,"XY",c)}else d=f==="Point"?new os(u,"XY"):f==="LineString"?new Ba(u,"XY"):f==="MultiPoint"?new rh(u,"XY"):f==="MultiLineString"?new Lc(u,"XY",c):null;const g=this.featureClass;s=new g,this.geometryName_&&s.setGeometryName(this.geometryName_);const y=Np(d,!1,r);s.setGeometry(y),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=jt(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new a9(e),o=s.readFields(E9,{}),a=[];for(const u in o){if(r&&!r.includes(u))continue;const c=o[u],f=c?[0,0,c.extent,c.extent]:null;i.setExtent(f);for(let d=0,g=c.length;d<g;++d){const y=T9(s,c,d),m=this.createFeature_(s,y,t);m!==null&&a.push(m)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function E9(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(C9,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function C9(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function S9(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function T9(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(S9,i,r),i}function R9(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class I9 extends M_{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,o=this.getLayer().getSource(),a=e.viewHints;let u=e.extent;if(t.extent!==void 0&&(u=Pi(u,Vi(t.extent,i.projection))),!a[an.ANIMATING]&&!a[an.INTERACTING]&&!Wa(u))if(o){const c=i.projection,f=o.getImage(u,s,r,c);f&&(this.loadImage(f)?this.image=f:f.getState()===Se.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=kn(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Na(s,i))return null;const o=this.image.getExtent(),a=this.image.getImage(),u=Lt(o),c=Math.floor(a.width*((i[0]-o[0])/u));if(c<0||c>=a.width)return null;const f=In(o),d=Math.floor(a.height*((o[3]-i[1])/f));return d<0||d>=a.height?null:this.getImageData(a,c,d)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],u=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,g=d.center,y=d.resolution,m=f*o/(y*u),v=f*a/(y*u);this.prepareContainer(e,t);const x=this.context.canvas.width,b=this.context.canvas.height,E=this.getRenderContext(e);let T=!1,C=!0;if(c.extent){const L=Vi(c.extent,d.projection);C=wn(L,e.extent),T=C&&!Os(L,e.extent),T&&this.clipUnrotated(E,e,L)}const R=r.getImage(),F=ss(this.tempTransform,x/2,b/2,m,v,0,u*(i[0]-g[0])/o,u*(g[1]-i[3])/a);this.renderedResolution=a*f/u;const O=R.width*F[0],$=R.height*F[3];if(this.getLayer().getSource().getInterpolate()||(E.imageSmoothingEnabled=!1),this.preRender(E,e),C&&O>=.5&&$>=.5){const L=F[4],N=F[5],B=c.opacity;B!==1&&(E.save(),E.globalAlpha=B),E.drawImage(R,0,0,+R.width,+R.height,L,N,O,$),B!==1&&E.restore()}return this.postRender(this.context,e),T&&E.restore(),E.imageSmoothingEnabled=!0,this.container}}class A9 extends uu{constructor(e){e=e||{},super(e)}}class JR extends A9{constructor(e){super(e)}createRenderer(){return new I9(this)}getData(e){return super.getData(e)}}function ry(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const P9=new Error("disposed"),M9=[256,256];class cE extends ih{constructor(e){const t=_e.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=ry(this.data_);return e?[e.width,e.height]:M9}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==_e.IDLE&&this.state!==_e.ERROR)return;this.state=_e.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=_e.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=_e.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(P9),this.controller_=null),super.disposeInternal()}}let Qm;const Fl=[];function hE(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function e0(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function O9(){if(Qm===void 0){const n=gn(6,6,Fl);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",hE(n,4,5,4,0),hE(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;Qm=e0(e,0)||e0(e,4)||e0(e,8),Yc(n),Fl.push(n.canvas)}return Qm}function iy(n,e,t,r){const i=t_(t,e,n);let s=O0(e,r,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const u=n.getExtent();if(!u||Na(u,i)){const c=O0(n,s,i)/s;isFinite(c)&&c>0&&(s/=c)}return s}function L9(n,e,t,r){const i=Wr(t);let s=iy(n,e,i,r);return(!isFinite(s)||s<=0)&&aT(t,function(o){return s=iy(n,e,o,r),isFinite(s)&&s>0}),s}function QR(n,e,t,r,i,s,o,a,u,c,f,d,g,y){const m=gn(Math.round(t*n),Math.round(t*e),Fl);if(d||(m.imageSmoothingEnabled=!1),u.length===0)return m.canvas;m.scale(t,t);function v(R){return Math.round(R*t)/t}m.globalCompositeOperation="lighter";const x=si();u.forEach(function(R,F,O){sT(x,R.extent)});let b;const E=t/r,T=(d?1:1+Math.pow(2,-24))/E;if(!g||u.length!==1||c!==0){if(b=gn(Math.round(Lt(x)*E),Math.round(In(x)*E),Fl),d||(b.imageSmoothingEnabled=!1),i&&y){const R=(i[0]-x[0])*E,F=-(i[3]-x[3])*E,O=Lt(i)*E,$=In(i)*E;b.rect(R,F,O,$),b.clip()}u.forEach(function(R,F,O){if(R.image.width>0&&R.image.height>0){if(R.clipExtent){b.save();const z=(R.clipExtent[0]-x[0])*E,H=-(R.clipExtent[3]-x[3])*E,Z=Lt(R.clipExtent)*E,G=In(R.clipExtent)*E;b.rect(d?z:Math.round(z),d?H:Math.round(H),d?Z:Math.round(z+Z)-Math.round(z),d?G:Math.round(H+G)-Math.round(H)),b.clip()}const $=(R.extent[0]-x[0])*E,L=-(R.extent[3]-x[3])*E,N=Lt(R.extent)*E,B=In(R.extent)*E;b.drawImage(R.image,c,c,R.image.width-2*c,R.image.height-2*c,d?$:Math.round($),d?L:Math.round(L),d?N:Math.round($+N)-Math.round($),d?B:Math.round(L+B)-Math.round(L)),R.clipExtent&&b.restore()}})}const C=qs(o);return a.getTriangles().forEach(function(R,F,O){const $=R.source,L=R.target;let N=$[0][0],B=$[0][1],z=$[1][0],H=$[1][1],Z=$[2][0],G=$[2][1];const W=v((L[0][0]-C[0])/s),q=v(-(L[0][1]-C[1])/s),V=v((L[1][0]-C[0])/s),ne=v(-(L[1][1]-C[1])/s),re=v((L[2][0]-C[0])/s),me=v(-(L[2][1]-C[1])/s),ce=N,Fe=B;N=0,B=0,z-=ce,H-=Fe,Z-=ce,G-=Fe;const le=[[z,H,0,0,V-W],[Z,G,0,0,re-W],[0,0,z,H,ne-q],[0,0,Z,G,me-q]],Oe=sU(le);if(!Oe)return;if(m.save(),m.beginPath(),O9()||!d){m.moveTo(V,ne);const ze=4,Ie=W-V,Te=q-ne;for(let pt=0;pt<ze;pt++)m.lineTo(V+v((pt+1)*Ie/ze),ne+v(pt*Te/(ze-1))),pt!=ze-1&&m.lineTo(V+v((pt+1)*Ie/ze),ne+v((pt+1)*Te/(ze-1)));m.lineTo(re,me)}else m.moveTo(V,ne),m.lineTo(W,q),m.lineTo(re,me);m.clip(),m.transform(Oe[0],Oe[2],Oe[1],Oe[3],W,q),m.translate(x[0]-ce,x[3]-Fe);let dt;if(b)dt=b.canvas,m.scale(T,-T);else{const ze=u[0],Ie=ze.extent;dt=ze.image,m.scale(Lt(Ie)/dt.width,-In(Ie)/dt.height)}m.drawImage(dt,0,0),m.restore()}),b&&(Yc(b),Fl.push(b.canvas)),f&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,a.getTriangles().forEach(function(R,F,O){const $=R.target,L=($[0][0]-C[0])/s,N=-($[0][1]-C[1])/s,B=($[1][0]-C[0])/s,z=-($[1][1]-C[1])/s,H=($[2][0]-C[0])/s,Z=-($[2][1]-C[1])/s;m.beginPath(),m.moveTo(B,z),m.lineTo(L,N),m.lineTo(H,Z),m.closePath(),m.stroke()}),m.restore()),m.canvas}const k9=10,fE=.25;class e2{constructor(e,t,r,i,s,o,a){this.sourceProj_=e,this.targetProj_=t;let u={};const c=a?VU(T=>kn(a,t_(T,this.targetProj_,this.sourceProj_))):yc(this.targetProj_,this.sourceProj_);this.transformInv_=function(T){const C=T[0]+"/"+T[1];return u[C]||(u[C]=c(T)),u[C]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Lt(i)>=Lt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Lt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Lt(this.targetProj_.getExtent()):null;const f=qs(r),d=op(r),g=sp(r),y=ip(r),m=this.transformInv_(f),v=this.transformInv_(d),x=this.transformInv_(g),b=this.transformInv_(y),E=k9+(o?Math.max(0,Math.ceil(Math.log2(I0(r)/(o*o*256*256)))):0);if(this.addQuad_(f,d,g,y,m,v,x,b,E),this.wrapsXInSource_){let T=1/0;this.triangles_.forEach(function(C,R,F){T=Math.min(T,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(C=>{if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-T>this.sourceWorldWidth_/2){const R=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];R[0][0]-T>this.sourceWorldWidth_/2&&(R[0][0]-=this.sourceWorldWidth_),R[1][0]-T>this.sourceWorldWidth_/2&&(R[1][0]-=this.sourceWorldWidth_),R[2][0]-T>this.sourceWorldWidth_/2&&(R[2][0]-=this.sourceWorldWidth_);const F=Math.min(R[0][0],R[1][0],R[2][0]);Math.max(R[0][0],R[1][0],R[2][0])-F<this.sourceWorldWidth_/2&&(C.source=R)}})}u={}}addTriangle_(e,t,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,t,r]})}addQuad_(e,t,r,i,s,o,a,u,c){const f=T0([s,o,a,u]),d=this.sourceWorldWidth_?Lt(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&d>.5&&d<1;let m=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=T0([e,t,r,i]);m=Lt(x)/this.targetWorldWidth_>fE||m}!y&&this.sourceProj_.isGlobal()&&d&&(m=d>fE||m)}if(!m&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!wn(f,this.maxSourceExtent_))return;let v=0;if(!m&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1]))){if(c>0)m=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(c>0){if(!m){const x=[(e[0]+r[0])/2,(e[1]+r[1])/2],b=this.transformInv_(x);let E;y?E=(Pl(s[0],g)+Pl(a[0],g))/2-Pl(b[0],g):E=(s[0]+a[0])/2-b[0];const T=(s[1]+a[1])/2-b[1];m=E*E+T*T>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const x=[(t[0]+r[0])/2,(t[1]+r[1])/2],b=this.transformInv_(x),E=[(i[0]+e[0])/2,(i[1]+e[1])/2],T=this.transformInv_(E);this.addQuad_(e,t,x,E,s,o,b,T,c-1),this.addQuad_(E,x,r,i,T,b,a,u,c-1)}else{const x=[(e[0]+t[0])/2,(e[1]+t[1])/2],b=this.transformInv_(x),E=[(r[0]+i[0])/2,(r[1]+i[1])/2],T=this.transformInv_(E);this.addQuad_(e,x,E,i,s,b,T,u,c-1),this.addQuad_(x,t,r,E,b,o,a,T,c-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(e,r,i,s,a,u),v&14||this.addTriangle_(e,r,t,s,a,o),v&&(v&13||this.addTriangle_(t,i,e,o,u,s),v&7||this.addTriangle_(t,i,r,o,u,a))}calculateSourceExtent(){const e=si();return this.triangles_.forEach(function(t,r,i){const s=t.source;nc(e,s[0]),nc(e,s[1]),nc(e,s[2])}),e}getTriangles(){return this.triangles_}}const t2=.5;class n2 extends ih{constructor(e,t,r,i,s,o,a,u,c,f,d,g){super(s,_e.IDLE,g),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const y=i.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const x=m?Pi(y,m):y;if(I0(x)===0){this.state=_e.EMPTY;return}const b=e.getExtent();b&&(v?v=Pi(v,b):v=b);const E=i.getResolution(this.wrappedTileCoord_[0]),T=L9(e,r,x,E);if(!isFinite(T)||T<=0){this.state=_e.EMPTY;return}const C=f!==void 0?f:t2;if(this.triangulation_=new e2(e,r,x,v,T*C,E),this.triangulation_.getTriangles().length===0){this.state=_e.EMPTY;return}this.sourceZ_=t.getZForResolution(T);let R=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(R[1]=pn(R[1],v[1],v[3]),R[3]=pn(R[3],v[1],v[3])):R=Pi(R,v)),!I0(R))this.state=_e.EMPTY;else{let F=0,O=0;e.canWrapX()&&(F=Lt(b),O=Math.floor((R[0]-b[0])/F)),cT(R.slice(),e,!0).forEach(L=>{const N=t.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let B=N.minX;B<=N.maxX;B++)for(let z=N.minY;z<=N.maxY;z++){const H=c(this.sourceZ_,B,z,a);if(H){const Z=O*F;this.sourceTiles_.push({tile:H,offset:Z})}}++O}),this.sourceTiles_.length===0&&(this.state=_e.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==_e.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(i=this.clipExtent_)==null?void 0:i.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=_e.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=QR(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=_e.LOADED}this.changed()}load(){if(this.state==_e.IDLE){this.state=_e.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==_e.IDLE||r==_e.LOADING){e++;const i=Ot(t,Ve.CHANGE,s=>{const o=t.getState();(o==_e.LOADED||o==_e.ERROR||o==_e.EMPTY)&&(Qt(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==_e.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Qt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Yc(this.canvas_.getContext("2d")),Fl.push(this.canvas_),this.canvas_=null),super.release()}}class F9{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Uc&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return zt(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return zt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){zt(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function kd(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function D9(n,e,t){return n+"/"+e+"/"+t}function N9(n){return z9(n[0],n[1],n[2])}function z9(n,e,t){return(e<<n)+t}function $9(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function t0(n,e,t,r,i){return`${Xe(n)},${e},${D9(t,r,i)}`}function n0(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function B9(n,e,t){const r=n[t];return r?r.delete(e):!1}function dE(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Pi(e,Vi(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Pi(e,i))}return e}class r2 extends M_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=si(),this.tempTileRange_=new tv(0,0,0,0),this.tempTileCoord_=kd(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new F9(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,a=this.getLayer().getSource(),u=t0(a,a.getKey(),e,t,r);let c;if(s.containsKey(u))c=s.get(u);else{if(c=a.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!c)return null;s.set(u,c)}return c}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=kn(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Na(s,i))return null;const o=t.viewState,a=r.getRenderSource(),u=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let f=u.getZForResolution(o.resolution);f>=u.getMinZoom();--f){const d=u.getTileCoordForCoordAndZ(i,f),g=this.getTile(f,d[1],d[2],t);if(!g||g.getState()!==_e.LOADED)continue;const y=u.getOrigin(f),m=sr(u.getTileSize(f)),v=u.getResolution(f);let x;if(g instanceof qR||g instanceof n2)x=g.getImage();else if(g instanceof cE){if(x=ry(g.getData()),!x)continue}else continue;const b=Math.floor(c*((i[0]-y[0])/v-d[1]*m[0])),E=Math.floor(c*((y[1]-i[1])/v-d[2]*m[1])),T=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(x,b+T,E+T)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(e,t,r,i,s){const o=e.viewState,a=this.getLayer(),u=a.getRenderSource(),c=u.getTileGridForProjection(o.projection),f=Xe(u);f in e.wantedTiles||(e.wantedTiles[f]={});const d=e.wantedTiles[f],g=a.getMapInternal(),y=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),u.zDirection)),m=o.rotation,v=m?lT(o.center,o.resolution,m,e.size):void 0;for(let x=r;x>=y;--x){const b=c.getTileRangeForExtentAndZ(t,x,this.tempTileRange_),E=c.getResolution(x);for(let T=b.minX;T<=b.maxX;++T)for(let C=b.minY;C<=b.maxY;++C){if(m&&!c.tileCoordIntersectsViewport([x,T,C],v))continue;const R=this.getTile(x,T,C,e);if(!R||!n0(i,R,x))continue;const O=R.getKey();if(d[O]=!0,R.getState()===_e.IDLE&&!e.tileQueue.isKeyQueued(O)){const $=kd(x,T,C,this.tempTileCoord_);e.tileQueue.enqueue([R,f,c.getTileCoordCenter($),E])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let u=0;u<a.length;++u){const c=t0(this.getLayer().getSource(),a[u],i,s,o);if(r.containsKey(c)){const f=r.peek(c);if(f.getState()===_e.LOADED)return f.endTransition(Xe(this)),n0(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,u=this.getLayer().getRenderSource(),c=u.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let d=s.minY;d<=s.maxY;++d){const g=t0(u,c,r,f,d);let y=!1;if(a.containsKey(g)){const m=a.peek(g);m.getState()===_e.LOADED&&(n0(i,m,r),y=!0)}y||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,u=e.pixelRatio,c=this.getLayer(),f=c.getSource(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),y=d.getResolution(g),m=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==m&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=m):this.renderedSourceKey_=m;let v=e.extent;const x=f.getTilePixelRatio(u);this.prepareContainer(e,t);const b=this.context.canvas.width,E=this.context.canvas.height,T=r.extent&&Vi(r.extent);T&&(v=Pi(v,Vi(r.extent)));const C=y*b/2/x,R=y*E/2/x,F=[a[0]-C,a[1]-R,a[0]+C,a[1]+R],O={};this.renderedTiles.length=0;const $=c.getPreload();if(e.nextExtent){const V=d.getZForResolution(i.nextResolution,f.zDirection),ne=dE(e,e.nextExtent);this.enqueueTiles(e,ne,V,O,$)}const L=dE(e,v);if(this.enqueueTiles(e,L,g,O,0),$>0&&setTimeout(()=>{this.enqueueTiles(e,L,g-1,O,$-1)},0),!(g in O))return this.container;const N=Xe(this),B=e.time;for(const V of O[g]){const ne=V.getState();if(ne===_e.EMPTY)continue;const re=V.tileCoord;if(ne===_e.LOADED&&V.getAlpha(N,B)===1){V.endTransition(N);continue}if(ne!==_e.ERROR&&(this.renderComplete=!1),this.findStaleTile_(re,O)){B9(O,V,g),e.animate=!0;continue}if(this.findAltTiles_(d,re,g+1,O))continue;const Fe=d.getMinZoom();for(let le=g-1;le>=Fe&&!this.findAltTiles_(d,re,le,O);--le);}const z=y/o*u/x,H=this.getRenderContext(e);ss(this.tempTransform,b/2,E/2,z,z,0,-b/2,-E/2),r.extent&&this.clipUnrotated(H,e,T),f.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e);const Z=Object.keys(O).map(Number);Z.sort(Ji);let G;const W=[],q=[];for(let V=Z.length-1;V>=0;--V){const ne=Z[V],re=f.getTilePixelSize(ne,u,s),ce=d.getResolution(ne)/y,Fe=re[0]*ce*z,le=re[1]*ce*z,Oe=d.getTileCoordForCoordAndZ(qs(F),ne),dt=d.getTileCoordExtent(Oe),ze=kn(this.tempTransform,[x*(dt[0]-F[0])/y,x*(F[3]-dt[3])/y]),Ie=x*f.getGutterForProjection(s);for(const Te of O[ne]){if(Te.getState()!==_e.LOADED)continue;const pt=Te.tileCoord,Gt=Oe[1]-pt[1],Tt=Math.round(ze[0]-(Gt-1)*Fe),en=Oe[2]-pt[2],ge=Math.round(ze[1]-(en-1)*le),$e=Math.round(ze[0]-Gt*Fe),be=Math.round(ze[1]-en*le),ke=Tt-$e,Ze=ge-be,rn=Z.length===1;let gt=!1;G=[$e,be,$e+ke,be,$e+ke,be+Ze,$e,be+Ze];for(let k=0,Qe=W.length;k<Qe;++k)if(!rn&&ne<q[k]){const Be=W[k];wn([$e,be,$e+ke,be+Ze],[Be[0],Be[3],Be[4],Be[7]])&&(gt||(H.save(),gt=!0),H.beginPath(),H.moveTo(G[0],G[1]),H.lineTo(G[2],G[3]),H.lineTo(G[4],G[5]),H.lineTo(G[6],G[7]),H.moveTo(Be[6],Be[7]),H.lineTo(Be[4],Be[5]),H.lineTo(Be[2],Be[3]),H.lineTo(Be[0],Be[1]),H.clip())}W.push(G),q.push(ne),this.drawTile(Te,e,$e,be,ke,Ze,Ie,rn),gt&&H.restore(),this.renderedTiles.unshift(Te),this.updateUsedTiles(e.usedTiles,f,Te)}}if(this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!$s(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=u,this.postRender(this.context,e),r.extent&&H.restore(),H.imageSmoothingEnabled=!0,this.renderComplete){const V=(ne,re)=>{const me=Xe(f),ce=re.wantedTiles[me],Fe=ce?Object.keys(ce).length:0;this.updateCacheSize(Fe),this.tileCache_.expireCache()};e.postRenderFunctions.push(V)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,o,a,u){let c;if(e instanceof cE){if(c=ry(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const f=this.getRenderContext(t),d=Xe(this),g=t.layerStatesArray[t.layerIndex],y=g.opacity*(u?e.getAlpha(d,t.time):1),m=y!==f.globalAlpha;m&&(f.save(),f.globalAlpha=y),f.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,s,o),m&&f.restore(),y!==g.opacity?t.animate=!0:u&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Xe(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const Io={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class U9 extends uu{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Io.PRELOAD)}setPreload(e){this.set(Io.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Io.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Io.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class zp extends U9{constructor(e){super(e)}createRenderer(){return new r2(this,{cacheSize:this.getCacheSize()})}}const G9={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},pE={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class q9 extends r2{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Sr(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,o,a,u){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,o,a,u)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const a=i.viewState.resolution,u=i.viewHints;return(!(u[an.ANIMATING]||u[an.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=a),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),o=i.getRenderOrder()||null,a=e.wantedResolution,u=e.getReplayState(i);if(!u.dirty&&u.renderedResolution===a&&u.renderedRevision==s&&u.renderedRenderOrder==o)return;const c=i.getSource(),f=!!i.getDeclutter(),d=c.getTileGrid(),y=c.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),m=c.getSourceTiles(t,r,e),v=Xe(i);delete e.hitDetectionImageData[v],e.executorGroups[v]=[],u.dirty=!1;for(let x=0,b=m.length;x<b;++x){const E=m[x];if(E.getState()!=_e.LOADED)continue;const T=E.tileCoord,C=d.getTileCoordExtent(T),R=Pi(y,C),F=Mo(R,i.getRenderBuffer()*a,this.tempExtent),O=$s(C,R)?null:F,$=new uR(0,R,a,t),L=G0(a,t),N=function(G,W){let q;const V=G.getStyleFunction()||i.getStyleFunction();if(V&&(q=V(G,a)),q){const ne=this.renderFeature(G,L,q,$,f,W);u.dirty=u.dirty||ne}},B=E.getFeatures();o&&o!==u.renderedRenderOrder&&B.sort(o);for(let G=0,W=B.length;G<W;++G){const q=B[G];(!O||wn(O,q.getGeometry().getExtent()))&&N.call(this,q,G)}const z=$.finish(),H=i.getRenderMode()!=="vector"&&f&&m.length===1?null:R,Z=new cR(H,a,t,c.getOverlaps(),z,i.getRenderBuffer(),!0);e.executorGroups[v].push(Z)}u.renderedRevision=s,u.renderedRenderOrder=o,u.renderedResolution=a}forEachFeatureAtCoordinate(e,t,r,i,s){var T,C;const o=t.viewState.resolution,a=t.viewState.rotation;r=r??0;const u=this.getLayer(),f=u.getSource().getTileGridForProjection(t.viewState.projection),d=T0([e]);Mo(d,o*r,d);const g={},y=function(R,F,O){let $=R.getId();$===void 0&&($=Xe(R));const L=g[$];if(L){if(L!==!0&&O<L.distanceSq){if(O===0)return g[$]=!0,s.splice(s.lastIndexOf(L),1),i(R,u,F);L.geometry=F,L.distanceSq=O}}else{if(O===0)return g[$]=!0,i(R,u,F);s.push(g[$]={feature:R,layer:u,geometry:F,distanceSq:O,callback:i})}},m=this.renderedTiles,v=Xe(u),x=u.getDeclutter(),b=x?(C=(T=t.declutter)==null?void 0:T[x])==null?void 0:C.all().map(R=>R.value):null;let E;e:for(let R=0,F=m.length;R<F;++R){const O=m[R],$=f.getTileCoordExtent(O.wrappedTileCoord);if(!wn($,d))continue;const L=O.executorGroups[v];for(let N=0,B=L.length;N<B;++N)if(E=L[N].forEachFeatureAtCoordinate(e,o,a,r,y,b),E)break e}return E}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),o=this.renderedProjection,a=o.getExtent(),u=this.renderedResolution,c=s.getTileGridForProjection(o),f=kn(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(f,u).toString(),g=this.renderedTiles.find(T=>T.tileCoord.toString()===d&&T.getState()===_e.LOADED);if(!g||g.loadingSourceTiles>0){t([]);return}s.getWrapX()&&o.canWrapX()&&!Os(a,c.getTileCoordExtent(g.tileCoord))&&Ky(f,o);const y=Xe(i),m=c.getTileCoordExtent(g.wrappedTileCoord),v=qs(m),x=[(f[0]-v[0])/u,(v[1]-f[1])/u],b=g.getSourceTiles().reduce((T,C)=>T.concat(C.getFeatures()),[]);let E=g.hitDetectionImageData[y];if(!E){const T=sr(c.getTileSize(c.getZForResolution(u,s.zDirection))),C=this.renderedRotation_,R=[this.getRenderTransform(c.getTileCoordCenter(g.wrappedTileCoord),u,0,zr,T[0]*zr,T[1]*zr,0)];E=hR(T,R,b,i.getStyleFunction(),c.getTileCoordExtent(g.wrappedTileCoord),g.getReplayState(i).renderedResolution,C),g.hitDetectionImageData[y]=E}t(fR(x,b,E))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=s.getZForResolution(this.renderedResolution),a={};return r.forEach(u=>{if(u.tileCoord[0]!==o||u.getState()!==_e.LOADED)return;const c=u.getSourceTiles();for(let f=0,d=c.length;f<d;++f){const g=c[f],y=g.getKey();if(y in a)continue;a[y]=!0;const m=g.tileCoord;if(wn(e,s.getTileCoordExtent(m))){const v=g.getFeatures();if(v)for(let x=0,b=v.length;x<b;++x){const E=v[x],T=E.getGeometry();wn(e,T.getExtent())&&t.push(E)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var g;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[an.ANIMATING]||s[an.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],u=this.getLayer().getDeclutter(),c=u?(g=e.declutter)==null?void 0:g[u]:void 0,f=Xe(this.getLayer()),d=this.renderedTiles;for(let y=0,m=d.length;y<m;++y){const v=d[y],x=v.executorGroups[f];if(x)for(let b=x.length-1;b>=0;--b)x[b].execute(this.context,a,this.getTileRenderTransform(v,e),e.viewState.rotation,o,wd,c)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Xe(this.getLayer()),i=t.reduce((u,c,f)=>(c.executorGroups[r].forEach(d=>u.push({executorGroup:d,index:f})),u),[]),s=i.map(({executorGroup:u})=>u.getDeferredZIndexContexts()),o={};for(let u=0,c=i.length;u<c;++u){const f=i[u].executorGroup.getDeferredZIndexContexts();for(const d in f)o[d]=!0}Object.keys(o).map(Number).sort(Ji).forEach(u=>{s.forEach((c,f)=>{c[u]&&(c[u].forEach(d=>{const{executorGroup:g,index:y}=i[f],m=g.getRenderedContext(),v=m.globalAlpha;m.globalAlpha=this.renderedOpacity_;const x=this.tileClipContexts_[y];x&&x.draw(m),d.draw(m),x&&m.restore(),m.globalAlpha=v,d.clear()}),c[u].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,o=i.resolution,a=i.rotation,u=t.size,c=Math.round(u[0]*r),f=Math.round(u[1]*r),g=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),y=e.tileCoord,m=g.getTileCoordExtent(e.wrappedTileCoord),v=g.getTileCoordExtent(y,this.tempExtent)[0]-m[0];return r_(vm(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,o,a,r,c,f,v))}postRender(e,t){var R;const r=t.viewHints,i=!(r[an.ANIMATING]||r[an.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const u=s.getDeclutter(),c=u?pE[o].filter(F=>!wd.includes(F)):pE[o],f=t.viewState,d=f.rotation,g=s.getSource(),m=g.getTileGridForProjection(f.projection).getZForResolution(f.resolution,g.zDirection),v=this.renderedTiles,x=[],b=[],E=[],T=Xe(s);let C=!0;for(let F=v.length-1;F>=0;--F){const O=v[F];C=C&&!O.getReplayState(s).dirty;const $=O.executorGroups[T].filter(G=>G.hasExecutors(c));if($.length===0)continue;const L=this.getTileRenderTransform(O,t),N=O.tileCoord[0];let B=!1;const z=$[0].getClipCoords(L);let H=e,Z;if(z){Z=new P_,H=Z.getContext();for(let G=0,W=x.length;G<W;++G)if(m!==N&&N<b[G]){const q=x[G];wn([z[0],z[3],z[4],z[7]],[q[0],q[3],q[4],q[7]])&&(B||(H.save(),B=!0),H.beginPath(),H.moveTo(z[0],z[1]),H.lineTo(z[2],z[3]),H.lineTo(z[4],z[5]),H.lineTo(z[6],z[7]),H.moveTo(q[6],q[7]),H.lineTo(q[4],q[5]),H.lineTo(q[2],q[3]),H.lineTo(q[0],q[1]),H.clip())}x.push(z),b.push(N)}for(let G=0,W=$.length;G<W;++G)$[G].execute(e,[e.canvas.width,e.canvas.height],L,d,i,c,(R=t.declutter)==null?void 0:R[u]);B&&(H===e?H.restore():E[F]=Z)}e.globalAlpha=a,this.ready=C,this.tileClipContexts_=E,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,o){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let u=0,c=r.length;u<c;++u)a=bd(i,e,r[u],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=bd(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),o=e.executorGroups[Xe(r)];i.renderedTileRevision=s;const a=e.wrappedTileCoord,u=a[0],c=r.getSource();let f=t.pixelRatio;const g=t.viewState.projection,y=c.getTileGridForProjection(g),m=y.getResolution(e.tileCoord[0]),v=t.pixelRatio/e.wantedResolution*m,x=y.getResolution(u),b=e.getContext();f=Math.round(Math.max(f,v/f));const E=c.getTilePixelSize(u,f,g);b.canvas.width=E[0],b.canvas.height=E[1];const T=f/v;if(T!==1){const O=Gw(this.tmpTransform_);vm(O,T,T),b.setTransform.apply(b,O)}const C=y.getTileCoordExtent(a,this.tempExtent),R=v/x,F=Gw(this.tmpTransform_);vm(F,R,-R),JU(F,-C[0],-C[3]);for(let O=0,$=o.length;O<$;++O)o[O].execute(b,[b.canvas.width*T,b.canvas.height*T],F,0,!0,G9[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class Dl extends I_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";zt(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new q9(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Io.PRELOAD)}getUseInterimTilesOnError(){return this.get(Io.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Io.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Io.USE_INTERIM_TILES_ON_ERROR,e)}}function sy(n){return Array.isArray(n)?Math.min(...n):n}class W9 extends S_{constructor(e,t,r,i,s,o,a){let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const f=c?Pi(r,c):r,d=Wr(f),g=iy(e,t,d,i),y=t2,m=new e2(e,t,f,u,g*y,i),v=m.calculateSourceExtent(),x=Wa(v)?null:o(v,g,s),b=x?Se.IDLE:Se.EMPTY,E=x?x.getPixelRatio():1;super(r,i,E,b),this.targetProj_=t,this.maxSourceExtent_=u,this.triangulation_=m,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=x,this.sourcePixelRatio_=E,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Se.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Se.LOADED){const t=Lt(this.targetExtent_)/this.targetResolution_,r=In(this.targetExtent_)/this.targetResolution_;this.canvas_=QR(t,r,this.sourcePixelRatio_,sy(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Se.IDLE){this.state=Se.LOADING,this.changed();const e=this.sourceImage_.getState();e==Se.LOADED||e==Se.ERROR?this.reproject_():(this.sourceListenerKey_=Ot(this.sourceImage_,Ve.CHANGE,t=>{const r=this.sourceImage_.getState();(r==Se.LOADED||r==Se.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Qt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Df=4,r0={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class j9 extends ai{constructor(e,t){super(e),this.image=t}}class i2 extends fu{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=np(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Oo(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Oo(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&$s(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new W9(s,i,e,t,r,(o,a,u)=>this.getImageInternal(o,a,u,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=H9(e,t,r,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Os(this.wantedExtent_,s)||Os(this.image.getExtent(),s))&&(this.wantedResolution_&&sy(this.wantedResolution_)===o||sy(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new S_(s,o,r,this.loader),this.image.addEventListener(Ve.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case Se.LOADING:this.loading=!0,r=r0.IMAGELOADSTART;break;case Se.LOADED:this.loading=!1,r=r0.IMAGELOADEND;break;case Se.ERROR:this.loading=!1,r=r0.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new j9(r,t))}}function H9(n,e,t,r){const i=e/t,s=Wr(n),o=Co(Lt(n)/i,Df),a=Co(In(n)/i,Df),u=Co((r-1)*o/2,Df),c=o+2*u,f=Co((r-1)*a/2,Df),d=a+2*f;return cd(s,i,0,[c,d])}const vl=[0,0,0],co=5;class $p{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,zt(XB(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,zt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=qs(r)),zt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,zt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:y_,zt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new tv(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,u=i.maxY;a<=u;++a)r([t,s,a])}forEachTileCoordParentTileRange(e,t,r,i){let s,o,a,u=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):u=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=ml(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(u,c,r),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return ml(s,s+1,o,o+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(t===i)return ml(s,o,s,o,r);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,t-i),c=Math.floor(s*u),f=Math.floor(o*u);if(t<i)return ml(c,c,f,f,r);const d=Math.floor(u*(s+1))-1,g=Math.floor(u*(o+1))-1;return ml(c,d,f,g,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,vl);const i=vl[1],s=vl[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,vl);const o=vl[1],a=vl[2];return ml(i,o,s,a,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=sr(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=sr(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,u=o+s[0]*i,c=a+s[1]*i;return zs(o,a,u,c,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),u=this.getOrigin(o),c=sr(this.getTileSize(o),this.tmpSize_);let f=a*(e-u[0])/r/c[0],d=a*(u[1]-t)/r/c[1];return i?(f=Co(f,co)-1,d=Co(d,co)-1):(f=_f(f,co),d=_f(d,co)),kd(o,f,d,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),u=sr(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/u[0],f=(o[1]-t)/a/u[1];return i?(c=Co(c,co)-1,f=Co(f,co)-1):(c=_f(c,co),f=_f(f,co)),kd(r,c,f,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=np(this.resolutions_,e,t||0);return pn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return AT(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function s2(n){let e=n.getDefaultTileGrid();return e||(e=Y9(n),n.setDefaultTileGrid(e)),e}function V9(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=sh(t);if(!Na(s,i)){const o=Lt(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,n.getTileCoordForCoordAndZ(i,r)}return e}function X9(n,e,t,r){r=r!==void 0?r:"top-left";const i=o2(n,e,t);return new $p({extent:n,origin:uU(n,r),resolutions:i,tileSize:t})}function Bp(n){const e=n||{},t=e.extent||jt("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:o2(t,e.maxZoom,e.tileSize,e.maxResolution)};return new $p(r)}function o2(n,e,t,r){e=e!==void 0?e:LT,t=sr(t!==void 0?t:y_);const i=In(n),s=Lt(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const o=e+1,a=new Array(o);for(let u=0;u<o;++u)a[u]=r/Math.pow(2,u);return a}function Y9(n,e,t,r){const i=sh(n);return X9(i,e,t,r)}function sh(n){n=jt(n);let e=n.getExtent();if(!e){const t=180*Do.degrees/n.getMetersPerUnit();e=zs(-t,-t,t,t)}return e}class a2 extends fu{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&sr(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Xe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return Ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:s2(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),o=sr(i.getTileSize(e),this.tmpSize);return s==1?o:p8(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=V9(i,e,r)),$9(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class K9 extends ai{constructor(e,t){super(e),this.tile=t}}function l2(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,o=e.height,a=t.length,u=t[0].byteLength;if(i){const g=new Array(a);for(let m=0;m<a;++m)g[m]=new ImageData(new Uint8ClampedArray(t[m]),s,o);return n(g,r).data.buffer}const c=new Uint8ClampedArray(u),f=new Array(a),d=new Array(a);for(let g=0;g<a;++g)f[g]=new Uint8ClampedArray(t[g]),d[g]=[0,0,0,0];for(let g=0;g<u;g+=4){for(let m=0;m<a;++m){const v=f[m];d[m][0]=v[g],d[m][1]=v[g+1],d[m][2]=v[g+2],d[m][3]=v[g+3]}const y=n(d,r);c[g]=y[0],c[g+1]=y[1],c[g+2]=y[2],c[g+3]=y[3]}return c.buffer}}function Z9(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+l2.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function J9(n,e){const t=l2(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Q9 extends Uc{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Z9(e,this.onWorkerMessage_.bind(this,i));else r[0]=J9(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(u){return u.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let u=0;u<s;++u){const c=u*a,f=[];for(let d=0,g=i.length;d<g;++d)f.push(i[d].slice(c,c+a));this.workers_[u].postMessage({buffers:f,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},f)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const u=this.dataLookup_[a].buffer,c=a*o;r.set(new Uint8ClampedArray(u),c),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const gE={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class mE extends ai{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class u2 extends i2{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=nH(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(Ve.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new nT(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Sr(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:tH(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Sr(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Xe(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let o=0,a=e.sources.length;o<a;++o){const u=e.sources[o],c=u instanceof fu?u:u.getSource();if(!c)continue;const f=(s=c.getAttributions())==null?void 0:s(r);typeof f=="string"?i.push(f):f!==void 0&&i.push(...f)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Q9({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Wr(e);i.size[0]=Math.ceil(Lt(e)/t),i.size[1]=Math.ceil(In(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const o=i.viewState;return o.center=s,o.projection=r,o.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!$s(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=eH(this.layers_[s],e);if(o)r[s]=o;else return}const i={};this.dispatchEvent(new mE(gE.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!$s(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const u=Math.round(Lt(s)/o),c=Math.round(In(s)/o);a=gn(u,c),this.renderedImageCanvas_=new E7(s,o,1,a.canvas)}a.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new mE(gE.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}u2.prototype.dispose;let aa=null;function eH(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i)}if(!aa)aa=gn(r,i,void 0,{willReadFrequently:!0});else{const a=aa.canvas;a.width!==r||a.height!==i?aa=gn(r,i,void 0,{willReadFrequently:!0}):aa.clearRect(0,0,r,i)}return aa.drawImage(o,0,0,r,i),aa.getImageData(0,0,r,i)}function tH(n){return n.map(function(e){return e.getLayerState()})}function nH(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=rH(n[r]);return t}function rH(n){let e;return n instanceof fu?n instanceof a2?e=new zp({source:n}):n instanceof i2&&(e=new JR({source:n})):e=n,e}function iH(n,e,t,r){const i=document.createElement("script"),s="olc_"+Xe(e);function o(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(u){clearTimeout(a),o(),e(u)},document.head.appendChild(i)}const sH=/\{z\}/g,oH=/\{x\}/g,aH=/\{y\}/g,lH=/\{-y\}/g;function uH(n,e,t,r,i){return n.replace(sH,e.toString()).replace(oH,t.toString()).replace(aH,r.toString()).replace(lH,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function cH(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function hH(n,e){return function(t,r,i){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return uH(n,o,t[1],t[2],s)}}function c2(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=hH(n[i],e);return fH(r)}function fH(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=N9(e),s=Pl(i,n.length);return n[s](e,t,r)}}const i0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Up extends a2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Up.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Xe(t),i=t.getState();let s;i==_e.LOADING?(this.tileLoadingKeys_[r]=!0,s=i0.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==_e.ERROR?i0.TILELOADERROR:i==_e.LOADED?i0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new K9(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=cH(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(c2(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class h2 extends Up{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dH,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:qR,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Oo(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Oo(t,e)))return this.tileGrid;const r=Xe(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=s2(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,o){const a=[e,t,r],u=this.getTileCoordForTileUrlFunction(a,s),c=u?this.tileUrlFunction(u,i,s):void 0,f=new this.tileClass(a,c!==void 0?_e.IDLE:_e.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(Ve.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,s){const o=this.getProjection();if(!o||!s||Oo(o,s))return this.getTileInternal(e,t,r,i,o||s);const a=[e,t,r],u=this.getKey(),c=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),d=this.getTileCoordForTileUrlFunction(a,s),g=new n2(o,c,s,f,a,d,this.getTilePixelRatio(i),this.getGutter(),(y,m,v,x)=>this.getTileInternal(y,m,v,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=u,g}getTileInternal(e,t,r,i,s){const o=this.getKey();return this.createTile_(e,t,r,i,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=jt(e);if(r){const i=Xe(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function dH(n,e){n.getImage().src=e}class f2 extends h2{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:jt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)iH(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=jt("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const c=Hc(t,r);i=fU(e.bounds,c)}const s=sh(r),o=e.minzoom||0,a=e.maxzoom||22,u=Bp({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=u,this.tileUrlFunction=c2(e.tiles,u),e.attribution&&!this.getAttributions()){const c=i!==void 0?i:s;this.setAttributions(function(f){return wn(c,f.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Gp extends Up{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||sh(t),i=e.tileGrid||Bp({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:d2,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:WR,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===_e.IDLE){r.setState(_e.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(i),a=i[0],u=s.getResolution(a);Mo(o,-u,o);const c=this.tileGrid,f=c.getExtent();f&&Pi(o,f,o);const d=c.getZForResolution(u,this.zDirection);c.forEachTileCoord(o,d,g=>{const y=this.tileUrlFunction(g,e,t);this.sourceTiles_[y]||(this.sourceTiles_[y]=new this.tileClass(g,y?_e.IDLE:_e.EMPTY,y,this.format_,this.tileLoadFunction));const m=this.sourceTiles_[y];r.sourceTiles.push(m),this.tileKeysBySourceTileUrl_[y]||(this.tileKeysBySourceTileUrl_[y]=[]),this.tileKeysBySourceTileUrl_[y].push(r.getKey());const v=m.getState();if(v<_e.LOADED){const x=b=>{this.handleTileChange(b);const E=m.getState();if(E===_e.LOADED||E===_e.ERROR){const T=m.getKey();T in r.errorTileKeys?m.getState()===_e.LOADED&&delete r.errorTileKeys[T]:r.loadingSourceTiles--,E===_e.ERROR?r.errorTileKeys[T]=!0:m.removeEventListener(Ve.CHANGE,x),r.loadingSourceTiles===0&&r.setState(Fo(r.errorTileKeys)?_e.LOADED:_e.ERROR)}};m.addEventListener(Ve.CHANGE,x),r.loadingSourceTiles++}v===_e.IDLE&&(m.extent=c.getTileCoordExtent(g),m.projection=t,m.resolution=c.getResolution(g[0]),m.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(g=>g.getState()===_e.ERROR)?_e.ERROR:_e.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const o=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const a=this.tileKeysBySourceTileUrl_[o].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(a,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,r,i,s){const o=[e,t,r];let a=this.getTileCoordForTileUrlFunction(o,s);const u=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(s);if(a&&u){const g=c.getTileCoordExtent(a);Mo(g,-c.getResolution(e),g),wn(u,g)||(a=null)}let f=!0;if(a!==null){const g=this.tileGrid,y=c.getResolution(e),m=g.getZForResolution(y,1),v=c.getTileCoordExtent(a);Mo(v,-y,v),g.forEachTileCoord(v,m,x=>{f=f&&!this.tileUrlFunction(x,i,s)})}const d=new S7(o,f?_e.EMPTY:_e.IDLE,a,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return d.key=this.getKey(),d}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.getProjection();zt(i===null||Oo(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const s=this.tileGrid,o=s.getResolutions().slice(),a=o.map(function(f,d){return s.getOrigin(d)}),u=o.map(function(f,d){return s.getTileSize(d)}),c=LT+1;for(let f=o.length;f<c;++f)o.push(o[f-1]/2),a.push(a[f-1]),u.push(u[f-1]);r=new $p({extent:s.getExtent(),origins:a,resolutions:o,tileSizes:u}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=sr(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function d2(n,e){n.setLoader(function(t,r,i){GR(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function pH(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,o=new Uint8ClampedArray(s.length),a=e.resolution*2,u=r-1,c=i-1,f=[0,0,0,0],d=2*Math.PI,g=Math.PI/2,y=Math.PI*e.sunEl/180,m=Math.PI*e.sunAz/180,v=Math.cos(y),x=Math.sin(y),b=e.highlightColor,E=e.shadowColor,T=e.accentColor,C=e.encoding;let R,F,O,$,L,N,B,z,H,Z,G,W,q,V,ne,re,me,ce,Fe,le,Oe,dt;function ze(Ie,Te="mapbox"){if(Te==="mapbox")return(Ie[0]*256*256+Ie[1]*256+Ie[2])*.1-1e4;if(Te==="terrarium")return Ie[0]*256+Ie[1]+Ie[2]/256-32768}for(F=0;F<=c;++F)for(L=F===0?0:F-1,N=F===c?c:F+1,R=0;R<=u;++R)O=R===0?0:R-1,$=R===u?u:R+1,B=(F*r+O)*4,f[0]=s[B],f[1]=s[B+1],f[2]=s[B+2],f[3]=s[B+3],z=e.vert*ze(f,C),B=(F*r+$)*4,f[0]=s[B],f[1]=s[B+1],f[2]=s[B+2],f[3]=s[B+3],H=e.vert*ze(f,C),Z=(H-z)/a,B=(L*r+R)*4,f[0]=s[B],f[1]=s[B+1],f[2]=s[B+2],f[3]=s[B+3],z=e.vert*ze(f,C),B=(N*r+R)*4,f[0]=s[B],f[1]=s[B+1],f[2]=s[B+2],f[3]=s[B+3],H=e.vert*ze(f,C),G=(H-z)/a,q=Math.atan2(G,-Z),q<0?q=g-q:q>g?q=d-q+g:q=g-q,W=Math.atan(Math.sqrt(Z*Z+G*G)),dt=x*Math.cos(W)+v*Math.sin(W)*Math.cos(m-q),V=Math.cos(W),ne=255*dt,Fe=Math.min(Math.max(2*e.sunEl,0),1),le=1.875-e.opacity*1.75,Oe=e.opacity!==.5?g*((Math.pow(le,W)-1)/(Math.pow(le,g)-1)):W,me={r:(1-V)*T.r*Fe*255,g:(1-V)*T.g*Fe*255,b:(1-V)*T.b*Fe*255,a:(1-V)*T.a*Fe*255},re=Math.abs(((q+m)/Math.PI+.5)%2-1),ce={r:(b.r*(1-re)+E.r*re)*ne,g:(b.g*(1-re)+E.g*re)*ne,b:(b.b*(1-re)+E.b*re)*ne,a:(b.a*(1-re)+E.a*re)*ne},B=(F*r+R)*4,o[B]=me.r*(1-re)+ce.r,o[B+1]=me.g*(1-re)+ce.g,o[B+2]=me.b*(1-re)+ce.b,o[B+3]=s[B+3]*e.opacity*Fe*Math.sin(Oe);return new ImageData(o,r,i)}function gH(n,e=512){return n.getExtent()?Bp({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():rs}function p2(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function mH(n,e,t="",r={},i=void 0){let s,o,a,u,c=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,u=a.source||a.layers,r=a):u=t,typeof r=="string"?(s=r,a={}):(s=r.styleUrl,a=r),a.updateSource===!1&&(c=!1),i||(i=a.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:Od(s,a.accessToken),a=p2(s,a)),new Promise(function(f,d){VR(e,a).then(function(g){if(g.version!=8)return d(new Error("glStyle version 8 required."));if(!(n instanceof Qc||n instanceof Dl))return d(new Error("Can only apply to VectorLayer or VectorTileLayer"));const y=n instanceof Dl?"vector":"geojson";if(u?Array.isArray(u)?o=g.layers.find(function(C){return C.id===u[0]}).source:o=u:(o=g.layers.find(function(C){return C.source&&g.sources[C.source].type===y}).source,u=o),!o)return d(new Error(`No ${y} source found in the glStyle.`));function m(){if(!c)return Promise.resolve();if(n instanceof Dl)return y2(g.sources[o],s,a).then(function(O){const $=n.getSource();$?O!==$&&($.setTileUrlFunction(O.getTileUrlFunction()),typeof $.setUrls=="function"&&typeof O.getUrls=="function"&&$.setUrls(O.getUrls()),$.format_||($.format_=O.format_),$.getAttributions()||$.setAttributions(O.getAttributions()),$.getTileLoadFunction()===d2&&$.setTileLoadFunction(O.getTileLoadFunction()),Oo($.getProjection(),O.getProjection())&&($.tileGrid=O.getTileGrid())):n.setSource(O);const L=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&L.getMinZoom()>0&&n.setMaxResolution(ec(Math.max(0,L.getMinZoom()-1e-12),L.getResolutions()))});const C=g.sources[o];let R=n.getSource();(!R||R.get("mapbox-source")!==C)&&(R=x2(C,s,a));const F=n.getSource();return F?R!==F&&(F.getAttributions()||F.setAttributions(R.getAttributions()),F.format_||(F.format_=R.getFormat()),F.url_=R.getUrl()):n.setSource(R),Promise.resolve()}let v,x;const b={},E={};function T(){if(!x&&(!g.sprite||b)){if(a.projection&&!i){const O=jt(a.projection).getUnits();O!=="m"&&(i=rs.map($=>$/Do[O]))}let C;const R=n.getSource();R instanceof Gp&&R.format_ instanceof av&&(C=R.format_.layerName_),x=U7(n,g,u,i,b,E,(F,O=a.webfonts)=>k7(F,O),a.getImage,C),n.getStyle()?m().then(f).catch(d):d(new Error(`Nothing to show for source [${o}]`))}else x?(n.setStyle(x),m().then(f).catch(d)):d(new Error("Something went wrong trying to apply style."))}if(g.sprite){const C=T7(g.sprite,a.accessToken,s||location.href);v=window.devicePixelRatio>=1.5?.5:1;const R=v==.5?"@2x":"";Promise.all(C.map(function(F){const O=new URL(F.url);let $=O.origin+O.pathname+R+".json"+O.search;return new Promise(function(L,N){nu("Sprite",$,a).then(L).catch(function(B){$=O.origin+O.pathname+".json"+O.search,nu("Sprite",$,a).then(L).catch(N)})}).then(function(L){L===void 0&&d(new Error("No sprites found."));let N;if(N=O.origin+O.pathname+R+".png"+O.search,a.transformRequest){const B=a.transformRequest(N,"SpriteImage")||N;(B instanceof Request||B instanceof Promise)&&(N=B)}E[F.id]=N;for(const B in L){const z=F.id=="default"?B:`${F.id}:${B}`;b[z]=L[B]}}).catch(function(L){d(new Error(`Sprites cannot be loaded: ${$}: ${L.message}`))})})).then(T).catch(d)}else T()}).catch(d)})}function g2(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function yH(n,e){const t=n.bounds;if(t){const r=Kl([t[0],t[1]],e),i=Kl([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return jt(e).getExtent()}function m2(n,e,t){const r=new f2({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),o=jt(t.projection||"EPSG:3857"),a=yH(i,o),u=o.getExtent(),c=i.minzoom||0,f=i.maxzoom||22,d={attributions:r.getAttributions(),projection:o,tileGrid:new $p({origin:u?qs(u):s.getOrigin(0),extent:a||s.getExtent(),minZoom:c,resolutions:gH(o,e.tileSize).slice(0,f+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?d.urls=i.tiles:d.url=i.tiles,d}function _H(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},o=n.paint||{};i.paint=o,qr.zoom=iv(e,t.resolutions||rs),qr.distanceFromCenter=0;let a;const u=Ae(i,"paint","background-color",Ti,r);return o["background-opacity"]!==void 0&&(a=Ae(i,"paint","background-opacity",Ti,r)),s.visibility=="none"?void 0:go(u,a)}function vH(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new uu({source:new fu({}),render(i){const s=_H(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function y2(n,e,t){return new Promise(function(r,i){XR(n,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=m2(n,s,t);a.tileLoadFunction=o,a.format=new av({layerName:"mvt:layer"});const u=new Gp(a);u.set("mapbox-source",n),r(u)}).catch(i)})}function xH(n,e,t){const r=new Dl({declutter:!0,visible:!1});return y2(n,e,t).then(function(i){r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function _2(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function wH(n,e,t){return new Promise(function(r,i){XR(n,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=new f2({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});a.tileGrid=m2(n,s,t).tileGrid,t.projection&&(a.projection=jt(t.projection));const u=a.getTileUrlFunction();o&&a.setTileLoadFunction(o),a.setTileUrlFunction(function(c,f,d){const g=_2(d);let y=u(c,f,d);if(y.indexOf(g)!=-1){const m=a.getTileGrid().getTileCoordExtent(c);y=y.replace(g,m.toString())}return y}),a.set("mapbox-source",n),r(a)}).catch(function(s){i(s)})})}function v2(n,e,t){const r=new zp;return wH(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function bH(n,e,t){const r=v2(n,e,t);return new JR({source:new u2({operationType:"image",operation:pH,sources:[r]})})}function x2(n,e,t){const r=t.projection?new oE({dataProjection:t.projection}):new oE,i=n.data,s={};if(typeof i=="string"){const[a]=qf(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const c=(d,g,y)=>{const m=_2(y);return a.replace(m,`${d.join(",")}`)},f=new sc({attributions:n.attribution,format:r,loader:(d,g,y,m,v)=>{const x=typeof c=="function"?c(d,g,y):c;nu("GeoJSON",x,t).then(b=>{const E=f.getFormat().readFeatures(b,{featureProjection:y});f.addFeatures(E),m(E)}).catch(b=>{f.removeLoadedExtent(d),v()})},strategy:b7});return f.set("mapbox-source",n),f}const u=new sc({attributions:n.attribution,format:r,url:a,loader:(c,f,d,g,y)=>{nu("GeoJSON",a,t).then(m=>{const v=u.getFormat().readFeatures(m,{featureProjection:d});u.addFeatures(v),g(v)}).catch(m=>{u.removeLoadedExtent(c),y()})}});return u}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const o=new sc(Object.assign({attributions:n.attribution,format:r},s));return o.set("mapbox-source",n),o}function EH(n,e,t){return new Qc({declutter:!0,source:x2(n,e,t),visible:!1})}function CH(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],SH(n,e,r,t))}}function SH(n,e,t,r){qr.zoom=t,qr.distanceFromCenter=0;const i=Ae(n,"paint","raster-opacity",Ti,r);e.setOpacity(i)}function TH(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=yR(r.layers),s=n.get("mapbox-layers"),o=i.filter(function(a){return s.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==o&&n.setVisible(o)}n.on("change",t),t()}function RH(n,e,t,r){const i=HR(n),s=n.layers,o=t.type,a=t.source||g2(s,t.ref),u=n.sources[a];let c;if(o=="background")c=vH(t,r,i);else if(u.type=="vector")c=xH(u,e,r);else if(u.type=="raster")c=v2(u,e,r),c.setVisible(t.layout?t.layout.visibility!=="none":!0),c.on("prerender",CH(t,c,i));else if(u.type=="geojson")c=EH(u,e,r);else if(u.type=="raster-dem"&&t.type=="hillshade"){const d=bH(u,e,r);c=d,d.getSource().on("beforeoperations",function(g){const y=g.data;y.resolution=O0(r.projection||"EPSG:3857",g.resolution,Wr(g.extent),"m"),qr.zoom=iv(g.resolution,r.resolutions||rs),qr.distanceFromCenter=0,y.encoding=u.encoding,y.vert=5*Ae(t,"paint","hillshade-exaggeration",Ti,i),y.sunAz=Ae(t,"paint","hillshade-illumination-direction",Ti,i),y.sunEl=35,y.opacity=.3,y.highlightColor=Ae(t,"paint","hillshade-highlight-color",Ti,i),y.shadowColor=Ae(t,"paint","hillshade-shadow-color",Ti,i),y.accentColor=Ae(t,"paint","hillshade-accent-color",Ti,i)}),c.setVisible(t.layout?t.layout.visibility!=="none":!0)}const f=a;return c&&c.set("mapbox-source",f),c}function yE(n,e,t,r){const i=[];let s=null;if(e instanceof xp){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const d=r.projection?jt(r.projection):s.getProjection();s=new bi(Object.assign(s.getProperties(),{maxResolution:rs[0]/Do[d.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(Kl(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(rs[0]/Do[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const o=n.layers;let a=[],u,c,f;for(let d=0,g=o.length;d<g;++d){const y=o[d],m=y.type;if(m=="heatmap"){console.debug(`layers[${d}].type "${m}" not supported`);continue}else f=y.source||g2(o,y.ref),(!f||f!=c)&&(a.length&&(i.push(vE(u,a,n,t,e,r)),a=[]),u=RH(n,t,y,r),u instanceof Qc||u instanceof Dl||(a=[]),c=u.get("mapbox-source")),a.push(y.id)}return i.push(vE(u,a,n,t,e,r)),Promise.all(i)}function _E(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new xp({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:Od(e,t.accessToken);t=p2(s,t),r=new Promise(function(o,a){VR(e,t).then(function(u){yE(u,i,s,t).then(function(){o(i)}).catch(a)}).catch(function(u){a(new Error(`Could not load ${e}: ${u.message}`))})})}else r=new Promise(function(s,o){yE(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:Od(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(o)});return r}function vE(n,e,t,r,i,s={}){let o=24,a=0;const u=t.layers;for(let c=0,f=u.length;c<f;++c){const d=u[c];e.indexOf(d.id)!==-1&&(o=Math.min("minzoom"in d?d.minzoom:0,o),a=Math.max("maxzoom"in d?d.maxzoom:24,a))}return new Promise(function(c,f){const d=function(){const y=n.getSource();if(!y||y.getState()==="error"){f(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in y){const m=y.getTileGrid();if(m){const v=m.getMinZoom();(o>0||v>0)&&n.setMaxResolution(Math.min(ec(Math.max(0,o-1e-12),rs),ec(Math.max(0,v-1e-12),m.getResolutions()))),a<24&&n.setMinResolution(ec(a,rs))}}else o>0&&n.setMaxResolution(ec(Math.max(0,o-1e-12),rs));y instanceof sc||y instanceof Gp?mH(n,t,e,Object.assign({styleUrl:r},s)).then(function(){TH(n,i),c()}).catch(f):c()};n.set("mapbox-layers",e);const g=i.getLayers();g.getArray().indexOf(n)===-1&&g.push(n),n.getSource()?d():n.once("change:source",d)})}class w2 extends h2{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:Bp({extent:sh(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const IH='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class AH extends w2{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[IH];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const PH=()=>n=>{var t;return((t=n.getGeometry())==null?void 0:t.getType())==="Point"?new Rn({image:new Go({radius:6,fill:new dr({color:"#FF6600"}),stroke:new pr({color:"#fff",width:2})})}):new Rn({stroke:new pr({color:"#FF6600",width:2}),fill:new dr({color:"rgba(255, 102, 0, 0.2)"})})},MH=n=>{const e=new sc({features:(n.data??[]).map(r=>{let i;if(r.type==="Point"){const o=r.coordinates;i=new os(Kl(o))}else i=new oi(r.coordinates).transform("EPSG:4326","EPSG:3857");const s=new Bs({geometry:i,id:r.id,...r.meta});return r.label&&s.set("label",r.label),s})}),t=new Qc({source:e,visible:n.visible??!0,style:n.style??PH(),zIndex:n.zIndex??10});return t.set("id",n.id),t.set("kind",n.kind),t},OH=n=>{switch(n.provider){case"mapbox":case"maptiler":const e=new No;return _E(e,n.styleUrl||n.url,{accessToken:n.accessToken}),e.set("id",n.id),e.set("kind",n.kind),e.set("label",n.label),Wf(e,{visible:!!n.visible,label:n.label,image:n.previewImage});case"arcgis":const t=new Dl({source:new Gp({url:n.url+"/tile/{z}/{y}/{x}.pbf",format:new av}),visible:n.visible!==!1});return t.set("id",n.id),t.set("kind",n.kind),t.set("label",n.label),Wf(t,{visible:!!n.visible,label:n.label,image:n.previewImage});case"custom":const r=new No;return _E(r,n.styleUrl||n.url,{accessToken:n.accessToken}),r.set("id",n.id),r.set("kind",n.kind),r.set("label",n.label),Wf(r,{visible:!!n.visible,label:n.label,image:n.previewImage});default:throw new Error(`Unknown vector tile provider: ${n.provider}`)}},LH=n=>{const e=new zp({visible:n.visible??!0,source:new w2({url:n.url,projection:"EPSG:3857"})});e.set("id",n.id),e.set("kind",n.kind),e.set("label",n.label);const{previewImage:t,label:r,visible:i}=n;return Wf(e,{image:t,label:r,visible:!!i})},Wf=(n,e)=>(n.set("meta",e),n),Fd=n=>n.get("meta"),oy="marker-layer",kH=(n=2,e=[0,0])=>(e||console.info("Center coordinates not set, using default"),new bi({zoom:n,center:Kl(e),minZoom:1,maxZoom:18})),xE=["fullscreenchange","webkitfullscreenchange"],wE={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FH extends pp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"‚§¢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const r=e.labelActive!==void 0?e.labelActive:"√ó";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const i=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ve.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Xc} ${dp}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(bE(t))if(EE(t))NH(t);else{let r;this.source_?r=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:r=e.getTargetElement(),this.keys_?DH(r):b2(r)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=EE(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(md(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(wE.ENTERFULLSCREEN)):(md(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(wE.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(jn.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(jn.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let r=0,i=e.length;r<i;++r)Qt(e[r]);e.length=0;const t=this.getMap();if(t){const r=t.getOwnerDocument();bE(r)?this.element.classList.remove(Kw):this.element.classList.add(Kw);for(let i=0,s=xE.length;i<s;++i)e.push(Ot(r,xE[i],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function bE(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function EE(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function b2(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function DH(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():b2(n)}function NH(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}const E2=({zoom:n,center:e,onFeatureClick:t,layersRef:r,mapInstanceRef:i,controls:s})=>{const o=ie.useRef(null),a=ie.useRef(kH(n,e));return ie.useEffect(()=>{if(!o.current||r.current.length===0)return;const u=DT({zoom:!1,rotate:!1,attribution:!0});s!=null&&s.showZoom&&u.push(new FT),s!=null&&s.showRotate&&u.push(new kT),s!=null&&s.showFullScreen&&u.push(new FH),i.current=new xp({target:o.current,controls:u,layers:r.current,view:a.current}),i.current.getLayers().forEach(d=>{if("getSource"in d&&typeof d.getSource=="function"){const g=d.getSource();g==null||g.on("tileloaderror",y=>console.warn("Tile error",y))}});const c=mR(r.current,oy);if(!c){console.debug("No marker layer configured");return}const f=Qq({map:i.current,layer:c,onSelect:d=>{const g=d.map(y=>{var m;return(m=y.getId)==null?void 0:m.call(y)}).filter(y=>typeof y=="string");d.length===1?Uf(i.current,d[0]):aR(i.current,d),t&&t(g)}});return()=>{var d,g;(d=i.current)==null||d.removeInteraction(f),(g=i.current)==null||g.setTarget(void 0)}},[r.current,n,e]),Q("div",{id:"TelicentMap",className:"map-container",style:{width:"100%",height:"100%"},ref:o})};E2.__docgenInfo={description:"",methods:[],displayName:"MapCanvasV2",props:{layersRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<BaseLayer[]>",elements:[{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"}]},description:""},mapInstanceRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<Map | null>",elements:[{name:"union",raw:"Map | null",elements:[{name:"Map"},{name:"null"}]}]},description:""},onFeatureClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},zoom:{required:!0,tsType:{name:"number"},description:""},center:{required:!0,tsType:{name:"Coordinate"},description:""},controls:{required:!1,tsType:{name:"Partial",elements:[{name:"MapControlsConfig"}],raw:"Partial<MapControlsConfig>"},description:""}}};const C2=({data:n,anchorEl:e,onClickDropdown:t,sx:r,selectedIndex:i,variant:s,color:o})=>{const a=ki(),u=!!e,c=u?"layer-selector-popover":void 0;if(!n)return null;const f=ie.useMemo(()=>Fd(n[i]),[i]);return rt(ko,{id:"layer-selector",size:"large","aria-describedby":c,onClick:t,sx:r,variant:s,color:o,children:[Q(iu,{borderColor:a.palette.primary.main,src:f.image,alt:f.label,title:f.label}),Q(Gs,{icon:u?yy:_y})]})},S2=({data:n,anchorEl:e,onCloseDropdown:t,selectedIndex:r,onListItemClick:i})=>{const s=ki(),o=!!e;return Q(SC,{id:o?"layer-selector-popover":void 0,open:o,anchorEl:e,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Q(Ud,{direction:"column",children:n.filter(u=>{var c;return(c=u.get("kind"))==null?void 0:c.startsWith("base")}).map((u,c)=>{const f=Fd(u);return Q(lc,{alignContent:"flex-start",children:rt(ko,{onClick:()=>i(f.label),variant:"text",sx:{width:"100%",justifyContent:"flex-start"},children:[Q(iu,{borderColor:c===r?s.palette.primary.main:"transparent",src:f.image,role:"presentation",title:f.label}),Q(Yi,{textTransform:"capitalize",variant:"body2",children:f.label})]},f.label)},f.label)})})})},T2=({layersRef:n,style:e={}})=>{var f;const[t,r]=ie.useState(null),i=n.current.findIndex(d=>{var g;return(g=Fd(d))==null?void 0:g.visible}),[s,o]=ie.useState(i!==-1?i:0),a=d=>{r(d.currentTarget)},u=()=>{r(null)},c=d=>{n.current.forEach((g,y)=>{const m=Fd(g);g.get("kind")!=="overlay-vector"&&(g.setVisible((m==null?void 0:m.label)===d),(m==null?void 0:m.label)===d&&o(y))})};return((f=n.current)==null?void 0:f.length)<=1?null:rt("div",{id:"layer-selector",style:{position:"absolute",bottom:0,...e},children:[Q(C2,{anchorEl:t,onClickDropdown:a,variant:"text",data:n.current,selectedIndex:s}),Q(S2,{anchorEl:t,onCloseDropdown:u,onListItemClick:c,data:n.current,selectedIndex:s})]})};C2.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalButton",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]};S2.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalPopOverV2",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => void",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"void"}}},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]};T2.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorV2",props:{layersRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<BaseLayer[]>",elements:[{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"}]},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"",defaultValue:{value:"{}",computed:!1}}}};function zH(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function kc(n,e,t,r){this.message=n,this.expected=e,this.found=t,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,kc)}zH(kc,Error);kc.buildMessage=function(n,e){var t={literal:function(c){return'"'+i(c.text)+'"'},class:function(c){var f="",d;for(d=0;d<c.parts.length;d++)f+=c.parts[d]instanceof Array?s(c.parts[d][0])+"-"+s(c.parts[d][1]):s(c.parts[d]);return"["+(c.inverted?"^":"")+f+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function i(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function o(c){return t[c.type](c)}function a(c){var f=new Array(c.length),d,g;for(d=0;d<c.length;d++)f[d]=o(c[d]);if(f.sort(),f.length>0){for(d=1,g=1;d<f.length;d++)f[d-1]!==f[d]&&(f[g]=f[d],g++);f.length=g}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function u(c){return c?'"'+i(c)+'"':"end of input"}return"Expected "+a(n)+" but "+u(e)+" found."};function $H(n,e){e=e!==void 0?e:{};var t={},r={svg_path:Ue},i=Ue,s=function(S){if(!S)return[];for(var A=[],U=0;U<S.length;U++)A=A.concat.apply(A,S[U]);var M=A[0];return M&&M.code=="m"&&(delete M.relative,M.code="M"),A},o=function(S,A){return Xp(S,A)},a=/^[Mm]/,u=Et(["M","m"],!1,!1),c=function(S,A,U){var M=js(S,[A]);return U&&(M=M.concat(js(S=="M"?"L":"l",U[1]))),M},f=/^[Zz]/,d=Et(["Z","z"],!1,!1),g=function(){return js("Z")},y=/^[Ll]/,m=Et(["L","l"],!1,!1),v=function(S,A){return js(S,A)},x=/^[Hh]/,b=Et(["H","h"],!1,!1),E=function(S,A){return js(S,A.map(function(U){return{x:U}}))},T=/^[Vv]/,C=Et(["V","v"],!1,!1),R=function(S,A){return js(S,A.map(function(U){return{y:U}}))},F=/^[Cc]/,O=Et(["C","c"],!1,!1),$=function(S,A,U){return{x1:S.x,y1:S.y,x2:A.x,y2:A.y,x:U.x,y:U.y}},L=/^[Ss]/,N=Et(["S","s"],!1,!1),B=function(S,A){return{x2:S.x,y2:S.y,x:A.x,y:A.y}},z=/^[Qq]/,H=Et(["Q","q"],!1,!1),Z=function(S,A){return{x1:S.x,y1:S.y,x:A.x,y:A.y}},G=/^[Tt]/,W=Et(["T","t"],!1,!1),q=/^[Aa]/,V=Et(["A","a"],!1,!1),ne=function(S,A,U,M,Y,pe){return{rx:S,ry:A,xAxisRotation:U,largeArc:M,sweep:Y,x:pe.x,y:pe.y}},re=function(S,A){return{x:S,y:A}},me=function(S){return S*1},ce=function(S){return S.join("")*1},Fe=/^[01]/,le=Et(["0","1"],!1,!1),Oe=function(S){return S=="1"},dt=function(){return""},ze=",",Ie=un(",",!1),Te=function(S){return S.join("")},pt=".",Gt=un(".",!1),Tt=/^[eE]/,en=Et(["e","E"],!1,!1),ge=/^[+\-]/,$e=Et(["+","-"],!1,!1),be=/^[0-9]/,ke=Et([["0","9"]],!1,!1),Ze=function(S){return S.join("")},rn=/^[ \t\n\r]/,gt=Et([" ","	",`
`,"\r"],!1,!1),k=0,Qe=[{line:1,column:1}],Be=0,En=[],Ht;if("startRule"in e){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=r[e.startRule]}function un(S,A){return{type:"literal",text:S,ignoreCase:A}}function Et(S,A,U){return{type:"class",parts:S,inverted:A,ignoreCase:U}}function He(){return{type:"end"}}function Pe(S){var A=Qe[S],U;if(A)return A;for(U=S-1;!Qe[U];)U--;for(A=Qe[U],A={line:A.line,column:A.column};U<S;)n.charCodeAt(U)===10?(A.line++,A.column=1):A.column++,U++;return Qe[S]=A,A}function Le(S,A){var U=Pe(S),M=Pe(A);return{start:{offset:S,line:U.line,column:U.column},end:{offset:A,line:M.line,column:M.column}}}function Ce(S){k<Be||(k>Be&&(Be=k,En=[]),En.push(S))}function xt(S,A,U){return new kc(kc.buildMessage(S,A),S,A,U)}function Ue(){var S,A,U,M,Y;for(S=k,A=[],U=tt();U!==t;)A.push(U),U=tt();if(A!==t)if(U=Ge(),U===t&&(U=null),U!==t){for(M=[],Y=tt();Y!==t;)M.push(Y),Y=tt();M!==t?(A=s(U),S=A):(k=S,S=t)}else k=S,S=t;else k=S,S=t;return S}function Ge(){var S,A,U,M,Y,pe;if(S=k,A=et(),A!==t){for(U=[],M=k,Y=[],pe=tt();pe!==t;)Y.push(pe),pe=tt();for(Y!==t?(pe=et(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;){for(U.push(M),M=k,Y=[],pe=tt();pe!==t;)Y.push(pe),pe=tt();Y!==t?(pe=et(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t)}U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function et(){var S,A,U,M,Y,pe;if(S=k,A=Kt(),A!==t){for(U=[],M=k,Y=[],pe=tt();pe!==t;)Y.push(pe),pe=tt();for(Y!==t?(pe=Rt(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;){for(U.push(M),M=k,Y=[],pe=tt();pe!==t;)Y.push(pe),pe=tt();Y!==t?(pe=Rt(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t)}U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Rt(){var S;return S=mn(),S===t&&(S=Dt(),S===t&&(S=ot(),S===t&&(S=Yt(),S===t&&(S=kt(),S===t&&(S=cn(),S===t&&(S=Dn(),S===t&&(S=It(),S===t&&(S=Ni())))))))),S}function Kt(){var S,A,U,M,Y,pe,Hs;if(S=k,a.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(u)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=_n(),M!==t?(Y=k,pe=J(),pe===t&&(pe=null),pe!==t?(Hs=Nt(),Hs!==t?(pe=[pe,Hs],Y=pe):(k=Y,Y=t)):(k=Y,Y=t),Y===t&&(Y=null),Y!==t?(A=c(A,M,Y),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function mn(){var S,A;return S=k,f.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(d)),A!==t&&(A=g()),S=A,S}function Dt(){var S,A,U,M;if(S=k,y.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(m)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=Nt(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function Nt(){var S,A,U,M,Y,pe;if(S=k,A=_n(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=_n(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=_n(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function ot(){var S,A,U,M;if(S=k,x.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(b)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=Ct(),M!==t?(A=E(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function Ct(){var S,A,U,M,Y,pe;if(S=k,A=gr(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=gr(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=gr(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Yt(){var S,A,U,M;if(S=k,T.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(C)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=Ct(),M!==t?(A=R(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function kt(){var S,A,U,M;if(S=k,F.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(O)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=$t(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function $t(){var S,A,U,M,Y,pe;if(S=k,A=Mn(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Mn(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Mn(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Mn(){var S,A,U,M,Y,pe;return S=k,A=_n(),A!==t?(U=J(),U===t&&(U=null),U!==t?(M=_n(),M!==t?(Y=J(),Y===t&&(Y=null),Y!==t?(pe=_n(),pe!==t?(A=$(A,M,pe),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t),S}function cn(){var S,A,U,M;if(S=k,L.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(N)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=yn(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function yn(){var S,A,U,M,Y,pe;if(S=k,A=Zt(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Zt(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Zt(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Zt(){var S,A,U,M;return S=k,A=_n(),A!==t?(U=J(),U===t&&(U=null),U!==t?(M=_n(),M!==t?(A=B(A,M),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t),S}function Dn(){var S,A,U,M;if(S=k,z.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(H)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=hn(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function hn(){var S,A,U,M,Y,pe;if(S=k,A=Ft(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Ft(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=Ft(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Ft(){var S,A,U,M;return S=k,A=_n(),A!==t?(U=J(),U===t&&(U=null),U!==t?(M=_n(),M!==t?(A=Z(A,M),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t),S}function It(){var S,A,U,M;if(S=k,G.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(W)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=Cn(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function Cn(){var S,A,U,M,Y,pe;if(S=k,A=_n(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=_n(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=_n(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function Ni(){var S,A,U,M;if(S=k,q.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(V)),A!==t){for(U=[],M=tt();M!==t;)U.push(M),M=tt();U!==t?(M=li(),M!==t?(A=v(A,M),S=A):(k=S,S=t)):(k=S,S=t)}else k=S,S=t;return S}function li(){var S,A,U,M,Y,pe;if(S=k,A=ui(),A!==t){for(U=[],M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=ui(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);M!==t;)U.push(M),M=k,Y=J(),Y===t&&(Y=null),Y!==t?(pe=ui(),pe!==t?(Y=[Y,pe],M=Y):(k=M,M=t)):(k=M,M=t);U!==t?(A=o(A,U),S=A):(k=S,S=t)}else k=S,S=t;return S}function ui(){var S,A,U,M,Y,pe,Hs,gu,Wo,Xa,jo,Ho;return S=k,A=ci(),A!==t?(U=J(),U===t&&(U=null),U!==t?(M=ci(),M!==t?(Y=J(),Y===t&&(Y=null),Y!==t?(pe=gr(),pe!==t?(Hs=J(),Hs!==t?(gu=oe(),gu!==t?(Wo=J(),Wo===t&&(Wo=null),Wo!==t?(Xa=oe(),Xa!==t?(jo=J(),jo===t&&(jo=null),jo!==t?(Ho=_n(),Ho!==t?(A=ne(A,M,pe,gu,Xa,Ho),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t)):(k=S,S=t),S}function _n(){var S,A,U,M;return S=k,A=gr(),A!==t?(U=J(),U===t&&(U=null),U!==t?(M=gr(),M!==t?(A=re(A,M),S=A):(k=S,S=t)):(k=S,S=t)):(k=S,S=t),S}function ci(){var S,A;return S=k,A=Ne(),A===t&&(A=On()),A!==t&&(A=me(A)),S=A,S}function gr(){var S,A,U,M;return S=k,A=k,U=_t(),U===t&&(U=null),U!==t?(M=Ne(),M!==t?(U=[U,M],A=U):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,U=_t(),U===t&&(U=null),U!==t?(M=On(),M!==t?(U=[U,M],A=U):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=ce(A)),S=A,S}function oe(){var S,A;return S=k,Fe.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(le)),A!==t&&(A=Oe(A)),S=A,S}function J(){var S,A,U,M,Y;if(S=k,A=[],U=tt(),U!==t)for(;U!==t;)A.push(U),U=tt();else A=t;if(A!==t)if(U=we(),U===t&&(U=null),U!==t){for(M=[],Y=tt();Y!==t;)M.push(Y),Y=tt();M!==t?(A=[A,U,M],S=A):(k=S,S=t)}else k=S,S=t;else k=S,S=t;if(S===t){if(S=k,A=k,U=we(),U!==t){for(M=[],Y=tt();Y!==t;)M.push(Y),Y=tt();M!==t?(U=[U,M],A=U):(k=A,A=t)}else k=A,A=t;A!==t&&(A=dt()),S=A}return S}function we(){var S;return n.charCodeAt(k)===44?(S=ze,k++):(S=t,Ce(Ie)),S}function Ne(){var S,A,U,M;return S=k,A=k,U=wt(),U!==t?(M=Re(),M===t&&(M=null),M!==t?(U=[U,M],A=U):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,U=On(),U!==t?(M=Re(),M!==t?(U=[U,M],A=U):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=Te(A)),S=A,S}function wt(){var S,A,U,M,Y;return S=k,A=k,U=On(),U===t&&(U=null),U!==t?(n.charCodeAt(k)===46?(M=pt,k++):(M=t,Ce(Gt)),M!==t?(Y=On(),Y!==t?(U=[U,M,Y],A=U):(k=A,A=t)):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,U=On(),U!==t?(n.charCodeAt(k)===46?(M=pt,k++):(M=t,Ce(Gt)),M!==t?(U=[U,M],A=U):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=Te(A)),S=A,S}function Re(){var S,A,U,M,Y;return S=k,A=k,Tt.test(n.charAt(k))?(U=n.charAt(k),k++):(U=t,Ce(en)),U!==t?(M=_t(),M===t&&(M=null),M!==t?(Y=On(),Y!==t?(U=[U,M,Y],A=U):(k=A,A=t)):(k=A,A=t)):(k=A,A=t),A!==t&&(A=Te(A)),S=A,S}function _t(){var S;return ge.test(n.charAt(k))?(S=n.charAt(k),k++):(S=t,Ce($e)),S}function On(){var S,A,U;if(S=k,A=[],be.test(n.charAt(k))?(U=n.charAt(k),k++):(U=t,Ce(ke)),U!==t)for(;U!==t;)A.push(U),be.test(n.charAt(k))?(U=n.charAt(k),k++):(U=t,Ce(ke));else A=t;return A!==t&&(A=Ze(A)),S=A,S}function tt(){var S,A;return S=k,rn.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ce(gt)),A!==t&&(A=dt()),S=A,S}function Xp(S,A){if(!A)return[S];for(var U=[S],M=0,Y=A.length;M<Y;M++)U[M+1]=A[M][1];return U}var fs={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var ch in fs)fs[ch.toUpperCase()]=fs[ch];function js(S,A){A||(A=[{}]);for(var U=A.length;U--;){var M={code:S,command:fs[S]};S==S.toLowerCase()&&(M.relative=!0);for(var Y in A[U])M[Y]=A[U][Y];A[U]=M}return A}if(Ht=i(),Ht!==t&&k===n.length)return Ht;throw Ht!==t&&k<n.length&&Ce(He()),xt(En,Be<n.length?n.charAt(Be):null,Be<n.length?Le(Be,Be+1):Le(Be,Be))}var BH={parse:$H},Dd=BH.parse;Dd.parseSVG=Dd;Dd.makeAbsolute=UH;var CE=Dd;function UH(n){var e,t={x:0,y:0},r={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(i){i.command==="moveto"&&(e=i),i.x0=t.x,i.y0=t.y;for(var s in r)s in i&&(i[s]+=i.relative?i[r[s]]:0);"x"in i||(i.x=t.x),"y"in i||(i.y=t.y),i.relative=!1,i.code=i.code.toUpperCase(),i.command=="closepath"&&(i.x=e.x,i.y=e.y),t=i}),n}const SE=new Map,GH=n=>`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,qH=({size:n=28,color:e="#FF6600",innerSvg:t})=>`
<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24">
  <path d="M12 2C8 2 5 5 5 9c0 5 7 13 7 13s7-8 7-13c0-4-3-7-7-7z"
        fill="${e}" stroke="${e}" stroke-width="2"/>
    ${t}
</svg>
`,WH=n=>{const e=n.match(/<path[^>]*d="([^"]+)"/);if(e)return e[1];const t=n.match(/M[\s\S]+/);if(t)return t[0];throw new Error("No path data found in SVG")},jH=n=>{const e=CE.makeAbsolute(CE.parseSVG(n));let t=1/0,r=1/0,i=-1/0,s=-1/0;return e.forEach(o=>{const a=[];"x"in o&&"y"in o&&a.push([o.x,o.y]),"x1"in o&&"y1"in o&&a.push([o.x1,o.y1]),"x2"in o&&"y2"in o&&a.push([o.x2,o.y2]),a.forEach(([u,c])=>{u!=null&&c!=null&&(t=Math.min(t,u),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,c))})}),{minX:t,minY:r,maxX:i,maxY:s,width:i-t,height:s-r}},lv=(n,e="#F092D5",t=24,r=.4)=>{const i=WH(n),s=jH(i),o=t/512*r,a=s.minX+s.width/2,u=s.minY+s.height/2,c=t/2;return`<g transform="translate(${c},${c}) scale(${o}) translate(${-a},${-u})">
    <path d="${i}" fill="${e}"/>
  </g>`},HH=({size:n=28,backgroundColor:e="#FF6600",color:t="#fff",strokeWidth:r=2,innerSvg:i})=>{const s=i?lv(i,t,24,.4):"";return console.log({inner:s}),`
<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="10"
          fill="${e}" stroke="${t}" stroke-width="${r}"/>
  ${s}
</svg>
`},VH=({size:n=28,innerSvg:e,color:t="#FF6600"})=>{const r=e?lv(e,t,24,.4):"";return`
<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24" fill="${t}">
    ${r}
</svg>
`},XH={pin:qH,circle:HH,icon:VH},YH=(n={})=>{const e=n.markerType??"pin",t=n.innerSvg?lv(n.innerSvg,n.color,24,.4):"",r=!t&&n.fallbackText;let i;if(r)i=`
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 28 28">
        <circle cx="12" cy="12" r="10" fill="${n.backgroundColor??"#FF6600"}" stroke="${n.color??"#fff"}" stroke-width="2"/>
        <text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="12" fill="${n.color??"#fff"}">${n.fallbackText}</text>
      </svg>
    `;else{const a=XH[e];i=a({...n,innerSvg:t})}const s=`${e}|${t}|${JSON.stringify(n)}`;let o=SE.get(s);return o||(o=GH(i),SE.set(s,o)),new Rn({image:new $a({src:o,scale:1})})},KH=n=>{const e=n.geohash.includes("http")?n.geohash.split("http://geohash.org/")[1]:n.geohash,{latitude:t,longitude:r}=oC.decode(e),i=new Bs({geometry:new os(Kl([r,t])),...n.meta});i.setId(n.id);const s=n.style??{markerType:"pin"},o=YH(s);return i.set("originalStyle",o),i.setStyle(o),i},ZH=n=>!n||n.length===0?(console.info("No layers provided. Adding default OSM base layer."),[new zp({source:new AH})]):n.map((e,t)=>{switch(e.kind){case"base-raster":const r=LH(e);return r.setZIndex(t),r;case"base-vector-tiles":const i=OH(e);return i.setZIndex(t),i;case"overlay-vector":const s=MH(e);return s.setZIndex(t),s.setDeclutter(!1),s;default:throw new Error(`Unknown layer kind: ${JSON.stringify(e)}`)}}),JH=n=>{const e=[];return n.vectorStyles&&e.push({id:n.vectorStyles.label,kind:"base-vector-tiles",provider:"custom",url:n.vectorStyles.uri,styleUrl:n.vectorStyles.uri,visible:!1,previewImage:n.vectorStyles.image,label:n.vectorStyles.label}),n.tileSets&&Array.isArray(n.tileSets)&&n.tileSets.forEach(t=>{e.push({id:t.label,kind:"base-raster",url:t.uri,attribution:t.attribution,visible:!1,previewImage:t.image,label:t.label})}),e.map((t,r)=>({...t,visible:r===0}))},QH=n=>{const{type:e,coordinates:t,id:r,meta:i}=n,s=e==="MultiPolygon"?new tu(t):new oi(t);s.transform("EPSG:4326","EPSG:3857");const o=new Bs({geometry:s,...i});return r&&o.setId(r),o},eV=my.forwardRef((n,e)=>{var u;const[t,r]=ie.useState(!1),i=ie.useRef(null),s=((u=n.controls)==null?void 0:u.showLayerSelector)??!0,o=ie.useMemo(()=>{var d;const c=Array.isArray(n.layers)&&n.layers.length>0?n.layers:n.mapStyleOptions&&Object.keys(n.mapStyleOptions).length>0?JH(n.mapStyleOptions):[],f=[{kind:"overlay-vector",id:oy,data:((d=n.markers)==null?void 0:d.map(nW))??[],visible:!0},{kind:"overlay-vector",id:"polygon-layer",data:(n==null?void 0:n.polygons)??[],visible:!0}];return[...c,...f]},[n.layers,n.mapStyleOptions]),a=ie.useRef(ZH(o));return ie.useEffect(()=>(r(!0),n.onLayersReady&&n.onLayersReady(!0),()=>{var c;r(!1),(c=n.onLayersReady)==null||c.call(n,!1)}),[!!a.current]),ie.useEffect(()=>()=>{var c;r(!1),(c=n.onLayersReady)==null||c.call(n,!1)},[]),ie.useEffect(()=>{if(!i.current)return;const c=mR(a.current,oy);if(!c){console.debug("No marker layer found");return}const f=c.getSource();if(!f){console.debug("Could not find layer source");return}f.clear();const d=n.markers.map(KH);f.addFeatures(d);const g=n.polygons.map(QH);f.addFeatures(g);const y=[...d,...g];y.length===1?Uf(i.current,y[0]):aR(i.current,y)},[n.markers,n.polygons,t]),ie.useImperativeHandle(e,()=>({zoomIn:()=>{var d;const c=(d=i.current)==null?void 0:d.getView();if(!c){console.warn("Map view is not ready yet");return}const f=c.getZoom()??0;c.setZoom(f+1)},zoomOut:()=>{var d;const c=(d=i.current)==null?void 0:d.getView();if(!c){console.warn("Map view is not ready yet");return}const f=c.getZoom()??0;c.setZoom(f-1)},panToFeature:c=>{if(!i.current){console.warn("Map is not ready yet");return}const f=mb(a.current,[c]);f.length!==0&&Uf(i.current,f[0])},panToFeatures:c=>{if(!i.current){console.warn("Map is not ready yet");return}const f=mb(a.current,c);f.length!==0&&Uf(i.current,f[0])},layersRef:a}),[i.current,a.current]),console.log({layersReady:t,layersRef:a.current,showLayerSelector:s}),rt(gy,{children:[Q(E2,{layersRef:a,mapInstanceRef:i,...n}),t&&a.current&&s&&Q(T2,{layersRef:a})]})});eV.__docgenInfo={description:"",methods:[{name:"zoomIn",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomOut",docblock:null,modifiers:[],params:[],returns:null},{name:"panToFeature",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:{name:"string"}}],returns:null},{name:"panToFeatures",docblock:null,modifiers:[],params:[{name:"ids",optional:!1,type:{name:"Array",elements:[{name:"string"}],raw:"string[]"}}],returns:null}],displayName:"BasicMapV2",props:{zoom:{required:!0,tsType:{name:"number"},description:""},center:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},layers:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:`| BaseRasterLayerConfig
| BaseVectorTileLayerConfig
| OverlayVectorLayerConfig`,elements:[{name:"signature",type:"object",raw:`{
  id: string;
  kind: "base-raster";
  provider?: "osm" | "xyz" | "wmts";
  attribution?: string; // TODO: Possibly overwritten?
  url?: string;
  visible?: boolean;
  previewImage: string;
  label: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"base-raster"',required:!0}},{key:"provider",value:{name:"union",raw:'"osm" | "xyz" | "wmts"',elements:[{name:"literal",value:'"osm"'},{name:"literal",value:'"xyz"'},{name:"literal",value:'"wmts"'}],required:!1}},{key:"attribution",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"previewImage",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  id: string;
  kind: "base-vector-tiles";
  provider?: "mapbox" | "maptiler" | "arcgis" | "custom";
  url: string;
  styleUrl?: string; // e.g. Mapbox/MapTiler JSON
  accessToken?: string;
  visible?: boolean;
  previewImage: string;
  label: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"base-vector-tiles"',required:!0}},{key:"provider",value:{name:"union",raw:'"mapbox" | "maptiler" | "arcgis" | "custom"',elements:[{name:"literal",value:'"mapbox"'},{name:"literal",value:'"maptiler"'},{name:"literal",value:'"arcgis"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"url",value:{name:"string",required:!0}},{key:"styleUrl",value:{name:"string",required:!1}},{key:"accessToken",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"previewImage",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  id: string;
  kind: "overlay-vector";
  data: OverlayFeatureConfig[];
  style?: StyleLike;
  visible?: boolean;
  zIndex?: number;
  projection?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"overlay-vector"',required:!0}},{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  type: "Point" | "Polygon" | "MultiPolygon";
  coordinates: number[] | number[][] | number[][][];
  label?: string;
  id?: string;
  marker?: string | MarkerStyle;
  meta?: Record<string, any>;
}`,signature:{properties:[{key:"type",value:{name:"union",raw:'"Point" | "Polygon" | "MultiPolygon"',elements:[{name:"literal",value:'"Point"'},{name:"literal",value:'"Polygon"'},{name:"literal",value:'"MultiPolygon"'}],required:!0}},{key:"coordinates",value:{name:"union",raw:"number[] | number[][] | number[][][]",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"},{name:"Array",elements:[{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"}],raw:"number[][][]"}],required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"id",value:{name:"string",required:!1}},{key:"marker",value:{name:"union",raw:"string | MarkerStyle",elements:[{name:"string"},{name:"MarkerStyle"}],required:!1}},{key:"meta",value:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>",required:!1}}]}}],raw:"OverlayFeatureConfig[]",required:!0}},{key:"style",value:{name:"StyleLike",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"projection",value:{name:"string",required:!1}}]}}]}],raw:"LayerConfig[]"},description:""},controls:{required:!1,tsType:{name:"Partial",elements:[{name:"MapControlsConfig"}],raw:"Partial<MapControlsConfig>"},description:""},mapStyleOptions:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  vectorStyles?: LegacyVectorStyle;
  tileSets?: LegacyTileSet[];
}`,signature:{properties:[{key:"vectorStyles",value:{name:"signature",type:"object",raw:`{
  label: string;
  uri: string;
  image: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"uri",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}}]},required:!1}},{key:"tileSets",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  uri: string;
  image: string;
  attribution?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"uri",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}},{key:"attribution",value:{name:"string",required:!1}}]}}],raw:"LegacyTileSet[]",required:!1}}]}},description:"@deprecated Use `layers` instead. This prop will be removed in a future release."},markers:{required:!0,tsType:{name:"Array",elements:[{name:"MarkerFeature"}],raw:"MarkerFeature[]"},description:""},polygons:{required:!0,tsType:{name:"Array",elements:[{name:"PolygonFeature"}],raw:"PolygonFeature[]"},description:""},onFeatureClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},onLayersReady:{required:!1,tsType:{name:"signature",type:"function",raw:"(isReady: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isReady"}],return:{name:"void"}}},description:""}}};var is=(n=>(n.AUTHENTICATED="authenticated",n.REAUTHENTICATED="reauthenticated",n.USER_CHANGED="user-changed",n.UNAUTHORIZED="unauthorized",n))(is||{});const ay=new Set;let ly=null;const tV=new BroadcastChannel("auth-events");tV.onmessage=n=>{ly=n.data,ay.forEach(e=>e(n.data))};function uv(n){return ay.add(n),ly!==null&&n(ly),()=>{ay.delete(n)}}function TE(n){const e=new BroadcastChannel("auth-events");e.postMessage(n),e.close()}const R2=ie.createContext(null),nV=(n,e,t)=>{const r=()=>{console.log("OAuth success event received"),e==null||e()},i=()=>{console.log("OAuth error event received"),t==null||t()},s=async o=>{const a=o;console.log("OAuth callback event received",a.detail);try{const u=a.detail.callbackUrl;console.log("Processing callback URL:",u);const c=await n.handleCallback(new URL(u).search);console.log("Callback processed successfully:",c),e==null||e()}catch(u){console.error("Callback processing failed:",u),t==null||t(u instanceof Error?u:new Error(String(u)))}};return window.addEventListener(qu.OAUTH_SUCCESS,r),window.addEventListener(qu.OAUTH_ERROR,i),window.addEventListener("oauth-callback",s),function(){window.removeEventListener(qu.OAUTH_SUCCESS,r),window.removeEventListener(qu.OAUTH_ERROR,i),window.removeEventListener("oauth-callback",s)}},rV=(n,e="")=>uv(t=>{switch(t){case is.AUTHENTICATED:case is.REAUTHENTICATED:n.refetchQueries({stale:!0});break;case is.USER_CHANGED:window.location.replace(e);break}});function I2(n,e){return function(){return n.apply(e,arguments)}}const{toString:iV}=Object.prototype,{getPrototypeOf:cv}=Object,{iterator:qp,toStringTag:A2}=Symbol,Wp=(n=>e=>{const t=iV.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Di=n=>(n=n.toLowerCase(),e=>Wp(e)===n),jp=n=>e=>typeof e===n,{isArray:du}=Array,ru=jp("undefined");function oh(n){return n!==null&&!ru(n)&&n.constructor!==null&&!ru(n.constructor)&&Tr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const P2=Di("ArrayBuffer");function sV(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&P2(n.buffer),e}const oV=jp("string"),Tr=jp("function"),M2=jp("number"),ah=n=>n!==null&&typeof n=="object",aV=n=>n===!0||n===!1,jf=n=>{if(Wp(n)!=="object")return!1;const e=cv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(A2 in n)&&!(qp in n)},lV=n=>{if(!ah(n)||oh(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},uV=Di("Date"),cV=Di("File"),hV=Di("Blob"),fV=Di("FileList"),dV=n=>ah(n)&&Tr(n.pipe),pV=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Tr(n.append)&&((e=Wp(n))==="formdata"||e==="object"&&Tr(n.toString)&&n.toString()==="[object FormData]"))},gV=Di("URLSearchParams"),[mV,yV,_V,vV]=["ReadableStream","Request","Response","Headers"].map(Di),xV=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),du(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(oh(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function O2(n,e){if(oh(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const va=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L2=n=>!ru(n)&&n!==va;function uy(){const{caseless:n,skipUndefined:e}=L2(this)&&this||{},t={},r=(i,s)=>{const o=n&&O2(t,s)||s;jf(t[o])&&jf(i)?t[o]=uy(t[o],i):jf(i)?t[o]=uy({},i):du(i)?t[o]=i.slice():(!e||!ru(i))&&(t[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&lh(arguments[i],r);return t}const wV=(n,e,t,{allOwnKeys:r}={})=>(lh(e,(i,s)=>{t&&Tr(i)?n[s]=I2(i,t):n[s]=i},{allOwnKeys:r}),n),bV=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),EV=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},CV=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&cv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},SV=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},TV=n=>{if(!n)return null;if(du(n))return n;let e=n.length;if(!M2(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},RV=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&cv(Uint8Array)),IV=(n,e)=>{const r=(n&&n[qp]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},AV=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},PV=Di("HTMLFormElement"),MV=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),RE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),OV=Di("RegExp"),k2=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};lh(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},LV=n=>{k2(n,(e,t)=>{if(Tr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Tr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},kV=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return du(n)?r(n):r(String(n).split(e)),t},FV=()=>{},DV=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function NV(n){return!!(n&&Tr(n.append)&&n[A2]==="FormData"&&n[qp])}const zV=n=>{const e=new Array(10),t=(r,i)=>{if(ah(r)){if(e.indexOf(r)>=0)return;if(oh(r))return r;if(!("toJSON"in r)){e[i]=r;const s=du(r)?[]:{};return lh(r,(o,a)=>{const u=t(o,i+1);!ru(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return t(n,0)},$V=Di("AsyncFunction"),BV=n=>n&&(ah(n)||Tr(n))&&Tr(n.then)&&Tr(n.catch),F2=((n,e)=>n?setImmediate:e?((t,r)=>(va.addEventListener("message",({source:i,data:s})=>{i===va&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),va.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Tr(va.postMessage)),UV=typeof queueMicrotask<"u"?queueMicrotask.bind(va):typeof process<"u"&&process.nextTick||F2,GV=n=>n!=null&&Tr(n[qp]),ee={isArray:du,isArrayBuffer:P2,isBuffer:oh,isFormData:pV,isArrayBufferView:sV,isString:oV,isNumber:M2,isBoolean:aV,isObject:ah,isPlainObject:jf,isEmptyObject:lV,isReadableStream:mV,isRequest:yV,isResponse:_V,isHeaders:vV,isUndefined:ru,isDate:uV,isFile:cV,isBlob:hV,isRegExp:OV,isFunction:Tr,isStream:dV,isURLSearchParams:gV,isTypedArray:RV,isFileList:fV,forEach:lh,merge:uy,extend:wV,trim:xV,stripBOM:bV,inherits:EV,toFlatObject:CV,kindOf:Wp,kindOfTest:Di,endsWith:SV,toArray:TV,forEachEntry:IV,matchAll:AV,isHTMLForm:PV,hasOwnProperty:RE,hasOwnProp:RE,reduceDescriptors:k2,freezeMethods:LV,toObjectSet:kV,toCamelCase:MV,noop:FV,toFiniteNumber:DV,findKey:O2,global:va,isContextDefined:L2,isSpecCompliantForm:NV,toJSONObject:zV,isAsyncFn:$V,isThenable:BV,setImmediate:F2,asap:UV,isIterable:GV};function lt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ee.inherits(lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const D2=lt.prototype,N2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{N2[n]={value:n}});Object.defineProperties(lt,N2);Object.defineProperty(D2,"isAxiosError",{value:!0});lt.from=(n,e,t,r,i,s)=>{const o=Object.create(D2);ee.toFlatObject(n,o,function(f){return f!==Error.prototype},c=>c!=="isAxiosError");const a=n&&n.message?n.message:"Error",u=e==null&&n?n.code:e;return lt.call(o,a,u,t,r,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const qV=null;function cy(n){return ee.isPlainObject(n)||ee.isArray(n)}function z2(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function IE(n,e,t){return n?n.concat(e).map(function(i,s){return i=z2(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function WV(n){return ee.isArray(n)&&!n.some(cy)}const jV=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Hp(n,e,t){if(!ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!ee.isUndefined(x[v])});const r=t.metaTokens,i=t.visitor||f,s=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(ee.isDate(m))return m.toISOString();if(ee.isBoolean(m))return m.toString();if(!u&&ee.isBlob(m))throw new lt("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(m)||ee.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function f(m,v,x){let b=m;if(m&&!x&&typeof m=="object"){if(ee.endsWith(v,"{}"))v=r?v:v.slice(0,-2),m=JSON.stringify(m);else if(ee.isArray(m)&&WV(m)||(ee.isFileList(m)||ee.endsWith(v,"[]"))&&(b=ee.toArray(m)))return v=z2(v),b.forEach(function(T,C){!(ee.isUndefined(T)||T===null)&&e.append(o===!0?IE([v],C,s):o===null?v:v+"[]",c(T))}),!1}return cy(m)?!0:(e.append(IE(x,v,s),c(m)),!1)}const d=[],g=Object.assign(jV,{defaultVisitor:f,convertValue:c,isVisitable:cy});function y(m,v){if(!ee.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),ee.forEach(m,function(b,E){(!(ee.isUndefined(b)||b===null)&&i.call(e,b,ee.isString(E)?E.trim():E,v,g))===!0&&y(b,v?v.concat(E):[E])}),d.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return y(n),e}function AE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hv(n,e){this._pairs=[],n&&Hp(n,this,e)}const $2=hv.prototype;$2.append=function(e,t){this._pairs.push([e,t])};$2.toString=function(e){const t=e?function(r){return e.call(this,r,AE)}:AE;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function HV(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function B2(n,e,t){if(!e)return n;const r=t&&t.encode||HV;ee.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=ee.isURLSearchParams(e)?e.toString():new hv(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class PE{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const U2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VV=typeof URLSearchParams<"u"?URLSearchParams:hv,XV=typeof FormData<"u"?FormData:null,YV=typeof Blob<"u"?Blob:null,KV={isBrowser:!0,classes:{URLSearchParams:VV,FormData:XV,Blob:YV},protocols:["http","https","file","blob","url","data"]},fv=typeof window<"u"&&typeof document<"u",hy=typeof navigator=="object"&&navigator||void 0,ZV=fv&&(!hy||["ReactNative","NativeScript","NS"].indexOf(hy.product)<0),JV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QV=fv&&window.location.href||"http://localhost",eX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fv,hasStandardBrowserEnv:ZV,hasStandardBrowserWebWorkerEnv:JV,navigator:hy,origin:QV},Symbol.toStringTag,{value:"Module"})),ir={...eX,...KV};function tX(n,e){return Hp(n,new ir.classes.URLSearchParams,{visitor:function(t,r,i,s){return ir.isNode&&ee.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function nX(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rX(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function G2(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=t.length;return o=!o&&ee.isArray(i)?i.length:o,u?(ee.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ee.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&ee.isArray(i[o])&&(i[o]=rX(i[o])),!a)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const t={};return ee.forEachEntry(n,(r,i)=>{e(nX(r),i,t,0)}),t}return null}function iX(n,e,t){if(ee.isString(n))try{return(e||JSON.parse)(n),ee.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const uh={transitional:U2,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=ee.isObject(e);if(s&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return i?JSON.stringify(G2(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tX(e,this.formSerializer).toString();if((a=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Hp(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),iX(e)):e}],transformResponse:[function(e){const t=this.transitional||uh.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?lt.from(a,lt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ir.classes.FormData,Blob:ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{uh.headers[n]={}});const sX=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oX=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&sX[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},ME=Symbol("internals");function Gu(n){return n&&String(n).trim().toLowerCase()}function Hf(n){return n===!1||n==null?n:ee.isArray(n)?n.map(Hf):String(n)}function aX(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const lX=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function s0(n,e,t,r,i){if(ee.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function uX(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function cX(n,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Rr=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,u,c){const f=Gu(u);if(!f)throw new Error("header name must be a non-empty string");const d=ee.findKey(i,f);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||u]=Hf(a))}const o=(a,u)=>ee.forEach(a,(c,f)=>s(c,f,u));if(ee.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ee.isString(e)&&(e=e.trim())&&!lX(e))o(oX(e),t);else if(ee.isObject(e)&&ee.isIterable(e)){let a={},u,c;for(const f of e){if(!ee.isArray(f))throw TypeError("Object iterator must return a key-value pair");a[c=f[0]]=(u=a[c])?ee.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Gu(e),e){const r=ee.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return aX(i);if(ee.isFunction(t))return t.call(this,i,r);if(ee.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gu(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||s0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Gu(o),o){const a=ee.findKey(r,o);a&&(!t||s0(r,r[a],a,t))&&(delete r[a],i=!0)}}return ee.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||s0(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return ee.forEach(this,(i,s)=>{const o=ee.findKey(r,s);if(o){t[o]=Hf(i),delete t[s];return}const a=e?uX(s):String(s).trim();a!==s&&delete t[s],t[a]=Hf(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[ME]=this[ME]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Gu(o);r[a]||(cX(i,o),r[a]=!0)}return ee.isArray(e)?e.forEach(s):s(e),this}};Rr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Rr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ee.freezeMethods(Rr);function o0(n,e){const t=this||uh,r=e||t,i=Rr.from(r.headers);let s=r.data;return ee.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function q2(n){return!!(n&&n.__CANCEL__)}function pu(n,e,t){lt.call(this,n??"canceled",lt.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(pu,lt,{__CANCEL__:!0});function W2(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new lt("Request failed with status code "+t.status,[lt.ERR_BAD_REQUEST,lt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function hX(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function fX(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),f=r[s];o||(o=c),t[i]=u,r[i]=c;let d=s,g=0;for(;d!==i;)g+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const y=f&&c-f;return y?Math.round(g*1e3/y):void 0}}function dX(n,e){let t=0,r=1e3/e,i,s;const o=(c,f=Date.now())=>{t=f,i=null,s&&(clearTimeout(s),s=null),n(...c)};return[(...c)=>{const f=Date.now(),d=f-t;d>=r?o(c,f):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Nd=(n,e,t=3)=>{let r=0;const i=fX(50,250);return dX(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,c=i(u),f=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&f?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},OE=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},LE=n=>(...e)=>ee.asap(()=>n(...e)),pX=ir.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ir.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ir.origin),ir.navigator&&/(msie|trident)/i.test(ir.navigator.userAgent)):()=>!0,gX=ir.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];ee.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ee.isString(r)&&o.push("path="+r),ee.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mX(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function yX(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function j2(n,e,t){let r=!mX(e);return n&&(r||t==!1)?yX(n,e):e}const kE=n=>n instanceof Rr?{...n}:n;function Ua(n,e){e=e||{};const t={};function r(c,f,d,g){return ee.isPlainObject(c)&&ee.isPlainObject(f)?ee.merge.call({caseless:g},c,f):ee.isPlainObject(f)?ee.merge({},f):ee.isArray(f)?f.slice():f}function i(c,f,d,g){if(ee.isUndefined(f)){if(!ee.isUndefined(c))return r(void 0,c,d,g)}else return r(c,f,d,g)}function s(c,f){if(!ee.isUndefined(f))return r(void 0,f)}function o(c,f){if(ee.isUndefined(f)){if(!ee.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,d){if(d in e)return r(c,f);if(d in n)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,f,d)=>i(kE(c),kE(f),d,!0)};return ee.forEach(Object.keys({...n,...e}),function(f){const d=u[f]||i,g=d(n[f],e[f],f);ee.isUndefined(g)&&d!==a||(t[f]=g)}),t}const H2=n=>{const e=Ua({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Rr.from(o),e.url=B2(j2(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ee.isFormData(t)){if(ir.hasStandardBrowserEnv||ir.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(t.getHeaders)){const u=t.getHeaders(),c=["content-type","content-length"];Object.entries(u).forEach(([f,d])=>{c.includes(f.toLowerCase())&&o.set(f,d)})}}if(ir.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(e)),r||r!==!1&&pX(e.url))){const u=i&&s&&gX.read(s);u&&o.set(i,u)}return e},_X=typeof XMLHttpRequest<"u",vX=_X&&function(n){return new Promise(function(t,r){const i=H2(n);let s=i.data;const o=Rr.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:c}=i,f,d,g,y,m;function v(){y&&y(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function b(){if(!x)return;const T=Rr.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:T,config:n,request:x};W2(function(O){t(O),v()},function(O){r(O),v()},R),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(r(new lt("Request aborted",lt.ECONNABORTED,n,x)),x=null)},x.onerror=function(C){const R=C&&C.message?C.message:"Network Error",F=new lt(R,lt.ERR_NETWORK,n,x);F.event=C||null,r(F),x=null},x.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||U2;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new lt(C,R.clarifyTimeoutError?lt.ETIMEDOUT:lt.ECONNABORTED,n,x)),x=null},s===void 0&&o.setContentType(null),"setRequestHeader"in x&&ee.forEach(o.toJSON(),function(C,R){x.setRequestHeader(R,C)}),ee.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),a&&a!=="json"&&(x.responseType=i.responseType),c&&([g,m]=Nd(c,!0),x.addEventListener("progress",g)),u&&x.upload&&([d,y]=Nd(u),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(f=T=>{x&&(r(!T||T.type?new pu(null,n,x):T),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const E=hX(i.url);if(E&&ir.protocols.indexOf(E)===-1){r(new lt("Unsupported protocol "+E+":",lt.ERR_BAD_REQUEST,n));return}x.send(s||null)})},xX=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof lt?f:new pu(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new lt(`timeout ${e} of ms exceeded`,lt.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>ee.asap(a),u}},wX=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},bX=async function*(n,e){for await(const t of EX(n))yield*wX(t,e)},EX=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},FE=(n,e,t,r)=>{const i=bX(n,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:f}=await i.next();if(c){a(),u.close();return}let d=f.byteLength;if(t){let g=s+=d;t(g)}u.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},DE=64*1024,{isFunction:Nf}=ee,CX=(({Request:n,Response:e})=>({Request:n,Response:e}))(ee.global),{ReadableStream:NE,TextEncoder:zE}=ee.global,$E=(n,...e)=>{try{return!!n(...e)}catch{return!1}},SX=n=>{n=ee.merge.call({skipUndefined:!0},CX,n);const{fetch:e,Request:t,Response:r}=n,i=e?Nf(e):typeof fetch=="function",s=Nf(t),o=Nf(r);if(!i)return!1;const a=i&&Nf(NE),u=i&&(typeof zE=="function"?(m=>v=>m.encode(v))(new zE):async m=>new Uint8Array(await new t(m).arrayBuffer())),c=s&&a&&$E(()=>{let m=!1;const v=new t(ir.origin,{body:new NE,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),f=o&&a&&$E(()=>ee.isReadableStream(new r("").body)),d={stream:f&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!d[m]&&(d[m]=(v,x)=>{let b=v&&v[m];if(b)return b.call(v);throw new lt(`Response type '${m}' is not supported`,lt.ERR_NOT_SUPPORT,x)})});const g=async m=>{if(m==null)return 0;if(ee.isBlob(m))return m.size;if(ee.isSpecCompliantForm(m))return(await new t(ir.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(m)||ee.isArrayBuffer(m))return m.byteLength;if(ee.isURLSearchParams(m)&&(m=m+""),ee.isString(m))return(await u(m)).byteLength},y=async(m,v)=>{const x=ee.toFiniteNumber(m.getContentLength());return x??g(v)};return async m=>{let{url:v,method:x,data:b,signal:E,cancelToken:T,timeout:C,onDownloadProgress:R,onUploadProgress:F,responseType:O,headers:$,withCredentials:L="same-origin",fetchOptions:N}=H2(m),B=e||fetch;O=O?(O+"").toLowerCase():"text";let z=xX([E,T&&T.toAbortSignal()],C),H=null;const Z=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let G;try{if(F&&c&&x!=="get"&&x!=="head"&&(G=await y($,b))!==0){let me=new t(v,{method:"POST",body:b,duplex:"half"}),ce;if(ee.isFormData(b)&&(ce=me.headers.get("content-type"))&&$.setContentType(ce),me.body){const[Fe,le]=OE(G,Nd(LE(F)));b=FE(me.body,DE,Fe,le)}}ee.isString(L)||(L=L?"include":"omit");const W=s&&"credentials"in t.prototype,q={...N,signal:z,method:x.toUpperCase(),headers:$.normalize().toJSON(),body:b,duplex:"half",credentials:W?L:void 0};H=s&&new t(v,q);let V=await(s?B(H,N):B(v,q));const ne=f&&(O==="stream"||O==="response");if(f&&(R||ne&&Z)){const me={};["status","statusText","headers"].forEach(Oe=>{me[Oe]=V[Oe]});const ce=ee.toFiniteNumber(V.headers.get("content-length")),[Fe,le]=R&&OE(ce,Nd(LE(R),!0))||[];V=new r(FE(V.body,DE,Fe,()=>{le&&le(),Z&&Z()}),me)}O=O||"text";let re=await d[ee.findKey(d,O)||"text"](V,m);return!ne&&Z&&Z(),await new Promise((me,ce)=>{W2(me,ce,{data:re,headers:Rr.from(V.headers),status:V.status,statusText:V.statusText,config:m,request:H})})}catch(W){throw Z&&Z(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new lt("Network Error",lt.ERR_NETWORK,m,H),{cause:W.cause||W}):lt.from(W,W&&W.code,m,H)}}},TX=new Map,V2=n=>{let e=n?n.env:{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let o=s.length,a=o,u,c,f=TX;for(;a--;)u=s[a],c=f.get(u),c===void 0&&f.set(u,c=a?new Map:SX(e)),f=c;return c};V2();const fy={http:qV,xhr:vX,fetch:{get:V2}};ee.forEach(fy,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const BE=n=>`- ${n}`,RX=n=>ee.isFunction(n)||n===null||n===!1,X2={getAdapter:(n,e)=>{n=ee.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let o=0;o<t;o++){r=n[o];let a;if(i=r,!RX(r)&&(i=fy[(a=String(r)).toLowerCase()],i===void 0))throw new lt(`Unknown adapter '${a}'`);if(i&&(ee.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(BE).join(`
`):" "+BE(o[0]):"as no adapter specified";throw new lt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:fy};function a0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new pu(null,n)}function UE(n){return a0(n),n.headers=Rr.from(n.headers),n.data=o0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),X2.getAdapter(n.adapter||uh.adapter,n)(n).then(function(r){return a0(n),r.data=o0.call(n,n.transformResponse,r),r.headers=Rr.from(r.headers),r},function(r){return q2(r)||(a0(n),r&&r.response&&(r.response.data=o0.call(n,n.transformResponse,r.response),r.response.headers=Rr.from(r.response.headers))),Promise.reject(r)})}const Y2="1.12.2",Vp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Vp[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const GE={};Vp.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Y2+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new lt(i(o," has been removed"+(t?" in "+t:"")),lt.ERR_DEPRECATED);return t&&!GE[o]&&(GE[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};Vp.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function IX(n,e,t){if(typeof n!="object")throw new lt("options must be an object",lt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],u=a===void 0||o(a,s,n);if(u!==!0)throw new lt("option "+s+" must be "+u,lt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new lt("Unknown option "+s,lt.ERR_BAD_OPTION)}}const Vf={assertOptions:IX,validators:Vp},Ui=Vf.validators;let La=class{constructor(e){this.defaults=e||{},this.interceptors={request:new PE,response:new PE}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ua(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Vf.assertOptions(r,{silentJSONParsing:Ui.transitional(Ui.boolean),forcedJSONParsing:Ui.transitional(Ui.boolean),clarifyTimeoutError:Ui.transitional(Ui.boolean)},!1),i!=null&&(ee.isFunction(i)?t.paramsSerializer={serialize:i}:Vf.assertOptions(i,{encode:Ui.function,serialize:Ui.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Vf.assertOptions(t,{baseUrl:Ui.spelling("baseURL"),withXsrfToken:Ui.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&ee.merge(s.common,s[t.method]);s&&ee.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=Rr.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(u=u&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let f,d=0,g;if(!u){const m=[UE.bind(this),void 0];for(m.unshift(...a),m.push(...c),g=m.length,f=Promise.resolve(t);d<g;)f=f.then(m[d++],m[d++]);return f}g=a.length;let y=t;for(;d<g;){const m=a[d++],v=a[d++];try{y=m(y)}catch(x){v.call(this,x);break}}try{f=UE.call(this,y)}catch(m){return Promise.reject(m)}for(d=0,g=c.length;d<g;)f=f.then(c[d++],c[d++]);return f}getUri(e){e=Ua(this.defaults,e);const t=j2(e.baseURL,e.url,e.allowAbsoluteUrls);return B2(t,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){La.prototype[e]=function(t,r){return this.request(Ua(r||{},{method:e,url:t,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Ua(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}La.prototype[e]=t(),La.prototype[e+"Form"]=t(!0)});let AX=class K2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new pu(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new K2(function(i){e=i}),cancel:e}}};function PX(n){return function(t){return n.apply(null,t)}}function MX(n){return ee.isObject(n)&&n.isAxiosError===!0}const dy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dy).forEach(([n,e])=>{dy[e]=n});function Z2(n){const e=new La(n),t=I2(La.prototype.request,e);return ee.extend(t,La.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Z2(Ua(n,i))},t}const An=Z2(uh);An.Axios=La;An.CanceledError=pu;An.CancelToken=AX;An.isCancel=q2;An.VERSION=Y2;An.toFormData=Hp;An.AxiosError=lt;An.Cancel=An.CanceledError;An.all=function(e){return Promise.all(e)};An.spread=PX;An.isAxiosError=MX;An.mergeConfig=Ua;An.AxiosHeaders=Rr;An.formToJSON=n=>G2(ee.isHTMLForm(n)?new FormData(n):n);An.getAdapter=X2.getAdapter;An.HttpStatusCode=dy;An.default=An;const{Axios:QY,AxiosError:eK,CanceledError:tK,isCancel:nK,CancelToken:rK,VERSION:iK,all:sK,Cancel:oK,isAxiosError:aK,spread:lK,toFormData:uK,AxiosHeaders:cK,HttpStatusCode:hK,formToJSON:fK,getAdapter:dK,mergeConfig:pK}=An;function OX(n,{queryClient:e,keysToInvalidate:t=[]},r){return r?n.defaults.adapter=async i=>{var o;const s=(o=i.url)!=null&&o.startsWith("http")?i.url:`${i.baseURL||""}${i.url||""}`;try{const a=await r.makeAuthenticatedRequest(s,{method:i.method,skipAutoLogout:!0});if(a.status===401)return TE(is.UNAUTHORIZED),new Promise((f,d)=>{let g=null;const y=()=>{r.makeAuthenticatedRequest(s,{method:i.method,skipAutoLogout:!0}).then(m=>m.text().then(v=>{const x=v?JSON.parse(v):null;f({data:x,status:m.status,statusText:m.statusText,headers:Object.fromEntries(m.headers.entries()),config:i,request:{}})})).catch(d)};g=uv(m=>{m===is.AUTHENTICATED&&(g&&g(),y())})});const u=await a.text(),c=u?JSON.parse(u):null;return a.status>=400&&a.status!==401?Promise.reject({message:`Request failed with status ${a.status}`,config:i,request:{},response:{status:a.status,statusText:a.statusText,data:c,headers:Object.fromEntries(a.headers.entries())}}):Promise.resolve({data:c,status:a.status,statusText:a.statusText,headers:Object.fromEntries(a.headers.entries()),config:i,request:{}})}catch(a){const u=a&&typeof a=="object"&&"message"in a&&typeof a.message=="string"?a.message:"Unknown error";return Promise.reject({message:u,config:i,request:{},response:{status:500,data:{error:u}}})}}:n.interceptors.response.use(i=>i,i=>{var s;return((s=i.response)==null?void 0:s.status)===401&&(e&&t.forEach(o=>e.invalidateQueries({queryKey:o,exact:!0})),TE(is.UNAUTHORIZED)),Promise.reject(i)}),{instance:n}}const LX=(n,e)=>{const t=An.create({baseURL:n,withCredentials:!0}),r={instance:t,withSessionHandling:i=>(OX(t,i,e),r),build:()=>({instance:t})};return r},kX=LX,FX=({config:n,queryClient:e,children:t})=>{const[r,i]=ie.useState(null),[s,o]=ie.useState(null),[a,u]=ie.useState(!1),[c]=ie.useState(()=>new qu(n));ie.useEffect(()=>{const g=nV(c,async()=>{u(!0),console.log("Auth success ‚Üí fetching user profile...");const m=await c.getUserInfo();i(m),u(!1)},m=>{console.error("Auth error",m),o(m??new Error("Unknown auth error")),i(null),u(!1)}),y=rV(e,n.apiUrl);return()=>{g(),y()}},[c,e,n.apiUrl]);const f=ie.useMemo(()=>{const g=kX(n.apiUrl,c);return g.withSessionHandling({keysToInvalidate:[],queryClient:e}),g.build().instance},[c,e,n.apiUrl]),d={user:r,error:s,loading:a,api:f,authClient:c,login:()=>c.loginWithPopup(n.popupRedirectUri),logout:()=>c.logout()};return rt(R2.Provider,{value:d,children:[Q(J2,{}),t]})};FX.__docgenInfo={description:"",methods:[],displayName:"AuthProvider",props:{config:{required:!0,tsType:{name:"AuthServerOAuth2ClientConfig"},description:""},queryClient:{required:!0,tsType:{name:"QueryClient"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const DX=()=>{const n=ie.useContext(R2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},NX=new Set,zX=new BroadcastChannel("auth-events");zX.onmessage=n=>{n.data,NX.forEach(e=>e(n.data))};Kf([Yf("as base64"),Yf("as uri component")]);const J2=({debounceMs:n=5e3})=>{const{login:e}=DX(),t=ie.useRef(!1),[r,i]=ie.useState(!1),s=()=>{e()};return ie.useEffect(()=>uv(u=>{u===is.UNAUTHORIZED&&!t.current?(i(!0),t.current=!0,setTimeout(()=>{t.current=!1},n)):(u===is.AUTHENTICATED||u===is.REAUTHENTICATED)&&(i(!1),t.current=!1)}),[]),Q(US,{hideCloseButton:!0,onClose:()=>{},sx:{m:2,p:2},open:r,children:rt(Ki,{sx:{p:2,overflowY:"auto"},children:[Q(nF,{children:"Your session is no longer active"}),Q(Yi,{sx:{pt:4},children:"Your session may have expired, you may have signed out, or your account isn't active."}),Q(Yi,{children:"Please login again to continue."}),Q(Yi,{sx:{pt:4},children:"If you continue to have issues, contact your system administrator."}),rt(Ki,{ml:"auto",mt:2,gap:1,direction:"row",children:[Q(ko,{color:"primary",variant:"outlined",disableElevation:!0,onClick:()=>{i(!1)},size:"large",children:"Close"}),Q(ko,{color:"primary",variant:"contained",onClick:s,size:"large",children:"Login"})]})]})})};J2.__docgenInfo={description:"",methods:[],displayName:"AuthModal",props:{debounceMs:{defaultValue:{value:"5000",computed:!1},required:!1}}};export{Y$ as A,FB as B,i6 as C,XS as D,n6 as E,DB as F,WB as I,NB as L,o6 as M,IS as P,U5 as Q,By as S,cB as T,Z$ as U,jy as a,WS as b,Wy as c,eV as d,r6 as e,W$ as f,j$ as g,H$ as h,K$ as i,Sy as j,b3 as k,a6 as l,t6 as m,US as n,Q$ as o,BS as p,lB as q,uB as r,qu as s,kX as t,$B as u,nV as v,FX as w,J2 as x,TE as y,is as z};
