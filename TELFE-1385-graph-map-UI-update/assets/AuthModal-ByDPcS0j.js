var fF=Object.defineProperty;var qw=n=>{throw TypeError(n)};var pF=(n,e,t)=>e in n?fF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Nu=(n,e,t)=>pF(n,typeof e!="symbol"?e+"":e,t),hm=(n,e,t)=>e.has(n)||qw("Cannot "+t);var re=(n,e,t)=>(hm(n,e,"read from private field"),t?t.call(n):e.get(n)),mt=(n,e,t)=>e.has(n)?qw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Be=(n,e,t,i)=>(hm(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Hn=(n,e,t)=>(hm(n,e,"access private method"),t);var td=(n,e,t,i)=>({set _(r){Be(n,e,r,t)},get _(){return re(n,e,i)}});import{j as Q,a as Re,F as Uc}from"./emotion-react-jsx-runtime.browser.esm-BgDa5HT4.js";import{b as pC,g as jf,r as oe,c as Ss,R as Hf}from"./index-Dl6G-zuu.js";import{T as er,c as gF,d as mF}from"./Text-DnbGH9ax.js";import{e as nd,d as Ww,b as gC,D as mC,a as yC,u as _C,c as yF,g as vC}from"./constants-CFFAghU1.js";import{F as Bs,b as xC,A as _F,D as vF,c as xF,d as wF,e as Ty,g as Sy}from"./UserProfile-DRN111Dw.js";import{B as bF,D as EF,E as CF,I as TF,N as SF,O as RF,P as IF,Z as dm,a as AF,b as PF,c as MF,d as LF,e as kF,f as OF,g as FF,h as DF,i as NF,j as jw,k as zF,l as BF,m as $F,n as UF,o as GF,p as qF,q as WF,r as jF,s as HF,t as VF,u as XF,v as YF,w as KF,x as ZF,y as JF,z as QF,A as eD,C as tD,F as nD,G as iD,H as rD,J as sD,K as oD,L as aD,M as lD,Q as uD,R as cD,S as hD,T as dD,U as fD,V as pD,W as fr,X as ef,Y as gD,_ as Mi,$ as mD,a0 as yD,a1 as _D,a2 as vD,a3 as xD,a4 as wD,a5 as Hw,a6 as wC,a7 as Al,a8 as bD,a9 as ED,aa as CD,ab as TD,ac as SD,ad as RD,ae as ID,af as AD,ag as PD,ah as MD,ai as tf,aj as LD,ak as kD,al as OD,am as FD,an as DD,ao as bC,ap as ND,aq as hc,ar as Ps,as as zD,at as BD,au as $D,av as UD,aw as GD,ax as qD,ay as WD,az as jD,aA as HD,aB as EC,aC as VD,aD as XD,aE as YD,aF as Xn,aG as CC,aH as KD,aI as ZD,aJ as nf,aK as JD,aL as QD,aM as e5}from"./types-JQgdQoTs.js";import{B as dc,u as t5}from"./ButtonBase-C0n3d_CB.js";import{a as bi,_ as ye,l as An,b as da,t as uu,u as TC}from"./identifier-CCo8HfxA.js";import{g as Fo,s as mn,c as In,a as Pr,r as Vf}from"./styled-DiVYluCu.js";import{u as SC}from"./index-CXtVKvFt.js";import{g as Do}from"./generateUtilityClasses-CRyAR7Z0.js";import{j as it}from"./jsx-runtime-DMAvRu52.js";import{u as es,r as n5}from"./DefaultPropsProvider-BrPVfFhn.js";import{d as i5,G as Vw}from"./Popover-DD2HYYg7.js";import{u as $s}from"./useTheme-DC9e96ys.js";import{u as Xf,a as id,b as Xw,c as r5}from"./TransitionGroupContext-Cbp9jVrs.js";import{u as RC,e as IC,j as s5,O as AC,k as o5}from"./Select-8VTLrbff.js";import{u as a5}from"./useId-CkA8naEk.js";import{g as PC,o as MC,M as LC,b as rd}from"./Modal-cSJVsbaW.js";import{P as Ry}from"./Popper-QmfZ5sgW.js";import{u as ts,G as l5,X as kC,a as u5,C as c5}from"./TelicentHorizontalSVG-DP7xLAp3.js";import"./DataSetIcon-CzT3Gt8m.js";import{U as h5}from"./UserIcon-B0AVfc7u.js";import{ae as d5,af as zu,ag as OC}from"./AdapterDayjs-D7vkZCXk.js";import{L as rf,M as Iy,b as f5}from"./Menu-CYNMhx33.js";import{u as p5}from"./useEnhancedEffect-DZnfS5Iy.js";import{g as g5,a as m5,l as Yw,M as Ay}from"./MenuItem-MWBitPoC.js";import{z as la,a as y5}from"./UIThemeProvider-vkr8-daa.js";import{I as Wr}from"./IconButton-CSCqGkQ5.js";import{S as Py,F as ui}from"./FlexBox-owEKTX38.js";import"./Chip-Jqcc-fVu.js";import"./Divider-HWnn5fVZ.js";import{B as Pn}from"./Box-DR7xjwgg.js";import"./TreeView-B3svt8lB.js";import"./UserProfileContent-BkWk_Qx8.js";import{G as ta,a as My,F as sf}from"./FlexGrid-M25hPc65.js";import"./LinearProgress-CRSreEF6.js";import"./Dialog-C-jl0jSy.js";import{a as sd}from"./colorManipulator-DBPky6cX.js";import{B as Oa}from"./Button-RcpSRAcx.js";import"./LinkButton-CJcpdsZt.js";import"./Container-CFeVW3qn.js";import"./TextField-DztZaD0H.js";import"./Select-H2_Fcnx_.js";import{u as _5}from"./Autocomplete-DQ7I-sdn.js";import"./DatePicker-DvTHUv-u.js";import"./DateTimePicker-dN1NYyu9.js";import{s as v5}from"./styled-BEKiHWi7.js";import{P as Ly}from"./Paper-B-rBeRIm.js";import{T as Rs}from"./Typography-DvrCv4HQ.js";import{B as FC}from"./Button-DPeHgJ80.js";import"./Card-BWv60QFk.js";import"./CardActions-CCW8za6b.js";import{p as DC}from"./index-BfyspvgH.js";import{r as Yf}from"./index-Dn0cO_TJ.js";import{P as x5}from"./Popover-CAHG92mn.js";import{P as w5}from"./Paper-BBwh5-3y.js";import"./ErrorFallback-fPXNZKjO.js";import"./ErrorFallbackText-BLCYy_1i.js";import"./ErrorFallbackWrapper-CSpgK55r.js";import"./MapToggleButtonPresentational-DY66EemL.js";import{D as b5}from"./Divider-DOeen-K3.js";import{T as E5,g as Kw,r as C5}from"./utils-QfZKikgD.js";import{C as T5,c as S5,E as R5,a as I5,b as A5}from"./Edit-BwFhg13Q.js";import{c as ky}from"./createSvgIcon-CxivGeKF.js";import{T as P5}from"./TextField-BU2nRZ6A.js";var Kf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},M5={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},yo,Cy,nC,L5=(nC=class{constructor(){mt(this,yo,M5);mt(this,Cy,!1)}setTimeoutProvider(n){Be(this,yo,n)}setTimeout(n,e){return re(this,yo).setTimeout(n,e)}clearTimeout(n){re(this,yo).clearTimeout(n)}setInterval(n,e){return re(this,yo).setInterval(n,e)}clearInterval(n){re(this,yo).clearInterval(n)}},yo=new WeakMap,Cy=new WeakMap,nC),y0=new L5;function k5(n){setTimeout(n,0)}var Zf=typeof window>"u"||"Deno"in globalThis;function pr(){}function O5(n,e){return typeof n=="function"?n(e):n}function F5(n){return typeof n=="number"&&n>=0&&n!==1/0}function D5(n,e){return Math.max(n+(e||0)-Date.now(),0)}function _0(n,e){return typeof n=="function"?n(e):n}function N5(n,e){return typeof n=="function"?n(e):n}function Zw(n,e){const{type:t="all",exact:i,fetchStatus:r,predicate:s,queryKey:o,stale:a}=n;if(o){if(i){if(e.queryHash!==Oy(o,e.options))return!1}else if(!pc(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||s&&!s(e))}function Jw(n,e){const{exact:t,status:i,predicate:r,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(fc(e.options.mutationKey)!==fc(s))return!1}else if(!pc(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function Oy(n,e){return((e==null?void 0:e.queryKeyHashFn)||fc)(n)}function fc(n){return JSON.stringify(n,(e,t)=>v0(t)?Object.keys(t).sort().reduce((i,r)=>(i[r]=t[r],i),{}):t)}function pc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>pc(n[t],e[t])):!1}var z5=Object.prototype.hasOwnProperty;function NC(n,e){if(n===e)return n;const t=Qw(n)&&Qw(e);if(!t&&!(v0(n)&&v0(e)))return e;const r=(t?n:Object.keys(n)).length,s=t?e:Object.keys(e),o=s.length,a=t?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=t?c:s[c],f=n[d],p=e[d];if(f===p){a[d]=f,(t?c<r:z5.call(n,d))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[d]=p;continue}const y=NC(f,p);a[d]=y,y===f&&l++}return r===o&&l===r?n:a}function Qw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function v0(n){if(!e1(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!e1(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function e1(n){return Object.prototype.toString.call(n)==="[object Object]"}function B5(n){return new Promise(e=>{y0.setTimeout(e,n)})}function $5(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?NC(n,e):e}function U5(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function G5(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var Fy=Symbol();function zC(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Fy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var xa,_o,Ul,iC,q5=(iC=class extends Kf{constructor(){super();mt(this,xa);mt(this,_o);mt(this,Ul);Be(this,Ul,e=>{if(!Zf&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){re(this,_o)||this.setEventListener(re(this,Ul))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,_o))==null||e.call(this),Be(this,_o,void 0))}setEventListener(e){var t;Be(this,Ul,e),(t=re(this,_o))==null||t.call(this),Be(this,_o,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){re(this,xa)!==e&&(Be(this,xa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof re(this,xa)=="boolean"?re(this,xa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xa=new WeakMap,_o=new WeakMap,Ul=new WeakMap,iC),BC=new q5;function W5(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});t.status="pending",t.catch(()=>{});function i(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{i({status:"fulfilled",value:r}),n(r)},t.reject=r=>{i({status:"rejected",reason:r}),e(r)},t}var j5=k5;function H5(){let n=[],e=0,t=a=>{a()},i=a=>{a()},r=j5;const s=a=>{e?n.push(a):r(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&r(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{r=a}}}var oi=H5(),Gl,vo,ql,rC,V5=(rC=class extends Kf{constructor(){super();mt(this,Gl,!0);mt(this,vo);mt(this,ql);Be(this,ql,e=>{if(!Zf&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){re(this,vo)||this.setEventListener(re(this,ql))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,vo))==null||e.call(this),Be(this,vo,void 0))}setEventListener(e){var t;Be(this,ql,e),(t=re(this,vo))==null||t.call(this),Be(this,vo,e(this.setOnline.bind(this)))}setOnline(e){re(this,Gl)!==e&&(Be(this,Gl,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return re(this,Gl)}},Gl=new WeakMap,vo=new WeakMap,ql=new WeakMap,rC),of=new V5;function X5(n){return Math.min(1e3*2**n,3e4)}function $C(n){return(n??"online")==="online"?of.isOnline():!0}var x0=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function UC(n){let e=!1,t=0,i;const r=W5(),s=()=>r.status!=="pending",o=v=>{var x;if(!s()){const w=new x0(v);p(w),(x=n.onCancel)==null||x.call(n,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>BC.isFocused()&&(n.networkMode==="always"||of.isOnline())&&n.canRun(),d=()=>$C(n.networkMode)&&n.canRun(),f=v=>{s()||(i==null||i(),r.resolve(v))},p=v=>{s()||(i==null||i(),r.reject(v))},y=()=>new Promise(v=>{var x;i=w=>{(s()||c())&&v(w)},(x=n.onPause)==null||x.call(n)}).then(()=>{var v;i=void 0,s()||(v=n.onContinue)==null||v.call(n)}),m=()=>{if(s())return;let v;const x=t===0?n.initialPromise:void 0;try{v=x??n.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{var F;if(s())return;const E=n.retry??(Zf?0:3),S=n.retryDelay??X5,C=typeof S=="function"?S(t,w):S,R=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,w);if(e||!R){p(w);return}t++,(F=n.onFail)==null||F.call(n,t,w),B5(C).then(()=>c()?void 0:y()).then(()=>{e?p(w):m()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(i==null||i(),r),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():y().then(m),r)}}var wa,sC,GC=(sC=class{constructor(){mt(this,wa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),F5(this.gcTime)&&Be(this,wa,y0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Zf?1/0:5*60*1e3))}clearGcTimeout(){re(this,wa)&&(y0.clearTimeout(re(this,wa)),Be(this,wa,void 0))}},wa=new WeakMap,sC),ba,Wl,Ki,Ea,kn,zc,Ca,gr,bs,oC,Y5=(oC=class extends GC{constructor(e){super();mt(this,gr);mt(this,ba);mt(this,Wl);mt(this,Ki);mt(this,Ea);mt(this,kn);mt(this,zc);mt(this,Ca);Be(this,Ca,!1),Be(this,zc,e.defaultOptions),this.setOptions(e.options),this.observers=[],Be(this,Ea,e.client),Be(this,Ki,re(this,Ea).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Be(this,ba,n1(this.options)),this.state=e.state??re(this,ba),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=re(this,kn))==null?void 0:e.promise}setOptions(e){if(this.options={...re(this,zc),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=n1(this.options);t.data!==void 0&&(this.setState(t1(t.data,t.dataUpdatedAt)),Be(this,ba,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,Ki).remove(this)}setData(e,t){const i=$5(this.state.data,e,this.options);return Hn(this,gr,bs).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){Hn(this,gr,bs).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,r;const t=(i=re(this,kn))==null?void 0:i.promise;return(r=re(this,kn))==null||r.cancel(e),t?t.then(pr).catch(pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,ba))}isActive(){return this.observers.some(e=>N5(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>_0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!D5(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=re(this,kn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=re(this,kn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),re(this,Ki).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(re(this,kn)&&(re(this,Ca)?re(this,kn).cancel({revert:!0}):re(this,kn).cancelRetry()),this.scheduleGc()),re(this,Ki).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Hn(this,gr,bs).call(this,{type:"invalidate"})}async fetch(e,t){var l,c,d,f,p,y,m,v,x,w,E,S;if(this.state.fetchStatus!=="idle"&&((l=re(this,kn))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(re(this,kn))return re(this,kn).continueRetry(),re(this,kn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(R=>R.options.queryFn);C&&this.setOptions(C.options)}const i=new AbortController,r=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Be(this,Ca,!0),i.signal)})},s=()=>{const C=zC(this.options,t),F=(()=>{const O={client:re(this,Ea),queryKey:this.queryKey,meta:this.meta};return r(O),O})();return Be(this,Ca,!1),this.options.persister?this.options.persister(C,F,this):C(F)},a=(()=>{const C={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:re(this,Ea),state:this.state,fetchFn:s};return r(C),C})();(c=this.options.behavior)==null||c.onFetch(a,this),Be(this,Wl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Hn(this,gr,bs).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),Be(this,kn,UC({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof x0&&C.revert&&this.setState({...re(this,Wl),fetchStatus:"idle"}),i.abort()},onFail:(C,R)=>{Hn(this,gr,bs).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{Hn(this,gr,bs).call(this,{type:"pause"})},onContinue:()=>{Hn(this,gr,bs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await re(this,kn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(p=re(this,Ki).config).onSuccess)==null||y.call(p,C,this),(v=(m=re(this,Ki).config).onSettled)==null||v.call(m,C,this.state.error,this),C}catch(C){if(C instanceof x0){if(C.silent)return re(this,kn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Hn(this,gr,bs).call(this,{type:"error",error:C}),(w=(x=re(this,Ki).config).onError)==null||w.call(x,C,this),(S=(E=re(this,Ki).config).onSettled)==null||S.call(E,this.state.data,C,this),C}finally{this.scheduleGc()}}},ba=new WeakMap,Wl=new WeakMap,Ki=new WeakMap,Ea=new WeakMap,kn=new WeakMap,zc=new WeakMap,Ca=new WeakMap,gr=new WeakSet,bs=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...K5(i.data,this.options),fetchMeta:e.meta??null};case"success":const r={...i,...t1(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Be(this,Wl,e.manual?r:void 0),r;case"error":const s=e.error;return{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),oi.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),re(this,Ki).notify({query:this,type:"updated",action:e})})},oC);function K5(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$C(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function t1(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function n1(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function i1(n){return{onFetch:(e,t)=>{var d,f,p,y,m;const i=e.options,r=(p=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},w=zC(e.options,e.fetchOptions),E=async(S,C,R)=>{if(v)return Promise.reject();if(C==null&&S.pages.length)return Promise.resolve(S);const O=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:C,direction:R?"backward":"forward",meta:e.options.meta};return x($),$})(),N=await w(O),{maxPages:L}=e.options,z=R?G5:U5;return{pages:z(S.pages,N,L),pageParams:z(S.pageParams,C,L)}};if(r&&s.length){const S=r==="backward",C=S?Z5:r1,R={pages:s,pageParams:o},F=C(i,R);a=await E(R,F,S)}else{const S=n??s.length;do{const C=l===0?o[0]??i.initialPageParam:r1(i,a);if(l>0&&C==null)break;a=await E(a,C),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function r1(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Z5(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var Bc,zr,si,Ta,Br,co,aC,J5=(aC=class extends GC{constructor(e){super();mt(this,Br);mt(this,Bc);mt(this,zr);mt(this,si);mt(this,Ta);Be(this,Bc,e.client),this.mutationId=e.mutationId,Be(this,si,e.mutationCache),Be(this,zr,[]),this.state=e.state||Q5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){re(this,zr).includes(e)||(re(this,zr).push(e),this.clearGcTimeout(),re(this,si).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Be(this,zr,re(this,zr).filter(t=>t!==e)),this.scheduleGc(),re(this,si).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){re(this,zr).length||(this.state.status==="pending"?this.scheduleGc():re(this,si).remove(this))}continue(){var e;return((e=re(this,Ta))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,d,f,p,y,m,v,x,w,E,S,C,R,F,O,N,L;const t=()=>{Hn(this,Br,co).call(this,{type:"continue"})},i={client:re(this,Bc),meta:this.options.meta,mutationKey:this.options.mutationKey};Be(this,Ta,UC({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(z,$)=>{Hn(this,Br,co).call(this,{type:"failed",failureCount:z,error:$})},onPause:()=>{Hn(this,Br,co).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,si).canRun(this)}));const r=this.state.status==="pending",s=!re(this,Ta).canStart();try{if(r)t();else{Hn(this,Br,co).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=re(this,si).config).onMutate)==null?void 0:a.call(o,e,this,i));const $=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,i));$!==this.state.context&&Hn(this,Br,co).call(this,{type:"pending",context:$,variables:e,isPaused:s})}const z=await re(this,Ta).start();return await((f=(d=re(this,si).config).onSuccess)==null?void 0:f.call(d,z,e,this.state.context,this,i)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,z,e,this.state.context,i)),await((v=(m=re(this,si).config).onSettled)==null?void 0:v.call(m,z,null,this.state.variables,this.state.context,this,i)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,z,null,e,this.state.context,i)),Hn(this,Br,co).call(this,{type:"success",data:z}),z}catch(z){try{throw await((S=(E=re(this,si).config).onError)==null?void 0:S.call(E,z,e,this.state.context,this,i)),await((R=(C=this.options).onError)==null?void 0:R.call(C,z,e,this.state.context,i)),await((O=(F=re(this,si).config).onSettled)==null?void 0:O.call(F,void 0,z,this.state.variables,this.state.context,this,i)),await((L=(N=this.options).onSettled)==null?void 0:L.call(N,void 0,z,e,this.state.context,i)),z}finally{Hn(this,Br,co).call(this,{type:"error",error:z})}}finally{re(this,si).runNext(this)}}},Bc=new WeakMap,zr=new WeakMap,si=new WeakMap,Ta=new WeakMap,Br=new WeakSet,co=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),oi.batch(()=>{re(this,zr).forEach(i=>{i.onMutationUpdate(e)}),re(this,si).notify({mutation:this,type:"updated",action:e})})},aC);function Q5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ts,mr,$c,lC,e3=(lC=class extends Kf{constructor(e={}){super();mt(this,Ts);mt(this,mr);mt(this,$c);this.config=e,Be(this,Ts,new Set),Be(this,mr,new Map),Be(this,$c,0)}build(e,t,i){const r=new J5({client:e,mutationCache:this,mutationId:++td(this,$c)._,options:e.defaultMutationOptions(t),state:i});return this.add(r),r}add(e){re(this,Ts).add(e);const t=od(e);if(typeof t=="string"){const i=re(this,mr).get(t);i?i.push(e):re(this,mr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(re(this,Ts).delete(e)){const t=od(e);if(typeof t=="string"){const i=re(this,mr).get(t);if(i)if(i.length>1){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}else i[0]===e&&re(this,mr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=od(e);if(typeof t=="string"){const i=re(this,mr).get(t),r=i==null?void 0:i.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){var i;const t=od(e);if(typeof t=="string"){const r=(i=re(this,mr).get(t))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){oi.batch(()=>{re(this,Ts).forEach(e=>{this.notify({type:"removed",mutation:e})}),re(this,Ts).clear(),re(this,mr).clear()})}getAll(){return Array.from(re(this,Ts))}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Jw(t,i))}findAll(e={}){return this.getAll().filter(t=>Jw(e,t))}notify(e){oi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return oi.batch(()=>Promise.all(e.map(t=>t.continue().catch(pr))))}},Ts=new WeakMap,mr=new WeakMap,$c=new WeakMap,lC);function od(n){var e;return(e=n.options.scope)==null?void 0:e.id}var $r,uC,t3=(uC=class extends Kf{constructor(e={}){super();mt(this,$r);this.config=e,Be(this,$r,new Map)}build(e,t,i){const r=t.queryKey,s=t.queryHash??Oy(r,t);let o=this.get(s);return o||(o=new Y5({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){re(this,$r).has(e.queryHash)||(re(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=re(this,$r).get(e.queryHash);t&&(e.destroy(),t===e&&re(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){oi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return re(this,$r).get(e)}getAll(){return[...re(this,$r).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Zw(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>Zw(e,i)):t}notify(e){oi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){oi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){oi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,uC),sn,xo,wo,jl,Hl,bo,Vl,Xl,cC,n3=(cC=class{constructor(n={}){mt(this,sn);mt(this,xo);mt(this,wo);mt(this,jl);mt(this,Hl);mt(this,bo);mt(this,Vl);mt(this,Xl);Be(this,sn,n.queryCache||new t3),Be(this,xo,n.mutationCache||new e3),Be(this,wo,n.defaultOptions||{}),Be(this,jl,new Map),Be(this,Hl,new Map),Be(this,bo,0)}mount(){td(this,bo)._++,re(this,bo)===1&&(Be(this,Vl,BC.subscribe(async n=>{n&&(await this.resumePausedMutations(),re(this,sn).onFocus())})),Be(this,Xl,of.subscribe(async n=>{n&&(await this.resumePausedMutations(),re(this,sn).onOnline())})))}unmount(){var n,e;td(this,bo)._--,re(this,bo)===0&&((n=re(this,Vl))==null||n.call(this),Be(this,Vl,void 0),(e=re(this,Xl))==null||e.call(this),Be(this,Xl,void 0))}isFetching(n){return re(this,sn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return re(this,xo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=re(this,sn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=re(this,sn).build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(_0(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return re(this,sn).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),r=re(this,sn).get(i.queryHash),s=r==null?void 0:r.state.data,o=O5(e,s);if(o!==void 0)return re(this,sn).build(this,i).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return oi.batch(()=>re(this,sn).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=re(this,sn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=re(this,sn);oi.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=re(this,sn);return oi.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=oi.batch(()=>re(this,sn).findAll(n).map(r=>r.cancel(t)));return Promise.all(i).then(pr).catch(pr)}invalidateQueries(n,e={}){return oi.batch(()=>(re(this,sn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=oi.batch(()=>re(this,sn).findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let s=r.fetch(void 0,t);return t.throwOnError||(s=s.catch(pr)),r.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(pr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=re(this,sn).build(this,e);return t.isStaleByTime(_0(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(pr).catch(pr)}fetchInfiniteQuery(n){return n.behavior=i1(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(pr).catch(pr)}ensureInfiniteQueryData(n){return n.behavior=i1(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return of.isOnline()?re(this,xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,sn)}getMutationCache(){return re(this,xo)}getDefaultOptions(){return re(this,wo)}setDefaultOptions(n){Be(this,wo,n)}setQueryDefaults(n,e){re(this,jl).set(fc(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...re(this,jl).values()],t={};return e.forEach(i=>{pc(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){re(this,Hl).set(fc(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...re(this,Hl).values()],t={};return e.forEach(i=>{pc(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...re(this,wo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Oy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Fy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...re(this,wo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){re(this,sn).clear(),re(this,xo).clear()}},sn=new WeakMap,xo=new WeakMap,wo=new WeakMap,jl=new WeakMap,Hl=new WeakMap,bo=new WeakMap,Vl=new WeakMap,Xl=new WeakMap,cC);function qC(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var w0={exports:{}},fm={exports:{}};const i3=Object.freeze(Object.defineProperty({__proto__:null,BRAND:bF,DIRTY:EF,EMPTY_PATH:CF,INVALID:TF,NEVER:SF,OK:RF,ParseStatus:IF,Schema:dm,ZodAny:AF,ZodArray:PF,ZodBigInt:MF,ZodBoolean:LF,ZodBranded:kF,ZodCatch:OF,ZodDate:FF,ZodDefault:DF,ZodDiscriminatedUnion:NF,ZodEffects:jw,ZodEnum:zF,ZodError:BF,get ZodFirstPartyTypeKind(){return $F},ZodFunction:UF,ZodIntersection:GF,ZodIssueCode:qF,ZodLazy:WF,ZodLiteral:jF,ZodMap:HF,ZodNaN:VF,ZodNativeEnum:XF,ZodNever:YF,ZodNull:KF,ZodNullable:ZF,ZodNumber:JF,ZodObject:QF,ZodOptional:eD,ZodParsedType:tD,ZodPipeline:nD,ZodPromise:iD,ZodReadonly:rD,ZodRecord:sD,ZodSchema:dm,ZodSet:oD,ZodString:aD,ZodSymbol:lD,ZodTransformer:jw,ZodTuple:uD,ZodType:dm,ZodUndefined:cD,ZodUnion:hD,ZodUnknown:dD,ZodVoid:fD,addIssueToContext:pD,any:fr,array:ef,bigint:gD,boolean:Mi,coerce:mD,custom:yD,date:_D,datetimeRegex:vD,default:la,defaultErrorMap:xD,discriminatedUnion:wD,effect:Hw,enum:wC,function:Al,getErrorMap:bD,getParsedType:ED,instanceof:CD,intersection:TD,isAborted:SD,isAsync:RD,isDirty:ID,isValid:AD,late:PD,lazy:MD,literal:tf,makeIssue:LD,map:kD,nan:OD,nativeEnum:FD,never:DD,null:bC,nullable:ND,number:hc,object:Ps,get objectUtil(){return zD},oboolean:BD,onumber:$D,optional:UD,ostring:GD,pipeline:qD,preprocess:WD,promise:jD,quotelessJson:HD,record:EC,set:VD,setErrorMap:XD,strictObject:YD,string:Xn,symbol:CC,transformer:Hw,tuple:KD,undefined:ZD,union:nf,unknown:JD,get util(){return QD},void:e5,z:la},Symbol.toStringTag,{value:"Module"})),r3=pC(i3);var s1;function s3(){return s1||(s1=1,function(n,e){let t,i,r;try{typeof qC<"u"&&(t=r3.z)}catch{console.warn("Zod not available in this environment, schema validation will be disabled")}t&&(i=t.object({sub:t.string(),email:t.string().email(),preferred_name:t.string(),isActive:t.boolean().optional(),iss:t.string(),aud:t.string(),exp:t.number(),iat:t.number(),jti:t.string(),nonce:t.string().optional(),auth_time:t.number().optional(),sid:t.string().optional(),azp:t.string().optional(),name:t.string().optional(),token_expired:t.boolean().optional(),token_expires_at:t.string().optional(),source:t.string().optional(),externalProvider:t.record(t.unknown()).optional()}),r=t.object({clientId:t.string(),authServerUrl:t.string().url(),redirectUri:t.string().url(),popupRedirectUri:t.string().url(),scope:t.string(),onLogout:t.function()}).strict()),n.exports&&(n.exports={GetUserInfoSchema:i,AuthServerOAuth2ClientConfigSchema:r},n.exports.default={GetUserInfoSchema:i,AuthServerOAuth2ClientConfigSchema:r})}(fm)),fm.exports}(function(n,e){let t,i;if(typeof qC<"u")try{const o=s3();t=o.GetUserInfoSchema,i=o.AuthServerOAuth2ClientConfigSchema}catch(o){console.warn("Zod schema not available, validation will be skipped:",o.message)}const s=class s{constructor(a){if(i&&a)try{i.parse(a)}catch(l){throw console.error("‚ùå Invalid AuthServerOAuth2Client configuration:",l.errors||l.message),new Error(`Invalid AuthServerOAuth2Client configuration: ${l.message}`)}else{console.warn("‚ö†Ô∏è AuthServerOAuth2Client instantiated with undefined config");return}this.config={...a},this.derived={accountInactive:`${this.config.authServerUrl}/account-inactive`},this.isCrossDomain=this.detectCrossDomain(),console.log(`üîß Initialized ${this.isCrossDomain?"cross-domain":"same-domain"} OAuth2 client`),console.log("üîß Client config:",{clientId:this.config.clientId,redirectUri:this.config.redirectUri,authServerUrl:this.config.authServerUrl,currentOrigin:window.location.origin})}detectCrossDomain(){try{const a=window.location.origin,l=new URL(this.config.authServerUrl),c=l.origin,d=new URL(a).hostname,f=l.hostname,p=d===f||d.endsWith(".telicent.localhost")&&f.endsWith(".telicent.localhost");return console.log(`üåê Domain detection: current=${d}, auth=${f}, sameDomain=${p}`),!p}catch(a){return console.warn("Error detecting domain context, defaulting to cross-domain:",a),!0}}generateCodeVerifier(){const a=new Uint8Array(32);return crypto.getRandomValues(a),this.base64URLEncode(a)}async generateCodeChallenge(a){const c=new TextEncoder().encode(a),d=await crypto.subtle.digest("SHA-256",c);return this.base64URLEncode(new Uint8Array(d))}base64URLEncode(a){return this.base64URLEncodeString(String.fromCharCode.apply(null,a))}base64URLEncodeString(a){return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}generateState(){const a=new Uint8Array(16);return crypto.getRandomValues(a),this.base64URLEncode(a)}generateNonce(){const a=new Uint8Array(16);return crypto.getRandomValues(a),this.base64URLEncode(a)}async login(a=null){const l=this.generateState(),c=this.generateNonce(),d=this.generateCodeVerifier(),f=await this.generateCodeChallenge(d),p=a||this.config.redirectUri;sessionStorage.setItem("oauth_state",l),sessionStorage.setItem("oauth_nonce",c),sessionStorage.setItem("oauth_code_verifier",d),sessionStorage.setItem("oauth_redirect_uri",p);const y=new URLSearchParams({response_type:"code",client_id:this.config.clientId,redirect_uri:p,scope:this.config.scope,state:`${l}.${this.base64URLEncodeString(window.location.href)}`,nonce:c,code_challenge:f,code_challenge_method:"S256"});console.log({params:y});const m=`${this.config.authServerUrl}/oauth2/authorize?${y.toString()}`;console.log("Redirecting current window to:",m),window.location.href=m}async loginWithPopup(a=null,l="width=600,height=700,scrollbars=yes,resizable=yes"){const c=a||this.config.popupRedirectUri;if(!c)throw new Error("redirectUri is required for popup login. Either provide it as a parameter or configure popupRedirectUri in the client config.");const d=this.generateState(),f=this.generateNonce(),p=this.generateCodeVerifier(),y=await this.generateCodeChallenge(p);sessionStorage.setItem("oauth_state",d),sessionStorage.setItem("oauth_nonce",f),sessionStorage.setItem("oauth_code_verifier",p),sessionStorage.setItem("oauth_redirect_uri",c);const m=new URLSearchParams({response_type:"code",client_id:this.config.clientId,redirect_uri:c,scope:this.config.scope,state:d,nonce:f,code_challenge:y,code_challenge_method:"S256"}),v=`${this.config.authServerUrl}/oauth2/authorize?${m.toString()}`;console.log("Opening popup with URL:",v),console.log("Popup features:",l);const w=(window.top||window).open(v,"_blank",l);console.log("Popup opened:",w?"Success":"Blocked or failed"),w&&this.startPopupFlow(w)}async handleCallback(a=null){let l;a?l=new URLSearchParams(a):l=new URLSearchParams(window.location.search);const c=l.get("code"),d=l.get("state"),f=l.get("error");if(f)throw new Error(`OAuth error: ${f}`);if(!c||!d)throw new Error("Missing code or state parameter");const p=sessionStorage.getItem("oauth_state");if(d!==p)throw new Error("Invalid state parameter");const y=sessionStorage.getItem("oauth_code_verifier");if(!y)throw new Error("Missing code verifier");const m=sessionStorage.getItem("oauth_redirect_uri");if(!m)throw new Error("Missing redirect URI");const v=await fetch(`${this.config.authServerUrl}/oauth2/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},credentials:"include",body:new URLSearchParams({grant_type:"authorization_code",client_id:this.config.clientId,code:c,redirect_uri:m,code_verifier:y})});if(!v.ok){let w="Unknown error";const E=`${this.config.authServerUrl}/oauth2/authorize`;let S;try{S=await v.json()}catch{S={error:"unknown",error_description:await v.text()}}if(w=S.error_description||S.error||"Unknown error",S.error==="consent_required"){console.log("Consent required - redirecting to proper OAuth2 flow"),console.log("Redirecting to OAuth2 authorization flow:",E),this.clearLocalStorage(),window.location.href=`${E}/access-denied`;return}throw S.error==="access_denied"&&v.status===400?(console.log(`${w}`),this.clearLocalStorage(),window.location.href=this.derived.accountInactive,new Error(`${w} redirecting to ${this.derived.accountInactive}`)):(this.clearLocalStorage(),new Error(`Token exchange and session creation failed: ${w}`))}const x=await v.json();console.log("üéâ Session created securely via domain cookies (access token never exposed)"),console.log("üìä Session data:",x),console.log("üîç Cross-domain check:",{isCrossDomain:this.isCrossDomain,sessionIsCrossDomain:x.isCrossDomain,hasSessionToken:!!x.sessionToken,sessionToken:x.sessionToken}),this.isCrossDomain&&x.isCrossDomain&&x.sessionToken?(sessionStorage.setItem("auth_session_id",x.sessionToken),console.log("üîë Cross-domain client: Session ID stored for Authorization header use")):console.log("‚ùå Cross-domain session storage skipped - conditions not met");try{await new Promise(E=>setTimeout(E,100));const w=await this.makeAuthenticatedRequest(`${this.config.authServerUrl}/session/idtoken`,{skipAutoLogout:!0});if(!w.ok)console.warn("Failed to retrieve ID token, but continuing with callback completion");else{const E=await w.json();console.log("ID token retrieved in separate call for enhanced security"),E.id_token&&(this.validateIdToken(E.id_token)?(sessionStorage.setItem("auth_id_token",E.id_token),console.log("ID token validated and stored in sessionStorage")):console.warn("ID token validation failed, but continuing with callback"))}}catch(w){console.warn("Error retrieving ID token during callback, but continuing:",w)}return sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_code_verifier"),x}async isAuthenticated(){try{const a={Accept:"application/json"},l=sessionStorage.getItem("auth_session_id");this.isCrossDomain&&l&&(a.Authorization=`Bearer ${l}`,console.log("üîç Using session ID in Authorization header for authentication check"));const c=await fetch(`${this.config.authServerUrl}/session/check`,{method:"GET",headers:a,credentials:"include"});if(c.ok){const d=await c.json();return sessionStorage.setItem("auth_id_token",d.id_token),!0}return!1}catch(a){return console.error("Authentication check error:",a),!1}}decodeJWT(a){try{const c=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(atob(c).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(d)}catch(l){return console.error("Error decoding JWT:",l),null}}validateIdTokenForRecovery(a){try{const l=this.decodeJWT(a);return l?l.aud!==this.config.clientId?(console.error("Audience validation failed",{expected:this.config.clientId,actual:l.aud}),!1):!l.exp||l.exp*1e3<Date.now()?(console.error("Token expired",{exp:l.exp,now:Math.floor(Date.now()/1e3)}),!1):l.iat&&l.iat*1e3<Date.now()-60*60*1e3?(console.error("Token issued too long ago",{iat:l.iat,maxAge:"1 hour"}),!1):(console.log("ID token validation for recovery successful (no nonce check)"),!0):(console.error("Failed to decode ID token payload"),!1)}catch(l){return console.error("ID token validation error:",l),!1}}validateIdToken(a){try{const l=this.decodeJWT(a);if(!l)return console.error("Failed to decode ID token payload"),!1;const c=sessionStorage.getItem("oauth_nonce");return c?!l.nonce||l.nonce!==c?(console.error("Nonce validation failed",{stored:c,token:l.nonce}),!1):l.aud!==this.config.clientId?(console.error("Audience validation failed",{expected:this.config.clientId,actual:l.aud}),!1):!l.exp||l.exp*1e3<Date.now()?(console.error("Token expired",{exp:l.exp,now:Math.floor(Date.now()/1e3)}),!1):l.iat&&l.iat*1e3<Date.now()-5*60*1e3?(console.error("Token issued too long ago",{iat:l.iat,maxAge:"5 minutes"}),!1):(sessionStorage.removeItem("oauth_nonce"),console.log("ID token validation successful"),!0):(console.error("No stored nonce found for validation"),!1)}catch(l){return console.error("ID token validation error:",l),!1}}isIdTokenExpired(){try{const a=sessionStorage.getItem("auth_id_token");if(!a)return!0;const l=this.decodeJWT(a);if(!l||!l.exp)return!0;const c=Math.floor(Date.now()/1e3);return l.exp<c+30}catch(a){return console.error("Error checking ID token expiration:",a),!0}}getUserInfo(){try{const a=sessionStorage.getItem("auth_id_token");if(!a)return console.log("No ID token found in storage"),null;const l=this.decodeJWT(a);if(!l)return console.log("Failed to decode ID token"),null;if(this.isIdTokenExpired())return console.log("ID token is expired"),null;const c={sub:l.sub,email:l.email,preferred_name:l.preferred_name,isActive:l.isActive,iss:l.iss,aud:l.aud,exp:l.exp,iat:l.iat,jti:l.jti,nonce:l.nonce,auth_time:l.auth_time,sid:l.sid,azp:l.azp,name:l.preferred_name||l.name||l.sub,token_expired:!1,token_expires_at:new Date(l.exp*1e3).toISOString(),source:"id_token",externalProvider:l};if(t)try{const d=t.parse(c);return console.log("User info validated successfully against schema"),d}catch(d){return console.error("User info validation failed:",d),console.warn("Returning unvalidated user info. Validation errors:",d.errors),c}return c}catch(a){return console.error("Error getting user info from ID token:",a),null}}async getUserInfoFromAPI(){return console.warn("getUserInfoFromAPI: /userinfo has been removed; returning ID token claims instead."),this.getUserInfo()}getRawIdToken(){return sessionStorage.getItem("auth_id_token")}getCsrfToken(){if(this.isCrossDomain)return null;const a=document.cookie.split(";");for(let l of a){const[c,d]=l.trim().split("=");if(c==="XSRF-TOKEN")return decodeURIComponent(d)}return null}async makeAuthenticatedRequest(a,l={}){const c={Accept:"application/json",...l.headers};if(this.isCrossDomain){const p=sessionStorage.getItem("auth_session_id");p&&(c.Authorization=`Bearer ${p}`,console.log("Using session ID in Authorization header for cross-domain request to:",a))}else if(l.method&&["POST","PUT","DELETE"].includes(l.method.toUpperCase())){const p=this.getCsrfToken();p&&(c["X-XSRF-TOKEN"]=p)}const d={...l,headers:c,credentials:"include"},f=await fetch(a,d);if(f.status===401){const p=l.skipAutoLogout||a.includes("/session/idtoken"),y=a.includes("/session/logout"),m=a.includes("/session/check"),v=a.includes("/userinfo");if(!p&&!y&&!m&&!v)throw console.log("Session expired, redirecting to login"),this.clearLocalStorage(),this.login(),new Error("Session expired");console.warn("401 response during protected operation, not auto-logging out to prevent loops")}return f}beforeRequest(a={}){const l={Accept:"application/json",...a.headers};if(this.isCrossDomain){const c=sessionStorage.getItem("auth_session_id");c&&(l.Authorization=`Bearer ${c}`)}else if(a.method&&["POST","PUT","DELETE"].includes(a.method.toUpperCase())){const c=this.getCsrfToken();c&&(l["X-XSRF-TOKEN"]=c)}return{...a,headers:l,credentials:"include"}}afterRequest(a,l,c={}){if(a.status===401){const d=c.skipAutoLogout||l.includes("/session/idtoken"),f=l.includes("/session/logout"),p=l.includes("/session/check"),y=l.includes("/userinfo");if(!d&&!f&&!p&&!y)throw console.log("Session expired, redirecting to login"),this.clearLocalStorage(),this.login(),new Error("Session expired");console.warn("401 response during protected operation, not auto-logging out to prevent loops")}return a}finishPopupFlow(){window.opener&&window.opener.postMessage({type:"oauth-callback",clientId:this.config.clientId,callbackUrl:window.location.href},"*")}async logout(){try{const a={Accept:"application/json"},l=sessionStorage.getItem("auth_session_id");this.isCrossDomain&&l&&(a.Authorization=`Bearer ${l}`,console.log("üö™ Using session ID in Authorization header for logout"));const c=await fetch(`${this.config.authServerUrl}/session/logout`,{method:"POST",headers:a,credentials:"include"});if(c.ok)try{const d=await c.json();if(d.external_logout&&d.logout_url){console.log("üîó External IDP logout required, redirecting to:",d.logout_url),this.clearLocalStorage(),window.location.href=d.logout_url;return}}catch{console.warn("Logout response is not JSON, continuing with standard logout")}}catch(a){console.error("Logout error (ignoring):",a)}this.clearLocalStorage(),this.config.onLogout()}startPopupFlow(a){console.log("Starting popup tracking...");const l=d=>{if(console.log("Popup message received:",d.data),d.data.clientId!==this.config.clientId){console.log("Ignoring message from different client:",d.data.clientId);return}d.data.type==="oauth-success"?(console.log("OAuth success received from popup"),a.close(),window.removeEventListener("message",l),window.dispatchEvent(new CustomEvent(s.OAUTH_SUCCESS,{detail:d.data}))):d.data.type==="oauth-error"?(console.log("OAuth error received from popup"),a.close(),window.removeEventListener("message",l),window.dispatchEvent(new CustomEvent(s.OAUTH_ERROR,{detail:d.data}))):d.data.type==="oauth-callback"&&(console.log("OAuth callback received from popup"),a.close(),window.removeEventListener("message",l),window.dispatchEvent(new CustomEvent("oauth-callback",{detail:d.data})))};window.addEventListener("message",l),console.log("Added message listener for popup");const c=setInterval(()=>{a.closed&&(clearInterval(c),window.removeEventListener("message",l),console.log("Popup closed manually - cleaning up listeners"))},1e3)}clearLocalStorage(){sessionStorage.removeItem("auth_id_token"),sessionStorage.removeItem("auth_session_id"),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_code_verifier"),sessionStorage.removeItem("oauth_nonce"),console.log("üßπ Cleared all auth-related storage")}};Nu(s,"OAUTH_SUCCESS","oauth-success"),Nu(s,"OAUTH_ERROR","oauth-error");let r=s;n.exports?(n.exports=r,n.exports.default=r,n.exports.AuthServerOAuth2Client=r):(e.default=r,e.AuthServerOAuth2Client=r)})(w0,w0.exports);var o3=w0.exports;const Pl=jf(o3);function a3(n){return Fo("PrivateSwitchBase",n)}Do("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const l3=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],u3=n=>{const{classes:e,checked:t,disabled:i,edge:r}=n,s={root:["root",t&&"checked",i&&"disabled",r&&`edge${An(r)}`],input:["input"]};return Pr(s,a3,e)},c3=mn(dc,{name:"MuiSwitchBase"})(({ownerState:n})=>ye({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),h3=mn("input",{name:"MuiSwitchBase",shouldForwardProp:Vf})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),d3=oe.forwardRef(function(e,t){const{autoFocus:i,checked:r,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:d=!1,icon:f,id:p,inputProps:y,inputRef:m,name:v,onBlur:x,onChange:w,onFocus:E,readOnly:S,required:C=!1,tabIndex:R,type:F,value:O}=e,N=bi(e,l3),[L,z]=RC({controlled:r,default:!!a,name:"SwitchBase",state:"checked"}),$=IC(),U=ne=>{E&&E(ne),$&&$.onFocus&&$.onFocus(ne)},X=ne=>{x&&x(ne),$&&$.onBlur&&$.onBlur(ne)},q=ne=>{if(ne.nativeEvent.defaultPrevented)return;const j=ne.target.checked;z(j),w&&w(ne,j)};let G=l;$&&typeof G>"u"&&(G=$.disabled);const Z=F==="checkbox"||F==="radio",H=ye({},e,{checked:L,disabled:G,disableFocusRipple:c,edge:d}),V=u3(H);return it.jsxs(c3,ye({component:"span",className:In(V.root,o),centerRipple:!0,focusRipple:!c,disabled:G,tabIndex:null,role:void 0,onFocus:U,onBlur:X,ownerState:H,ref:t},N,{children:[it.jsx(h3,ye({autoFocus:i,checked:r,defaultChecked:a,className:V.input,disabled:G,id:Z?p:void 0,name:v,onChange:q,readOnly:S,ref:m,required:C,ownerState:H,tabIndex:R,type:F},F==="checkbox"&&O===void 0?{}:{value:O},y)),L?s:f]}))}),f3=ky(it.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p3=ky(it.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),g3=ky(it.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function m3(n){return Fo("MuiCheckbox",n)}const pm=Do("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),y3=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],_3=n=>{const{classes:e,indeterminate:t,color:i,size:r}=n,s={root:["root",t&&"indeterminate",`color${An(i)}`,`size${An(r)}`]},o=Pr(s,m3,e);return ye({},e,o)},v3=mn(d3,{shouldForwardProp:n=>Vf(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${An(t.size)}`],t.color!=="default"&&e[`color${An(t.color)}`]]}})(({theme:n,ownerState:e})=>ye({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:da(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${pm.checked}, &.${pm.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${pm.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),x3=it.jsx(p3,{}),w3=it.jsx(f3,{}),b3=it.jsx(g3,{}),o1=oe.forwardRef(function(e,t){var i,r;const s=es({props:e,name:"MuiCheckbox"}),{checkedIcon:o=x3,color:a="primary",icon:l=w3,indeterminate:c=!1,indeterminateIcon:d=b3,inputProps:f,size:p="medium",className:y}=s,m=bi(s,y3),v=c?d:l,x=c?d:o,w=ye({},s,{color:a,indeterminate:c,size:p}),E=_3(w);return it.jsx(v3,ye({type:"checkbox",inputProps:ye({"data-indeterminate":c},f),icon:oe.cloneElement(v,{fontSize:(i=v.props.fontSize)!=null?i:p}),checkedIcon:oe.cloneElement(x,{fontSize:(r=x.props.fontSize)!=null?r:p}),ownerState:w,ref:t,className:In(E.root,y)},m,{classes:E}))});function E3(n){return Fo("MuiCircularProgress",n)}Do("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const C3=["className","color","disableShrink","size","style","thickness","value","variant"];let Jf=n=>n,a1,l1,u1,c1;const eo=44,T3=TC(a1||(a1=Jf`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),S3=TC(l1||(l1=Jf`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),R3=n=>{const{classes:e,variant:t,color:i,disableShrink:r}=n,s={root:["root",t,`color${An(i)}`],svg:["svg"],circle:["circle",`circle${An(t)}`,r&&"circleDisableShrink"]};return Pr(s,E3,e)},I3=mn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${An(t.color)}`]]}})(({ownerState:n,theme:e})=>ye({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&uu(u1||(u1=Jf`
      animation: ${0} 1.4s linear infinite;
    `),T3)),A3=mn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),P3=mn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${An(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>ye({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&uu(c1||(c1=Jf`
      animation: ${0} 1.4s ease-in-out infinite;
    `),S3)),WC=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:d=0,variant:f="indeterminate"}=i,p=bi(i,C3),y=ye({},i,{color:s,disableShrink:o,size:a,thickness:c,value:d,variant:f}),m=R3(y),v={},x={},w={};if(f==="determinate"){const E=2*Math.PI*((eo-c)/2);v.strokeDasharray=E.toFixed(3),w["aria-valuenow"]=Math.round(d),v.strokeDashoffset=`${((100-d)/100*E).toFixed(3)}px`,x.transform="rotate(-90deg)"}return it.jsx(I3,ye({className:In(m.root,r),style:ye({width:a,height:a},x,l),ownerState:y,ref:t,role:"progressbar"},w,p,{children:it.jsx(A3,{className:m.svg,ownerState:y,viewBox:`${eo/2} ${eo/2} ${eo} ${eo}`,children:it.jsx(P3,{className:m.circle,style:v,ownerState:y,cx:eo,cy:eo,r:(eo-c)/2,fill:"none",strokeWidth:c})})}))}),M3=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function L3(n,e,t){const i=e.getBoundingClientRect(),r=t&&t.getBoundingClientRect(),s=MC(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const c=s.getComputedStyle(e);o=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,l=0;if(o&&o!=="none"&&typeof o=="string"){const c=o.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),l=parseInt(c[5],10)}return n==="left"?r?`translateX(${r.right+a-i.left}px)`:`translateX(${s.innerWidth+a-i.left}px)`:n==="right"?r?`translateX(-${i.right-r.left-a}px)`:`translateX(-${i.left+i.width-a}px)`:n==="up"?r?`translateY(${r.bottom+l-i.top}px)`:`translateY(${s.innerHeight+l-i.top}px)`:r?`translateY(-${i.top-r.top+i.height-l}px)`:`translateY(-${i.top+i.height-l}px)`}function k3(n){return typeof n=="function"?n():n}function ad(n,e,t){const i=k3(t),r=L3(n,e,i);r&&(e.style.webkitTransform=r,e.style.transform=r)}const O3=oe.forwardRef(function(e,t){const i=$s(),r={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:c,direction:d="down",easing:f=r,in:p,onEnter:y,onEntered:m,onEntering:v,onExit:x,onExited:w,onExiting:E,style:S,timeout:C=s,TransitionComponent:R=E5}=e,F=bi(e,M3),O=oe.useRef(null),N=Xf(PC(l),O,t),L=V=>ne=>{V&&(ne===void 0?V(O.current):V(O.current,ne))},z=L((V,ne)=>{ad(d,V,c),C5(V),y&&y(V,ne)}),$=L((V,ne)=>{const j=Kw({timeout:C,style:S,easing:f},{mode:"enter"});V.style.webkitTransition=i.transitions.create("-webkit-transform",ye({},j)),V.style.transition=i.transitions.create("transform",ye({},j)),V.style.webkitTransform="none",V.style.transform="none",v&&v(V,ne)}),U=L(m),X=L(E),q=L(V=>{const ne=Kw({timeout:C,style:S,easing:f},{mode:"exit"});V.style.webkitTransition=i.transitions.create("-webkit-transform",ne),V.style.transition=i.transitions.create("transform",ne),ad(d,V,c),x&&x(V)}),G=L(V=>{V.style.webkitTransition="",V.style.transition="",w&&w(V)}),Z=V=>{o&&o(O.current,V)},H=oe.useCallback(()=>{O.current&&ad(d,O.current,c)},[d,c]);return oe.useEffect(()=>{if(p||d==="down"||d==="right")return;const V=i5(()=>{O.current&&ad(d,O.current,c)}),ne=MC(O.current);return ne.addEventListener("resize",V),()=>{V.clear(),ne.removeEventListener("resize",V)}},[d,p,c]),oe.useEffect(()=>{p||H()},[p,H]),it.jsx(R,ye({nodeRef:O,onEnter:z,onEntered:U,onEntering:$,onExit:q,onExited:G,onExiting:X,addEndListener:Z,appear:a,in:p,timeout:C},F,{children:(V,ne)=>oe.cloneElement(l,ye({ref:N,style:ye({visibility:V==="exited"&&!p?"hidden":void 0},S,l.props.style)},ne))}))});function F3(n){return Fo("MuiDrawer",n)}Do("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const D3=["BackdropProps"],N3=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],jC=(n,e)=>{const{ownerState:t}=n;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},z3=n=>{const{classes:e,anchor:t,variant:i}=n,r={root:["root"],docked:[(i==="permanent"||i==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${An(t)}`,i!=="temporary"&&`paperAnchorDocked${An(t)}`]};return Pr(r,F3,e)},B3=mn(LC,{name:"MuiDrawer",slot:"Root",overridesResolver:jC})(({theme:n})=>({zIndex:(n.vars||n).zIndex.drawer})),h1=mn("div",{shouldForwardProp:Vf,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:jC})({flex:"0 0 auto"}),$3=mn(Ly,{name:"MuiDrawer",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`paperAnchor${An(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${An(t.anchor)}`]]}})(({theme:n,ownerState:e})=>ye({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(n.vars||n).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(n.vars||n).palette.divider}`})),HC={left:"right",right:"left",top:"down",bottom:"up"};function U3(n){return["left","right"].indexOf(n)!==-1}function G3({direction:n},e){return n==="rtl"&&U3(e)?HC[e]:e}const q3=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiDrawer"}),r=$s(),s=SC(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:l,children:c,className:d,elevation:f=16,hideBackdrop:p=!1,ModalProps:{BackdropProps:y}={},onClose:m,open:v=!1,PaperProps:x={},SlideProps:w,TransitionComponent:E=O3,transitionDuration:S=o,variant:C="temporary"}=i,R=bi(i.ModalProps,D3),F=bi(i,N3),O=oe.useRef(!1);oe.useEffect(()=>{O.current=!0},[]);const N=G3({direction:s?"rtl":"ltr"},a),z=ye({},i,{anchor:a,elevation:f,open:v,variant:C},F),$=z3(z),U=it.jsx($3,ye({elevation:C==="temporary"?f:0,square:!0},x,{className:In($.paper,x.className),ownerState:z,children:c}));if(C==="permanent")return it.jsx(h1,ye({className:In($.root,$.docked,d),ownerState:z,ref:t},F,{children:U}));const X=it.jsx(E,ye({in:v,direction:HC[N],timeout:S,appear:O.current},w,{children:U}));return C==="persistent"?it.jsx(h1,ye({className:In($.root,$.docked,d),ownerState:z,ref:t},F,{children:X})):it.jsx(B3,ye({BackdropProps:ye({},l,y,{transitionDuration:S}),className:In($.root,$.modal,d),open:v,ownerState:z,onClose:m,hideBackdrop:p,ref:t},F,R,{children:X}))});function W3(n){return Fo("MuiFormControlLabel",n)}const Ku=Do("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),j3=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],H3=n=>{const{classes:e,disabled:t,labelPlacement:i,error:r,required:s}=n,o={root:["root",t&&"disabled",`labelPlacement${An(i)}`,r&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",r&&"error"]};return Pr(o,W3,e)},V3=mn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Ku.label}`]:e.label},e.root,e[`labelPlacement${An(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>ye({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ku.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ku.label}`]:{[`&.${Ku.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),X3=mn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${Ku.error}`]:{color:(n.vars||n).palette.error.main}})),Y3=oe.forwardRef(function(e,t){var i,r;const s=es({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:a={},control:l,disabled:c,disableTypography:d,label:f,labelPlacement:p="end",required:y,slotProps:m={}}=s,v=bi(s,j3),x=IC(),w=(i=c??l.props.disabled)!=null?i:x==null?void 0:x.disabled,E=y??l.props.required,S={disabled:w,required:E};["checked","name","onChange","value","inputRef"].forEach(L=>{typeof l.props[L]>"u"&&typeof s[L]<"u"&&(S[L]=s[L])});const C=s5({props:s,muiFormControl:x,states:["error"]}),R=ye({},s,{disabled:w,labelPlacement:p,required:E,error:C.error}),F=H3(R),O=(r=m.typography)!=null?r:a.typography;let N=f;return N!=null&&N.type!==Rs&&!d&&(N=it.jsx(Rs,ye({component:"span"},O,{className:In(F.label,O==null?void 0:O.className),children:N}))),it.jsxs(V3,ye({className:In(F.root,o),ownerState:R,ref:t},v,{children:[oe.cloneElement(l,S),E?it.jsxs(Py,{display:"block",children:[N,it.jsxs(X3,{ownerState:R,"aria-hidden":!0,className:F.asterisk,children:["‚Äâ","*"]})]}):N]}))}),K3=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],Z3=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},J3=n=>{const{alignItems:e,classes:t,dense:i,disabled:r,disableGutters:s,divider:o,selected:a}=n,c=Pr({root:["root",i&&"dense",!s&&"gutters",o&&"divider",r&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},d5,t);return ye({},t,c)},Q3=mn(dc,{shouldForwardProp:n=>Vf(n)||n==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Z3})(({theme:n,ownerState:e})=>ye({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${zu.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:da(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${zu.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:da(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${zu.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:da(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:da(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${zu.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${zu.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),VC=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:s=!1,component:o="div",children:a,dense:l=!1,disableGutters:c=!1,divider:d=!1,focusVisibleClassName:f,selected:p=!1,className:y}=i,m=bi(i,K3),v=oe.useContext(rf),x=oe.useMemo(()=>({dense:l||v.dense||!1,alignItems:r,disableGutters:c}),[r,v.dense,l,c]),w=oe.useRef(null);p5(()=>{s&&w.current&&w.current.focus()},[s]);const E=ye({},i,{alignItems:r,dense:x.dense,disableGutters:c,divider:d,selected:p}),S=J3(E),C=Xf(w,t);return it.jsx(rf.Provider,{value:x,children:it.jsx(Q3,ye({ref:C,href:m.href||m.to,component:(m.href||m.to)&&o==="div"?"button":o,focusVisibleClassName:In(S.focusVisible,f),ownerState:E,className:In(S.root,y)},m,{classes:S,children:a}))})}),eN=["className"],tN=n=>{const{alignItems:e,classes:t}=n;return Pr({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},g5,t)},nN=mn("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:n,ownerState:e})=>ye({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),Qf=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiListItemIcon"}),{className:r}=i,s=bi(i,eN),o=oe.useContext(rf),a=ye({},i,{alignItems:o.alignItems}),l=tN(a);return it.jsx(nN,ye({className:In(l.root,r),ownerState:a,ref:t},s))}),iN=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],rN=n=>{const{classes:e,inset:t,primary:i,secondary:r,dense:s}=n;return Pr({root:["root",t&&"inset",s&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},m5,e)},sN=mn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Yw.primary}`]:e.primary},{[`& .${Yw.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})(({ownerState:n})=>ye({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},n.primary&&n.secondary&&{marginTop:6,marginBottom:6},n.inset&&{paddingLeft:56})),ep=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiListItemText"}),{children:r,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:d,secondaryTypographyProps:f}=i,p=bi(i,iN),{dense:y}=oe.useContext(rf);let m=l??r,v=d;const x=ye({},i,{disableTypography:o,inset:a,primary:!!m,secondary:!!v,dense:y}),w=rN(x);return m!=null&&m.type!==Rs&&!o&&(m=it.jsx(Rs,ye({variant:y?"body2":"body1",className:w.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:m}))),v!=null&&v.type!==Rs&&!o&&(v=it.jsx(Rs,ye({variant:"body2",className:w.secondary,color:"text.secondary",display:"block"},f,{children:v}))),it.jsxs(sN,ye({className:In(w.root,s),ownerState:x,ref:t},p,{children:[m,v]}))});function oN(n){return Fo("MuiTooltip",n)}const Is=Do("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),aN=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function lN(n){return Math.round(n*1e5)/1e5}const uN=n=>{const{classes:e,disableInteractive:t,arrow:i,touch:r,placement:s}=n,o={popper:["popper",!t&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",r&&"touch",`tooltipPlacement${An(s.split("-")[0])}`],arrow:["arrow"]};return Pr(o,oN,e)},cN=mn(Ry,{name:"MuiTooltip",slot:"Popper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(({theme:n,ownerState:e,open:t})=>ye({zIndex:(n.vars||n).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!t&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Is.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Is.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Is.arrow}`]:ye({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Is.arrow}`]:ye({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),hN=mn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${An(t.placement.split("-")[0])}`]]}})(({theme:n,ownerState:e})=>ye({backgroundColor:n.vars?n.vars.palette.Tooltip.bg:da(n.palette.grey[700],.92),borderRadius:(n.vars||n).shape.borderRadius,color:(n.vars||n).palette.common.white,fontFamily:n.typography.fontFamily,padding:"4px 8px",fontSize:n.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:n.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:n.typography.pxToRem(14),lineHeight:`${lN(16/14)}em`,fontWeight:n.typography.fontWeightRegular},{[`.${Is.popper}[data-popper-placement*="left"] &`]:ye({transformOrigin:"right center"},e.isRtl?ye({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):ye({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Is.popper}[data-popper-placement*="right"] &`]:ye({transformOrigin:"left center"},e.isRtl?ye({marginRight:"14px"},e.touch&&{marginRight:"24px"}):ye({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Is.popper}[data-popper-placement*="top"] &`]:ye({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Is.popper}[data-popper-placement*="bottom"] &`]:ye({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),dN=mn("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(n,e)=>e.arrow})(({theme:n})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:n.vars?n.vars.palette.Tooltip.bg:da(n.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let ld=!1;const d1=new r5;let Bu={x:0,y:0};function ud(n,e){return(t,...i)=>{e&&e(t,...i),n(t,...i)}}const Dy=oe.forwardRef(function(e,t){var i,r,s,o,a,l,c,d,f,p,y,m,v,x,w,E,S,C,R;const F=es({props:e,name:"MuiTooltip"}),{arrow:O=!1,children:N,components:L={},componentsProps:z={},describeChild:$=!1,disableFocusListener:U=!1,disableHoverListener:X=!1,disableInteractive:q=!1,disableTouchListener:G=!1,enterDelay:Z=100,enterNextDelay:H=0,enterTouchDelay:V=700,followCursor:ne=!1,id:j,leaveDelay:ge=0,leaveTouchDelay:le=1500,onClose:Ce,onOpen:qe,open:Ee,placement:Ke="bottom",PopperComponent:$e,PopperProps:Se={},slotProps:De={},slots:de={},title:At,TransitionComponent:Nn=Vw,TransitionProps:Ue}=F,Nt=bi(F,aN),ut=oe.isValidElement(N)?N:it.jsx("span",{children:N}),vt=$s(),Ut=SC(),[dt,Mn]=oe.useState(),[Gt,k]=oe.useState(null),Dt=oe.useRef(!1),Ve=q||ne,ct=id(),We=id(),Ze=id(),be=id(),[wt,Fe]=RC({controlled:Ee,default:!1,name:"Tooltip",state:"open"});let Ie=wt;const Ae=a5(j),Et=oe.useRef(),jt=Xw(()=>{Et.current!==void 0&&(document.body.style.WebkitUserSelect=Et.current,Et.current=void 0),be.clear()});oe.useEffect(()=>jt,[jt]);const Kt=Je=>{d1.clear(),ld=!0,Fe(!0),qe&&!Ie&&qe(Je)},Ct=Xw(Je=>{d1.start(800+ge,()=>{ld=!1}),Fe(!1),Ce&&Ie&&Ce(Je),ct.start(vt.transitions.duration.shortest,()=>{Dt.current=!1})}),kt=Je=>{Dt.current&&Je.type!=="touchstart"||(dt&&dt.removeAttribute("title"),We.clear(),Ze.clear(),Z||ld&&H?We.start(ld?H:Z,()=>{Kt(Je)}):Kt(Je))},ft=Je=>{We.clear(),Ze.start(ge,()=>{Ct(Je)})},{isFocusVisibleRef:qt,onBlur:tn,onFocus:pt,ref:ln}=t5(),[,Gn]=oe.useState(!1),sr=Je=>{tn(Je),qt.current===!1&&(Gn(!1),ft(Je))},Ei=Je=>{dt||Mn(Je.currentTarget),pt(Je),qt.current===!0&&(Gn(!0),kt(Je))},un=Je=>{Dt.current=!0;const En=ut.props;En.onTouchStart&&En.onTouchStart(Je)},zn=Je=>{un(Je),Ze.clear(),ct.clear(),jt(),Et.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",be.start(V,()=>{document.body.style.WebkitUserSelect=Et.current,kt(Je)})},wn=Je=>{ut.props.onTouchEnd&&ut.props.onTouchEnd(Je),jt(),Ze.start(le,()=>{Ct(Je)})};oe.useEffect(()=>{if(!Ie)return;function Je(En){(En.key==="Escape"||En.key==="Esc")&&Ct(En)}return document.addEventListener("keydown",Je),()=>{document.removeEventListener("keydown",Je)}},[Ct,Ie]);const qn=Xf(PC(ut),ln,Mn,t);!At&&At!==0&&(Ie=!1);const nn=oe.useRef(),ei=Je=>{const En=ut.props;En.onMouseMove&&En.onMouseMove(Je),Bu={x:Je.clientX,y:Je.clientY},nn.current&&nn.current.update()},cn={},bt=typeof At=="string";$?(cn.title=!Ie&&bt&&!X?At:null,cn["aria-describedby"]=Ie?Ae:null):(cn["aria-label"]=bt?At:null,cn["aria-labelledby"]=Ie&&!bt?Ae:null);const xt=ye({},cn,Nt,ut.props,{className:In(Nt.className,ut.props.className),onTouchStart:un,ref:qn},ne?{onMouseMove:ei}:{}),bn={};G||(xt.onTouchStart=zn,xt.onTouchEnd=wn),X||(xt.onMouseOver=ud(kt,xt.onMouseOver),xt.onMouseLeave=ud(ft,xt.onMouseLeave),Ve||(bn.onMouseOver=kt,bn.onMouseLeave=ft)),U||(xt.onFocus=ud(Ei,xt.onFocus),xt.onBlur=ud(sr,xt.onBlur),Ve||(bn.onFocus=Ei,bn.onBlur=sr));const $o=oe.useMemo(()=>{var Je;let En=[{name:"arrow",enabled:!!Gt,options:{element:Gt,padding:4}}];return(Je=Se.popperOptions)!=null&&Je.modifiers&&(En=En.concat(Se.popperOptions.modifiers)),ye({},Se.popperOptions,{modifiers:En})},[Gt,Se]),os=ye({},F,{isRtl:Ut,arrow:O,disableInteractive:Ve,placement:Ke,PopperComponentProp:$e,touch:Dt.current}),as=uN(os),yn=(i=(r=de.popper)!=null?r:L.Popper)!=null?i:cN,Uo=(s=(o=(a=de.transition)!=null?a:L.Transition)!=null?o:Nn)!=null?s:Vw,or=(l=(c=de.tooltip)!=null?c:L.Tooltip)!=null?l:hN,Go=(d=(f=de.arrow)!=null?f:L.Arrow)!=null?d:dN,Pt=rd(yn,ye({},Se,(p=De.popper)!=null?p:z.popper,{className:In(as.popper,Se==null?void 0:Se.className,(y=(m=De.popper)!=null?m:z.popper)==null?void 0:y.className)}),os),Ka=rd(Uo,ye({},Ue,(v=De.transition)!=null?v:z.transition),os),Za=rd(or,ye({},(x=De.tooltip)!=null?x:z.tooltip,{className:In(as.tooltip,(w=(E=De.tooltip)!=null?E:z.tooltip)==null?void 0:w.className)}),os),xu=rd(Go,ye({},(S=De.arrow)!=null?S:z.arrow,{className:In(as.arrow,(C=(R=De.arrow)!=null?R:z.arrow)==null?void 0:C.className)}),os);return it.jsxs(oe.Fragment,{children:[oe.cloneElement(ut,xt),it.jsx(yn,ye({as:$e??Ry,placement:Ke,anchorEl:ne?{getBoundingClientRect:()=>({top:Bu.y,left:Bu.x,right:Bu.x,bottom:Bu.y,width:0,height:0})}:dt,popperRef:nn,open:dt?Ie:!1,id:Ae,transition:!0},bn,Pt,{popperOptions:$o,children:({TransitionProps:Je})=>it.jsx(Uo,ye({timeout:vt.transitions.duration.shorter},Je,Ka,{children:it.jsxs(or,ye({},Za,{children:[At,O?it.jsx(Go,ye({},xu,{ref:k})):null]}))}))}))]})});function fN(n){return Fo("MuiToolbar",n)}Do("MuiToolbar",["root","gutters","regular","dense"]);const pN=["className","component","disableGutters","variant"],gN=n=>{const{classes:e,disableGutters:t,variant:i}=n;return Pr({root:["root",!t&&"gutters",i]},fN,e)},mN=mn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableGutters&&e.gutters,e[t.variant]]}})(({theme:n,ownerState:e})=>ye({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:n,ownerState:e})=>e.variant==="regular"&&n.mixins.toolbar),yN=oe.forwardRef(function(e,t){const i=es({props:e,name:"MuiToolbar"}),{className:r,component:s="div",disableGutters:o=!1,variant:a="regular"}=i,l=bi(i,pN),c=ye({},i,{component:s,disableGutters:o,variant:a}),d=gN(c);return it.jsx(mN,ye({as:s,className:In(d.root,r),ref:t,ownerState:c},l))});function _N(n){return Fo("MuiToggleButton",n)}const f1=Do("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),vN=oe.createContext({}),xN=oe.createContext(void 0);function wN(n,e){return e===void 0||n===void 0?!1:Array.isArray(e)?e.indexOf(n)>=0:n===e}const bN=["value"],EN=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],CN=n=>{const{classes:e,fullWidth:t,selected:i,disabled:r,size:s,color:o}=n,a={root:["root",i&&"selected",r&&"disabled",t&&"fullWidth",`size${An(s)}`,o]};return Pr(a,_N,e)},TN=mn(dc,{name:"MuiToggleButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`size${An(t.size)}`]]}})(({theme:n,ownerState:e})=>{let t=e.color==="standard"?n.palette.text.primary:n.palette[e.color].main,i;return n.vars&&(t=e.color==="standard"?n.vars.palette.text.primary:n.vars.palette[e.color].main,i=e.color==="standard"?n.vars.palette.text.primaryChannel:n.vars.palette[e.color].mainChannel),ye({},n.typography.button,{borderRadius:(n.vars||n).shape.borderRadius,padding:11,border:`1px solid ${(n.vars||n).palette.divider}`,color:(n.vars||n).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${f1.disabled}`]:{color:(n.vars||n).palette.action.disabled,border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:sd(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${f1.selected}`]:{color:t,backgroundColor:n.vars?`rgba(${i} / ${n.vars.palette.action.selectedOpacity})`:sd(t,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?`rgba(${i} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:sd(t,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${i} / ${n.vars.palette.action.selectedOpacity})`:sd(t,n.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:n.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:n.typography.pxToRem(15)})}),XC=oe.forwardRef(function(e,t){const i=oe.useContext(vN),{value:r}=i,s=bi(i,bN),o=oe.useContext(xN),a=n5(ye({},s,{selected:wN(e.value,r)}),e),l=es({props:a,name:"MuiToggleButton"}),{children:c,className:d,color:f="standard",disabled:p=!1,disableFocusRipple:y=!1,fullWidth:m=!1,onChange:v,onClick:x,selected:w,size:E="medium",value:S}=l,C=bi(l,EN),R=ye({},l,{color:f,disabled:p,disableFocusRipple:y,fullWidth:m,size:E}),F=CN(R),O=L=>{x&&(x(L,S),L.defaultPrevented)||v&&v(L,S)},N=o||"";return it.jsx(TN,ye({className:In(s.className,F.root,d,N),disabled:p,focusRipple:!y,ref:t,onClick:O,onChange:v,value:S,ownerState:R,"aria-pressed":w},C,{children:c}))}),YC=({faIcon:n,id:e,size:t,...i})=>Q(Bs,{"aria-label":i["aria-label"],id:e,icon:n,size:t,...i});YC.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{faIcon:{required:!0,tsType:{name:"IconProp"},description:""}},composes:["Partial"]};const SN=n=>Q(YC,{faIcon:xC,...n});SN.__docgenInfo={description:"",methods:[],displayName:"TeliSearchIcon"};var KC={},ZC={},Ny={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){if(t=`${t}`,t==="0")return"0";if(/^[+-]?(\d+|\d*\.\d+)(e[+-]?\d+)?(%|\w+)?$/.test(t))return t.replace(/^[+-]?/,r=>r==="-"?"":"-");let i=["var","calc","min","max","clamp"];for(const r of i)if(t.includes(`${r}(`))return`calc(${t} * -1)`}})(Ny);var JC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});const e=["preflight","container","accessibility","pointerEvents","visibility","position","inset","isolation","zIndex","order","gridColumn","gridColumnStart","gridColumnEnd","gridRow","gridRowStart","gridRowEnd","float","clear","margin","boxSizing","lineClamp","display","aspectRatio","size","height","maxHeight","minHeight","width","minWidth","maxWidth","flex","flexShrink","flexGrow","flexBasis","tableLayout","captionSide","borderCollapse","borderSpacing","transformOrigin","translate","rotate","skew","scale","transform","animation","cursor","touchAction","userSelect","resize","scrollSnapType","scrollSnapAlign","scrollSnapStop","scrollMargin","scrollPadding","listStylePosition","listStyleType","listStyleImage","appearance","columns","breakBefore","breakInside","breakAfter","gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateColumns","gridTemplateRows","flexDirection","flexWrap","placeContent","placeItems","alignContent","alignItems","justifyContent","justifyItems","gap","space","divideWidth","divideStyle","divideColor","divideOpacity","placeSelf","alignSelf","justifySelf","overflow","overscrollBehavior","scrollBehavior","textOverflow","hyphens","whitespace","textWrap","wordBreak","borderRadius","borderWidth","borderStyle","borderColor","borderOpacity","backgroundColor","backgroundOpacity","backgroundImage","gradientColorStops","boxDecorationBreak","backgroundSize","backgroundAttachment","backgroundClip","backgroundPosition","backgroundRepeat","backgroundOrigin","fill","stroke","strokeWidth","objectFit","objectPosition","padding","textAlign","textIndent","verticalAlign","fontFamily","fontSize","fontWeight","textTransform","fontStyle","fontVariantNumeric","lineHeight","letterSpacing","textColor","textOpacity","textDecoration","textDecorationColor","textDecorationStyle","textDecorationThickness","textUnderlineOffset","fontSmoothing","placeholderColor","placeholderOpacity","caretColor","accentColor","opacity","backgroundBlendMode","mixBlendMode","boxShadow","boxShadowColor","outlineStyle","outlineWidth","outlineOffset","outlineColor","ringWidth","ringColor","ringOpacity","ringOffsetWidth","ringOffsetColor","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","saturate","sepia","filter","backdropBlur","backdropBrightness","backdropContrast","backdropGrayscale","backdropHueRotate","backdropInvert","backdropOpacity","backdropSaturate","backdropSepia","backdropFilter","transitionProperty","transitionDelay","transitionDuration","transitionTimingFunction","willChange","contain","content","forcedColorAdjust"]})(JC);var QC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t,i){return t===void 0?i:Array.isArray(t)?t:[...new Set(i.filter(s=>t!==!1&&t[s]!==!1).concat(Object.keys(t).filter(s=>t[s]!==!1)))]}})(QC);var eT={},tp={},zy={exports:{}},tt=String,tT=function(){return{isColorSupported:!1,reset:tt,bold:tt,dim:tt,italic:tt,underline:tt,inverse:tt,hidden:tt,strikethrough:tt,black:tt,red:tt,green:tt,yellow:tt,blue:tt,magenta:tt,cyan:tt,white:tt,gray:tt,bgBlack:tt,bgRed:tt,bgGreen:tt,bgYellow:tt,bgBlue:tt,bgMagenta:tt,bgCyan:tt,bgWhite:tt,blackBright:tt,redBright:tt,greenBright:tt,yellowBright:tt,blueBright:tt,magentaBright:tt,cyanBright:tt,whiteBright:tt,bgBlackBright:tt,bgRedBright:tt,bgGreenBright:tt,bgYellowBright:tt,bgBlueBright:tt,bgMagentaBright:tt,bgCyanBright:tt,bgWhiteBright:tt}};zy.exports=tT();zy.exports.createColors=tT;var nT=zy.exports;(function(n){var e={};Object.defineProperty(n,"__esModule",{value:!0});function t(c,d){for(var f in d)Object.defineProperty(c,f,{enumerable:!0,get:d[f]})}t(n,{dim:function(){return a},default:function(){return l}});const i=r(nT);function r(c){return c&&c.__esModule?c:{default:c}}let s=new Set;function o(c,d,f){typeof process<"u"&&e.JEST_WORKER_ID||f&&s.has(f)||(f&&s.add(f),console.warn(""),d.forEach(p=>console.warn(c,"-",p)))}function a(c){return i.default.dim(c)}const l={info(c,d){o(i.default.bold(i.default.cyan("info")),...Array.isArray(c)?[c]:[d,c])},warn(c,d){o(i.default.bold(i.default.yellow("warn")),...Array.isArray(c)?[c]:[d,c])},risk(c,d){o(i.default.bold(i.default.magenta("risk")),...Array.isArray(c)?[c]:[d,c])}}})(tp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}});const e=t(tp);function t(s){return s&&s.__esModule?s:{default:s}}function i({version:s,from:o,to:a}){e.default.warn(`${o}-color-renamed`,[`As of Tailwind CSS ${s}, \`${o}\` has been renamed to \`${a}\`.`,"Update your configuration file to silence this warning."])}const r={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return i({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return i({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return i({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return i({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return i({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(eT);var iT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"defaults",{enumerable:!0,get:function(){return e}});function e(t,...i){for(let o of i){for(let a in o){var r;!(t==null||(r=t.hasOwnProperty)===null||r===void 0)&&r.call(t,a)||(t[a]=o[a])}for(let a of Object.getOwnPropertySymbols(o)){var s;!(t==null||(s=t.hasOwnProperty)===null||s===void 0)&&s.call(t,a)||(t[a]=o[a])}}return t}})(iT);var rT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"toPath",{enumerable:!0,get:function(){return e}});function e(t){if(Array.isArray(t))return t;let i=t.split("[").length-1,r=t.split("]").length-1;if(i!==r)throw new Error(`Path is invalid. Has unbalanced brackets: ${t}`);return t.split(/\.(?![^\[]*\])|[\[\]]/g).filter(Boolean)}})(rT);var sT={},np={};(function(n){var e={};Object.defineProperty(n,"__esModule",{value:!0});function t(p,y){for(var m in y)Object.defineProperty(p,m,{enumerable:!0,get:y[m]})}t(n,{flagEnabled:function(){return l},issueFlagNotices:function(){return d},default:function(){return f}});const i=s(nT),r=s(tp);function s(p){return p&&p.__esModule?p:{default:p}}let o={optimizeUniversalDefaults:!1,generalizedModifiers:!0,disableColorOpacityUtilitiesByDefault:!1,relativeContentPathsByDefault:!1},a={future:["hoverOnlyWhenSupported","respectDefaultRingColorOpacity","disableColorOpacityUtilitiesByDefault","relativeContentPathsByDefault"],experimental:["optimizeUniversalDefaults","generalizedModifiers"]};function l(p,y){if(a.future.includes(y)){var m,v,x;return p.future==="all"||((x=(v=p==null||(m=p.future)===null||m===void 0?void 0:m[y])!==null&&v!==void 0?v:o[y])!==null&&x!==void 0?x:!1)}if(a.experimental.includes(y)){var w,E,S;return p.experimental==="all"||((S=(E=p==null||(w=p.experimental)===null||w===void 0?void 0:w[y])!==null&&E!==void 0?E:o[y])!==null&&S!==void 0?S:!1)}return!1}function c(p){if(p.experimental==="all")return a.experimental;var y;return Object.keys((y=p==null?void 0:p.experimental)!==null&&y!==void 0?y:{}).filter(m=>a.experimental.includes(m)&&p.experimental[m])}function d(p){if(e.JEST_WORKER_ID===void 0&&c(p).length>0){let y=c(p).map(m=>i.default.yellow(m)).join(", ");r.default.warn("experimental-flags-enabled",[`You have enabled experimental features: ${y}`,"Experimental features in Tailwind CSS are not covered by semver, may introduce breaking changes, and can change at any time."])}}const f=a})(np);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"normalizeConfig",{enumerable:!0,get:function(){return s}});const e=np,t=r(tp);function i(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,l=new WeakMap;return(i=function(c){return c?l:a})(o)}function r(o,a){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var l=i(a);if(l&&l.has(o))return l.get(o);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in o)if(f!=="default"&&Object.prototype.hasOwnProperty.call(o,f)){var p=d?Object.getOwnPropertyDescriptor(o,f):null;p&&(p.get||p.set)?Object.defineProperty(c,f,p):c[f]=o[f]}return c.default=o,l&&l.set(o,c),c}function s(o){if((()=>{if(o.purge||!o.content||!Array.isArray(o.content)&&!(typeof o.content=="object"&&o.content!==null))return!1;if(Array.isArray(o.content))return o.content.every(c=>typeof c=="string"?!0:!(typeof(c==null?void 0:c.raw)!="string"||c!=null&&c.extension&&typeof(c==null?void 0:c.extension)!="string"));if(typeof o.content=="object"&&o.content!==null){if(Object.keys(o.content).some(c=>!["files","relative","extract","transform"].includes(c)))return!1;if(Array.isArray(o.content.files)){if(!o.content.files.every(c=>typeof c=="string"?!0:!(typeof(c==null?void 0:c.raw)!="string"||c!=null&&c.extension&&typeof(c==null?void 0:c.extension)!="string")))return!1;if(typeof o.content.extract=="object"){for(let c of Object.values(o.content.extract))if(typeof c!="function")return!1}else if(!(o.content.extract===void 0||typeof o.content.extract=="function"))return!1;if(typeof o.content.transform=="object"){for(let c of Object.values(o.content.transform))if(typeof c!="function")return!1}else if(!(o.content.transform===void 0||typeof o.content.transform=="function"))return!1;if(typeof o.content.relative!="boolean"&&typeof o.content.relative<"u")return!1}return!0}return!1})()||t.default.warn("purge-deprecation",["The `purge`/`content` options have changed in Tailwind CSS v3.0.","Update your configuration file to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#configure-content-sources"]),o.safelist=(()=>{var c;let{content:d,purge:f,safelist:p}=o;return Array.isArray(p)?p:Array.isArray(d==null?void 0:d.safelist)?d.safelist:Array.isArray(f==null?void 0:f.safelist)?f.safelist:Array.isArray(f==null||(c=f.options)===null||c===void 0?void 0:c.safelist)?f.options.safelist:[]})(),o.blocklist=(()=>{let{blocklist:c}=o;if(Array.isArray(c)){if(c.every(d=>typeof d=="string"))return c;t.default.warn("blocklist-invalid",["The `blocklist` option must be an array of strings.","https://tailwindcss.com/docs/content-configuration#discarding-classes"])}return[]})(),typeof o.prefix=="function")t.default.warn("prefix-function",["As of Tailwind CSS v3.0, `prefix` cannot be a function.","Update `prefix` in your configuration to be a string to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#prefix-cannot-be-a-function"]),o.prefix="";else{var l;o.prefix=(l=o.prefix)!==null&&l!==void 0?l:""}o.content={relative:(()=>{let{content:c}=o;return c!=null&&c.relative?c.relative:(0,e.flagEnabled)(o,"relativeContentPathsByDefault")})(),files:(()=>{let{content:c,purge:d}=o;return Array.isArray(d)?d:Array.isArray(d==null?void 0:d.content)?d.content:Array.isArray(c)?c:Array.isArray(c==null?void 0:c.content)?c.content:Array.isArray(c==null?void 0:c.files)?c.files:[]})(),extract:(()=>{let c=(()=>{var p,y,m,v,x,w,E,S,C,R;return!((p=o.purge)===null||p===void 0)&&p.extract?o.purge.extract:!((y=o.content)===null||y===void 0)&&y.extract?o.content.extract:!((m=o.purge)===null||m===void 0||(v=m.extract)===null||v===void 0)&&v.DEFAULT?o.purge.extract.DEFAULT:!((x=o.content)===null||x===void 0||(w=x.extract)===null||w===void 0)&&w.DEFAULT?o.content.extract.DEFAULT:!((E=o.purge)===null||E===void 0||(S=E.options)===null||S===void 0)&&S.extractors?o.purge.options.extractors:!((C=o.content)===null||C===void 0||(R=C.options)===null||R===void 0)&&R.extractors?o.content.options.extractors:{}})(),d={},f=(()=>{var p,y,m,v;if(!((p=o.purge)===null||p===void 0||(y=p.options)===null||y===void 0)&&y.defaultExtractor)return o.purge.options.defaultExtractor;if(!((m=o.content)===null||m===void 0||(v=m.options)===null||v===void 0)&&v.defaultExtractor)return o.content.options.defaultExtractor})();if(f!==void 0&&(d.DEFAULT=f),typeof c=="function")d.DEFAULT=c;else if(Array.isArray(c))for(let{extensions:p,extractor:y}of c??[])for(let m of p)d[m]=y;else typeof c=="object"&&c!==null&&Object.assign(d,c);return d})(),transform:(()=>{let c=(()=>{var f,p,y,m,v,x;return!((f=o.purge)===null||f===void 0)&&f.transform?o.purge.transform:!((p=o.content)===null||p===void 0)&&p.transform?o.content.transform:!((y=o.purge)===null||y===void 0||(m=y.transform)===null||m===void 0)&&m.DEFAULT?o.purge.transform.DEFAULT:!((v=o.content)===null||v===void 0||(x=v.transform)===null||x===void 0)&&x.DEFAULT?o.content.transform.DEFAULT:{}})(),d={};return typeof c=="function"?d.DEFAULT=c:typeof c=="object"&&c!==null&&Object.assign(d,c),d})()};for(let c of o.content.files)if(typeof c=="string"&&/{([^,]*?)}/g.test(c)){t.default.warn("invalid-glob-braces",[`The glob pattern ${(0,t.dim)(c)} in your Tailwind CSS configuration is invalid.`,`Update it to ${(0,t.dim)(c.replace(/{([^,]*?)}/g,"$1"))} to silence this warning.`]);break}return o}})(sT);var oT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const i=Object.getPrototypeOf(t);return i===null||Object.getPrototypeOf(i)===null}})(oT);var aT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"cloneDeep",{enumerable:!0,get:function(){return e}});function e(t){return Array.isArray(t)?t.map(i=>e(i)):typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([i,r])=>[i,e(r)])):t}})(aT);var lT={},uT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){return t.replace(/\\,/g,"\\2c ")}})(uT);var By={},$y={},cT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});const e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})(cT);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(m,v){for(var x in v)Object.defineProperty(m,x,{enumerable:!0,get:v[x]})}e(n,{parseColor:function(){return p},formatColor:function(){return y}});const t=i(cT);function i(m){return m&&m.__esModule?m:{default:m}}let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,o=/(?:\d+|\d*\.\d+)%?/,a=/(?:\s*,\s*|\s+)/,l=/\s*[,/]\s*/,c=/var\(--(?:[^ )]*?)(?:,(?:[^ )]*?|var\(--[^ )]*?\)))?\)/,d=new RegExp(`^(rgba?)\\(\\s*(${o.source}|${c.source})(?:${a.source}(${o.source}|${c.source}))?(?:${a.source}(${o.source}|${c.source}))?(?:${l.source}(${o.source}|${c.source}))?\\s*\\)$`),f=new RegExp(`^(hsla?)\\(\\s*((?:${o.source})(?:deg|rad|grad|turn)?|${c.source})(?:${a.source}(${o.source}|${c.source}))?(?:${a.source}(${o.source}|${c.source}))?(?:${l.source}(${o.source}|${c.source}))?\\s*\\)$`);function p(m,{loose:v=!1}={}){var x,w;if(typeof m!="string")return null;if(m=m.trim(),m==="transparent")return{mode:"rgb",color:["0","0","0"],alpha:"0"};if(m in t.default)return{mode:"rgb",color:t.default[m].map(F=>F.toString())};let E=m.replace(s,(F,O,N,L,z)=>["#",O,O,N,N,L,L,z?z+z:""].join("")).match(r);if(E!==null)return{mode:"rgb",color:[parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16)].map(F=>F.toString()),alpha:E[4]?(parseInt(E[4],16)/255).toString():void 0};var S;let C=(S=m.match(d))!==null&&S!==void 0?S:m.match(f);if(C===null)return null;let R=[C[2],C[3],C[4]].filter(Boolean).map(F=>F.toString());return R.length===2&&R[0].startsWith("var(")?{mode:C[1],color:[R[0]],alpha:R[1]}:!v&&R.length!==3||R.length<3&&!R.some(F=>/^var\(.*?\)$/.test(F))?null:{mode:C[1],color:R,alpha:(x=C[5])===null||x===void 0||(w=x.toString)===null||w===void 0?void 0:w.call(x)}}function y({mode:m,color:v,alpha:x}){let w=x!==void 0;return m==="rgba"||m==="hsla"?`${m}(${v.join(", ")}${w?`, ${x}`:""})`:`${m}(${v.join(" ")}${w?` / ${x}`:""})`}})($y);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(s,o){for(var a in o)Object.defineProperty(s,a,{enumerable:!0,get:o[a]})}e(n,{withAlphaValue:function(){return i},default:function(){return r}});const t=$y;function i(s,o,a){if(typeof s=="function")return s({opacityValue:o});let l=(0,t.parseColor)(s,{loose:!0});return l===null?a:(0,t.formatColor)({...l,alpha:o})}function r({color:s,property:o,variable:a}){let l=[].concat(o);if(typeof s=="function")return{[a]:"1",...Object.fromEntries(l.map(d=>[d,s({opacityVariable:a,opacityValue:`var(${a}, 1)`})]))};const c=(0,t.parseColor)(s);return c===null?Object.fromEntries(l.map(d=>[d,s])):c.alpha!==void 0?Object.fromEntries(l.map(d=>[d,s])):{[a]:"1",...Object.fromEntries(l.map(d=>[d,(0,t.formatColor)({...c,alpha:`var(${a}, 1)`})]))}}})(By);var Uy={},hT={},ip={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"splitAtTopLevelOnly",{enumerable:!0,get:function(){return e}});function e(t,i){let r=[],s=[],o=0,a=!1;for(let l=0;l<t.length;l++){let c=t[l];r.length===0&&c===i[0]&&!a&&(i.length===1||t.slice(l,l+i.length)===i)&&(s.push(t.slice(o,l)),o=l+i.length),a=a?!1:c==="\\",c==="("||c==="["||c==="{"?r.push(c):(c===")"&&r[r.length-1]==="("||c==="]"&&r[r.length-1]==="["||c==="}"&&r[r.length-1]==="{")&&r.pop()}return s.push(t.slice(o)),s}})(ip);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,c){for(var d in c)Object.defineProperty(l,d,{enumerable:!0,get:c[d]})}e(n,{parseBoxShadowValue:function(){return o},formatBoxShadowValue:function(){return a}});const t=ip;let i=new Set(["inset","inherit","initial","revert","unset"]),r=/\ +(?![^(]*\))/g,s=/^-?(\d+|\.\d+)(.*?)$/g;function o(l){return(0,t.splitAtTopLevelOnly)(l,",").map(d=>{let f=d.trim(),p={raw:f},y=f.split(r),m=new Set;for(let v of y)s.lastIndex=0,!m.has("KEYWORD")&&i.has(v)?(p.keyword=v,m.add("KEYWORD")):s.test(v)?m.has("X")?m.has("Y")?m.has("BLUR")?m.has("SPREAD")||(p.spread=v,m.add("SPREAD")):(p.blur=v,m.add("BLUR")):(p.y=v,m.add("Y")):(p.x=v,m.add("X")):p.color?(p.unknown||(p.unknown=[]),p.unknown.push(v)):p.color=v;return p.valid=p.x!==void 0&&p.y!==void 0,p})}function a(l){return l.map(c=>c.valid?[c.keyword,c.x,c.y,c.blur,c.spread,c.color].filter(Boolean).join(" "):c.raw).join(", ")}})(hT);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(H,V){for(var ne in V)Object.defineProperty(H,ne,{enumerable:!0,get:V[ne]})}e(n,{normalize:function(){return l},normalizeAttributeSelectors:function(){return c},url:function(){return f},number:function(){return p},percentage:function(){return y},length:function(){return x},lineWidth:function(){return E},shadow:function(){return S},color:function(){return C},image:function(){return R},gradient:function(){return O},position:function(){return L},familyName:function(){return z},genericName:function(){return U},absoluteSize:function(){return q},relativeSize:function(){return Z}});const t=$y,i=hT,r=ip;let s=["min","max","clamp","calc"];function o(H){return s.some(V=>new RegExp(`^${V}\\(.*\\)`).test(H))}const a=new Set(["scroll-timeline-name","timeline-scope","view-timeline-name","font-palette","anchor-name","anchor-scope","position-anchor","position-try-options","scroll-timeline","animation-timeline","view-timeline","position-try"]);function l(H,V=null,ne=!0){let j=V&&a.has(V.property);return H.startsWith("--")&&!j?`var(${H})`:H.includes("url(")?H.split(/(url\(.*?\))/g).filter(Boolean).map(ge=>/^url\(.*?\)$/.test(ge)?ge:l(ge,V,!1)).join(""):(H=H.replace(/([^\\])_+/g,(ge,le)=>le+" ".repeat(ge.length-1)).replace(/^_/g," ").replace(/\\_/g,"_"),ne&&(H=H.trim()),H=d(H),H)}function c(H){return H.includes("=")&&(H=H.replace(/(=.*)/g,(V,ne)=>{if(ne[1]==="'"||ne[1]==='"')return ne;if(ne.length>2){let j=ne[ne.length-1];if(ne[ne.length-2]===" "&&(j==="i"||j==="I"||j==="s"||j==="S"))return`="${ne.slice(1,-2)}" ${ne[ne.length-1]}`}return`="${ne.slice(1)}"`})),H}function d(H){let V=["theme"],ne=["min-content","max-content","fit-content","safe-area-inset-top","safe-area-inset-right","safe-area-inset-bottom","safe-area-inset-left","titlebar-area-x","titlebar-area-y","titlebar-area-width","titlebar-area-height","keyboard-inset-top","keyboard-inset-right","keyboard-inset-bottom","keyboard-inset-left","keyboard-inset-width","keyboard-inset-height","radial-gradient","linear-gradient","conic-gradient","repeating-radial-gradient","repeating-linear-gradient","repeating-conic-gradient","anchor-size"];return H.replace(/(calc|min|max|clamp)\(.+\)/g,j=>{let ge="";function le(){let Ce=ge.trimEnd();return Ce[Ce.length-1]}for(let Ce=0;Ce<j.length;Ce++){let qe=function($e){return $e.split("").every((Se,De)=>j[Ce+De]===Se)},Ee=function($e){let Se=1/0;for(let de of $e){let At=j.indexOf(de,Ce);At!==-1&&At<Se&&(Se=At)}let De=j.slice(Ce,Se);return Ce+=De.length-1,De},Ke=j[Ce];if(qe("var"))ge+=Ee([")",","]);else if(ne.some($e=>qe($e))){let $e=ne.find(Se=>qe(Se));ge+=$e,Ce+=$e.length-1}else V.some($e=>qe($e))?ge+=Ee([")"]):qe("[")?ge+=Ee(["]"]):["+","-","*","/"].includes(Ke)&&!["(","+","-","*","/",","].includes(le())?ge+=` ${Ke} `:ge+=Ke}return ge.replace(/\s+/g," ")})}function f(H){return H.startsWith("url(")}function p(H){return!isNaN(Number(H))||o(H)}function y(H){return H.endsWith("%")&&p(H.slice(0,-1))||o(H)}let v=`(?:${["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","lh","rlh","vw","vh","vmin","vmax","vb","vi","svw","svh","lvw","lvh","dvw","dvh","cqw","cqh","cqi","cqb","cqmin","cqmax"].join("|")})`;function x(H){return H==="0"||new RegExp(`^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?${v}$`).test(H)||o(H)}let w=new Set(["thin","medium","thick"]);function E(H){return w.has(H)}function S(H){let V=(0,i.parseBoxShadowValue)(l(H));for(let ne of V)if(!ne.valid)return!1;return!0}function C(H){let V=0;return(0,r.splitAtTopLevelOnly)(H,"_").every(j=>(j=l(j),j.startsWith("var(")?!0:(0,t.parseColor)(j,{loose:!0})!==null?(V++,!0):!1))?V>0:!1}function R(H){let V=0;return(0,r.splitAtTopLevelOnly)(H,",").every(j=>(j=l(j),j.startsWith("var(")?!0:f(j)||O(j)||["element(","image(","cross-fade(","image-set("].some(ge=>j.startsWith(ge))?(V++,!0):!1))?V>0:!1}let F=new Set(["conic-gradient","linear-gradient","radial-gradient","repeating-conic-gradient","repeating-linear-gradient","repeating-radial-gradient"]);function O(H){H=l(H);for(let V of F)if(H.startsWith(`${V}(`))return!0;return!1}let N=new Set(["center","top","right","bottom","left"]);function L(H){let V=0;return(0,r.splitAtTopLevelOnly)(H,"_").every(j=>(j=l(j),j.startsWith("var(")?!0:N.has(j)||x(j)||y(j)?(V++,!0):!1))?V>0:!1}function z(H){let V=0;return(0,r.splitAtTopLevelOnly)(H,",").every(j=>(j=l(j),j.startsWith("var(")?!0:j.includes(" ")&&!/(['"])([^"']+)\1/g.test(j)||/^\d/g.test(j)?!1:(V++,!0)))?V>0:!1}let $=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]);function U(H){return $.has(H)}let X=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"]);function q(H){return X.has(H)}let G=new Set(["larger","smaller"]);function Z(H){return G.has(H)}})(Uy);var dT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"backgroundSize",{enumerable:!0,get:function(){return i}});const e=Uy,t=ip;function i(r){let s=["cover","contain"];return(0,t.splitAtTopLevelOnly)(r,",").every(o=>{let a=(0,t.splitAtTopLevelOnly)(o,"_").filter(Boolean);return a.length===1&&s.includes(a[0])?!0:a.length!==1&&a.length!==2?!1:a.every(l=>(0,e.length)(l)||(0,e.percentage)(l)||l==="auto")})}})(dT);(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(L,z){for(var $ in z)Object.defineProperty(L,$,{enumerable:!0,get:z[$]})}e(n,{updateAllClasses:function(){return c},asValue:function(){return p},parseColorFormat:function(){return v},asColor:function(){return w},asLookupValue:function(){return E},typeMap:function(){return C},coerceValue:function(){return O},getMatchingTypes:function(){return N}});const t=l(uT),i=By,r=Uy,s=l(Ny),o=dT,a=np;function l(L){return L&&L.__esModule?L:{default:L}}function c(L,z){L.walkClasses($=>{$.value=z($.value),$.raws&&$.raws.value&&($.raws.value=(0,t.default)($.raws.value))})}function d(L,z){if(!y(L))return;let $=L.slice(1,-1);if(z($))return(0,r.normalize)($)}function f(L,z={},$){let U=z[L];if(U!==void 0)return(0,s.default)(U);if(y(L)){let X=d(L,$);return X===void 0?void 0:(0,s.default)(X)}}function p(L,z={},{validate:$=()=>!0}={}){var U;let X=(U=z.values)===null||U===void 0?void 0:U[L];return X!==void 0?X:z.supportsNegativeValues&&L.startsWith("-")?f(L.slice(1),z.values,$):d(L,$)}function y(L){return L.startsWith("[")&&L.endsWith("]")}function m(L){let z=L.lastIndexOf("/"),$=L.lastIndexOf("[",z),U=L.indexOf("]",z);return L[z-1]==="]"||L[z+1]==="["||$!==-1&&U!==-1&&$<z&&z<U&&(z=L.lastIndexOf("/",$)),z===-1||z===L.length-1?[L,void 0]:y(L)&&!L.includes("]/[")?[L,void 0]:[L.slice(0,z),L.slice(z+1)]}function v(L){if(typeof L=="string"&&L.includes("<alpha-value>")){let z=L;return({opacityValue:$=1})=>z.replace(/<alpha-value>/g,$)}return L}function x(L){return(0,r.normalize)(L.slice(1,-1))}function w(L,z={},{tailwindConfig:$={}}={}){var U;if(((U=z.values)===null||U===void 0?void 0:U[L])!==void 0){var X;return v((X=z.values)===null||X===void 0?void 0:X[L])}let[q,G]=m(L);if(G!==void 0){var Z,H,V,ne;let j=(ne=(Z=z.values)===null||Z===void 0?void 0:Z[q])!==null&&ne!==void 0?ne:y(q)?q.slice(1,-1):void 0;return j===void 0?void 0:(j=v(j),y(G)?(0,i.withAlphaValue)(j,x(G)):((H=$.theme)===null||H===void 0||(V=H.opacity)===null||V===void 0?void 0:V[G])===void 0?void 0:(0,i.withAlphaValue)(j,$.theme.opacity[G]))}return p(L,z,{validate:r.color})}function E(L,z={}){var $;return($=z.values)===null||$===void 0?void 0:$[L]}function S(L){return(z,$)=>p(z,$,{validate:L})}let C={any:p,color:w,url:S(r.url),image:S(r.image),length:S(r.length),percentage:S(r.percentage),position:S(r.position),lookup:E,"generic-name":S(r.genericName),"family-name":S(r.familyName),number:S(r.number),"line-width":S(r.lineWidth),"absolute-size":S(r.absoluteSize),"relative-size":S(r.relativeSize),shadow:S(r.shadow),size:S(o.backgroundSize)},R=Object.keys(C);function F(L,z){let $=L.indexOf(z);return $===-1?[void 0,L]:[L.slice(0,$),L.slice($+1)]}function O(L,z,$,U){if($.values&&z in $.values)for(let{type:q}of L??[]){let G=C[q](z,$,{tailwindConfig:U});if(G!==void 0)return[G,q,null]}if(y(z)){let q=z.slice(1,-1),[G,Z]=F(q,":");if(!/^[\w-_]+$/g.test(G))Z=q;else if(G!==void 0&&!R.includes(G))return[];if(Z.length>0&&R.includes(G))return[p(`[${Z}]`,$),G,null]}let X=N(L,z,$,U);for(let q of X)return q;return[]}function*N(L,z,$,U){let X=(0,a.flagEnabled)(U,"generalizedModifiers"),[q,G]=m(z);if(X&&$.modifiers!=null&&($.modifiers==="any"||typeof $.modifiers=="object"&&(G&&y(G)||G in $.modifiers))||(q=z,G=void 0),G!==void 0&&q===""&&(q="DEFAULT"),G!==void 0&&typeof $.modifiers=="object"){var H,V;let ne=(V=(H=$.modifiers)===null||H===void 0?void 0:H[G])!==null&&V!==void 0?V:null;ne!==null?G=ne:y(G)&&(G=x(G))}for(let{type:ne}of L??[]){let j=C[ne](q,$,{tailwindConfig:U});j!==void 0&&(yield[j,ne,G??null])}}})(lT);var fT={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e}});function e(t){return typeof t=="function"?t({}):t}})(fT);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return $}});const e=y(Ny),t=y(JC),i=y(QC),r=y(eT),s=iT,o=rT,a=sT,l=y(oT),c=aT,d=lT,f=By,p=y(fT);function y(U){return U&&U.__esModule?U:{default:U}}function m(U){return typeof U=="function"}function v(U,...X){let q=X.pop();for(let G of X)for(let Z in G){let H=q(U[Z],G[Z]);H===void 0?(0,l.default)(U[Z])&&(0,l.default)(G[Z])?U[Z]=v({},U[Z],G[Z],q):U[Z]=G[Z]:U[Z]=H}return U}const x={colors:r.default,negative(U){return Object.keys(U).filter(X=>U[X]!=="0").reduce((X,q)=>{let G=(0,e.default)(U[q]);return G!==void 0&&(X[`-${q}`]=G),X},{})},breakpoints(U){return Object.keys(U).filter(X=>typeof U[X]=="string").reduce((X,q)=>({...X,[`screen-${q}`]:U[q]}),{})}};function w(U,...X){return m(U)?U(...X):U}function E(U){return U.reduce((X,{extend:q})=>v(X,q,(G,Z)=>G===void 0?[Z]:Array.isArray(G)?[Z,...G]:[Z,G]),{})}function S(U){return{...U.reduce((X,q)=>(0,s.defaults)(X,q),{}),extend:E(U)}}function C(U,X){if(Array.isArray(U)&&(0,l.default)(U[0]))return U.concat(X);if(Array.isArray(X)&&(0,l.default)(X[0])&&(0,l.default)(U))return[U,...X];if(Array.isArray(X))return X}function R({extend:U,...X}){return v(X,U,(q,G)=>!m(q)&&!G.some(m)?v({},q,...G,C):(Z,H)=>v({},...[q,...G].map(V=>w(V,Z,H)),C))}function*F(U){let X=(0,o.toPath)(U);if(X.length===0||(yield X,Array.isArray(U)))return;let q=/^(.*?)\s*\/\s*([^/]+)$/,G=U.match(q);if(G!==null){let[,Z,H]=G,V=(0,o.toPath)(Z);V.alpha=H,yield V}}function O(U){const X=(q,G)=>{for(const Z of F(q)){let H=0,V=U;for(;V!=null&&H<Z.length;)V=V[Z[H++]],V=m(V)&&(Z.alpha===void 0||H<=Z.length-1)?V(X,x):V;if(V!==void 0){if(Z.alpha!==void 0){let ne=(0,d.parseColorFormat)(V);return(0,f.withAlphaValue)(ne,Z.alpha,(0,p.default)(ne))}return(0,l.default)(V)?(0,c.cloneDeep)(V):V}}return G};return Object.assign(X,{theme:X,...x}),Object.keys(U).reduce((q,G)=>(q[G]=m(U[G])?U[G](X,x):U[G],q),{})}function N(U){let X=[];return U.forEach(q=>{X=[...X,q];var G;const Z=(G=q==null?void 0:q.plugins)!==null&&G!==void 0?G:[];Z.length!==0&&Z.forEach(H=>{H.__isOptionsFunction&&(H=H());var V;X=[...X,...N([(V=H==null?void 0:H.config)!==null&&V!==void 0?V:{}])]})}),X}function L(U){return[...U].reduceRight((q,G)=>m(G)?G({corePlugins:q}):(0,i.default)(G,q),t.default)}function z(U){return[...U].reduceRight((q,G)=>[...q,...G],[])}function $(U){let X=[...N(U),{prefix:"",important:!1,separator:":"}];var q,G;return(0,a.normalizeConfig)((0,s.defaults)({theme:O(R(S(X.map(Z=>(q=Z==null?void 0:Z.theme)!==null&&q!==void 0?q:{})))),corePlugins:L(X.map(Z=>Z.corePlugins)),plugins:z(U.map(Z=>(G=Z==null?void 0:Z.plugins)!==null&&G!==void 0?G:[]))},...X))}})(ZC);var pT={},RN={content:[],presets:[],darkMode:"media",theme:{accentColor:({theme:n})=>({...n("colors"),auto:"auto"}),animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aria:{busy:'busy="true"',checked:'checked="true"',disabled:'disabled="true"',expanded:'expanded="true"',hidden:'hidden="true"',pressed:'pressed="true"',readonly:'readonly="true"',required:'required="true"',selected:'selected="true"'},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:({theme:n})=>n("blur"),backdropBrightness:({theme:n})=>n("brightness"),backdropContrast:({theme:n})=>n("contrast"),backdropGrayscale:({theme:n})=>n("grayscale"),backdropHueRotate:({theme:n})=>n("hueRotate"),backdropInvert:({theme:n})=>n("invert"),backdropOpacity:({theme:n})=>n("opacity"),backdropSaturate:({theme:n})=>n("saturate"),backdropSepia:({theme:n})=>n("sepia"),backgroundColor:({theme:n})=>n("colors"),backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:({theme:n})=>n("opacity"),backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},borderColor:({theme:n})=>({...n("colors"),DEFAULT:n("colors.gray.200","currentColor")}),borderOpacity:({theme:n})=>n("opacity"),borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderSpacing:({theme:n})=>({...n("spacing")}),borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:({theme:n})=>n("colors"),brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},caretColor:({theme:n})=>n("colors"),colors:({colors:n})=>({inherit:n.inherit,current:n.current,transparent:n.transparent,black:n.black,white:n.white,slate:n.slate,gray:n.gray,zinc:n.zinc,neutral:n.neutral,stone:n.stone,red:n.red,orange:n.orange,amber:n.amber,yellow:n.yellow,lime:n.lime,green:n.green,emerald:n.emerald,teal:n.teal,cyan:n.cyan,sky:n.sky,blue:n.blue,indigo:n.indigo,violet:n.violet,purple:n.purple,fuchsia:n.fuchsia,pink:n.pink,rose:n.rose}),columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},container:{},content:{none:"none"},contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:({theme:n})=>n("borderColor"),divideOpacity:({theme:n})=>n("borderOpacity"),divideWidth:({theme:n})=>n("borderWidth"),dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:({theme:n})=>({none:"none",...n("colors")}),flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"}),flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:({theme:n})=>n("spacing"),gradientColorStops:({theme:n})=>n("colors"),gradientColorStopPositions:{"0%":"0%","5%":"5%","10%":"10%","15%":"15%","20%":"20%","25%":"25%","30%":"30%","35%":"35%","40%":"40%","45%":"45%","50%":"50%","55%":"55%","60%":"60%","65%":"65%","70%":"70%","75%":"75%","80%":"80%","85%":"85%","90%":"90%","95%":"95%","100%":"100%"},grayscale:{0:"0",DEFAULT:"100%"},gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridTemplateColumns:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},height:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},inset:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),invert:{0:"0",DEFAULT:"100%"},keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},listStyleImage:{none:"none"},margin:({theme:n})=>({auto:"auto",...n("spacing")}),lineClamp:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"},maxHeight:({theme:n})=>({...n("spacing"),none:"none",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),maxWidth:({theme:n,breakpoints:e})=>({...n("spacing"),none:"none",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch",...e(n("screens"))}),minHeight:({theme:n})=>({...n("spacing"),full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),minWidth:({theme:n})=>({...n("spacing"),full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",15:"0.15",20:"0.2",25:"0.25",30:"0.3",35:"0.35",40:"0.4",45:"0.45",50:"0.5",55:"0.55",60:"0.6",65:"0.65",70:"0.7",75:"0.75",80:"0.8",85:"0.85",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},outlineColor:({theme:n})=>n("colors"),outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},padding:({theme:n})=>n("spacing"),placeholderColor:({theme:n})=>n("colors"),placeholderOpacity:({theme:n})=>n("opacity"),ringColor:({theme:n})=>({DEFAULT:n("colors.blue.500","#3b82f6"),...n("colors")}),ringOffsetColor:({theme:n})=>n("colors"),ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:({theme:n})=>({DEFAULT:"0.5",...n("opacity")}),ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},scrollMargin:({theme:n})=>({...n("spacing")}),scrollPadding:({theme:n})=>n("spacing"),sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:({theme:n})=>({...n("spacing")}),spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},stroke:({theme:n})=>({none:"none",...n("colors")}),strokeWidth:{0:"0",1:"1",2:"2"},supports:{},data:{},textColor:({theme:n})=>n("colors"),textDecorationColor:({theme:n})=>n("colors"),textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:({theme:n})=>({...n("spacing")}),textOpacity:({theme:n})=>n("opacity"),textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:({theme:n})=>({...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),size:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),width:({theme:n})=>({auto:"auto",...n("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",svw:"100svw",lvw:"100lvw",dvw:"100dvw",min:"min-content",max:"max-content",fit:"fit-content"}),willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},plugins:[]};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}});const e=i(RN),t=np;function i(s){return s&&s.__esModule?s:{default:s}}function r(s){var o;const a=((o=s==null?void 0:s.presets)!==null&&o!==void 0?o:[e.default]).slice().reverse().flatMap(d=>r(d instanceof Function?d():d)),l={respectDefaultRingColorOpacity:{theme:{ringColor:({theme:d})=>({DEFAULT:"#3b82f67f",...d("colors")})}},disableColorOpacityUtilitiesByDefault:{corePlugins:{backgroundOpacity:!1,borderOpacity:!1,divideOpacity:!1,placeholderOpacity:!1,ringOpacity:!1,textOpacity:!1}}},c=Object.keys(l).filter(d=>(0,t.flagEnabled)(s,d)).map(d=>l[d]);return[s,...c,...a]}})(pT);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}});const e=i(ZC),t=i(pT);function i(s){return s&&s.__esModule?s:{default:s}}function r(...s){let[,...o]=(0,t.default)(s[0]);return(0,e.default)([...s,...o])}})(KC);let gm=KC;var IN=(gm.__esModule?gm:{default:gm}).default;const Gy=jf(IN),qy={content:["./src/stories/**/*.{tsx,ts,js,jsx}","./src/components/**/*.{tsx,ts,js,jsx}","./src/layouts/**/*.{tsx,ts}"],darkMode:"class",theme:{fontFamily:{"teli-brand":['"Space Grotesk"',"system-ui","sans-serif"],"teli-body":["Figtree","Avenir","Corbel","source-sans-pro","sans-serif"]},colors:{transparent:"transparent","admin-app-color":"#20BCFA","document-app-color":"#FA6AAA","geo-app-color":"#9DDD31","graph-app-color":"#FFA22F","app-color":{DEFAULT:"rgba(var(--teli-app-color), <alpha-value>)",50:"rgba(var(--teli-app-color-50), <alpha-value>)",100:"rgba(var(--teli-app-color-100), <alpha-value>)",200:"rgba(var(--teli-app-color-200), <alpha-value>)",300:"rgba(var(--teli-app-color-300), <alpha-value>)",400:"rgba(var(--teli-app-color-400), <alpha-value>)",500:"rgba(var(--teli-app-color-500), <alpha-value>)",600:"rgba(var(--teli-app-color-600), <alpha-value>)",700:"rgba(var(--teli-app-color-700), <alpha-value>)",800:"rgba(var(--teli-app-color-800), <alpha-value>)",900:"rgba(var(--teli-app-color-900), <alpha-value>)",950:"rgba(var(--teli-app-color-950), <alpha-value>)"},"teli-whitesmoke":{DEFAULT:"#F5F5F5",50:"#F5F5F5",100:"#E9E9E9",200:"#DDDDDD",300:"#D0D0D0",400:"#C4C4C4",500:"#ACACAC",600:"#949494",700:"#7C7C7C",800:"#636363",900:"#4B4B4B",950:"#333333"},"teli-black":{DEFAULT:"#1D1D1D",50:"#A3A3A3",100:"#909090",200:"#7D7D7D",300:"#6A6A6A",400:"#575757",500:"#444444",600:"#303030",700:"#272727",800:"#1D1D1D",900:"#141414",950:"#0A0A0A"},"teli-red":{DEFAULT:"#DA1212",50:"#FBE7E7",100:"#F5BDBD",200:"#EE9292",300:"#E76767",400:"#E13D3D",500:"#DA1212",600:"#B30F0F",700:"#8C0C12",800:"#64080E",900:"#43040C",950:"#1B020A"},whiteSmoke:{DEFAULT:"#F5F5F5",50:"#E9E9E9",100:"#DDDDDD",200:"#D0D0D0",300:"#C4C4C4",400:"#ACACAC",500:"#949494",600:"#7C7C7C",700:"#636363",800:"#4B4B4B",900:"#333333"},black:{DEFAULT:"#0A0A0A",50:"#141414",100:"#1D1D1D",200:"#272727",300:"#303030",400:"#444444",500:"#575757",600:"#6A6A6A",700:"#7D7D7D",800:"#909090",900:"#A3A3A3"},"teli-green":{DEFAULT:"#59FAA3",50:"#EEFFF6",100:"#D1FEE5",200:"#B3FDD5",300:"#95FCC4",400:"#77FBB4",500:"#59FAA3",600:"#12DB8A",700:"#08B86E",800:"#06794B",900:"#144C31",950:"#051E11"}},extend:{borderWidth:{"1.5":"1.5px"},height:{"4.5":"18px"}}}},AN=Gy(qy);var hC;const af=(hC=AN.theme)==null?void 0:hC.colors;getComputedStyle(document.body);af.whiteSmoke[50],af.whiteSmoke[200];af.black[300],af.black[100];const PN=Gy(qy);var dC;const MN=(dC=PN.theme)==null?void 0:dC.fontFamily;MN["teli-body"].join(",");wC(["dark","light"]);const LN=Gy(qy);var fC;(fC=LN.theme)==null||fC.colors;new n3({defaultOptions:{queries:{staleTime:60*5e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:!1}}});const b0=oe.forwardRef(({variant:n,linePosition:e="left",color:t,startIcon:i,endIcon:r,size:s="medium",disabled:o=!1,className:a,children:l,...c},d)=>{const f=n==="primary",p=n==="secondary",y=e==="left",m=e==="right",v=e==="center";return n==="link"?Re("div",{className:nd("teli-button__link",{"teli-button__link-disabled":o}),children:[Re(dc,{ref:d,className:nd("teli-button",{"teli-button__link--left":y,"teli-button__link--right":m},a),disabled:o,...c,children:[i,l,r]}),Q("div",{className:nd("teli-button__link-line",{"teli-button__link--line-right":m,"teli-button__link--line-center":v})})]}):Re(dc,{ref:d,className:nd("teli-button",{"teli-button--small":s==="small","teli-button--medium":s==="medium","teli-button--large":s==="large","teli-button__primary":f,"teli-button__secondary":p,"teli-button__tertiary":n==="tertiary","teli-button__primary--danger":f&&t==="danger"},a),disabled:o,...c,children:[i,l,r]})});b0.__docgenInfo={description:"",methods:[],displayName:"TeliButtonBase",props:{variant:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "tertiary" | "link" | "basic"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"tertiary"'},{name:"literal",value:'"link"'},{name:"literal",value:'"basic"'}]},description:`The variant to use.**Note**: Use primary instead of contained, secondary
instead of outline and tertiary instead of text. These variants will be
removed in the next version
@default primary`},linePosition:{required:!1,tsType:{name:"union",raw:'"left" | "right" | "center"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"center"'}]},description:"",defaultValue:{value:'"left"',computed:!1}},color:{required:!1,tsType:{name:"literal",value:'"danger"'},description:"The color of the component."},href:{required:!1,tsType:{name:"string"},description:`The URL to link to when the button is clicked. If defined, an a element
will be used as the root node.`},startIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed before the children."},endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the children."},size:{required:!1,tsType:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}]},description:"The size of the component.",defaultValue:{value:'"medium"',computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["MUIButtonBaseProps"]};const kN=oe.forwardRef(({tooltip:n,tooltipPlacement:e="bottom",...t},i)=>n?Q(Dy,{arrow:!0,title:n,placement:e,PopperProps:{disablePortal:!0,modifiers:[{name:"offset",options:{offset:[0,-4]}}]},children:Q(b0,{ref:i,...t})}):Q(b0,{ref:i,...t}));kN.__docgenInfo={description:"",methods:[],displayName:"TeliButton",props:{variant:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "tertiary" | "link" | "basic"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"tertiary"'},{name:"literal",value:'"link"'},{name:"literal",value:'"basic"'}]},description:`The variant to use.**Note**: Use primary instead of contained, secondary
instead of outline and tertiary instead of text. These variants will be
removed in the next version
@default primary`},linePosition:{required:!1,tsType:{name:"union",raw:'"left" | "right" | "center"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"right"'},{name:"literal",value:'"center"'}]},description:""},color:{required:!1,tsType:{name:"literal",value:'"danger"'},description:"The color of the component."},href:{required:!1,tsType:{name:"string"},description:`The URL to link to when the button is clicked. If defined, an a element
will be used as the root node.`},startIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed before the children."},endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the children."},size:{required:!1,tsType:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}]},description:"The size of the component."},tooltip:{required:!1,tsType:{name:"string"},description:"Tooltip contents"},tooltipPlacement:{required:!1,tsType:{name:"union",raw:`| "bottom-end"
| "bottom-start"
| "bottom"
| "left-end"
| "left-start"
| "left"
| "right-end"
| "right-start"
| "right"
| "top-end"
| "top-start"
| "top"`,elements:[{name:"literal",value:'"bottom-end"'},{name:"literal",value:'"bottom-start"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left-end"'},{name:"literal",value:'"left-start"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right-end"'},{name:"literal",value:'"right-start"'},{name:"literal",value:'"right"'},{name:"literal",value:'"top-end"'},{name:"literal",value:'"top-start"'},{name:"literal",value:'"top"'}]},description:`Tooltip placement.
@default bottom`,defaultValue:{value:'"bottom"',computed:!1}}},composes:["MUIButtonBaseProps"]};const ON=Ps({uri:Xn(),primaryName:Xn(),types:ef(Xn()),literals:Ps({"telicent:primaryName":ef(Xn())}),isState:Mi(),inLocation:Xn(),metadata:Ps({documentFormat:Xn(),generatedBy:Xn(),generatorVersion:Xn()})}),FN=Ps({id:Xn().url(),score:hc(),document:ON});Ps({maybeMore:Mi(),limit:hc(),offset:hc(),query:Xn(),type:tf("phrase"),results:ef(FN)});var DN={value:()=>{}};function gT(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Gd(t)}function Gd(n){this._=n}function NN(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Gd.prototype=gT.prototype={constructor:Gd,on:function(n,e){var t=this._,i=NN(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=zN(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=p1(t[r],n.name,e);else if(e==null)for(r in t)t[r]=p1(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Gd(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function zN(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function p1(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=DN,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var E0="http://www.w3.org/1999/xhtml";const g1={svg:"http://www.w3.org/2000/svg",xhtml:E0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rp(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),g1.hasOwnProperty(e)?{space:g1[e],local:n}:n}function BN(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===E0&&e.documentElement.namespaceURI===E0?e.createElement(n):e.createElementNS(t,n)}}function $N(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function mT(n){var e=rp(n);return(e.local?$N:BN)(e)}function UN(){}function Wy(n){return n==null?UN:function(){return this.querySelector(n)}}function GN(n){typeof n!="function"&&(n=Wy(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,c,d=0;d<o;++d)(l=s[d])&&(c=n.call(l,l.__data__,d,s))&&("__data__"in l&&(c.__data__=l.__data__),a[d]=c);return new Rr(i,this._parents)}function qN(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function WN(){return[]}function yT(n){return n==null?WN:function(){return this.querySelectorAll(n)}}function jN(n){return function(){return qN(n.apply(this,arguments))}}function HN(n){typeof n=="function"?n=jN(n):n=yT(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(n.call(l,l.__data__,c,o)),r.push(l));return new Rr(i,r)}function _T(n){return function(){return this.matches(n)}}function vT(n){return function(e){return e.matches(n)}}var VN=Array.prototype.find;function XN(n){return function(){return VN.call(this.children,n)}}function YN(){return this.firstElementChild}function KN(n){return this.select(n==null?YN:XN(typeof n=="function"?n:vT(n)))}var ZN=Array.prototype.filter;function JN(){return Array.from(this.children)}function QN(n){return function(){return ZN.call(this.children,n)}}function ez(n){return this.selectAll(n==null?JN:QN(typeof n=="function"?n:vT(n)))}function tz(n){typeof n!="function"&&(n=_T(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Rr(i,this._parents)}function xT(n){return new Array(n.length)}function nz(){return new Rr(this._enter||this._groups.map(xT),this._parents)}function lf(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}lf.prototype={constructor:lf,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function iz(n){return function(){return n}}function rz(n,e,t,i,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new lf(n,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function sz(n,e,t,i,r,s,o){var a,l,c=new Map,d=e.length,f=s.length,p=new Array(d),y;for(a=0;a<d;++a)(l=e[a])&&(p[a]=y=o.call(l,l.__data__,a,e)+"",c.has(y)?r[a]=l:c.set(y,l));for(a=0;a<f;++a)y=o.call(n,s[a],a,s)+"",(l=c.get(y))?(i[a]=l,l.__data__=s[a],c.delete(y)):t[a]=new lf(n,s[a]);for(a=0;a<d;++a)(l=e[a])&&c.get(p[a])===l&&(r[a]=l)}function oz(n){return n.__data__}function az(n,e){if(!arguments.length)return Array.from(this,oz);var t=e?sz:rz,i=this._parents,r=this._groups;typeof n!="function"&&(n=iz(n));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var d=i[c],f=r[c],p=f.length,y=lz(n.call(d,d&&d.__data__,c,i)),m=y.length,v=a[c]=new Array(m),x=o[c]=new Array(m),w=l[c]=new Array(p);t(d,f,v,x,w,y,e);for(var E=0,S=0,C,R;E<m;++E)if(C=v[E]){for(E>=S&&(S=E+1);!(R=x[S])&&++S<m;);C._next=R||null}}return o=new Rr(o,i),o._enter=a,o._exit=l,o}function lz(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function uz(){return new Rr(this._exit||this._groups.map(xT),this._parents)}function cz(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function hz(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=t[l],d=i[l],f=c.length,p=a[l]=new Array(f),y,m=0;m<f;++m)(y=c[m]||d[m])&&(p[m]=y);for(;l<r;++l)a[l]=t[l];return new Rr(a,this._parents)}function dz(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function fz(n){n||(n=pz);function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],a=o.length,l=r[s]=new Array(a),c,d=0;d<a;++d)(c=o[d])&&(l[d]=c);l.sort(e)}return new Rr(r,this._parents).order()}function pz(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function gz(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function mz(){return Array.from(this)}function yz(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function _z(){let n=0;for(const e of this)++n;return n}function vz(){return!this.node()}function xz(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,a;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this}function wz(n){return function(){this.removeAttribute(n)}}function bz(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ez(n,e){return function(){this.setAttribute(n,e)}}function Cz(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Tz(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Sz(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Rz(n,e){var t=rp(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?bz:wz:typeof e=="function"?t.local?Sz:Tz:t.local?Cz:Ez)(t,e))}function wT(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Iz(n){return function(){this.style.removeProperty(n)}}function Az(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Pz(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function Mz(n,e,t){return arguments.length>1?this.each((e==null?Iz:typeof e=="function"?Pz:Az)(n,e,t??"")):Yl(this.node(),n)}function Yl(n,e){return n.style.getPropertyValue(e)||wT(n).getComputedStyle(n,null).getPropertyValue(e)}function Lz(n){return function(){delete this[n]}}function kz(n,e){return function(){this[n]=e}}function Oz(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Fz(n,e){return arguments.length>1?this.each((e==null?Lz:typeof e=="function"?Oz:kz)(n,e)):this.node()[n]}function bT(n){return n.trim().split(/^|\s+/)}function jy(n){return n.classList||new ET(n)}function ET(n){this._node=n,this._names=bT(n.getAttribute("class")||"")}ET.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function CT(n,e){for(var t=jy(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function TT(n,e){for(var t=jy(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function Dz(n){return function(){CT(this,n)}}function Nz(n){return function(){TT(this,n)}}function zz(n,e){return function(){(e.apply(this,arguments)?CT:TT)(this,n)}}function Bz(n,e){var t=bT(n+"");if(arguments.length<2){for(var i=jy(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?zz:e?Dz:Nz)(t,e))}function $z(){this.textContent=""}function Uz(n){return function(){this.textContent=n}}function Gz(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function qz(n){return arguments.length?this.each(n==null?$z:(typeof n=="function"?Gz:Uz)(n)):this.node().textContent}function Wz(){this.innerHTML=""}function jz(n){return function(){this.innerHTML=n}}function Hz(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Vz(n){return arguments.length?this.each(n==null?Wz:(typeof n=="function"?Hz:jz)(n)):this.node().innerHTML}function Xz(){this.nextSibling&&this.parentNode.appendChild(this)}function Yz(){return this.each(Xz)}function Kz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zz(){return this.each(Kz)}function Jz(n){var e=typeof n=="function"?n:mT(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qz(){return null}function e4(n,e){var t=typeof n=="function"?n:mT(n),i=e==null?Qz:typeof e=="function"?e:Wy(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function t4(){var n=this.parentNode;n&&n.removeChild(this)}function n4(){return this.each(t4)}function i4(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function r4(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function s4(n){return this.select(n?r4:i4)}function o4(n){return arguments.length?this.property("__data__",n):this.node().__data__}function a4(n){return function(e){n.call(this,e,this.__data__)}}function l4(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function u4(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function c4(n,e,t){return function(){var i=this.__on,r,s=a4(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function h4(n,e,t){var i=l4(n+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,d;l<c;++l)for(r=0,d=a[l];r<s;++r)if((o=i[r]).type===d.type&&o.name===d.name)return d.value}return}for(a=e?c4:u4,r=0;r<s;++r)this.each(a(i[r],e,t));return this}function ST(n,e,t){var i=wT(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function d4(n,e){return function(){return ST(this,n,e)}}function f4(n,e){return function(){return ST(this,n,e.apply(this,arguments))}}function p4(n,e){return this.each((typeof e=="function"?f4:d4)(n,e))}function*g4(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var m4=[null];function Rr(n,e){this._groups=n,this._parents=e}function Gc(){return new Rr([[document.documentElement]],m4)}function y4(){return this}Rr.prototype=Gc.prototype={constructor:Rr,select:GN,selectAll:HN,selectChild:KN,selectChildren:ez,filter:tz,data:az,enter:nz,exit:uz,join:cz,merge:hz,selection:y4,order:dz,sort:fz,call:gz,nodes:mz,node:yz,size:_z,empty:vz,each:xz,attr:Rz,style:Mz,property:Fz,classed:Bz,text:qz,html:Vz,raise:Yz,lower:Zz,append:Jz,insert:e4,remove:n4,clone:s4,datum:o4,on:h4,dispatch:p4,[Symbol.iterator]:g4};function Hy(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function RT(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function qc(){}var gc=.7,uf=1/gc,kl="\\s*([+-]?\\d+)\\s*",mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_4=/^#([0-9a-f]{3,8})$/,v4=new RegExp(`^rgb\\(${kl},${kl},${kl}\\)$`),x4=new RegExp(`^rgb\\(${jr},${jr},${jr}\\)$`),w4=new RegExp(`^rgba\\(${kl},${kl},${kl},${mc}\\)$`),b4=new RegExp(`^rgba\\(${jr},${jr},${jr},${mc}\\)$`),E4=new RegExp(`^hsl\\(${mc},${jr},${jr}\\)$`),C4=new RegExp(`^hsla\\(${mc},${jr},${jr},${mc}\\)$`),m1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hy(qc,yc,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:y1,formatHex:y1,formatHex8:T4,formatHsl:S4,formatRgb:_1,toString:_1});function y1(){return this.rgb().formatHex()}function T4(){return this.rgb().formatHex8()}function S4(){return IT(this).formatHsl()}function _1(){return this.rgb().formatRgb()}function yc(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=_4.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?v1(e):t===3?new _i(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?cd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?cd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v4.exec(n))?new _i(e[1],e[2],e[3],1):(e=x4.exec(n))?new _i(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=w4.exec(n))?cd(e[1],e[2],e[3],e[4]):(e=b4.exec(n))?cd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=E4.exec(n))?b1(e[1],e[2]/100,e[3]/100,1):(e=C4.exec(n))?b1(e[1],e[2]/100,e[3]/100,e[4]):m1.hasOwnProperty(n)?v1(m1[n]):n==="transparent"?new _i(NaN,NaN,NaN,0):null}function v1(n){return new _i(n>>16&255,n>>8&255,n&255,1)}function cd(n,e,t,i){return i<=0&&(n=e=t=NaN),new _i(n,e,t,i)}function R4(n){return n instanceof qc||(n=yc(n)),n?(n=n.rgb(),new _i(n.r,n.g,n.b,n.opacity)):new _i}function C0(n,e,t,i){return arguments.length===1?R4(n):new _i(n,e,t,i??1)}function _i(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Hy(_i,C0,RT(qc,{brighter(n){return n=n==null?uf:Math.pow(uf,n),new _i(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?gc:Math.pow(gc,n),new _i(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new _i(Sa(this.r),Sa(this.g),Sa(this.b),cf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x1,formatHex:x1,formatHex8:I4,formatRgb:w1,toString:w1}));function x1(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}`}function I4(){return`#${fa(this.r)}${fa(this.g)}${fa(this.b)}${fa((isNaN(this.opacity)?1:this.opacity)*255)}`}function w1(){const n=cf(this.opacity);return`${n===1?"rgb(":"rgba("}${Sa(this.r)}, ${Sa(this.g)}, ${Sa(this.b)}${n===1?")":`, ${n})`}`}function cf(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Sa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function fa(n){return n=Sa(n),(n<16?"0":"")+n.toString(16)}function b1(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new yr(n,e,t,i)}function IT(n){if(n instanceof yr)return new yr(n.h,n.s,n.l,n.opacity);if(n instanceof qc||(n=yc(n)),!n)return new yr;if(n instanceof yr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new yr(o,a,l,n.opacity)}function A4(n,e,t,i){return arguments.length===1?IT(n):new yr(n,e,t,i??1)}function yr(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Hy(yr,A4,RT(qc,{brighter(n){return n=n==null?uf:Math.pow(uf,n),new yr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?gc:Math.pow(gc,n),new yr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new _i(mm(n>=240?n-240:n+120,r,i),mm(n,r,i),mm(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new yr(E1(this.h),hd(this.s),hd(this.l),cf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=cf(this.opacity);return`${n===1?"hsl(":"hsla("}${E1(this.h)}, ${hd(this.s)*100}%, ${hd(this.l)*100}%${n===1?")":`, ${n})`}`}}));function E1(n){return n=(n||0)%360,n<0?n+360:n}function hd(n){return Math.max(0,Math.min(1,n||0))}function mm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const AT=n=>()=>n;function P4(n,e){return function(t){return n+t*e}}function M4(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function L4(n){return(n=+n)==1?PT:function(e,t){return t-e?M4(e,t,n):AT(isNaN(e)?t:e)}}function PT(n,e){var t=e-n;return t?P4(n,t):AT(isNaN(n)?e:n)}const C1=function n(e){var t=L4(e);function i(r,s){var o=t((r=C0(r)).r,(s=C0(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=PT(r.opacity,s.opacity);return function(d){return r.r=o(d),r.g=a(d),r.b=l(d),r.opacity=c(d),r+""}}return i.gamma=n,i}(1);function go(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var T0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ym=new RegExp(T0.source,"g");function k4(n){return function(){return n}}function O4(n){return function(e){return n(e)+""}}function F4(n,e){var t=T0.lastIndex=ym.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=T0.exec(n))&&(r=ym.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:go(i,r)})),t=ym.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?O4(l[0].x):k4(e):(e=l.length,function(c){for(var d=0,f;d<e;++d)a[(f=l[d]).i]=f.x(c);return a.join("")})}var T1=180/Math.PI,S0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function MT(n,e,t,i,r,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*T1,skewX:Math.atan(l)*T1,scaleX:o,scaleY:a}}var dd;function D4(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?S0:MT(e.a,e.b,e.c,e.d,e.e,e.f)}function N4(n){return n==null||(dd||(dd=document.createElementNS("http://www.w3.org/2000/svg","g")),dd.setAttribute("transform",n),!(n=dd.transform.baseVal.consolidate()))?S0:(n=n.matrix,MT(n.a,n.b,n.c,n.d,n.e,n.f))}function LT(n,e,t,i){function r(c){return c.length?c.pop()+" ":""}function s(c,d,f,p,y,m){if(c!==f||d!==p){var v=y.push("translate(",null,e,null,t);m.push({i:v-4,x:go(c,f)},{i:v-2,x:go(d,p)})}else(f||p)&&y.push("translate("+f+e+p+t)}function o(c,d,f,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:go(c,d)})):d&&f.push(r(f)+"rotate("+d+i)}function a(c,d,f,p){c!==d?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:go(c,d)}):d&&f.push(r(f)+"skewX("+d+i)}function l(c,d,f,p,y,m){if(c!==f||d!==p){var v=y.push(r(y)+"scale(",null,",",null,")");m.push({i:v-4,x:go(c,f)},{i:v-2,x:go(d,p)})}else(f!==1||p!==1)&&y.push(r(y)+"scale("+f+","+p+")")}return function(c,d){var f=[],p=[];return c=n(c),d=n(d),s(c.translateX,c.translateY,d.translateX,d.translateY,f,p),o(c.rotate,d.rotate,f,p),a(c.skewX,d.skewX,f,p),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,f,p),c=d=null,function(y){for(var m=-1,v=p.length,x;++m<v;)f[(x=p[m]).i]=x.x(y);return f.join("")}}}var z4=LT(D4,"px, ","px)","deg)"),B4=LT(N4,", ",")",")"),Kl=0,Zu=0,$u=0,kT=1e3,hf,Ju,df=0,Fa=0,sp=0,_c=typeof performance=="object"&&performance.now?performance:Date,OT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Vy(){return Fa||(OT($4),Fa=_c.now()+sp)}function $4(){Fa=0}function ff(){this._call=this._time=this._next=null}ff.prototype=FT.prototype={constructor:ff,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Vy():+t)+(e==null?0:+e),!this._next&&Ju!==this&&(Ju?Ju._next=this:hf=this,Ju=this),this._call=n,this._time=t,R0()},stop:function(){this._call&&(this._call=null,this._time=1/0,R0())}};function FT(n,e,t){var i=new ff;return i.restart(n,e,t),i}function U4(){Vy(),++Kl;for(var n=hf,e;n;)(e=Fa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Kl}function S1(){Fa=(df=_c.now())+sp,Kl=Zu=0;try{U4()}finally{Kl=0,q4(),Fa=0}}function G4(){var n=_c.now(),e=n-df;e>kT&&(sp-=e,df=n)}function q4(){for(var n,e=hf,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:hf=t);Ju=n,R0(i)}function R0(n){if(!Kl){Zu&&(Zu=clearTimeout(Zu));var e=n-Fa;e>24?(n<1/0&&(Zu=setTimeout(S1,n-_c.now()-sp)),$u&&($u=clearInterval($u))):($u||(df=_c.now(),$u=setInterval(G4,kT)),Kl=1,OT(S1))}}function R1(n,e,t){var i=new ff;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var W4=gT("start","end","cancel","interrupt"),j4=[],DT=0,I1=1,I0=2,qd=3,A1=4,A0=5,Wd=6;function op(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;H4(n,t,{name:e,index:i,group:r,on:W4,tween:j4,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:DT})}function Xy(n,e){var t=Mr(n,e);if(t.state>DT)throw new Error("too late; already scheduled");return t}function ns(n,e){var t=Mr(n,e);if(t.state>qd)throw new Error("too late; already running");return t}function Mr(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function H4(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=FT(s,0,t.time);function s(c){t.state=I1,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var d,f,p,y;if(t.state!==I1)return l();for(d in i)if(y=i[d],y.name===t.name){if(y.state===qd)return R1(o);y.state===A1?(y.state=Wd,y.timer.stop(),y.on.call("interrupt",n,n.__data__,y.index,y.group),delete i[d]):+d<e&&(y.state=Wd,y.timer.stop(),y.on.call("cancel",n,n.__data__,y.index,y.group),delete i[d])}if(R1(function(){t.state===qd&&(t.state=A1,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=I0,t.on.call("start",n,n.__data__,t.index,t.group),t.state===I0){for(t.state=qd,r=new Array(p=t.tween.length),d=0,f=-1;d<p;++d)(y=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(r[++f]=y);r.length=f+1}}function a(c){for(var d=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=A0,1),f=-1,p=r.length;++f<p;)r[f].call(n,d);t.state===A0&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=Wd,t.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function V4(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>I0&&i.state<A0,i.state=Wd,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function X4(n){return this.each(function(){V4(this,n)})}function Y4(n,e){var t,i;return function(){var r=ns(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function K4(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=ns(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function Z4(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=Mr(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?Y4:K4)(t,n,e))}function Yy(n,e,t){var i=n._id;return n.each(function(){var r=ns(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Mr(r,i).value[e]}}function NT(n,e){var t;return(typeof e=="number"?go:e instanceof yc?C1:(t=yc(e))?(e=t,C1):F4)(n,e)}function J4(n){return function(){this.removeAttribute(n)}}function Q4(n){return function(){this.removeAttributeNS(n.space,n.local)}}function e6(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function t6(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function n6(n,e,t){var i,r,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function i6(n,e,t){var i,r,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function r6(n,e){var t=rp(n),i=t==="transform"?B4:NT;return this.attrTween(n,typeof e=="function"?(t.local?i6:n6)(t,i,Yy(this,"attr."+n,e)):e==null?(t.local?Q4:J4)(t):(t.local?t6:e6)(t,i,e))}function s6(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function o6(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function a6(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&o6(n,s)),t}return r._value=e,r}function l6(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&s6(n,s)),t}return r._value=e,r}function u6(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=rp(n);return this.tween(t,(i.local?a6:l6)(i,e))}function c6(n,e){return function(){Xy(this,n).delay=+e.apply(this,arguments)}}function h6(n,e){return e=+e,function(){Xy(this,n).delay=e}}function d6(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?c6:h6)(e,n)):Mr(this.node(),e).delay}function f6(n,e){return function(){ns(this,n).duration=+e.apply(this,arguments)}}function p6(n,e){return e=+e,function(){ns(this,n).duration=e}}function g6(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?f6:p6)(e,n)):Mr(this.node(),e).duration}function m6(n,e){if(typeof e!="function")throw new Error;return function(){ns(this,n).ease=e}}function y6(n){var e=this._id;return arguments.length?this.each(m6(e,n)):Mr(this.node(),e).ease}function _6(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;ns(this,n).ease=t}}function v6(n){if(typeof n!="function")throw new Error;return this.each(_6(this._id,n))}function x6(n){typeof n!="function"&&(n=_T(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Os(i,this._parents,this._name,this._id)}function w6(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=t[a],d=l.length,f=o[a]=new Array(d),p,y=0;y<d;++y)(p=l[y]||c[y])&&(f[y]=p);for(;a<i;++a)o[a]=e[a];return new Os(o,this._parents,this._name,this._id)}function b6(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function E6(n,e,t){var i,r,s=b6(e)?Xy:ns;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}function C6(n,e){var t=this._id;return arguments.length<2?Mr(this.node(),t).on.on(n):this.each(E6(t,n,e))}function T6(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function S6(){return this.on("end.remove",T6(this._id))}function R6(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Wy(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),d,f,p=0;p<l;++p)(d=a[p])&&(f=n.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f,op(c[p],e,t,p,c,Mr(d,t)));return new Os(s,this._parents,e,t)}function I6(n){var e=this._name,t=this._id;typeof n!="function"&&(n=yT(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,d,f=0;f<c;++f)if(d=l[f]){for(var p=n.call(d,d.__data__,f,l),y,m=Mr(d,t),v=0,x=p.length;v<x;++v)(y=p[v])&&op(y,e,t,v,p,m);s.push(p),o.push(d)}return new Os(s,o,e,t)}var A6=Gc.prototype.constructor;function P6(){return new A6(this._groups,this._parents)}function M6(n,e){var t,i,r;return function(){var s=Yl(this,n),o=(this.style.removeProperty(n),Yl(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function zT(n){return function(){this.style.removeProperty(n)}}function L6(n,e,t){var i,r=t+"",s;return function(){var o=Yl(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function k6(n,e,t){var i,r,s;return function(){var o=Yl(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),Yl(this,n))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function O6(n,e){var t,i,r,s="style."+e,o="end."+s,a;return function(){var l=ns(this,n),c=l.on,d=l.value[s]==null?a||(a=zT(e)):void 0;(c!==t||r!==d)&&(i=(t=c).copy()).on(o,r=d),l.on=i}}function F6(n,e,t){var i=(n+="")=="transform"?z4:NT;return e==null?this.styleTween(n,M6(n,i)).on("end.style."+n,zT(n)):typeof e=="function"?this.styleTween(n,k6(n,i,Yy(this,"style."+n,e))).each(O6(this._id,n)):this.styleTween(n,L6(n,i,e),t).on("end.style."+n,null)}function D6(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function N6(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&D6(n,o,t)),i}return s._value=e,s}function z6(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,N6(n,e,t??""))}function B6(n){return function(){this.textContent=n}}function $6(n){return function(){var e=n(this);this.textContent=e??""}}function U6(n){return this.tween("text",typeof n=="function"?$6(Yy(this,"text",n)):B6(n==null?"":n+""))}function G6(n){return function(e){this.textContent=n.call(this,e)}}function q6(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&G6(r)),e}return i._value=n,i}function W6(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,q6(n))}function j6(){for(var n=this._name,e=this._id,t=BT(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var d=Mr(l,e);op(l,n,t,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Os(i,this._parents,n,t)}function H6(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};t.each(function(){var c=ns(this,i),d=c.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&s()})}var V6=0;function Os(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function BT(){return++V6}var vs=Gc.prototype;Os.prototype={constructor:Os,select:R6,selectAll:I6,selectChild:vs.selectChild,selectChildren:vs.selectChildren,filter:x6,merge:w6,selection:P6,transition:j6,call:vs.call,nodes:vs.nodes,node:vs.node,size:vs.size,empty:vs.empty,each:vs.each,on:C6,attr:r6,attrTween:u6,style:F6,styleTween:z6,text:U6,textTween:W6,remove:S6,tween:Z4,delay:d6,duration:g6,ease:y6,easeVarying:v6,end:H6,[Symbol.iterator]:vs[Symbol.iterator]};function X6(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Y6={time:null,delay:0,duration:250,ease:X6};function K6(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Z6(n){var e,t;n instanceof Os?(e=n._id,n=n._name):(e=BT(),(t=Y6).time=Vy(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&op(l,n,e,c,o,t||K6(l,e));return new Os(i,this._parents,n,e)}Gc.prototype.interrupt=X4;Gc.prototype.transition=Z6;function Qu(n,e,t){this.k=n,this.x=e,this.y=t}Qu.prototype={constructor:Qu,scale:function(n){return n===1?this:new Qu(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Qu(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Qu.prototype;var pf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */pf.exports;(function(n,e){(function(){var t,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,p=2,y=4,m=1,v=2,x=1,w=2,E=4,S=8,C=16,R=32,F=64,O=128,N=256,L=512,z=30,$="...",U=800,X=16,q=1,G=2,Z=3,H=1/0,V=9007199254740991,ne=17976931348623157e292,j=NaN,ge=4294967295,le=ge-1,Ce=ge>>>1,qe=[["ary",O],["bind",x],["bindKey",w],["curry",S],["curryRight",C],["flip",L],["partial",R],["partialRight",F],["rearg",N]],Ee="[object Arguments]",Ke="[object Array]",$e="[object AsyncFunction]",Se="[object Boolean]",De="[object Date]",de="[object DOMException]",At="[object Error]",Nn="[object Function]",Ue="[object GeneratorFunction]",Nt="[object Map]",ut="[object Number]",vt="[object Null]",Ut="[object Object]",dt="[object Promise]",Mn="[object Proxy]",Gt="[object RegExp]",k="[object Set]",Dt="[object String]",Ve="[object Symbol]",ct="[object Undefined]",We="[object WeakMap]",Ze="[object WeakSet]",be="[object ArrayBuffer]",wt="[object DataView]",Fe="[object Float32Array]",Ie="[object Float64Array]",Ae="[object Int8Array]",Et="[object Int16Array]",jt="[object Int32Array]",Kt="[object Uint8Array]",Ct="[object Uint8ClampedArray]",kt="[object Uint16Array]",ft="[object Uint32Array]",qt=/\b__p \+= '';/g,tn=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ln=/&(?:amp|lt|gt|quot|#39);/g,Gn=/[&<>"']/g,sr=RegExp(ln.source),Ei=RegExp(Gn.source),un=/<%-([\s\S]+?)%>/g,zn=/<%([\s\S]+?)%>/g,wn=/<%=([\s\S]+?)%>/g,qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cn=/[\\^$.*+?()[\]{}|]/g,bt=RegExp(cn.source),xt=/^\s+/,bn=/\s/,$o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,os=/\{\n\/\* \[wrapped with (.+)\] \*/,as=/,? & /,yn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Uo=/[()=,{}\[\]\/\s]/,or=/\\(\\)?/g,Go=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pt=/\w*$/,Ka=/^[-+]0x[0-9a-f]+$/i,Za=/^0b[01]+$/i,xu=/^\[object .+?Constructor\]$/,Je=/^0o[0-7]+$/i,En=/^(?:0|[1-9]\d*)$/,ls=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,tg=/['\n\r\u2028\u2029\\]/g,us="\\ud800-\\udfff",ph="\\u0300-\\u036f",qs="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",A=ph+qs+T,B="\\u2700-\\u27bf",M="a-z\\xdf-\\xf6\\xf8-\\xff",K="\\xac\\xb1\\xd7\\xf7",he="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ws="\\u2000-\\u206f",wu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qo="A-Z\\xc0-\\xd6\\xd8-\\xde",Ja="\\ufe0e\\ufe0f",Wo=K+he+Ws+wu,jo="['‚Äô]",fI="["+us+"]",Cv="["+Wo+"]",gh="["+A+"]",Tv="\\d+",pI="["+B+"]",Sv="["+M+"]",Rv="[^"+us+Wo+Tv+B+M+qo+"]",ng="\\ud83c[\\udffb-\\udfff]",gI="(?:"+gh+"|"+ng+")",Iv="[^"+us+"]",ig="(?:\\ud83c[\\udde6-\\uddff]){2}",rg="[\\ud800-\\udbff][\\udc00-\\udfff]",Qa="["+qo+"]",Av="\\u200d",Pv="(?:"+Sv+"|"+Rv+")",mI="(?:"+Qa+"|"+Rv+")",Mv="(?:"+jo+"(?:d|ll|m|re|s|t|ve))?",Lv="(?:"+jo+"(?:D|LL|M|RE|S|T|VE))?",kv=gI+"?",Ov="["+Ja+"]?",yI="(?:"+Av+"(?:"+[Iv,ig,rg].join("|")+")"+Ov+kv+")*",_I="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fv=Ov+kv+yI,xI="(?:"+[pI,ig,rg].join("|")+")"+Fv,wI="(?:"+[Iv+gh+"?",gh,ig,rg,fI].join("|")+")",bI=RegExp(jo,"g"),EI=RegExp(gh,"g"),sg=RegExp(ng+"(?="+ng+")|"+wI+Fv,"g"),CI=RegExp([Qa+"?"+Sv+"+"+Mv+"(?="+[Cv,Qa,"$"].join("|")+")",mI+"+"+Lv+"(?="+[Cv,Qa+Pv,"$"].join("|")+")",Qa+"?"+Pv+"+"+Mv,Qa+"+"+Lv,vI,_I,Tv,xI].join("|"),"g"),TI=RegExp("["+Av+us+A+Ja+"]"),SI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,RI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],II=-1,Wt={};Wt[Fe]=Wt[Ie]=Wt[Ae]=Wt[Et]=Wt[jt]=Wt[Kt]=Wt[Ct]=Wt[kt]=Wt[ft]=!0,Wt[Ee]=Wt[Ke]=Wt[be]=Wt[Se]=Wt[wt]=Wt[De]=Wt[At]=Wt[Nn]=Wt[Nt]=Wt[ut]=Wt[Ut]=Wt[Gt]=Wt[k]=Wt[Dt]=Wt[We]=!1;var $t={};$t[Ee]=$t[Ke]=$t[be]=$t[wt]=$t[Se]=$t[De]=$t[Fe]=$t[Ie]=$t[Ae]=$t[Et]=$t[jt]=$t[Nt]=$t[ut]=$t[Ut]=$t[Gt]=$t[k]=$t[Dt]=$t[Ve]=$t[Kt]=$t[Ct]=$t[kt]=$t[ft]=!0,$t[At]=$t[Nn]=$t[We]=!1;var AI={√Ä:"A",√Å:"A",√Ç:"A",√É:"A",√Ñ:"A",√Ö:"A",√†:"a",√°:"a",√¢:"a",√£:"a",√§:"a",√•:"a",√á:"C",√ß:"c",√ê:"D",√∞:"d",√à:"E",√â:"E",√ä:"E",√ã:"E",√®:"e",√©:"e",√™:"e",√´:"e",√å:"I",√ç:"I",√é:"I",√è:"I",√¨:"i",√≠:"i",√Æ:"i",√Ø:"i",√ë:"N",√±:"n",√í:"O",√ì:"O",√î:"O",√ï:"O",√ñ:"O",√ò:"O",√≤:"o",√≥:"o",√¥:"o",√µ:"o",√∂:"o",√∏:"o",√ô:"U",√ö:"U",√õ:"U",√ú:"U",√π:"u",√∫:"u",√ª:"u",√º:"u",√ù:"Y",√Ω:"y",√ø:"y",√Ü:"Ae",√¶:"ae",√û:"Th",√æ:"th",√ü:"ss",ƒÄ:"A",ƒÇ:"A",ƒÑ:"A",ƒÅ:"a",ƒÉ:"a",ƒÖ:"a",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",ƒé:"D",ƒê:"D",ƒè:"d",ƒë:"d",ƒí:"E",ƒî:"E",ƒñ:"E",ƒò:"E",ƒö:"E",ƒì:"e",ƒï:"e",ƒó:"e",ƒô:"e",ƒõ:"e",ƒú:"G",ƒû:"G",ƒ†:"G",ƒ¢:"G",ƒù:"g",ƒü:"g",ƒ°:"g",ƒ£:"g",ƒ§:"H",ƒ¶:"H",ƒ•:"h",ƒß:"h",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒÆ:"I",ƒ∞:"I",ƒ©:"i",ƒ´:"i",ƒ≠:"i",ƒØ:"i",ƒ±:"i",ƒ¥:"J",ƒµ:"j",ƒ∂:"K",ƒ∑:"k",ƒ∏:"k",ƒπ:"L",ƒª:"L",ƒΩ:"L",ƒø:"L",≈Å:"L",ƒ∫:"l",ƒº:"l",ƒæ:"l",≈Ä:"l",≈Ç:"l",≈É:"N",≈Ö:"N",≈á:"N",≈ä:"N",≈Ñ:"n",≈Ü:"n",≈à:"n",≈ã:"n",≈å:"O",≈é:"O",≈ê:"O",≈ç:"o",≈è:"o",≈ë:"o",≈î:"R",≈ñ:"R",≈ò:"R",≈ï:"r",≈ó:"r",≈ô:"r",≈ö:"S",≈ú:"S",≈û:"S",≈†:"S",≈õ:"s",≈ù:"s",≈ü:"s",≈°:"s",≈¢:"T",≈§:"T",≈¶:"T",≈£:"t",≈•:"t",≈ß:"t",≈®:"U",≈™:"U",≈¨:"U",≈Æ:"U",≈∞:"U",≈≤:"U",≈©:"u",≈´:"u",≈≠:"u",≈Ø:"u",≈±:"u",≈≥:"u",≈¥:"W",≈µ:"w",≈∂:"Y",≈∑:"y",≈∏:"Y",≈π:"Z",≈ª:"Z",≈Ω:"Z",≈∫:"z",≈º:"z",≈æ:"z",ƒ≤:"IJ",ƒ≥:"ij",≈í:"Oe",≈ì:"oe",≈â:"'n",≈ø:"s"},PI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},MI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},LI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kI=parseFloat,OI=parseInt,Dv=typeof Ss=="object"&&Ss&&Ss.Object===Object&&Ss,FI=typeof self=="object"&&self&&self.Object===Object&&self,Bn=Dv||FI||Function("return this")(),og=e&&!e.nodeType&&e,Ho=og&&!0&&n&&!n.nodeType&&n,Nv=Ho&&Ho.exports===og,ag=Nv&&Dv.process,Ui=function(){try{var Y=Ho&&Ho.require&&Ho.require("util").types;return Y||ag&&ag.binding&&ag.binding("util")}catch{}}(),zv=Ui&&Ui.isArrayBuffer,Bv=Ui&&Ui.isDate,$v=Ui&&Ui.isMap,Uv=Ui&&Ui.isRegExp,Gv=Ui&&Ui.isSet,qv=Ui&&Ui.isTypedArray;function Ci(Y,ie,te){switch(te.length){case 0:return Y.call(ie);case 1:return Y.call(ie,te[0]);case 2:return Y.call(ie,te[0],te[1]);case 3:return Y.call(ie,te[0],te[1],te[2])}return Y.apply(ie,te)}function DI(Y,ie,te,_e){for(var Ge=-1,Tt=Y==null?0:Y.length;++Ge<Tt;){var Cn=Y[Ge];ie(_e,Cn,te(Cn),Y)}return _e}function Gi(Y,ie){for(var te=-1,_e=Y==null?0:Y.length;++te<_e&&ie(Y[te],te,Y)!==!1;);return Y}function NI(Y,ie){for(var te=Y==null?0:Y.length;te--&&ie(Y[te],te,Y)!==!1;);return Y}function Wv(Y,ie){for(var te=-1,_e=Y==null?0:Y.length;++te<_e;)if(!ie(Y[te],te,Y))return!1;return!0}function js(Y,ie){for(var te=-1,_e=Y==null?0:Y.length,Ge=0,Tt=[];++te<_e;){var Cn=Y[te];ie(Cn,te,Y)&&(Tt[Ge++]=Cn)}return Tt}function mh(Y,ie){var te=Y==null?0:Y.length;return!!te&&el(Y,ie,0)>-1}function lg(Y,ie,te){for(var _e=-1,Ge=Y==null?0:Y.length;++_e<Ge;)if(te(ie,Y[_e]))return!0;return!1}function Ht(Y,ie){for(var te=-1,_e=Y==null?0:Y.length,Ge=Array(_e);++te<_e;)Ge[te]=ie(Y[te],te,Y);return Ge}function Hs(Y,ie){for(var te=-1,_e=ie.length,Ge=Y.length;++te<_e;)Y[Ge+te]=ie[te];return Y}function ug(Y,ie,te,_e){var Ge=-1,Tt=Y==null?0:Y.length;for(_e&&Tt&&(te=Y[++Ge]);++Ge<Tt;)te=ie(te,Y[Ge],Ge,Y);return te}function zI(Y,ie,te,_e){var Ge=Y==null?0:Y.length;for(_e&&Ge&&(te=Y[--Ge]);Ge--;)te=ie(te,Y[Ge],Ge,Y);return te}function cg(Y,ie){for(var te=-1,_e=Y==null?0:Y.length;++te<_e;)if(ie(Y[te],te,Y))return!0;return!1}var BI=hg("length");function $I(Y){return Y.split("")}function UI(Y){return Y.match(yn)||[]}function jv(Y,ie,te){var _e;return te(Y,function(Ge,Tt,Cn){if(ie(Ge,Tt,Cn))return _e=Tt,!1}),_e}function yh(Y,ie,te,_e){for(var Ge=Y.length,Tt=te+(_e?1:-1);_e?Tt--:++Tt<Ge;)if(ie(Y[Tt],Tt,Y))return Tt;return-1}function el(Y,ie,te){return ie===ie?QI(Y,ie,te):yh(Y,Hv,te)}function GI(Y,ie,te,_e){for(var Ge=te-1,Tt=Y.length;++Ge<Tt;)if(_e(Y[Ge],ie))return Ge;return-1}function Hv(Y){return Y!==Y}function Vv(Y,ie){var te=Y==null?0:Y.length;return te?fg(Y,ie)/te:j}function hg(Y){return function(ie){return ie==null?t:ie[Y]}}function dg(Y){return function(ie){return Y==null?t:Y[ie]}}function Xv(Y,ie,te,_e,Ge){return Ge(Y,function(Tt,Cn,zt){te=_e?(_e=!1,Tt):ie(te,Tt,Cn,zt)}),te}function qI(Y,ie){var te=Y.length;for(Y.sort(ie);te--;)Y[te]=Y[te].value;return Y}function fg(Y,ie){for(var te,_e=-1,Ge=Y.length;++_e<Ge;){var Tt=ie(Y[_e]);Tt!==t&&(te=te===t?Tt:te+Tt)}return te}function pg(Y,ie){for(var te=-1,_e=Array(Y);++te<Y;)_e[te]=ie(te);return _e}function WI(Y,ie){return Ht(ie,function(te){return[te,Y[te]]})}function Yv(Y){return Y&&Y.slice(0,Qv(Y)+1).replace(xt,"")}function Ti(Y){return function(ie){return Y(ie)}}function gg(Y,ie){return Ht(ie,function(te){return Y[te]})}function bu(Y,ie){return Y.has(ie)}function Kv(Y,ie){for(var te=-1,_e=Y.length;++te<_e&&el(ie,Y[te],0)>-1;);return te}function Zv(Y,ie){for(var te=Y.length;te--&&el(ie,Y[te],0)>-1;);return te}function jI(Y,ie){for(var te=Y.length,_e=0;te--;)Y[te]===ie&&++_e;return _e}var HI=dg(AI),VI=dg(PI);function XI(Y){return"\\"+LI[Y]}function YI(Y,ie){return Y==null?t:Y[ie]}function tl(Y){return TI.test(Y)}function KI(Y){return SI.test(Y)}function ZI(Y){for(var ie,te=[];!(ie=Y.next()).done;)te.push(ie.value);return te}function mg(Y){var ie=-1,te=Array(Y.size);return Y.forEach(function(_e,Ge){te[++ie]=[Ge,_e]}),te}function Jv(Y,ie){return function(te){return Y(ie(te))}}function Vs(Y,ie){for(var te=-1,_e=Y.length,Ge=0,Tt=[];++te<_e;){var Cn=Y[te];(Cn===ie||Cn===d)&&(Y[te]=d,Tt[Ge++]=te)}return Tt}function _h(Y){var ie=-1,te=Array(Y.size);return Y.forEach(function(_e){te[++ie]=_e}),te}function JI(Y){var ie=-1,te=Array(Y.size);return Y.forEach(function(_e){te[++ie]=[_e,_e]}),te}function QI(Y,ie,te){for(var _e=te-1,Ge=Y.length;++_e<Ge;)if(Y[_e]===ie)return _e;return-1}function eA(Y,ie,te){for(var _e=te+1;_e--;)if(Y[_e]===ie)return _e;return _e}function nl(Y){return tl(Y)?nA(Y):BI(Y)}function ar(Y){return tl(Y)?iA(Y):$I(Y)}function Qv(Y){for(var ie=Y.length;ie--&&bn.test(Y.charAt(ie)););return ie}var tA=dg(MI);function nA(Y){for(var ie=sg.lastIndex=0;sg.test(Y);)++ie;return ie}function iA(Y){return Y.match(sg)||[]}function rA(Y){return Y.match(CI)||[]}var sA=function Y(ie){ie=ie==null?Bn:il.defaults(Bn.Object(),ie,il.pick(Bn,RI));var te=ie.Array,_e=ie.Date,Ge=ie.Error,Tt=ie.Function,Cn=ie.Math,zt=ie.Object,yg=ie.RegExp,oA=ie.String,qi=ie.TypeError,vh=te.prototype,aA=Tt.prototype,rl=zt.prototype,xh=ie["__core-js_shared__"],wh=aA.toString,Ot=rl.hasOwnProperty,lA=0,ex=function(){var u=/[^.]+$/.exec(xh&&xh.keys&&xh.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),bh=rl.toString,uA=wh.call(zt),cA=Bn._,hA=yg("^"+wh.call(Ot).replace(cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eh=Nv?ie.Buffer:t,Xs=ie.Symbol,Ch=ie.Uint8Array,tx=Eh?Eh.allocUnsafe:t,Th=Jv(zt.getPrototypeOf,zt),nx=zt.create,ix=rl.propertyIsEnumerable,Sh=vh.splice,rx=Xs?Xs.isConcatSpreadable:t,Eu=Xs?Xs.iterator:t,Vo=Xs?Xs.toStringTag:t,Rh=function(){try{var u=Jo(zt,"defineProperty");return u({},"",{}),u}catch{}}(),dA=ie.clearTimeout!==Bn.clearTimeout&&ie.clearTimeout,fA=_e&&_e.now!==Bn.Date.now&&_e.now,pA=ie.setTimeout!==Bn.setTimeout&&ie.setTimeout,Ih=Cn.ceil,Ah=Cn.floor,_g=zt.getOwnPropertySymbols,gA=Eh?Eh.isBuffer:t,sx=ie.isFinite,mA=vh.join,yA=Jv(zt.keys,zt),Tn=Cn.max,Wn=Cn.min,_A=_e.now,vA=ie.parseInt,ox=Cn.random,xA=vh.reverse,vg=Jo(ie,"DataView"),Cu=Jo(ie,"Map"),xg=Jo(ie,"Promise"),sl=Jo(ie,"Set"),Tu=Jo(ie,"WeakMap"),Su=Jo(zt,"create"),Ph=Tu&&new Tu,ol={},wA=Qo(vg),bA=Qo(Cu),EA=Qo(xg),CA=Qo(sl),TA=Qo(Tu),Mh=Xs?Xs.prototype:t,Ru=Mh?Mh.valueOf:t,ax=Mh?Mh.toString:t;function I(u){if(rn(u)&&!je(u)&&!(u instanceof ht)){if(u instanceof Wi)return u;if(Ot.call(u,"__wrapped__"))return lw(u)}return new Wi(u)}var al=function(){function u(){}return function(h){if(!Zt(h))return{};if(nx)return nx(h);u.prototype=h;var g=new u;return u.prototype=t,g}}();function Lh(){}function Wi(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=t}I.templateSettings={escape:un,evaluate:zn,interpolate:wn,variable:"",imports:{_:I}},I.prototype=Lh.prototype,I.prototype.constructor=I,Wi.prototype=al(Lh.prototype),Wi.prototype.constructor=Wi;function ht(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function SA(){var u=new ht(this.__wrapped__);return u.__actions__=ci(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ci(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ci(this.__views__),u}function RA(){if(this.__filtered__){var u=new ht(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function IA(){var u=this.__wrapped__.value(),h=this.__dir__,g=je(u),_=h<0,b=g?u.length:0,P=$P(0,b,this.__views__),D=P.start,W=P.end,J=W-D,ae=_?W:D-1,ue=this.__iteratees__,ce=ue.length,me=0,we=Wn(J,this.__takeCount__);if(!g||!_&&b==J&&we==J)return Mx(u,this.__actions__);var Me=[];e:for(;J--&&me<we;){ae+=h;for(var rt=-1,Le=u[ae];++rt<ce;){var at=ue[rt],gt=at.iteratee,Ii=at.type,ii=gt(Le);if(Ii==G)Le=ii;else if(!ii){if(Ii==q)continue e;break e}}Me[me++]=Le}return Me}ht.prototype=al(Lh.prototype),ht.prototype.constructor=ht;function Xo(u){var h=-1,g=u==null?0:u.length;for(this.clear();++h<g;){var _=u[h];this.set(_[0],_[1])}}function AA(){this.__data__=Su?Su(null):{},this.size=0}function PA(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h}function MA(u){var h=this.__data__;if(Su){var g=h[u];return g===l?t:g}return Ot.call(h,u)?h[u]:t}function LA(u){var h=this.__data__;return Su?h[u]!==t:Ot.call(h,u)}function kA(u,h){var g=this.__data__;return this.size+=this.has(u)?0:1,g[u]=Su&&h===t?l:h,this}Xo.prototype.clear=AA,Xo.prototype.delete=PA,Xo.prototype.get=MA,Xo.prototype.has=LA,Xo.prototype.set=kA;function cs(u){var h=-1,g=u==null?0:u.length;for(this.clear();++h<g;){var _=u[h];this.set(_[0],_[1])}}function OA(){this.__data__=[],this.size=0}function FA(u){var h=this.__data__,g=kh(h,u);if(g<0)return!1;var _=h.length-1;return g==_?h.pop():Sh.call(h,g,1),--this.size,!0}function DA(u){var h=this.__data__,g=kh(h,u);return g<0?t:h[g][1]}function NA(u){return kh(this.__data__,u)>-1}function zA(u,h){var g=this.__data__,_=kh(g,u);return _<0?(++this.size,g.push([u,h])):g[_][1]=h,this}cs.prototype.clear=OA,cs.prototype.delete=FA,cs.prototype.get=DA,cs.prototype.has=NA,cs.prototype.set=zA;function hs(u){var h=-1,g=u==null?0:u.length;for(this.clear();++h<g;){var _=u[h];this.set(_[0],_[1])}}function BA(){this.size=0,this.__data__={hash:new Xo,map:new(Cu||cs),string:new Xo}}function $A(u){var h=jh(this,u).delete(u);return this.size-=h?1:0,h}function UA(u){return jh(this,u).get(u)}function GA(u){return jh(this,u).has(u)}function qA(u,h){var g=jh(this,u),_=g.size;return g.set(u,h),this.size+=g.size==_?0:1,this}hs.prototype.clear=BA,hs.prototype.delete=$A,hs.prototype.get=UA,hs.prototype.has=GA,hs.prototype.set=qA;function Yo(u){var h=-1,g=u==null?0:u.length;for(this.__data__=new hs;++h<g;)this.add(u[h])}function WA(u){return this.__data__.set(u,l),this}function jA(u){return this.__data__.has(u)}Yo.prototype.add=Yo.prototype.push=WA,Yo.prototype.has=jA;function lr(u){var h=this.__data__=new cs(u);this.size=h.size}function HA(){this.__data__=new cs,this.size=0}function VA(u){var h=this.__data__,g=h.delete(u);return this.size=h.size,g}function XA(u){return this.__data__.get(u)}function YA(u){return this.__data__.has(u)}function KA(u,h){var g=this.__data__;if(g instanceof cs){var _=g.__data__;if(!Cu||_.length<r-1)return _.push([u,h]),this.size=++g.size,this;g=this.__data__=new hs(_)}return g.set(u,h),this.size=g.size,this}lr.prototype.clear=HA,lr.prototype.delete=VA,lr.prototype.get=XA,lr.prototype.has=YA,lr.prototype.set=KA;function lx(u,h){var g=je(u),_=!g&&ea(u),b=!g&&!_&&Qs(u),P=!g&&!_&&!b&&hl(u),D=g||_||b||P,W=D?pg(u.length,oA):[],J=W.length;for(var ae in u)(h||Ot.call(u,ae))&&!(D&&(ae=="length"||b&&(ae=="offset"||ae=="parent")||P&&(ae=="buffer"||ae=="byteLength"||ae=="byteOffset")||gs(ae,J)))&&W.push(ae);return W}function ux(u){var h=u.length;return h?u[Mg(0,h-1)]:t}function ZA(u,h){return Hh(ci(u),Ko(h,0,u.length))}function JA(u){return Hh(ci(u))}function wg(u,h,g){(g!==t&&!ur(u[h],g)||g===t&&!(h in u))&&ds(u,h,g)}function Iu(u,h,g){var _=u[h];(!(Ot.call(u,h)&&ur(_,g))||g===t&&!(h in u))&&ds(u,h,g)}function kh(u,h){for(var g=u.length;g--;)if(ur(u[g][0],h))return g;return-1}function QA(u,h,g,_){return Ys(u,function(b,P,D){h(_,b,g(b),D)}),_}function cx(u,h){return u&&Or(h,Ln(h),u)}function eP(u,h){return u&&Or(h,di(h),u)}function ds(u,h,g){h=="__proto__"&&Rh?Rh(u,h,{configurable:!0,enumerable:!0,value:g,writable:!0}):u[h]=g}function bg(u,h){for(var g=-1,_=h.length,b=te(_),P=u==null;++g<_;)b[g]=P?t:nm(u,h[g]);return b}function Ko(u,h,g){return u===u&&(g!==t&&(u=u<=g?u:g),h!==t&&(u=u>=h?u:h)),u}function ji(u,h,g,_,b,P){var D,W=h&f,J=h&p,ae=h&y;if(g&&(D=b?g(u,_,b,P):g(u)),D!==t)return D;if(!Zt(u))return u;var ue=je(u);if(ue){if(D=GP(u),!W)return ci(u,D)}else{var ce=jn(u),me=ce==Nn||ce==Ue;if(Qs(u))return Ox(u,W);if(ce==Ut||ce==Ee||me&&!b){if(D=J||me?{}:Qx(u),!W)return J?MP(u,eP(D,u)):PP(u,cx(D,u))}else{if(!$t[ce])return b?u:{};D=qP(u,ce,W)}}P||(P=new lr);var we=P.get(u);if(we)return we;P.set(u,D),Iw(u)?u.forEach(function(Le){D.add(ji(Le,h,g,Le,u,P))}):Sw(u)&&u.forEach(function(Le,at){D.set(at,ji(Le,h,g,at,u,P))});var Me=ae?J?Gg:Ug:J?di:Ln,rt=ue?t:Me(u);return Gi(rt||u,function(Le,at){rt&&(at=Le,Le=u[at]),Iu(D,at,ji(Le,h,g,at,u,P))}),D}function tP(u){var h=Ln(u);return function(g){return hx(g,u,h)}}function hx(u,h,g){var _=g.length;if(u==null)return!_;for(u=zt(u);_--;){var b=g[_],P=h[b],D=u[b];if(D===t&&!(b in u)||!P(D))return!1}return!0}function dx(u,h,g){if(typeof u!="function")throw new qi(o);return Fu(function(){u.apply(t,g)},h)}function Au(u,h,g,_){var b=-1,P=mh,D=!0,W=u.length,J=[],ae=h.length;if(!W)return J;g&&(h=Ht(h,Ti(g))),_?(P=lg,D=!1):h.length>=r&&(P=bu,D=!1,h=new Yo(h));e:for(;++b<W;){var ue=u[b],ce=g==null?ue:g(ue);if(ue=_||ue!==0?ue:0,D&&ce===ce){for(var me=ae;me--;)if(h[me]===ce)continue e;J.push(ue)}else P(h,ce,_)||J.push(ue)}return J}var Ys=Bx(kr),fx=Bx(Cg,!0);function nP(u,h){var g=!0;return Ys(u,function(_,b,P){return g=!!h(_,b,P),g}),g}function Oh(u,h,g){for(var _=-1,b=u.length;++_<b;){var P=u[_],D=h(P);if(D!=null&&(W===t?D===D&&!Ri(D):g(D,W)))var W=D,J=P}return J}function iP(u,h,g,_){var b=u.length;for(g=et(g),g<0&&(g=-g>b?0:b+g),_=_===t||_>b?b:et(_),_<0&&(_+=b),_=g>_?0:Pw(_);g<_;)u[g++]=h;return u}function px(u,h){var g=[];return Ys(u,function(_,b,P){h(_,b,P)&&g.push(_)}),g}function $n(u,h,g,_,b){var P=-1,D=u.length;for(g||(g=jP),b||(b=[]);++P<D;){var W=u[P];h>0&&g(W)?h>1?$n(W,h-1,g,_,b):Hs(b,W):_||(b[b.length]=W)}return b}var Eg=$x(),gx=$x(!0);function kr(u,h){return u&&Eg(u,h,Ln)}function Cg(u,h){return u&&gx(u,h,Ln)}function Fh(u,h){return js(h,function(g){return ms(u[g])})}function Zo(u,h){h=Zs(h,u);for(var g=0,_=h.length;u!=null&&g<_;)u=u[Fr(h[g++])];return g&&g==_?u:t}function mx(u,h,g){var _=h(u);return je(u)?_:Hs(_,g(u))}function ti(u){return u==null?u===t?ct:vt:Vo&&Vo in zt(u)?BP(u):JP(u)}function Tg(u,h){return u>h}function rP(u,h){return u!=null&&Ot.call(u,h)}function sP(u,h){return u!=null&&h in zt(u)}function oP(u,h,g){return u>=Wn(h,g)&&u<Tn(h,g)}function Sg(u,h,g){for(var _=g?lg:mh,b=u[0].length,P=u.length,D=P,W=te(P),J=1/0,ae=[];D--;){var ue=u[D];D&&h&&(ue=Ht(ue,Ti(h))),J=Wn(ue.length,J),W[D]=!g&&(h||b>=120&&ue.length>=120)?new Yo(D&&ue):t}ue=u[0];var ce=-1,me=W[0];e:for(;++ce<b&&ae.length<J;){var we=ue[ce],Me=h?h(we):we;if(we=g||we!==0?we:0,!(me?bu(me,Me):_(ae,Me,g))){for(D=P;--D;){var rt=W[D];if(!(rt?bu(rt,Me):_(u[D],Me,g)))continue e}me&&me.push(Me),ae.push(we)}}return ae}function aP(u,h,g,_){return kr(u,function(b,P,D){h(_,g(b),P,D)}),_}function Pu(u,h,g){h=Zs(h,u),u=iw(u,h);var _=u==null?u:u[Fr(Vi(h))];return _==null?t:Ci(_,u,g)}function yx(u){return rn(u)&&ti(u)==Ee}function lP(u){return rn(u)&&ti(u)==be}function uP(u){return rn(u)&&ti(u)==De}function Mu(u,h,g,_,b){return u===h?!0:u==null||h==null||!rn(u)&&!rn(h)?u!==u&&h!==h:cP(u,h,g,_,Mu,b)}function cP(u,h,g,_,b,P){var D=je(u),W=je(h),J=D?Ke:jn(u),ae=W?Ke:jn(h);J=J==Ee?Ut:J,ae=ae==Ee?Ut:ae;var ue=J==Ut,ce=ae==Ut,me=J==ae;if(me&&Qs(u)){if(!Qs(h))return!1;D=!0,ue=!1}if(me&&!ue)return P||(P=new lr),D||hl(u)?Kx(u,h,g,_,b,P):NP(u,h,J,g,_,b,P);if(!(g&m)){var we=ue&&Ot.call(u,"__wrapped__"),Me=ce&&Ot.call(h,"__wrapped__");if(we||Me){var rt=we?u.value():u,Le=Me?h.value():h;return P||(P=new lr),b(rt,Le,g,_,P)}}return me?(P||(P=new lr),zP(u,h,g,_,b,P)):!1}function hP(u){return rn(u)&&jn(u)==Nt}function Rg(u,h,g,_){var b=g.length,P=b,D=!_;if(u==null)return!P;for(u=zt(u);b--;){var W=g[b];if(D&&W[2]?W[1]!==u[W[0]]:!(W[0]in u))return!1}for(;++b<P;){W=g[b];var J=W[0],ae=u[J],ue=W[1];if(D&&W[2]){if(ae===t&&!(J in u))return!1}else{var ce=new lr;if(_)var me=_(ae,ue,J,u,h,ce);if(!(me===t?Mu(ue,ae,m|v,_,ce):me))return!1}}return!0}function _x(u){if(!Zt(u)||VP(u))return!1;var h=ms(u)?hA:xu;return h.test(Qo(u))}function dP(u){return rn(u)&&ti(u)==Gt}function fP(u){return rn(u)&&jn(u)==k}function pP(u){return rn(u)&&Jh(u.length)&&!!Wt[ti(u)]}function vx(u){return typeof u=="function"?u:u==null?fi:typeof u=="object"?je(u)?bx(u[0],u[1]):wx(u):Uw(u)}function Ig(u){if(!Ou(u))return yA(u);var h=[];for(var g in zt(u))Ot.call(u,g)&&g!="constructor"&&h.push(g);return h}function gP(u){if(!Zt(u))return ZP(u);var h=Ou(u),g=[];for(var _ in u)_=="constructor"&&(h||!Ot.call(u,_))||g.push(_);return g}function Ag(u,h){return u<h}function xx(u,h){var g=-1,_=hi(u)?te(u.length):[];return Ys(u,function(b,P,D){_[++g]=h(b,P,D)}),_}function wx(u){var h=Wg(u);return h.length==1&&h[0][2]?tw(h[0][0],h[0][1]):function(g){return g===u||Rg(g,u,h)}}function bx(u,h){return Hg(u)&&ew(h)?tw(Fr(u),h):function(g){var _=nm(g,u);return _===t&&_===h?im(g,u):Mu(h,_,m|v)}}function Dh(u,h,g,_,b){u!==h&&Eg(h,function(P,D){if(b||(b=new lr),Zt(P))mP(u,h,D,g,Dh,_,b);else{var W=_?_(Xg(u,D),P,D+"",u,h,b):t;W===t&&(W=P),wg(u,D,W)}},di)}function mP(u,h,g,_,b,P,D){var W=Xg(u,g),J=Xg(h,g),ae=D.get(J);if(ae){wg(u,g,ae);return}var ue=P?P(W,J,g+"",u,h,D):t,ce=ue===t;if(ce){var me=je(J),we=!me&&Qs(J),Me=!me&&!we&&hl(J);ue=J,me||we||Me?je(W)?ue=W:hn(W)?ue=ci(W):we?(ce=!1,ue=Ox(J,!0)):Me?(ce=!1,ue=Fx(J,!0)):ue=[]:Du(J)||ea(J)?(ue=W,ea(W)?ue=Mw(W):(!Zt(W)||ms(W))&&(ue=Qx(J))):ce=!1}ce&&(D.set(J,ue),b(ue,J,_,P,D),D.delete(J)),wg(u,g,ue)}function Ex(u,h){var g=u.length;if(g)return h+=h<0?g:0,gs(h,g)?u[h]:t}function Cx(u,h,g){h.length?h=Ht(h,function(P){return je(P)?function(D){return Zo(D,P.length===1?P[0]:P)}:P}):h=[fi];var _=-1;h=Ht(h,Ti(Pe()));var b=xx(u,function(P,D,W){var J=Ht(h,function(ae){return ae(P)});return{criteria:J,index:++_,value:P}});return qI(b,function(P,D){return AP(P,D,g)})}function yP(u,h){return Tx(u,h,function(g,_){return im(u,_)})}function Tx(u,h,g){for(var _=-1,b=h.length,P={};++_<b;){var D=h[_],W=Zo(u,D);g(W,D)&&Lu(P,Zs(D,u),W)}return P}function _P(u){return function(h){return Zo(h,u)}}function Pg(u,h,g,_){var b=_?GI:el,P=-1,D=h.length,W=u;for(u===h&&(h=ci(h)),g&&(W=Ht(u,Ti(g)));++P<D;)for(var J=0,ae=h[P],ue=g?g(ae):ae;(J=b(W,ue,J,_))>-1;)W!==u&&Sh.call(W,J,1),Sh.call(u,J,1);return u}function Sx(u,h){for(var g=u?h.length:0,_=g-1;g--;){var b=h[g];if(g==_||b!==P){var P=b;gs(b)?Sh.call(u,b,1):Og(u,b)}}return u}function Mg(u,h){return u+Ah(ox()*(h-u+1))}function vP(u,h,g,_){for(var b=-1,P=Tn(Ih((h-u)/(g||1)),0),D=te(P);P--;)D[_?P:++b]=u,u+=g;return D}function Lg(u,h){var g="";if(!u||h<1||h>V)return g;do h%2&&(g+=u),h=Ah(h/2),h&&(u+=u);while(h);return g}function ot(u,h){return Yg(nw(u,h,fi),u+"")}function xP(u){return ux(dl(u))}function wP(u,h){var g=dl(u);return Hh(g,Ko(h,0,g.length))}function Lu(u,h,g,_){if(!Zt(u))return u;h=Zs(h,u);for(var b=-1,P=h.length,D=P-1,W=u;W!=null&&++b<P;){var J=Fr(h[b]),ae=g;if(J==="__proto__"||J==="constructor"||J==="prototype")return u;if(b!=D){var ue=W[J];ae=_?_(ue,J,W):t,ae===t&&(ae=Zt(ue)?ue:gs(h[b+1])?[]:{})}Iu(W,J,ae),W=W[J]}return u}var Rx=Ph?function(u,h){return Ph.set(u,h),u}:fi,bP=Rh?function(u,h){return Rh(u,"toString",{configurable:!0,enumerable:!1,value:sm(h),writable:!0})}:fi;function EP(u){return Hh(dl(u))}function Hi(u,h,g){var _=-1,b=u.length;h<0&&(h=-h>b?0:b+h),g=g>b?b:g,g<0&&(g+=b),b=h>g?0:g-h>>>0,h>>>=0;for(var P=te(b);++_<b;)P[_]=u[_+h];return P}function CP(u,h){var g;return Ys(u,function(_,b,P){return g=h(_,b,P),!g}),!!g}function Nh(u,h,g){var _=0,b=u==null?_:u.length;if(typeof h=="number"&&h===h&&b<=Ce){for(;_<b;){var P=_+b>>>1,D=u[P];D!==null&&!Ri(D)&&(g?D<=h:D<h)?_=P+1:b=P}return b}return kg(u,h,fi,g)}function kg(u,h,g,_){var b=0,P=u==null?0:u.length;if(P===0)return 0;h=g(h);for(var D=h!==h,W=h===null,J=Ri(h),ae=h===t;b<P;){var ue=Ah((b+P)/2),ce=g(u[ue]),me=ce!==t,we=ce===null,Me=ce===ce,rt=Ri(ce);if(D)var Le=_||Me;else ae?Le=Me&&(_||me):W?Le=Me&&me&&(_||!we):J?Le=Me&&me&&!we&&(_||!rt):we||rt?Le=!1:Le=_?ce<=h:ce<h;Le?b=ue+1:P=ue}return Wn(P,le)}function Ix(u,h){for(var g=-1,_=u.length,b=0,P=[];++g<_;){var D=u[g],W=h?h(D):D;if(!g||!ur(W,J)){var J=W;P[b++]=D===0?0:D}}return P}function Ax(u){return typeof u=="number"?u:Ri(u)?j:+u}function Si(u){if(typeof u=="string")return u;if(je(u))return Ht(u,Si)+"";if(Ri(u))return ax?ax.call(u):"";var h=u+"";return h=="0"&&1/u==-H?"-0":h}function Ks(u,h,g){var _=-1,b=mh,P=u.length,D=!0,W=[],J=W;if(g)D=!1,b=lg;else if(P>=r){var ae=h?null:FP(u);if(ae)return _h(ae);D=!1,b=bu,J=new Yo}else J=h?[]:W;e:for(;++_<P;){var ue=u[_],ce=h?h(ue):ue;if(ue=g||ue!==0?ue:0,D&&ce===ce){for(var me=J.length;me--;)if(J[me]===ce)continue e;h&&J.push(ce),W.push(ue)}else b(J,ce,g)||(J!==W&&J.push(ce),W.push(ue))}return W}function Og(u,h){return h=Zs(h,u),u=iw(u,h),u==null||delete u[Fr(Vi(h))]}function Px(u,h,g,_){return Lu(u,h,g(Zo(u,h)),_)}function zh(u,h,g,_){for(var b=u.length,P=_?b:-1;(_?P--:++P<b)&&h(u[P],P,u););return g?Hi(u,_?0:P,_?P+1:b):Hi(u,_?P+1:0,_?b:P)}function Mx(u,h){var g=u;return g instanceof ht&&(g=g.value()),ug(h,function(_,b){return b.func.apply(b.thisArg,Hs([_],b.args))},g)}function Fg(u,h,g){var _=u.length;if(_<2)return _?Ks(u[0]):[];for(var b=-1,P=te(_);++b<_;)for(var D=u[b],W=-1;++W<_;)W!=b&&(P[b]=Au(P[b]||D,u[W],h,g));return Ks($n(P,1),h,g)}function Lx(u,h,g){for(var _=-1,b=u.length,P=h.length,D={};++_<b;){var W=_<P?h[_]:t;g(D,u[_],W)}return D}function Dg(u){return hn(u)?u:[]}function Ng(u){return typeof u=="function"?u:fi}function Zs(u,h){return je(u)?u:Hg(u,h)?[u]:aw(Mt(u))}var TP=ot;function Js(u,h,g){var _=u.length;return g=g===t?_:g,!h&&g>=_?u:Hi(u,h,g)}var kx=dA||function(u){return Bn.clearTimeout(u)};function Ox(u,h){if(h)return u.slice();var g=u.length,_=tx?tx(g):new u.constructor(g);return u.copy(_),_}function zg(u){var h=new u.constructor(u.byteLength);return new Ch(h).set(new Ch(u)),h}function SP(u,h){var g=h?zg(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.byteLength)}function RP(u){var h=new u.constructor(u.source,Pt.exec(u));return h.lastIndex=u.lastIndex,h}function IP(u){return Ru?zt(Ru.call(u)):{}}function Fx(u,h){var g=h?zg(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.length)}function Dx(u,h){if(u!==h){var g=u!==t,_=u===null,b=u===u,P=Ri(u),D=h!==t,W=h===null,J=h===h,ae=Ri(h);if(!W&&!ae&&!P&&u>h||P&&D&&J&&!W&&!ae||_&&D&&J||!g&&J||!b)return 1;if(!_&&!P&&!ae&&u<h||ae&&g&&b&&!_&&!P||W&&g&&b||!D&&b||!J)return-1}return 0}function AP(u,h,g){for(var _=-1,b=u.criteria,P=h.criteria,D=b.length,W=g.length;++_<D;){var J=Dx(b[_],P[_]);if(J){if(_>=W)return J;var ae=g[_];return J*(ae=="desc"?-1:1)}}return u.index-h.index}function Nx(u,h,g,_){for(var b=-1,P=u.length,D=g.length,W=-1,J=h.length,ae=Tn(P-D,0),ue=te(J+ae),ce=!_;++W<J;)ue[W]=h[W];for(;++b<D;)(ce||b<P)&&(ue[g[b]]=u[b]);for(;ae--;)ue[W++]=u[b++];return ue}function zx(u,h,g,_){for(var b=-1,P=u.length,D=-1,W=g.length,J=-1,ae=h.length,ue=Tn(P-W,0),ce=te(ue+ae),me=!_;++b<ue;)ce[b]=u[b];for(var we=b;++J<ae;)ce[we+J]=h[J];for(;++D<W;)(me||b<P)&&(ce[we+g[D]]=u[b++]);return ce}function ci(u,h){var g=-1,_=u.length;for(h||(h=te(_));++g<_;)h[g]=u[g];return h}function Or(u,h,g,_){var b=!g;g||(g={});for(var P=-1,D=h.length;++P<D;){var W=h[P],J=_?_(g[W],u[W],W,g,u):t;J===t&&(J=u[W]),b?ds(g,W,J):Iu(g,W,J)}return g}function PP(u,h){return Or(u,jg(u),h)}function MP(u,h){return Or(u,Zx(u),h)}function Bh(u,h){return function(g,_){var b=je(g)?DI:QA,P=h?h():{};return b(g,u,Pe(_,2),P)}}function ll(u){return ot(function(h,g){var _=-1,b=g.length,P=b>1?g[b-1]:t,D=b>2?g[2]:t;for(P=u.length>3&&typeof P=="function"?(b--,P):t,D&&ni(g[0],g[1],D)&&(P=b<3?t:P,b=1),h=zt(h);++_<b;){var W=g[_];W&&u(h,W,_,P)}return h})}function Bx(u,h){return function(g,_){if(g==null)return g;if(!hi(g))return u(g,_);for(var b=g.length,P=h?b:-1,D=zt(g);(h?P--:++P<b)&&_(D[P],P,D)!==!1;);return g}}function $x(u){return function(h,g,_){for(var b=-1,P=zt(h),D=_(h),W=D.length;W--;){var J=D[u?W:++b];if(g(P[J],J,P)===!1)break}return h}}function LP(u,h,g){var _=h&x,b=ku(u);function P(){var D=this&&this!==Bn&&this instanceof P?b:u;return D.apply(_?g:this,arguments)}return P}function Ux(u){return function(h){h=Mt(h);var g=tl(h)?ar(h):t,_=g?g[0]:h.charAt(0),b=g?Js(g,1).join(""):h.slice(1);return _[u]()+b}}function ul(u){return function(h){return ug(Bw(zw(h).replace(bI,"")),u,"")}}function ku(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var g=al(u.prototype),_=u.apply(g,h);return Zt(_)?_:g}}function kP(u,h,g){var _=ku(u);function b(){for(var P=arguments.length,D=te(P),W=P,J=cl(b);W--;)D[W]=arguments[W];var ae=P<3&&D[0]!==J&&D[P-1]!==J?[]:Vs(D,J);if(P-=ae.length,P<g)return Hx(u,h,$h,b.placeholder,t,D,ae,t,t,g-P);var ue=this&&this!==Bn&&this instanceof b?_:u;return Ci(ue,this,D)}return b}function Gx(u){return function(h,g,_){var b=zt(h);if(!hi(h)){var P=Pe(g,3);h=Ln(h),g=function(W){return P(b[W],W,b)}}var D=u(h,g,_);return D>-1?b[P?h[D]:D]:t}}function qx(u){return ps(function(h){var g=h.length,_=g,b=Wi.prototype.thru;for(u&&h.reverse();_--;){var P=h[_];if(typeof P!="function")throw new qi(o);if(b&&!D&&Wh(P)=="wrapper")var D=new Wi([],!0)}for(_=D?_:g;++_<g;){P=h[_];var W=Wh(P),J=W=="wrapper"?qg(P):t;J&&Vg(J[0])&&J[1]==(O|S|R|N)&&!J[4].length&&J[9]==1?D=D[Wh(J[0])].apply(D,J[3]):D=P.length==1&&Vg(P)?D[W]():D.thru(P)}return function(){var ae=arguments,ue=ae[0];if(D&&ae.length==1&&je(ue))return D.plant(ue).value();for(var ce=0,me=g?h[ce].apply(this,ae):ue;++ce<g;)me=h[ce].call(this,me);return me}})}function $h(u,h,g,_,b,P,D,W,J,ae){var ue=h&O,ce=h&x,me=h&w,we=h&(S|C),Me=h&L,rt=me?t:ku(u);function Le(){for(var at=arguments.length,gt=te(at),Ii=at;Ii--;)gt[Ii]=arguments[Ii];if(we)var ii=cl(Le),Ai=jI(gt,ii);if(_&&(gt=Nx(gt,_,b,we)),P&&(gt=zx(gt,P,D,we)),at-=Ai,we&&at<ae){var dn=Vs(gt,ii);return Hx(u,h,$h,Le.placeholder,g,gt,dn,W,J,ae-at)}var cr=ce?g:this,_s=me?cr[u]:u;return at=gt.length,W?gt=QP(gt,W):Me&&at>1&&gt.reverse(),ue&&J<at&&(gt.length=J),this&&this!==Bn&&this instanceof Le&&(_s=rt||ku(_s)),_s.apply(cr,gt)}return Le}function Wx(u,h){return function(g,_){return aP(g,u,h(_),{})}}function Uh(u,h){return function(g,_){var b;if(g===t&&_===t)return h;if(g!==t&&(b=g),_!==t){if(b===t)return _;typeof g=="string"||typeof _=="string"?(g=Si(g),_=Si(_)):(g=Ax(g),_=Ax(_)),b=u(g,_)}return b}}function Bg(u){return ps(function(h){return h=Ht(h,Ti(Pe())),ot(function(g){var _=this;return u(h,function(b){return Ci(b,_,g)})})})}function Gh(u,h){h=h===t?" ":Si(h);var g=h.length;if(g<2)return g?Lg(h,u):h;var _=Lg(h,Ih(u/nl(h)));return tl(h)?Js(ar(_),0,u).join(""):_.slice(0,u)}function OP(u,h,g,_){var b=h&x,P=ku(u);function D(){for(var W=-1,J=arguments.length,ae=-1,ue=_.length,ce=te(ue+J),me=this&&this!==Bn&&this instanceof D?P:u;++ae<ue;)ce[ae]=_[ae];for(;J--;)ce[ae++]=arguments[++W];return Ci(me,b?g:this,ce)}return D}function jx(u){return function(h,g,_){return _&&typeof _!="number"&&ni(h,g,_)&&(g=_=t),h=ys(h),g===t?(g=h,h=0):g=ys(g),_=_===t?h<g?1:-1:ys(_),vP(h,g,_,u)}}function qh(u){return function(h,g){return typeof h=="string"&&typeof g=="string"||(h=Xi(h),g=Xi(g)),u(h,g)}}function Hx(u,h,g,_,b,P,D,W,J,ae){var ue=h&S,ce=ue?D:t,me=ue?t:D,we=ue?P:t,Me=ue?t:P;h|=ue?R:F,h&=~(ue?F:R),h&E||(h&=-4);var rt=[u,h,b,we,ce,Me,me,W,J,ae],Le=g.apply(t,rt);return Vg(u)&&rw(Le,rt),Le.placeholder=_,sw(Le,u,h)}function $g(u){var h=Cn[u];return function(g,_){if(g=Xi(g),_=_==null?0:Wn(et(_),292),_&&sx(g)){var b=(Mt(g)+"e").split("e"),P=h(b[0]+"e"+(+b[1]+_));return b=(Mt(P)+"e").split("e"),+(b[0]+"e"+(+b[1]-_))}return h(g)}}var FP=sl&&1/_h(new sl([,-0]))[1]==H?function(u){return new sl(u)}:lm;function Vx(u){return function(h){var g=jn(h);return g==Nt?mg(h):g==k?JI(h):WI(h,u(h))}}function fs(u,h,g,_,b,P,D,W){var J=h&w;if(!J&&typeof u!="function")throw new qi(o);var ae=_?_.length:0;if(ae||(h&=-97,_=b=t),D=D===t?D:Tn(et(D),0),W=W===t?W:et(W),ae-=b?b.length:0,h&F){var ue=_,ce=b;_=b=t}var me=J?t:qg(u),we=[u,h,g,_,b,ue,ce,P,D,W];if(me&&KP(we,me),u=we[0],h=we[1],g=we[2],_=we[3],b=we[4],W=we[9]=we[9]===t?J?0:u.length:Tn(we[9]-ae,0),!W&&h&(S|C)&&(h&=-25),!h||h==x)var Me=LP(u,h,g);else h==S||h==C?Me=kP(u,h,W):(h==R||h==(x|R))&&!b.length?Me=OP(u,h,g,_):Me=$h.apply(t,we);var rt=me?Rx:rw;return sw(rt(Me,we),u,h)}function Xx(u,h,g,_){return u===t||ur(u,rl[g])&&!Ot.call(_,g)?h:u}function Yx(u,h,g,_,b,P){return Zt(u)&&Zt(h)&&(P.set(h,u),Dh(u,h,t,Yx,P),P.delete(h)),u}function DP(u){return Du(u)?t:u}function Kx(u,h,g,_,b,P){var D=g&m,W=u.length,J=h.length;if(W!=J&&!(D&&J>W))return!1;var ae=P.get(u),ue=P.get(h);if(ae&&ue)return ae==h&&ue==u;var ce=-1,me=!0,we=g&v?new Yo:t;for(P.set(u,h),P.set(h,u);++ce<W;){var Me=u[ce],rt=h[ce];if(_)var Le=D?_(rt,Me,ce,h,u,P):_(Me,rt,ce,u,h,P);if(Le!==t){if(Le)continue;me=!1;break}if(we){if(!cg(h,function(at,gt){if(!bu(we,gt)&&(Me===at||b(Me,at,g,_,P)))return we.push(gt)})){me=!1;break}}else if(!(Me===rt||b(Me,rt,g,_,P))){me=!1;break}}return P.delete(u),P.delete(h),me}function NP(u,h,g,_,b,P,D){switch(g){case wt:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case be:return!(u.byteLength!=h.byteLength||!P(new Ch(u),new Ch(h)));case Se:case De:case ut:return ur(+u,+h);case At:return u.name==h.name&&u.message==h.message;case Gt:case Dt:return u==h+"";case Nt:var W=mg;case k:var J=_&m;if(W||(W=_h),u.size!=h.size&&!J)return!1;var ae=D.get(u);if(ae)return ae==h;_|=v,D.set(u,h);var ue=Kx(W(u),W(h),_,b,P,D);return D.delete(u),ue;case Ve:if(Ru)return Ru.call(u)==Ru.call(h)}return!1}function zP(u,h,g,_,b,P){var D=g&m,W=Ug(u),J=W.length,ae=Ug(h),ue=ae.length;if(J!=ue&&!D)return!1;for(var ce=J;ce--;){var me=W[ce];if(!(D?me in h:Ot.call(h,me)))return!1}var we=P.get(u),Me=P.get(h);if(we&&Me)return we==h&&Me==u;var rt=!0;P.set(u,h),P.set(h,u);for(var Le=D;++ce<J;){me=W[ce];var at=u[me],gt=h[me];if(_)var Ii=D?_(gt,at,me,h,u,P):_(at,gt,me,u,h,P);if(!(Ii===t?at===gt||b(at,gt,g,_,P):Ii)){rt=!1;break}Le||(Le=me=="constructor")}if(rt&&!Le){var ii=u.constructor,Ai=h.constructor;ii!=Ai&&"constructor"in u&&"constructor"in h&&!(typeof ii=="function"&&ii instanceof ii&&typeof Ai=="function"&&Ai instanceof Ai)&&(rt=!1)}return P.delete(u),P.delete(h),rt}function ps(u){return Yg(nw(u,t,hw),u+"")}function Ug(u){return mx(u,Ln,jg)}function Gg(u){return mx(u,di,Zx)}var qg=Ph?function(u){return Ph.get(u)}:lm;function Wh(u){for(var h=u.name+"",g=ol[h],_=Ot.call(ol,h)?g.length:0;_--;){var b=g[_],P=b.func;if(P==null||P==u)return b.name}return h}function cl(u){var h=Ot.call(I,"placeholder")?I:u;return h.placeholder}function Pe(){var u=I.iteratee||om;return u=u===om?vx:u,arguments.length?u(arguments[0],arguments[1]):u}function jh(u,h){var g=u.__data__;return HP(h)?g[typeof h=="string"?"string":"hash"]:g.map}function Wg(u){for(var h=Ln(u),g=h.length;g--;){var _=h[g],b=u[_];h[g]=[_,b,ew(b)]}return h}function Jo(u,h){var g=YI(u,h);return _x(g)?g:t}function BP(u){var h=Ot.call(u,Vo),g=u[Vo];try{u[Vo]=t;var _=!0}catch{}var b=bh.call(u);return _&&(h?u[Vo]=g:delete u[Vo]),b}var jg=_g?function(u){return u==null?[]:(u=zt(u),js(_g(u),function(h){return ix.call(u,h)}))}:um,Zx=_g?function(u){for(var h=[];u;)Hs(h,jg(u)),u=Th(u);return h}:um,jn=ti;(vg&&jn(new vg(new ArrayBuffer(1)))!=wt||Cu&&jn(new Cu)!=Nt||xg&&jn(xg.resolve())!=dt||sl&&jn(new sl)!=k||Tu&&jn(new Tu)!=We)&&(jn=function(u){var h=ti(u),g=h==Ut?u.constructor:t,_=g?Qo(g):"";if(_)switch(_){case wA:return wt;case bA:return Nt;case EA:return dt;case CA:return k;case TA:return We}return h});function $P(u,h,g){for(var _=-1,b=g.length;++_<b;){var P=g[_],D=P.size;switch(P.type){case"drop":u+=D;break;case"dropRight":h-=D;break;case"take":h=Wn(h,u+D);break;case"takeRight":u=Tn(u,h-D);break}}return{start:u,end:h}}function UP(u){var h=u.match(os);return h?h[1].split(as):[]}function Jx(u,h,g){h=Zs(h,u);for(var _=-1,b=h.length,P=!1;++_<b;){var D=Fr(h[_]);if(!(P=u!=null&&g(u,D)))break;u=u[D]}return P||++_!=b?P:(b=u==null?0:u.length,!!b&&Jh(b)&&gs(D,b)&&(je(u)||ea(u)))}function GP(u){var h=u.length,g=new u.constructor(h);return h&&typeof u[0]=="string"&&Ot.call(u,"index")&&(g.index=u.index,g.input=u.input),g}function Qx(u){return typeof u.constructor=="function"&&!Ou(u)?al(Th(u)):{}}function qP(u,h,g){var _=u.constructor;switch(h){case be:return zg(u);case Se:case De:return new _(+u);case wt:return SP(u,g);case Fe:case Ie:case Ae:case Et:case jt:case Kt:case Ct:case kt:case ft:return Fx(u,g);case Nt:return new _;case ut:case Dt:return new _(u);case Gt:return RP(u);case k:return new _;case Ve:return IP(u)}}function WP(u,h){var g=h.length;if(!g)return u;var _=g-1;return h[_]=(g>1?"& ":"")+h[_],h=h.join(g>2?", ":" "),u.replace($o,`{
/* [wrapped with `+h+`] */
`)}function jP(u){return je(u)||ea(u)||!!(rx&&u&&u[rx])}function gs(u,h){var g=typeof u;return h=h??V,!!h&&(g=="number"||g!="symbol"&&En.test(u))&&u>-1&&u%1==0&&u<h}function ni(u,h,g){if(!Zt(g))return!1;var _=typeof h;return(_=="number"?hi(g)&&gs(h,g.length):_=="string"&&h in g)?ur(g[h],u):!1}function Hg(u,h){if(je(u))return!1;var g=typeof u;return g=="number"||g=="symbol"||g=="boolean"||u==null||Ri(u)?!0:nn.test(u)||!qn.test(u)||h!=null&&u in zt(h)}function HP(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function Vg(u){var h=Wh(u),g=I[h];if(typeof g!="function"||!(h in ht.prototype))return!1;if(u===g)return!0;var _=qg(g);return!!_&&u===_[0]}function VP(u){return!!ex&&ex in u}var XP=xh?ms:cm;function Ou(u){var h=u&&u.constructor,g=typeof h=="function"&&h.prototype||rl;return u===g}function ew(u){return u===u&&!Zt(u)}function tw(u,h){return function(g){return g==null?!1:g[u]===h&&(h!==t||u in zt(g))}}function YP(u){var h=Kh(u,function(_){return g.size===c&&g.clear(),_}),g=h.cache;return h}function KP(u,h){var g=u[1],_=h[1],b=g|_,P=b<(x|w|O),D=_==O&&g==S||_==O&&g==N&&u[7].length<=h[8]||_==(O|N)&&h[7].length<=h[8]&&g==S;if(!(P||D))return u;_&x&&(u[2]=h[2],b|=g&x?0:E);var W=h[3];if(W){var J=u[3];u[3]=J?Nx(J,W,h[4]):W,u[4]=J?Vs(u[3],d):h[4]}return W=h[5],W&&(J=u[5],u[5]=J?zx(J,W,h[6]):W,u[6]=J?Vs(u[5],d):h[6]),W=h[7],W&&(u[7]=W),_&O&&(u[8]=u[8]==null?h[8]:Wn(u[8],h[8])),u[9]==null&&(u[9]=h[9]),u[0]=h[0],u[1]=b,u}function ZP(u){var h=[];if(u!=null)for(var g in zt(u))h.push(g);return h}function JP(u){return bh.call(u)}function nw(u,h,g){return h=Tn(h===t?u.length-1:h,0),function(){for(var _=arguments,b=-1,P=Tn(_.length-h,0),D=te(P);++b<P;)D[b]=_[h+b];b=-1;for(var W=te(h+1);++b<h;)W[b]=_[b];return W[h]=g(D),Ci(u,this,W)}}function iw(u,h){return h.length<2?u:Zo(u,Hi(h,0,-1))}function QP(u,h){for(var g=u.length,_=Wn(h.length,g),b=ci(u);_--;){var P=h[_];u[_]=gs(P,g)?b[P]:t}return u}function Xg(u,h){if(!(h==="constructor"&&typeof u[h]=="function")&&h!="__proto__")return u[h]}var rw=ow(Rx),Fu=pA||function(u,h){return Bn.setTimeout(u,h)},Yg=ow(bP);function sw(u,h,g){var _=h+"";return Yg(u,WP(_,eM(UP(_),g)))}function ow(u){var h=0,g=0;return function(){var _=_A(),b=X-(_-g);if(g=_,b>0){if(++h>=U)return arguments[0]}else h=0;return u.apply(t,arguments)}}function Hh(u,h){var g=-1,_=u.length,b=_-1;for(h=h===t?_:h;++g<h;){var P=Mg(g,b),D=u[P];u[P]=u[g],u[g]=D}return u.length=h,u}var aw=YP(function(u){var h=[];return u.charCodeAt(0)===46&&h.push(""),u.replace(ei,function(g,_,b,P){h.push(b?P.replace(or,"$1"):_||g)}),h});function Fr(u){if(typeof u=="string"||Ri(u))return u;var h=u+"";return h=="0"&&1/u==-H?"-0":h}function Qo(u){if(u!=null){try{return wh.call(u)}catch{}try{return u+""}catch{}}return""}function eM(u,h){return Gi(qe,function(g){var _="_."+g[0];h&g[1]&&!mh(u,_)&&u.push(_)}),u.sort()}function lw(u){if(u instanceof ht)return u.clone();var h=new Wi(u.__wrapped__,u.__chain__);return h.__actions__=ci(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}function tM(u,h,g){(g?ni(u,h,g):h===t)?h=1:h=Tn(et(h),0);var _=u==null?0:u.length;if(!_||h<1)return[];for(var b=0,P=0,D=te(Ih(_/h));b<_;)D[P++]=Hi(u,b,b+=h);return D}function nM(u){for(var h=-1,g=u==null?0:u.length,_=0,b=[];++h<g;){var P=u[h];P&&(b[_++]=P)}return b}function iM(){var u=arguments.length;if(!u)return[];for(var h=te(u-1),g=arguments[0],_=u;_--;)h[_-1]=arguments[_];return Hs(je(g)?ci(g):[g],$n(h,1))}var rM=ot(function(u,h){return hn(u)?Au(u,$n(h,1,hn,!0)):[]}),sM=ot(function(u,h){var g=Vi(h);return hn(g)&&(g=t),hn(u)?Au(u,$n(h,1,hn,!0),Pe(g,2)):[]}),oM=ot(function(u,h){var g=Vi(h);return hn(g)&&(g=t),hn(u)?Au(u,$n(h,1,hn,!0),t,g):[]});function aM(u,h,g){var _=u==null?0:u.length;return _?(h=g||h===t?1:et(h),Hi(u,h<0?0:h,_)):[]}function lM(u,h,g){var _=u==null?0:u.length;return _?(h=g||h===t?1:et(h),h=_-h,Hi(u,0,h<0?0:h)):[]}function uM(u,h){return u&&u.length?zh(u,Pe(h,3),!0,!0):[]}function cM(u,h){return u&&u.length?zh(u,Pe(h,3),!0):[]}function hM(u,h,g,_){var b=u==null?0:u.length;return b?(g&&typeof g!="number"&&ni(u,h,g)&&(g=0,_=b),iP(u,h,g,_)):[]}function uw(u,h,g){var _=u==null?0:u.length;if(!_)return-1;var b=g==null?0:et(g);return b<0&&(b=Tn(_+b,0)),yh(u,Pe(h,3),b)}function cw(u,h,g){var _=u==null?0:u.length;if(!_)return-1;var b=_-1;return g!==t&&(b=et(g),b=g<0?Tn(_+b,0):Wn(b,_-1)),yh(u,Pe(h,3),b,!0)}function hw(u){var h=u==null?0:u.length;return h?$n(u,1):[]}function dM(u){var h=u==null?0:u.length;return h?$n(u,H):[]}function fM(u,h){var g=u==null?0:u.length;return g?(h=h===t?1:et(h),$n(u,h)):[]}function pM(u){for(var h=-1,g=u==null?0:u.length,_={};++h<g;){var b=u[h];_[b[0]]=b[1]}return _}function dw(u){return u&&u.length?u[0]:t}function gM(u,h,g){var _=u==null?0:u.length;if(!_)return-1;var b=g==null?0:et(g);return b<0&&(b=Tn(_+b,0)),el(u,h,b)}function mM(u){var h=u==null?0:u.length;return h?Hi(u,0,-1):[]}var yM=ot(function(u){var h=Ht(u,Dg);return h.length&&h[0]===u[0]?Sg(h):[]}),_M=ot(function(u){var h=Vi(u),g=Ht(u,Dg);return h===Vi(g)?h=t:g.pop(),g.length&&g[0]===u[0]?Sg(g,Pe(h,2)):[]}),vM=ot(function(u){var h=Vi(u),g=Ht(u,Dg);return h=typeof h=="function"?h:t,h&&g.pop(),g.length&&g[0]===u[0]?Sg(g,t,h):[]});function xM(u,h){return u==null?"":mA.call(u,h)}function Vi(u){var h=u==null?0:u.length;return h?u[h-1]:t}function wM(u,h,g){var _=u==null?0:u.length;if(!_)return-1;var b=_;return g!==t&&(b=et(g),b=b<0?Tn(_+b,0):Wn(b,_-1)),h===h?eA(u,h,b):yh(u,Hv,b,!0)}function bM(u,h){return u&&u.length?Ex(u,et(h)):t}var EM=ot(fw);function fw(u,h){return u&&u.length&&h&&h.length?Pg(u,h):u}function CM(u,h,g){return u&&u.length&&h&&h.length?Pg(u,h,Pe(g,2)):u}function TM(u,h,g){return u&&u.length&&h&&h.length?Pg(u,h,t,g):u}var SM=ps(function(u,h){var g=u==null?0:u.length,_=bg(u,h);return Sx(u,Ht(h,function(b){return gs(b,g)?+b:b}).sort(Dx)),_});function RM(u,h){var g=[];if(!(u&&u.length))return g;var _=-1,b=[],P=u.length;for(h=Pe(h,3);++_<P;){var D=u[_];h(D,_,u)&&(g.push(D),b.push(_))}return Sx(u,b),g}function Kg(u){return u==null?u:xA.call(u)}function IM(u,h,g){var _=u==null?0:u.length;return _?(g&&typeof g!="number"&&ni(u,h,g)?(h=0,g=_):(h=h==null?0:et(h),g=g===t?_:et(g)),Hi(u,h,g)):[]}function AM(u,h){return Nh(u,h)}function PM(u,h,g){return kg(u,h,Pe(g,2))}function MM(u,h){var g=u==null?0:u.length;if(g){var _=Nh(u,h);if(_<g&&ur(u[_],h))return _}return-1}function LM(u,h){return Nh(u,h,!0)}function kM(u,h,g){return kg(u,h,Pe(g,2),!0)}function OM(u,h){var g=u==null?0:u.length;if(g){var _=Nh(u,h,!0)-1;if(ur(u[_],h))return _}return-1}function FM(u){return u&&u.length?Ix(u):[]}function DM(u,h){return u&&u.length?Ix(u,Pe(h,2)):[]}function NM(u){var h=u==null?0:u.length;return h?Hi(u,1,h):[]}function zM(u,h,g){return u&&u.length?(h=g||h===t?1:et(h),Hi(u,0,h<0?0:h)):[]}function BM(u,h,g){var _=u==null?0:u.length;return _?(h=g||h===t?1:et(h),h=_-h,Hi(u,h<0?0:h,_)):[]}function $M(u,h){return u&&u.length?zh(u,Pe(h,3),!1,!0):[]}function UM(u,h){return u&&u.length?zh(u,Pe(h,3)):[]}var GM=ot(function(u){return Ks($n(u,1,hn,!0))}),qM=ot(function(u){var h=Vi(u);return hn(h)&&(h=t),Ks($n(u,1,hn,!0),Pe(h,2))}),WM=ot(function(u){var h=Vi(u);return h=typeof h=="function"?h:t,Ks($n(u,1,hn,!0),t,h)});function jM(u){return u&&u.length?Ks(u):[]}function HM(u,h){return u&&u.length?Ks(u,Pe(h,2)):[]}function VM(u,h){return h=typeof h=="function"?h:t,u&&u.length?Ks(u,t,h):[]}function Zg(u){if(!(u&&u.length))return[];var h=0;return u=js(u,function(g){if(hn(g))return h=Tn(g.length,h),!0}),pg(h,function(g){return Ht(u,hg(g))})}function pw(u,h){if(!(u&&u.length))return[];var g=Zg(u);return h==null?g:Ht(g,function(_){return Ci(h,t,_)})}var XM=ot(function(u,h){return hn(u)?Au(u,h):[]}),YM=ot(function(u){return Fg(js(u,hn))}),KM=ot(function(u){var h=Vi(u);return hn(h)&&(h=t),Fg(js(u,hn),Pe(h,2))}),ZM=ot(function(u){var h=Vi(u);return h=typeof h=="function"?h:t,Fg(js(u,hn),t,h)}),JM=ot(Zg);function QM(u,h){return Lx(u||[],h||[],Iu)}function eL(u,h){return Lx(u||[],h||[],Lu)}var tL=ot(function(u){var h=u.length,g=h>1?u[h-1]:t;return g=typeof g=="function"?(u.pop(),g):t,pw(u,g)});function gw(u){var h=I(u);return h.__chain__=!0,h}function nL(u,h){return h(u),u}function Vh(u,h){return h(u)}var iL=ps(function(u){var h=u.length,g=h?u[0]:0,_=this.__wrapped__,b=function(P){return bg(P,u)};return h>1||this.__actions__.length||!(_ instanceof ht)||!gs(g)?this.thru(b):(_=_.slice(g,+g+(h?1:0)),_.__actions__.push({func:Vh,args:[b],thisArg:t}),new Wi(_,this.__chain__).thru(function(P){return h&&!P.length&&P.push(t),P}))});function rL(){return gw(this)}function sL(){return new Wi(this.value(),this.__chain__)}function oL(){this.__values__===t&&(this.__values__=Aw(this.value()));var u=this.__index__>=this.__values__.length,h=u?t:this.__values__[this.__index__++];return{done:u,value:h}}function aL(){return this}function lL(u){for(var h,g=this;g instanceof Lh;){var _=lw(g);_.__index__=0,_.__values__=t,h?b.__wrapped__=_:h=_;var b=_;g=g.__wrapped__}return b.__wrapped__=u,h}function uL(){var u=this.__wrapped__;if(u instanceof ht){var h=u;return this.__actions__.length&&(h=new ht(this)),h=h.reverse(),h.__actions__.push({func:Vh,args:[Kg],thisArg:t}),new Wi(h,this.__chain__)}return this.thru(Kg)}function cL(){return Mx(this.__wrapped__,this.__actions__)}var hL=Bh(function(u,h,g){Ot.call(u,g)?++u[g]:ds(u,g,1)});function dL(u,h,g){var _=je(u)?Wv:nP;return g&&ni(u,h,g)&&(h=t),_(u,Pe(h,3))}function fL(u,h){var g=je(u)?js:px;return g(u,Pe(h,3))}var pL=Gx(uw),gL=Gx(cw);function mL(u,h){return $n(Xh(u,h),1)}function yL(u,h){return $n(Xh(u,h),H)}function _L(u,h,g){return g=g===t?1:et(g),$n(Xh(u,h),g)}function mw(u,h){var g=je(u)?Gi:Ys;return g(u,Pe(h,3))}function yw(u,h){var g=je(u)?NI:fx;return g(u,Pe(h,3))}var vL=Bh(function(u,h,g){Ot.call(u,g)?u[g].push(h):ds(u,g,[h])});function xL(u,h,g,_){u=hi(u)?u:dl(u),g=g&&!_?et(g):0;var b=u.length;return g<0&&(g=Tn(b+g,0)),Qh(u)?g<=b&&u.indexOf(h,g)>-1:!!b&&el(u,h,g)>-1}var wL=ot(function(u,h,g){var _=-1,b=typeof h=="function",P=hi(u)?te(u.length):[];return Ys(u,function(D){P[++_]=b?Ci(h,D,g):Pu(D,h,g)}),P}),bL=Bh(function(u,h,g){ds(u,g,h)});function Xh(u,h){var g=je(u)?Ht:xx;return g(u,Pe(h,3))}function EL(u,h,g,_){return u==null?[]:(je(h)||(h=h==null?[]:[h]),g=_?t:g,je(g)||(g=g==null?[]:[g]),Cx(u,h,g))}var CL=Bh(function(u,h,g){u[g?0:1].push(h)},function(){return[[],[]]});function TL(u,h,g){var _=je(u)?ug:Xv,b=arguments.length<3;return _(u,Pe(h,4),g,b,Ys)}function SL(u,h,g){var _=je(u)?zI:Xv,b=arguments.length<3;return _(u,Pe(h,4),g,b,fx)}function RL(u,h){var g=je(u)?js:px;return g(u,Zh(Pe(h,3)))}function IL(u){var h=je(u)?ux:xP;return h(u)}function AL(u,h,g){(g?ni(u,h,g):h===t)?h=1:h=et(h);var _=je(u)?ZA:wP;return _(u,h)}function PL(u){var h=je(u)?JA:EP;return h(u)}function ML(u){if(u==null)return 0;if(hi(u))return Qh(u)?nl(u):u.length;var h=jn(u);return h==Nt||h==k?u.size:Ig(u).length}function LL(u,h,g){var _=je(u)?cg:CP;return g&&ni(u,h,g)&&(h=t),_(u,Pe(h,3))}var kL=ot(function(u,h){if(u==null)return[];var g=h.length;return g>1&&ni(u,h[0],h[1])?h=[]:g>2&&ni(h[0],h[1],h[2])&&(h=[h[0]]),Cx(u,$n(h,1),[])}),Yh=fA||function(){return Bn.Date.now()};function OL(u,h){if(typeof h!="function")throw new qi(o);return u=et(u),function(){if(--u<1)return h.apply(this,arguments)}}function _w(u,h,g){return h=g?t:h,h=u&&h==null?u.length:h,fs(u,O,t,t,t,t,h)}function vw(u,h){var g;if(typeof h!="function")throw new qi(o);return u=et(u),function(){return--u>0&&(g=h.apply(this,arguments)),u<=1&&(h=t),g}}var Jg=ot(function(u,h,g){var _=x;if(g.length){var b=Vs(g,cl(Jg));_|=R}return fs(u,_,h,g,b)}),xw=ot(function(u,h,g){var _=x|w;if(g.length){var b=Vs(g,cl(xw));_|=R}return fs(h,_,u,g,b)});function ww(u,h,g){h=g?t:h;var _=fs(u,S,t,t,t,t,t,h);return _.placeholder=ww.placeholder,_}function bw(u,h,g){h=g?t:h;var _=fs(u,C,t,t,t,t,t,h);return _.placeholder=bw.placeholder,_}function Ew(u,h,g){var _,b,P,D,W,J,ae=0,ue=!1,ce=!1,me=!0;if(typeof u!="function")throw new qi(o);h=Xi(h)||0,Zt(g)&&(ue=!!g.leading,ce="maxWait"in g,P=ce?Tn(Xi(g.maxWait)||0,h):P,me="trailing"in g?!!g.trailing:me);function we(dn){var cr=_,_s=b;return _=b=t,ae=dn,D=u.apply(_s,cr),D}function Me(dn){return ae=dn,W=Fu(at,h),ue?we(dn):D}function rt(dn){var cr=dn-J,_s=dn-ae,Gw=h-cr;return ce?Wn(Gw,P-_s):Gw}function Le(dn){var cr=dn-J,_s=dn-ae;return J===t||cr>=h||cr<0||ce&&_s>=P}function at(){var dn=Yh();if(Le(dn))return gt(dn);W=Fu(at,rt(dn))}function gt(dn){return W=t,me&&_?we(dn):(_=b=t,D)}function Ii(){W!==t&&kx(W),ae=0,_=J=b=W=t}function ii(){return W===t?D:gt(Yh())}function Ai(){var dn=Yh(),cr=Le(dn);if(_=arguments,b=this,J=dn,cr){if(W===t)return Me(J);if(ce)return kx(W),W=Fu(at,h),we(J)}return W===t&&(W=Fu(at,h)),D}return Ai.cancel=Ii,Ai.flush=ii,Ai}var FL=ot(function(u,h){return dx(u,1,h)}),DL=ot(function(u,h,g){return dx(u,Xi(h)||0,g)});function NL(u){return fs(u,L)}function Kh(u,h){if(typeof u!="function"||h!=null&&typeof h!="function")throw new qi(o);var g=function(){var _=arguments,b=h?h.apply(this,_):_[0],P=g.cache;if(P.has(b))return P.get(b);var D=u.apply(this,_);return g.cache=P.set(b,D)||P,D};return g.cache=new(Kh.Cache||hs),g}Kh.Cache=hs;function Zh(u){if(typeof u!="function")throw new qi(o);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}function zL(u){return vw(2,u)}var BL=TP(function(u,h){h=h.length==1&&je(h[0])?Ht(h[0],Ti(Pe())):Ht($n(h,1),Ti(Pe()));var g=h.length;return ot(function(_){for(var b=-1,P=Wn(_.length,g);++b<P;)_[b]=h[b].call(this,_[b]);return Ci(u,this,_)})}),Qg=ot(function(u,h){var g=Vs(h,cl(Qg));return fs(u,R,t,h,g)}),Cw=ot(function(u,h){var g=Vs(h,cl(Cw));return fs(u,F,t,h,g)}),$L=ps(function(u,h){return fs(u,N,t,t,t,h)});function UL(u,h){if(typeof u!="function")throw new qi(o);return h=h===t?h:et(h),ot(u,h)}function GL(u,h){if(typeof u!="function")throw new qi(o);return h=h==null?0:Tn(et(h),0),ot(function(g){var _=g[h],b=Js(g,0,h);return _&&Hs(b,_),Ci(u,this,b)})}function qL(u,h,g){var _=!0,b=!0;if(typeof u!="function")throw new qi(o);return Zt(g)&&(_="leading"in g?!!g.leading:_,b="trailing"in g?!!g.trailing:b),Ew(u,h,{leading:_,maxWait:h,trailing:b})}function WL(u){return _w(u,1)}function jL(u,h){return Qg(Ng(h),u)}function HL(){if(!arguments.length)return[];var u=arguments[0];return je(u)?u:[u]}function VL(u){return ji(u,y)}function XL(u,h){return h=typeof h=="function"?h:t,ji(u,y,h)}function YL(u){return ji(u,f|y)}function KL(u,h){return h=typeof h=="function"?h:t,ji(u,f|y,h)}function ZL(u,h){return h==null||hx(u,h,Ln(h))}function ur(u,h){return u===h||u!==u&&h!==h}var JL=qh(Tg),QL=qh(function(u,h){return u>=h}),ea=yx(function(){return arguments}())?yx:function(u){return rn(u)&&Ot.call(u,"callee")&&!ix.call(u,"callee")},je=te.isArray,ek=zv?Ti(zv):lP;function hi(u){return u!=null&&Jh(u.length)&&!ms(u)}function hn(u){return rn(u)&&hi(u)}function tk(u){return u===!0||u===!1||rn(u)&&ti(u)==Se}var Qs=gA||cm,nk=Bv?Ti(Bv):uP;function ik(u){return rn(u)&&u.nodeType===1&&!Du(u)}function rk(u){if(u==null)return!0;if(hi(u)&&(je(u)||typeof u=="string"||typeof u.splice=="function"||Qs(u)||hl(u)||ea(u)))return!u.length;var h=jn(u);if(h==Nt||h==k)return!u.size;if(Ou(u))return!Ig(u).length;for(var g in u)if(Ot.call(u,g))return!1;return!0}function sk(u,h){return Mu(u,h)}function ok(u,h,g){g=typeof g=="function"?g:t;var _=g?g(u,h):t;return _===t?Mu(u,h,t,g):!!_}function em(u){if(!rn(u))return!1;var h=ti(u);return h==At||h==de||typeof u.message=="string"&&typeof u.name=="string"&&!Du(u)}function ak(u){return typeof u=="number"&&sx(u)}function ms(u){if(!Zt(u))return!1;var h=ti(u);return h==Nn||h==Ue||h==$e||h==Mn}function Tw(u){return typeof u=="number"&&u==et(u)}function Jh(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=V}function Zt(u){var h=typeof u;return u!=null&&(h=="object"||h=="function")}function rn(u){return u!=null&&typeof u=="object"}var Sw=$v?Ti($v):hP;function lk(u,h){return u===h||Rg(u,h,Wg(h))}function uk(u,h,g){return g=typeof g=="function"?g:t,Rg(u,h,Wg(h),g)}function ck(u){return Rw(u)&&u!=+u}function hk(u){if(XP(u))throw new Ge(s);return _x(u)}function dk(u){return u===null}function fk(u){return u==null}function Rw(u){return typeof u=="number"||rn(u)&&ti(u)==ut}function Du(u){if(!rn(u)||ti(u)!=Ut)return!1;var h=Th(u);if(h===null)return!0;var g=Ot.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&wh.call(g)==uA}var tm=Uv?Ti(Uv):dP;function pk(u){return Tw(u)&&u>=-V&&u<=V}var Iw=Gv?Ti(Gv):fP;function Qh(u){return typeof u=="string"||!je(u)&&rn(u)&&ti(u)==Dt}function Ri(u){return typeof u=="symbol"||rn(u)&&ti(u)==Ve}var hl=qv?Ti(qv):pP;function gk(u){return u===t}function mk(u){return rn(u)&&jn(u)==We}function yk(u){return rn(u)&&ti(u)==Ze}var _k=qh(Ag),vk=qh(function(u,h){return u<=h});function Aw(u){if(!u)return[];if(hi(u))return Qh(u)?ar(u):ci(u);if(Eu&&u[Eu])return ZI(u[Eu]());var h=jn(u),g=h==Nt?mg:h==k?_h:dl;return g(u)}function ys(u){if(!u)return u===0?u:0;if(u=Xi(u),u===H||u===-H){var h=u<0?-1:1;return h*ne}return u===u?u:0}function et(u){var h=ys(u),g=h%1;return h===h?g?h-g:h:0}function Pw(u){return u?Ko(et(u),0,ge):0}function Xi(u){if(typeof u=="number")return u;if(Ri(u))return j;if(Zt(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=Zt(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=Yv(u);var g=Za.test(u);return g||Je.test(u)?OI(u.slice(2),g?2:8):Ka.test(u)?j:+u}function Mw(u){return Or(u,di(u))}function xk(u){return u?Ko(et(u),-V,V):u===0?u:0}function Mt(u){return u==null?"":Si(u)}var wk=ll(function(u,h){if(Ou(h)||hi(h)){Or(h,Ln(h),u);return}for(var g in h)Ot.call(h,g)&&Iu(u,g,h[g])}),Lw=ll(function(u,h){Or(h,di(h),u)}),ed=ll(function(u,h,g,_){Or(h,di(h),u,_)}),bk=ll(function(u,h,g,_){Or(h,Ln(h),u,_)}),Ek=ps(bg);function Ck(u,h){var g=al(u);return h==null?g:cx(g,h)}var Tk=ot(function(u,h){u=zt(u);var g=-1,_=h.length,b=_>2?h[2]:t;for(b&&ni(h[0],h[1],b)&&(_=1);++g<_;)for(var P=h[g],D=di(P),W=-1,J=D.length;++W<J;){var ae=D[W],ue=u[ae];(ue===t||ur(ue,rl[ae])&&!Ot.call(u,ae))&&(u[ae]=P[ae])}return u}),Sk=ot(function(u){return u.push(t,Yx),Ci(kw,t,u)});function Rk(u,h){return jv(u,Pe(h,3),kr)}function Ik(u,h){return jv(u,Pe(h,3),Cg)}function Ak(u,h){return u==null?u:Eg(u,Pe(h,3),di)}function Pk(u,h){return u==null?u:gx(u,Pe(h,3),di)}function Mk(u,h){return u&&kr(u,Pe(h,3))}function Lk(u,h){return u&&Cg(u,Pe(h,3))}function kk(u){return u==null?[]:Fh(u,Ln(u))}function Ok(u){return u==null?[]:Fh(u,di(u))}function nm(u,h,g){var _=u==null?t:Zo(u,h);return _===t?g:_}function Fk(u,h){return u!=null&&Jx(u,h,rP)}function im(u,h){return u!=null&&Jx(u,h,sP)}var Dk=Wx(function(u,h,g){h!=null&&typeof h.toString!="function"&&(h=bh.call(h)),u[h]=g},sm(fi)),Nk=Wx(function(u,h,g){h!=null&&typeof h.toString!="function"&&(h=bh.call(h)),Ot.call(u,h)?u[h].push(g):u[h]=[g]},Pe),zk=ot(Pu);function Ln(u){return hi(u)?lx(u):Ig(u)}function di(u){return hi(u)?lx(u,!0):gP(u)}function Bk(u,h){var g={};return h=Pe(h,3),kr(u,function(_,b,P){ds(g,h(_,b,P),_)}),g}function $k(u,h){var g={};return h=Pe(h,3),kr(u,function(_,b,P){ds(g,b,h(_,b,P))}),g}var Uk=ll(function(u,h,g){Dh(u,h,g)}),kw=ll(function(u,h,g,_){Dh(u,h,g,_)}),Gk=ps(function(u,h){var g={};if(u==null)return g;var _=!1;h=Ht(h,function(P){return P=Zs(P,u),_||(_=P.length>1),P}),Or(u,Gg(u),g),_&&(g=ji(g,f|p|y,DP));for(var b=h.length;b--;)Og(g,h[b]);return g});function qk(u,h){return Ow(u,Zh(Pe(h)))}var Wk=ps(function(u,h){return u==null?{}:yP(u,h)});function Ow(u,h){if(u==null)return{};var g=Ht(Gg(u),function(_){return[_]});return h=Pe(h),Tx(u,g,function(_,b){return h(_,b[0])})}function jk(u,h,g){h=Zs(h,u);var _=-1,b=h.length;for(b||(b=1,u=t);++_<b;){var P=u==null?t:u[Fr(h[_])];P===t&&(_=b,P=g),u=ms(P)?P.call(u):P}return u}function Hk(u,h,g){return u==null?u:Lu(u,h,g)}function Vk(u,h,g,_){return _=typeof _=="function"?_:t,u==null?u:Lu(u,h,g,_)}var Fw=Vx(Ln),Dw=Vx(di);function Xk(u,h,g){var _=je(u),b=_||Qs(u)||hl(u);if(h=Pe(h,4),g==null){var P=u&&u.constructor;b?g=_?new P:[]:Zt(u)?g=ms(P)?al(Th(u)):{}:g={}}return(b?Gi:kr)(u,function(D,W,J){return h(g,D,W,J)}),g}function Yk(u,h){return u==null?!0:Og(u,h)}function Kk(u,h,g){return u==null?u:Px(u,h,Ng(g))}function Zk(u,h,g,_){return _=typeof _=="function"?_:t,u==null?u:Px(u,h,Ng(g),_)}function dl(u){return u==null?[]:gg(u,Ln(u))}function Jk(u){return u==null?[]:gg(u,di(u))}function Qk(u,h,g){return g===t&&(g=h,h=t),g!==t&&(g=Xi(g),g=g===g?g:0),h!==t&&(h=Xi(h),h=h===h?h:0),Ko(Xi(u),h,g)}function eO(u,h,g){return h=ys(h),g===t?(g=h,h=0):g=ys(g),u=Xi(u),oP(u,h,g)}function tO(u,h,g){if(g&&typeof g!="boolean"&&ni(u,h,g)&&(h=g=t),g===t&&(typeof h=="boolean"?(g=h,h=t):typeof u=="boolean"&&(g=u,u=t)),u===t&&h===t?(u=0,h=1):(u=ys(u),h===t?(h=u,u=0):h=ys(h)),u>h){var _=u;u=h,h=_}if(g||u%1||h%1){var b=ox();return Wn(u+b*(h-u+kI("1e-"+((b+"").length-1))),h)}return Mg(u,h)}var nO=ul(function(u,h,g){return h=h.toLowerCase(),u+(g?Nw(h):h)});function Nw(u){return rm(Mt(u).toLowerCase())}function zw(u){return u=Mt(u),u&&u.replace(ls,HI).replace(EI,"")}function iO(u,h,g){u=Mt(u),h=Si(h);var _=u.length;g=g===t?_:Ko(et(g),0,_);var b=g;return g-=h.length,g>=0&&u.slice(g,b)==h}function rO(u){return u=Mt(u),u&&Ei.test(u)?u.replace(Gn,VI):u}function sO(u){return u=Mt(u),u&&bt.test(u)?u.replace(cn,"\\$&"):u}var oO=ul(function(u,h,g){return u+(g?"-":"")+h.toLowerCase()}),aO=ul(function(u,h,g){return u+(g?" ":"")+h.toLowerCase()}),lO=Ux("toLowerCase");function uO(u,h,g){u=Mt(u),h=et(h);var _=h?nl(u):0;if(!h||_>=h)return u;var b=(h-_)/2;return Gh(Ah(b),g)+u+Gh(Ih(b),g)}function cO(u,h,g){u=Mt(u),h=et(h);var _=h?nl(u):0;return h&&_<h?u+Gh(h-_,g):u}function hO(u,h,g){u=Mt(u),h=et(h);var _=h?nl(u):0;return h&&_<h?Gh(h-_,g)+u:u}function dO(u,h,g){return g||h==null?h=0:h&&(h=+h),vA(Mt(u).replace(xt,""),h||0)}function fO(u,h,g){return(g?ni(u,h,g):h===t)?h=1:h=et(h),Lg(Mt(u),h)}function pO(){var u=arguments,h=Mt(u[0]);return u.length<3?h:h.replace(u[1],u[2])}var gO=ul(function(u,h,g){return u+(g?"_":"")+h.toLowerCase()});function mO(u,h,g){return g&&typeof g!="number"&&ni(u,h,g)&&(h=g=t),g=g===t?ge:g>>>0,g?(u=Mt(u),u&&(typeof h=="string"||h!=null&&!tm(h))&&(h=Si(h),!h&&tl(u))?Js(ar(u),0,g):u.split(h,g)):[]}var yO=ul(function(u,h,g){return u+(g?" ":"")+rm(h)});function _O(u,h,g){return u=Mt(u),g=g==null?0:Ko(et(g),0,u.length),h=Si(h),u.slice(g,g+h.length)==h}function vO(u,h,g){var _=I.templateSettings;g&&ni(u,h,g)&&(h=t),u=Mt(u),h=ed({},h,_,Xx);var b=ed({},h.imports,_.imports,Xx),P=Ln(b),D=gg(b,P),W,J,ae=0,ue=h.interpolate||Qe,ce="__p += '",me=yg((h.escape||Qe).source+"|"+ue.source+"|"+(ue===wn?Go:Qe).source+"|"+(h.evaluate||Qe).source+"|$","g"),we="//# sourceURL="+(Ot.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++II+"]")+`
`;u.replace(me,function(Le,at,gt,Ii,ii,Ai){return gt||(gt=Ii),ce+=u.slice(ae,Ai).replace(tg,XI),at&&(W=!0,ce+=`' +
__e(`+at+`) +
'`),ii&&(J=!0,ce+=`';
`+ii+`;
__p += '`),gt&&(ce+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),ae=Ai+Le.length,Le}),ce+=`';
`;var Me=Ot.call(h,"variable")&&h.variable;if(!Me)ce=`with (obj) {
`+ce+`
}
`;else if(Uo.test(Me))throw new Ge(a);ce=(J?ce.replace(qt,""):ce).replace(tn,"$1").replace(pt,"$1;"),ce="function("+(Me||"obj")+`) {
`+(Me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var rt=$w(function(){return Tt(P,we+"return "+ce).apply(t,D)});if(rt.source=ce,em(rt))throw rt;return rt}function xO(u){return Mt(u).toLowerCase()}function wO(u){return Mt(u).toUpperCase()}function bO(u,h,g){if(u=Mt(u),u&&(g||h===t))return Yv(u);if(!u||!(h=Si(h)))return u;var _=ar(u),b=ar(h),P=Kv(_,b),D=Zv(_,b)+1;return Js(_,P,D).join("")}function EO(u,h,g){if(u=Mt(u),u&&(g||h===t))return u.slice(0,Qv(u)+1);if(!u||!(h=Si(h)))return u;var _=ar(u),b=Zv(_,ar(h))+1;return Js(_,0,b).join("")}function CO(u,h,g){if(u=Mt(u),u&&(g||h===t))return u.replace(xt,"");if(!u||!(h=Si(h)))return u;var _=ar(u),b=Kv(_,ar(h));return Js(_,b).join("")}function TO(u,h){var g=z,_=$;if(Zt(h)){var b="separator"in h?h.separator:b;g="length"in h?et(h.length):g,_="omission"in h?Si(h.omission):_}u=Mt(u);var P=u.length;if(tl(u)){var D=ar(u);P=D.length}if(g>=P)return u;var W=g-nl(_);if(W<1)return _;var J=D?Js(D,0,W).join(""):u.slice(0,W);if(b===t)return J+_;if(D&&(W+=J.length-W),tm(b)){if(u.slice(W).search(b)){var ae,ue=J;for(b.global||(b=yg(b.source,Mt(Pt.exec(b))+"g")),b.lastIndex=0;ae=b.exec(ue);)var ce=ae.index;J=J.slice(0,ce===t?W:ce)}}else if(u.indexOf(Si(b),W)!=W){var me=J.lastIndexOf(b);me>-1&&(J=J.slice(0,me))}return J+_}function SO(u){return u=Mt(u),u&&sr.test(u)?u.replace(ln,tA):u}var RO=ul(function(u,h,g){return u+(g?" ":"")+h.toUpperCase()}),rm=Ux("toUpperCase");function Bw(u,h,g){return u=Mt(u),h=g?t:h,h===t?KI(u)?rA(u):UI(u):u.match(h)||[]}var $w=ot(function(u,h){try{return Ci(u,t,h)}catch(g){return em(g)?g:new Ge(g)}}),IO=ps(function(u,h){return Gi(h,function(g){g=Fr(g),ds(u,g,Jg(u[g],u))}),u});function AO(u){var h=u==null?0:u.length,g=Pe();return u=h?Ht(u,function(_){if(typeof _[1]!="function")throw new qi(o);return[g(_[0]),_[1]]}):[],ot(function(_){for(var b=-1;++b<h;){var P=u[b];if(Ci(P[0],this,_))return Ci(P[1],this,_)}})}function PO(u){return tP(ji(u,f))}function sm(u){return function(){return u}}function MO(u,h){return u==null||u!==u?h:u}var LO=qx(),kO=qx(!0);function fi(u){return u}function om(u){return vx(typeof u=="function"?u:ji(u,f))}function OO(u){return wx(ji(u,f))}function FO(u,h){return bx(u,ji(h,f))}var DO=ot(function(u,h){return function(g){return Pu(g,u,h)}}),NO=ot(function(u,h){return function(g){return Pu(u,g,h)}});function am(u,h,g){var _=Ln(h),b=Fh(h,_);g==null&&!(Zt(h)&&(b.length||!_.length))&&(g=h,h=u,u=this,b=Fh(h,Ln(h)));var P=!(Zt(g)&&"chain"in g)||!!g.chain,D=ms(u);return Gi(b,function(W){var J=h[W];u[W]=J,D&&(u.prototype[W]=function(){var ae=this.__chain__;if(P||ae){var ue=u(this.__wrapped__),ce=ue.__actions__=ci(this.__actions__);return ce.push({func:J,args:arguments,thisArg:u}),ue.__chain__=ae,ue}return J.apply(u,Hs([this.value()],arguments))})}),u}function zO(){return Bn._===this&&(Bn._=cA),this}function lm(){}function BO(u){return u=et(u),ot(function(h){return Ex(h,u)})}var $O=Bg(Ht),UO=Bg(Wv),GO=Bg(cg);function Uw(u){return Hg(u)?hg(Fr(u)):_P(u)}function qO(u){return function(h){return u==null?t:Zo(u,h)}}var WO=jx(),jO=jx(!0);function um(){return[]}function cm(){return!1}function HO(){return{}}function VO(){return""}function XO(){return!0}function YO(u,h){if(u=et(u),u<1||u>V)return[];var g=ge,_=Wn(u,ge);h=Pe(h),u-=ge;for(var b=pg(_,h);++g<u;)h(g);return b}function KO(u){return je(u)?Ht(u,Fr):Ri(u)?[u]:ci(aw(Mt(u)))}function ZO(u){var h=++lA;return Mt(u)+h}var JO=Uh(function(u,h){return u+h},0),QO=$g("ceil"),eF=Uh(function(u,h){return u/h},1),tF=$g("floor");function nF(u){return u&&u.length?Oh(u,fi,Tg):t}function iF(u,h){return u&&u.length?Oh(u,Pe(h,2),Tg):t}function rF(u){return Vv(u,fi)}function sF(u,h){return Vv(u,Pe(h,2))}function oF(u){return u&&u.length?Oh(u,fi,Ag):t}function aF(u,h){return u&&u.length?Oh(u,Pe(h,2),Ag):t}var lF=Uh(function(u,h){return u*h},1),uF=$g("round"),cF=Uh(function(u,h){return u-h},0);function hF(u){return u&&u.length?fg(u,fi):0}function dF(u,h){return u&&u.length?fg(u,Pe(h,2)):0}return I.after=OL,I.ary=_w,I.assign=wk,I.assignIn=Lw,I.assignInWith=ed,I.assignWith=bk,I.at=Ek,I.before=vw,I.bind=Jg,I.bindAll=IO,I.bindKey=xw,I.castArray=HL,I.chain=gw,I.chunk=tM,I.compact=nM,I.concat=iM,I.cond=AO,I.conforms=PO,I.constant=sm,I.countBy=hL,I.create=Ck,I.curry=ww,I.curryRight=bw,I.debounce=Ew,I.defaults=Tk,I.defaultsDeep=Sk,I.defer=FL,I.delay=DL,I.difference=rM,I.differenceBy=sM,I.differenceWith=oM,I.drop=aM,I.dropRight=lM,I.dropRightWhile=uM,I.dropWhile=cM,I.fill=hM,I.filter=fL,I.flatMap=mL,I.flatMapDeep=yL,I.flatMapDepth=_L,I.flatten=hw,I.flattenDeep=dM,I.flattenDepth=fM,I.flip=NL,I.flow=LO,I.flowRight=kO,I.fromPairs=pM,I.functions=kk,I.functionsIn=Ok,I.groupBy=vL,I.initial=mM,I.intersection=yM,I.intersectionBy=_M,I.intersectionWith=vM,I.invert=Dk,I.invertBy=Nk,I.invokeMap=wL,I.iteratee=om,I.keyBy=bL,I.keys=Ln,I.keysIn=di,I.map=Xh,I.mapKeys=Bk,I.mapValues=$k,I.matches=OO,I.matchesProperty=FO,I.memoize=Kh,I.merge=Uk,I.mergeWith=kw,I.method=DO,I.methodOf=NO,I.mixin=am,I.negate=Zh,I.nthArg=BO,I.omit=Gk,I.omitBy=qk,I.once=zL,I.orderBy=EL,I.over=$O,I.overArgs=BL,I.overEvery=UO,I.overSome=GO,I.partial=Qg,I.partialRight=Cw,I.partition=CL,I.pick=Wk,I.pickBy=Ow,I.property=Uw,I.propertyOf=qO,I.pull=EM,I.pullAll=fw,I.pullAllBy=CM,I.pullAllWith=TM,I.pullAt=SM,I.range=WO,I.rangeRight=jO,I.rearg=$L,I.reject=RL,I.remove=RM,I.rest=UL,I.reverse=Kg,I.sampleSize=AL,I.set=Hk,I.setWith=Vk,I.shuffle=PL,I.slice=IM,I.sortBy=kL,I.sortedUniq=FM,I.sortedUniqBy=DM,I.split=mO,I.spread=GL,I.tail=NM,I.take=zM,I.takeRight=BM,I.takeRightWhile=$M,I.takeWhile=UM,I.tap=nL,I.throttle=qL,I.thru=Vh,I.toArray=Aw,I.toPairs=Fw,I.toPairsIn=Dw,I.toPath=KO,I.toPlainObject=Mw,I.transform=Xk,I.unary=WL,I.union=GM,I.unionBy=qM,I.unionWith=WM,I.uniq=jM,I.uniqBy=HM,I.uniqWith=VM,I.unset=Yk,I.unzip=Zg,I.unzipWith=pw,I.update=Kk,I.updateWith=Zk,I.values=dl,I.valuesIn=Jk,I.without=XM,I.words=Bw,I.wrap=jL,I.xor=YM,I.xorBy=KM,I.xorWith=ZM,I.zip=JM,I.zipObject=QM,I.zipObjectDeep=eL,I.zipWith=tL,I.entries=Fw,I.entriesIn=Dw,I.extend=Lw,I.extendWith=ed,am(I,I),I.add=JO,I.attempt=$w,I.camelCase=nO,I.capitalize=Nw,I.ceil=QO,I.clamp=Qk,I.clone=VL,I.cloneDeep=YL,I.cloneDeepWith=KL,I.cloneWith=XL,I.conformsTo=ZL,I.deburr=zw,I.defaultTo=MO,I.divide=eF,I.endsWith=iO,I.eq=ur,I.escape=rO,I.escapeRegExp=sO,I.every=dL,I.find=pL,I.findIndex=uw,I.findKey=Rk,I.findLast=gL,I.findLastIndex=cw,I.findLastKey=Ik,I.floor=tF,I.forEach=mw,I.forEachRight=yw,I.forIn=Ak,I.forInRight=Pk,I.forOwn=Mk,I.forOwnRight=Lk,I.get=nm,I.gt=JL,I.gte=QL,I.has=Fk,I.hasIn=im,I.head=dw,I.identity=fi,I.includes=xL,I.indexOf=gM,I.inRange=eO,I.invoke=zk,I.isArguments=ea,I.isArray=je,I.isArrayBuffer=ek,I.isArrayLike=hi,I.isArrayLikeObject=hn,I.isBoolean=tk,I.isBuffer=Qs,I.isDate=nk,I.isElement=ik,I.isEmpty=rk,I.isEqual=sk,I.isEqualWith=ok,I.isError=em,I.isFinite=ak,I.isFunction=ms,I.isInteger=Tw,I.isLength=Jh,I.isMap=Sw,I.isMatch=lk,I.isMatchWith=uk,I.isNaN=ck,I.isNative=hk,I.isNil=fk,I.isNull=dk,I.isNumber=Rw,I.isObject=Zt,I.isObjectLike=rn,I.isPlainObject=Du,I.isRegExp=tm,I.isSafeInteger=pk,I.isSet=Iw,I.isString=Qh,I.isSymbol=Ri,I.isTypedArray=hl,I.isUndefined=gk,I.isWeakMap=mk,I.isWeakSet=yk,I.join=xM,I.kebabCase=oO,I.last=Vi,I.lastIndexOf=wM,I.lowerCase=aO,I.lowerFirst=lO,I.lt=_k,I.lte=vk,I.max=nF,I.maxBy=iF,I.mean=rF,I.meanBy=sF,I.min=oF,I.minBy=aF,I.stubArray=um,I.stubFalse=cm,I.stubObject=HO,I.stubString=VO,I.stubTrue=XO,I.multiply=lF,I.nth=bM,I.noConflict=zO,I.noop=lm,I.now=Yh,I.pad=uO,I.padEnd=cO,I.padStart=hO,I.parseInt=dO,I.random=tO,I.reduce=TL,I.reduceRight=SL,I.repeat=fO,I.replace=pO,I.result=jk,I.round=uF,I.runInContext=Y,I.sample=IL,I.size=ML,I.snakeCase=gO,I.some=LL,I.sortedIndex=AM,I.sortedIndexBy=PM,I.sortedIndexOf=MM,I.sortedLastIndex=LM,I.sortedLastIndexBy=kM,I.sortedLastIndexOf=OM,I.startCase=yO,I.startsWith=_O,I.subtract=cF,I.sum=hF,I.sumBy=dF,I.template=vO,I.times=YO,I.toFinite=ys,I.toInteger=et,I.toLength=Pw,I.toLower=xO,I.toNumber=Xi,I.toSafeInteger=xk,I.toString=Mt,I.toUpper=wO,I.trim=bO,I.trimEnd=EO,I.trimStart=CO,I.truncate=TO,I.unescape=SO,I.uniqueId=ZO,I.upperCase=RO,I.upperFirst=rm,I.each=mw,I.eachRight=yw,I.first=dw,am(I,function(){var u={};return kr(I,function(h,g){Ot.call(I.prototype,g)||(u[g]=h)}),u}(),{chain:!1}),I.VERSION=i,Gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){I[u].placeholder=I}),Gi(["drop","take"],function(u,h){ht.prototype[u]=function(g){g=g===t?1:Tn(et(g),0);var _=this.__filtered__&&!h?new ht(this):this.clone();return _.__filtered__?_.__takeCount__=Wn(g,_.__takeCount__):_.__views__.push({size:Wn(g,ge),type:u+(_.__dir__<0?"Right":"")}),_},ht.prototype[u+"Right"]=function(g){return this.reverse()[u](g).reverse()}}),Gi(["filter","map","takeWhile"],function(u,h){var g=h+1,_=g==q||g==Z;ht.prototype[u]=function(b){var P=this.clone();return P.__iteratees__.push({iteratee:Pe(b,3),type:g}),P.__filtered__=P.__filtered__||_,P}}),Gi(["head","last"],function(u,h){var g="take"+(h?"Right":"");ht.prototype[u]=function(){return this[g](1).value()[0]}}),Gi(["initial","tail"],function(u,h){var g="drop"+(h?"":"Right");ht.prototype[u]=function(){return this.__filtered__?new ht(this):this[g](1)}}),ht.prototype.compact=function(){return this.filter(fi)},ht.prototype.find=function(u){return this.filter(u).head()},ht.prototype.findLast=function(u){return this.reverse().find(u)},ht.prototype.invokeMap=ot(function(u,h){return typeof u=="function"?new ht(this):this.map(function(g){return Pu(g,u,h)})}),ht.prototype.reject=function(u){return this.filter(Zh(Pe(u)))},ht.prototype.slice=function(u,h){u=et(u);var g=this;return g.__filtered__&&(u>0||h<0)?new ht(g):(u<0?g=g.takeRight(-u):u&&(g=g.drop(u)),h!==t&&(h=et(h),g=h<0?g.dropRight(-h):g.take(h-u)),g)},ht.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ht.prototype.toArray=function(){return this.take(ge)},kr(ht.prototype,function(u,h){var g=/^(?:filter|find|map|reject)|While$/.test(h),_=/^(?:head|last)$/.test(h),b=I[_?"take"+(h=="last"?"Right":""):h],P=_||/^find/.test(h);b&&(I.prototype[h]=function(){var D=this.__wrapped__,W=_?[1]:arguments,J=D instanceof ht,ae=W[0],ue=J||je(D),ce=function(at){var gt=b.apply(I,Hs([at],W));return _&&me?gt[0]:gt};ue&&g&&typeof ae=="function"&&ae.length!=1&&(J=ue=!1);var me=this.__chain__,we=!!this.__actions__.length,Me=P&&!me,rt=J&&!we;if(!P&&ue){D=rt?D:new ht(this);var Le=u.apply(D,W);return Le.__actions__.push({func:Vh,args:[ce],thisArg:t}),new Wi(Le,me)}return Me&&rt?u.apply(this,W):(Le=this.thru(ce),Me?_?Le.value()[0]:Le.value():Le)})}),Gi(["pop","push","shift","sort","splice","unshift"],function(u){var h=vh[u],g=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",_=/^(?:pop|shift)$/.test(u);I.prototype[u]=function(){var b=arguments;if(_&&!this.__chain__){var P=this.value();return h.apply(je(P)?P:[],b)}return this[g](function(D){return h.apply(je(D)?D:[],b)})}}),kr(ht.prototype,function(u,h){var g=I[h];if(g){var _=g.name+"";Ot.call(ol,_)||(ol[_]=[]),ol[_].push({name:h,func:g})}}),ol[$h(t,w).name]=[{name:"wrapper",func:t}],ht.prototype.clone=SA,ht.prototype.reverse=RA,ht.prototype.value=IA,I.prototype.at=iL,I.prototype.chain=rL,I.prototype.commit=sL,I.prototype.next=oL,I.prototype.plant=lL,I.prototype.reverse=uL,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=cL,I.prototype.first=I.prototype.head,Eu&&(I.prototype[Eu]=aL),I},il=sA();Ho?((Ho.exports=il)._=il,og._=il):Bn._=il}).call(Ss)})(pf,pf.exports);pf.exports;/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const P1={prefix:"far",iconName:"copy",icon:[448,512,[],"f0c5","M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"]},ap=({color:n,...e})=>{const t=$s();return Q(Bs,{icon:xC,css:uu({color:n==="primary"?t.palette.primary.main:"inherit"},"",""),...e})};ap.__docgenInfo={description:"",methods:[],displayName:"SearchIcon",props:{color:{required:!1,tsType:{name:"union",raw:'"primary" | "inherit"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"inherit"'}]},description:""}}};const J6=n=>Q(OC,{...n}),Q6=n=>Q(VC,{...n}),eB=n=>Q(Qf,{...n});J6.__docgenInfo={description:"",methods:[],displayName:"ListItem"};Q6.__docgenInfo={description:"",methods:[],displayName:"ListItemButton"};eB.__docgenInfo={description:"",methods:[],displayName:"ListItemIcon"};const tB=la.object({id:la.string(),name:la.string(),url:la.string(),icon:la.string()});var nB={name:"1k1rh22",styles:"width:25px;height:25px"};const iB=({apps:n})=>{const[e,t]=Hf.useState(null),i=ts(),r=!!e,s=a=>{t(a.currentTarget)},o=()=>{t(null)};return Re("div",{children:[Q(Wr,{"aria-label":"app-switch","aria-controls":r?"app-switch-menu":void 0,"aria-haspopup":"true","aria-expanded":r?"true":void 0,onClick:s,color:"primary",children:Q(l5,{})}),Q(Iy,{id:"app-switch-menu",anchorEl:e,open:r,onClose:o,MenuListProps:{"aria-labelledby":"app-switch-button"},sx:{"& .MuiPaper-root":{backgroundColor:i.palette.mode==="dark"?"#2A2A2A":"#ffffff"}},children:n.map((a,l)=>{const c=tB.safeParse(a);if(!c.success){const f=c.error.issues.map(p=>`${p.path.toString().replace(","," > ")}: ${p.message}`).join(`
`);return Re(ui,{role:"menuitem",children:[Re(er,{children:["Misconfiguration error: App Switch library ",a!=null&&a.id?`for id ${a.id}`:`at index ${l}`]}),Q(er,{children:f})]},f)}return Re(Ay,{onClick:()=>{window.open(a.url,"_blank"),o()},sx:{display:"flex",alignItems:"center",marginX:1,borderRadius:"4px",border:"1px solid rgba(0, 0, 0, 0)","&:hover":{backgroundColor:i.palette.mode==="dark"?i.palette.background.default:"rgba(0, 0, 0, 0.04)",border:`1px solid ${i.palette.primary.main}`}},children:[Q(Qf,{children:Q("img",{src:a.icon,alt:`${a.name} icon`,css:nB})}),Q(ep,{children:Q(Rs,{variant:"h1",sx:{marginTop:.5,fontFamily:"Figtree",fontSize:16,fontWeight:400,color:"primary",display:"flex",alignItems:"center"},children:a.name.toUpperCase()})})]},a.id)})})]})};iB.__docgenInfo={description:"",methods:[],displayName:"AppSwitch",props:{apps:{required:!0,tsType:{name:"Array",elements:[{name:"zod.infer",elements:[{name:"AppSwitchLibrarySchema"}],raw:"zod.infer<typeof AppSwitchLibrarySchema>"}],raw:"zod.infer<typeof AppSwitchLibrarySchema>[]"},description:""}}};const rB=({backgroundColor:n,borderColor:e,color:t,iconClass:i,className:r,role:s="img",...o})=>Q(Pn,{component:"div",sx:{backgroundColor:n,color:t,borderColor:e,borderRadius:9999,width:34,height:34,borderWidth:2,borderStyle:"solid",display:"flex",justifyContent:"center",alignItems:"center"},children:Q("i",{role:s,"aria-hidden":"true",className:i+" "+r,...o})});rB.__docgenInfo={description:"",methods:[],displayName:"IESType",props:{backgroundColor:{required:!0,tsType:{name:"string"},description:""},borderColor:{required:!0,tsType:{name:"string"},description:""},color:{required:!0,tsType:{name:"string"},description:""},iconClass:{required:!0,tsType:{name:"string"},description:""},role:{defaultValue:{value:'"img"',computed:!1},required:!1}}};const sB=({fullName:n,children:e})=>Re(ta,{container:!0,children:[Q(Pn,{sx:{width:"100%"},marginBottom:2,children:Q(gF,{variant:"h4",children:"User Status"})}),Re(ta,{container:!0,columns:6,alignItems:"center",children:[Q(ta,{item:!0,xs:1,children:Q(_F,{variant:"circular-outlined",sx:{width:32,height:32},children:Q(h5,{color:"primary"})})}),Q(ta,{item:!0,xs:5,children:Q(er,{variant:"subtitle1",children:n})})]}),Re(ta,{container:!0,columns:6,children:[Q(ta,{item:!0,xs:1}),Q(ta,{item:!0,xs:5,children:e})]})]});sB.__docgenInfo={description:"",methods:[],displayName:"UserStatus",props:{fullName:{required:!0,tsType:{name:"string"},description:""}}};const oB=({onClick:n,faIcon:e,id:t,icon:i,value:r,selected:s=!1})=>{const o=i,a=ts();return Re(Ay,{onClick:()=>n(r),id:t,selected:s,sx:{display:"flex",alignItems:"center",marginX:1,borderRadius:"4px",border:"1px solid rgba(0, 0, 0, 0)","&.Mui-selected.Mui-selected":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)"},"&.Mui-selected.Mui-selected:hover":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)"},"&:hover":{backgroundColor:a.palette.mode==="dark"?a.palette.background.default:"rgba(0, 0, 0, 0.04)",border:`1px solid ${a.palette.primary.main}`}},children:[(o||e)&&Re(Qf,{children:[o&&Q(o,{color:s?"primary":"inherit"}),e&&Q(Bs,{icon:e,fontSize:"medium",color:s?a.palette.primary.main:"white"})]}),Q(ep,{children:Q(Rs,{variant:"h1",sx:{marginTop:.5,fontFamily:"Figtree",fontSize:16,fontWeight:400,color:`${s?a.palette.primary.main:"primary"}`,display:"flex",alignItems:"center"},children:r})})]})},aB=({ariaLabel:n,id:e,menuItems:t})=>{const[i,r]=oe.useState(null),[s,o]=oe.useState(t.find(f=>f.default)??t[0]),a=ts(),l=!!i,c=f=>{r(f.currentTarget)},d=()=>{r(null)};return Re(ui,{children:[Re(Wr,{"aria-label":n,"aria-controls":l?e:void 0,"aria-haspopup":"true",sx:{border:0,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},"aria-expanded":l?"true":void 0,onClick:c,color:"primary",children:[s.icon&&Q(s.icon,{color:"primary",className:"mr-2"}),s.faIcon&&Q(Bs,{icon:s.faIcon,fontSize:"medium",color:a.palette.primary.main??"white",className:"mr-2"}),Q(vF,{})]}),Q(Iy,{id:e,anchorEl:i,open:l,transformOrigin:{vertical:-20,horizontal:"left"},onClose:d,MenuListProps:{"aria-labelledby":e},sx:{"& .MuiPaper-root":{backgroundColor:a.palette.mode==="dark"?"#2A2A2A":"#ffffff"}},children:t.map((f,p)=>Q(oB,{id:`${e}-item-${p}`,onClick:()=>{f.onClick(f.value),o(f),d()},icon:f==null?void 0:f.icon,faIcon:f==null?void 0:f.faIcon,value:f.value,selected:f.value===s.value},`${e}-item-${p}`))})]})};aB.__docgenInfo={description:"",methods:[],displayName:"DropdownButton",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:""},id:{required:!0,tsType:{name:"string"},description:""},menuItems:{required:!0,tsType:{name:"Array",elements:[{name:"DropDownButtonMenuItemProps"}],raw:"DropDownButtonMenuItemProps[]"},description:""}}};const lB=mn(XC)({border:0}),uB=({tooltip:n,onClick:e,selected:t,children:i,...r})=>Q(Dy,{title:n??"",placement:"bottom",PopperProps:{modifiers:[{name:"offset",options:{offset:[0,-10]}}]},children:Q(lB,{color:"primary",onClick:e,selected:t,...r,children:i})});uB.__docgenInfo={description:"",methods:[],displayName:"TooltipToggleButton",props:{tooltip:{required:!1,tsType:{name:"string"},description:"Tooltip text"}},composes:["Omit"]};const cB=({value:n,onSave:e,error:t,errorText:i,helperText:r,label:s,fullWidth:o,...a})=>{const[l,c]=oe.useState(!1),[d,f]=oe.useState(n??""),p=ts(),y=()=>c(!0),m=()=>{e(d),c(!1)},v=()=>{f(n),c(!1)};return Q(Pn,{display:"flex",alignItems:"center",gap:1,children:l||n===""?Re(ui,{direction:"row",alignItems:"baseline",gap:1,children:[Q(P5,{autoFocus:!0,label:s,value:d,onChange:x=>f(x.target.value),error:t,helperText:t?i:r,fullWidth:o,...a}),Q(Wr,{onClick:m,size:"small",children:Q(T5,{sx:{color:p.palette.primary.main,lineHeight:"inherit"}})}),Q(Wr,{onClick:v,size:"small",children:Q(S5,{sx:{color:p.palette.primary.main,lineHeight:"inherit"}})})]}):Re(ui,{direction:"column",children:[s&&Re(er,{sx:{fontWeight:"bold"},children:[s,":"]}),Re(ui,{direction:"row",alignItems:"center",gap:1,children:[Q(Rs,{children:n}),Q(Wr,{onClick:y,size:"small",children:Q(R5,{fontSize:"inherit"})})]})]})})};cB.__docgenInfo={description:"",methods:[],displayName:"EditableTextField",props:{value:{required:!0,tsType:{name:"string"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},errorText:{required:!1,tsType:{name:"string"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""}}};const hB=({checked:n,id:e,name:t,label:i,required:r=!1,...s})=>(ts(),i?Q(Y3,{required:r,control:Q(o1,{checked:n,id:e,name:t,...s,color:"primary"}),label:i}):Q(o1,{checked:n,id:e,name:t,...s,color:"primary"}));hB.__docgenInfo={description:"",methods:[],displayName:"Checkbox",props:{label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["CheckboxProps"]};const dB=({text:n,successMsg:e="Copied!",ariaLabel:t="copy to clipboard",testFailure:i=!1,sx:r})=>{const[s,o]=oe.useState(P1),[a,l]=oe.useState(e),[c,d]=oe.useState(!1),f=ts(),p=()=>{d(!1)},y=async()=>{try{if(i)throw new Error("Simulated clipboard failure");await navigator.clipboard.writeText(n),d(!0),o(xF),l(e),setTimeout(()=>{o(P1),d(!1)},1500)}catch(m){const v=m instanceof Error?m.message:"Clipboard write failed";l(v),d(!0)}};return Q(Dy,{title:a,onClose:p,open:c,leaveDelay:1400,arrow:!0,placement:"right",componentsProps:{tooltip:{sx:{bgcolor:a!==e?f.palette.error.main:void 0,[`& .${Is.arrow}`]:{color:a!==e?f.palette.error.main:void 0},fontSize:"0.75rem"}}},children:Q(Oa,{style:"base",onClick:y,"aria-label":t,sx:{color:f.palette.primary.main,padding:.5,borderRadius:1,...r},children:Q(Bs,{icon:s})})})};dB.__docgenInfo={description:"",methods:[],displayName:"CopyToClipboard",props:{style:{required:!1,tsType:{name:"String"},description:""},text:{required:!0,tsType:{name:"string"},description:""},successMsg:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Copied!"',computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"copy to clipboard"',computed:!1}},testFailure:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const fB=n=>{const{loading:e=!1,endIcon:t,onSearch:i,onTogglePopOver:r,onFocus:s,onBlur:o,progressProps:a,disabled:l,...c}=n,[d,f]=oe.useState(!1),p=m=>{f(!0),s&&s(m)},y=m=>{f(!1),o&&o(m)};return Q(AC,{size:"small",type:"search",disabled:l,endAdornment:Q(Uc,{children:Re(ui,{direction:"row",spacing:.5,children:[e?Q(WC,{color:d?"primary":"inherit",size:"20px",...a}):Q(Wr,{size:"small",onClick:i,color:d?"primary":void 0,"aria-label":"search",disabled:l,children:Q(ap,{fontSize:"inherit"})}),t]})}),onFocus:p,onBlur:y,...c})};fB.__docgenInfo={description:"",methods:[],displayName:"MiniSearchBox",props:{autoFocus:{required:!1,tsType:{name:"boolean"},description:"If `true`, the `input` element is focused during the first mount."},error:{required:!1,tsType:{name:"boolean"},description:"If `true`, the `input` will indicate an error."},fullWidth:{required:!1,tsType:{name:"boolean"},description:"If `true`, the `input` will take up the full width of its container.\n@default false"},helperText:{required:!1,tsType:{name:"string"},description:`Can be used to give context. If ' ' is provided, the component reserves one
line height for displaying a future message.`},id:{required:!1,tsType:{name:"string"},description:"The id of the `input` element."},inputRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<any>",elements:[{name:"any"}]},description:"Pass a ref to the `input` element."},maxRows:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Maximum number of rows to display when multiline option is set to true."},minRows:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Minimum number of rows to display when multiline option is set to true."},multiline:{required:!1,tsType:{name:"boolean"},description:`If true, a text area auto size element will be rendered
@default false;`},name:{required:!1,tsType:{name:"string"},description:"Name attribute of the `input` element."},onBlur:{required:!1,tsType:{name:"ReactFocusEventHandler",raw:"React.FocusEventHandler<HTMLInputElement | HTMLTextAreaElement>",elements:[{name:"union",raw:"HTMLInputElement | HTMLTextAreaElement",elements:[{name:"HTMLInputElement"},{name:"HTMLTextAreaElement"}]}]},description:"Callback fired when the `input` is blurred.\n\n`(event: React.FocusEvent<HTMLTextAreaElement | HTMLInputElement>) => void;`\nNote: The first argument (event) might be undefined."},onChange:{required:!1,tsType:{name:"ReactChangeEventHandler",raw:"React.ChangeEventHandler<HTMLTextAreaElement | HTMLInputElement>",elements:[{name:"union",raw:"HTMLTextAreaElement | HTMLInputElement",elements:[{name:"HTMLTextAreaElement"},{name:"HTMLInputElement"}]}]},description:"Callback fired when the value is changed\n\n`(event: React.ChangeEvent) => void`\n@param {React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>} event The event source of the callback.\nYou can pull out the new value by accessing `event.target.value` (string)."},onFocus:{required:!1,tsType:{name:"ReactFocusEventHandler",raw:"React.FocusEventHandler<HTMLInputElement | HTMLTextAreaElement>",elements:[{name:"union",raw:"HTMLInputElement | HTMLTextAreaElement",elements:[{name:"HTMLInputElement"},{name:"HTMLTextAreaElement"}]}]},description:"`(event: React.FocusEvent<HTMLTextAreaElement | HTMLInputElement>) => void;`"},onKeyDown:{required:!1,tsType:{name:"ReactKeyboardEventHandler",raw:"React.KeyboardEventHandler<HTMLTextAreaElement | HTMLInputElement>",elements:[{name:"union",raw:"HTMLTextAreaElement | HTMLInputElement",elements:[{name:"HTMLTextAreaElement"},{name:"HTMLInputElement"}]}]},description:"`(event: React.KeyboardEvent<HTMLTextAreaElement | HTMLInputElement>) => void;`"},onKeyUp:{required:!1,tsType:{name:"ReactKeyboardEventHandler",raw:"React.KeyboardEventHandler<HTMLTextAreaElement | HTMLInputElement>",elements:[{name:"union",raw:"HTMLTextAreaElement | HTMLInputElement",elements:[{name:"HTMLTextAreaElement"},{name:"HTMLInputElement"}]}]},description:"`(event: React.KeyboardEvent<HTMLTextAreaElement | HTMLInputElement>) => void;`"},onInvalid:{required:!1,tsType:{name:"ReactFormEventHandler",raw:"React.FormEventHandler<HTMLInputElement | HTMLTextAreaElement>",elements:[{name:"union",raw:"HTMLInputElement | HTMLTextAreaElement",elements:[{name:"HTMLInputElement"},{name:"HTMLTextAreaElement"}]}]},description:"Callback fired when the `input` doesn't satisfy its constraints.\n\n`(event: React.FormEvent<HTMLTextAreaElement | HTMLInputElement>) => void;`"},placeholder:{required:!1,tsType:{name:"string"},description:"The short hint displayed in the input before the user enters a value."},progressProps:{required:!1,tsType:{name:"ProgressProps"},description:`Props which will be applied to the circular progress indicator when loading
is set to true`},rows:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Number of rows to display when multiline option is set to true."},value:{required:!1,tsType:{name:"unknown"},description:"The value of the `input` element, required for a controlled component."},disabled:{required:!1,tsType:{name:"boolean"},description:"If `true`, disables the entire control (input and action button)."},loading:{required:!1,tsType:{name:"boolean"},description:"If true, a loading indicator will be visible"},endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the search icon"},onSearch:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:"Callback fired when the search button is clicked\n\n`(event: React.MouseEvent<HTMLButtonElement>) => void;`"},onTogglePopOver:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:"Callback fired when the down arrow button is clicked\n\n`(event: React.MouseEvent<HTMLButtonElement>) => void;`"}},composes:["Omit"]};const pB=v5("div")({position:"relative",width:360}),gB=oe.forwardRef(function(e,t){const{endIcon:i,error:r,id:s,loading:o,disabled:a,name:l,placeholder:c,progressProps:d,renderOption:f,onSearch:p,onKeyDown:y,freeSolo:m=!0,...v}=e,x=$s(),{getRootProps:w,getInputProps:E,getListboxProps:S,getOptionProps:C,popupOpen:R,anchorEl:F,setAnchorEl:O,groupedOptions:N}=_5({freeSolo:m,...v}),L=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='${encodeURIComponent(x.palette.primary.main)}'><path d='M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/></svg>") no-repeat center`,z=Xf(t,O);return Re("div",{children:[Q(AC,{ref:z,slotProps:{root:{...w()}},inputProps:{...E(),disabled:a},size:"small",type:"search",disabled:a,sx:{width:360,'& input[type="search"]::-webkit-search-cancel-button':{WebkitAppearance:"none",height:"1em",width:"1em",cursor:"pointer",background:L}},id:s,onKeyDown:y,name:l,error:r,endAdornment:Q(Uc,{children:Re(ui,{direction:"row",spacing:.5,children:[o?Q(WC,{id:"loading",size:"20px",...d}):Q(Wr,{size:"small",onClick:p,"aria-label":"search",disabled:a,children:Q(ap,{fontSize:"inherit"})}),i]})}),placeholder:c||"Search"}),F&&Q(Ry,{open:R&&!a,anchorEl:F,slots:{root:pB},children:N.length>0?Q(Ly,{elevation:3,sx:{backgroundColor:x.palette.mode==="dark"?"#2A2A2A":"#eee",backgroundImage:"none",width:360,padding:2,marginTop:1},children:Q(ui,{rowGap:1,children:Q(f5,{sx:{maxHeight:400,overflow:"auto"},...S(),children:N.map(($,U)=>{const X=C({option:$,index:U});if(f)return f(X,$);const{key:q,...G}=X;return Q(OC,{disablePadding:!0,...G,children:Q(VC,{disabled:a,onClick:Z=>{a||p&&p(Z)},children:Re(ui,{direction:"row",columnGap:1,alignItems:"center",children:[$.isRecentSearch?Q(Bs,{icon:wF}):null,Q(ep,{primary:$.label})]})})},`${q}-${U}`)})})})}):null})]})});gB.__docgenInfo={description:"",methods:[],displayName:"MiniSearchAutocomplete",props:{endIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Element placed after the search icon"},error:{required:!1,tsType:{name:"boolean"},description:"If `true`, the `input` will indicate an error."},id:{required:!1,tsType:{name:"string"},description:"The id of the `input` element."},loading:{required:!1,tsType:{name:"boolean"},description:"If true, a loading indicator will be visible."},disabled:{required:!1,tsType:{name:"boolean"},description:"If `true`, disables the entire control (input, popper trigger, and action)."},name:{required:!1,tsType:{name:"string"},description:"Name attribute of the input element."},placeholder:{required:!1,tsType:{name:"string"},description:"The short hint displayed in the input before the user enters a value."},progressProps:{required:!1,tsType:{name:"ProgressProps"},description:`Props which will be applied to the circular progress indicator when loading
is set to true`},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  props: React.HTMLAttributes<HTMLLIElement> & {
    key: any;
  },
  option: Value
) => React.ReactNode`,signature:{arguments:[{type:{name:"intersection",raw:`React.HTMLAttributes<HTMLLIElement> & {
  key: any;
}`,elements:[{name:"ReactHTMLAttributes",raw:"React.HTMLAttributes<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},{name:"signature",type:"object",raw:`{
  key: any;
}`,signature:{properties:[{key:"key",value:{name:"any",required:!0}}]}}]},name:"props"},{type:{name:"Value"},name:"option"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:`Render the option
@param props The props to apply on the li element.
@param option The option to render.
@returns`},onSearch:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLElement>",elements:[{name:"HTMLElement"}]},description:"Callback fired when the search button is clicked\n\n`(event: React.MouseEvent<HTMLButtonElement>) => void;`"},onKeyDown:{required:!1,tsType:{name:"ReactKeyboardEventHandler",raw:"React.KeyboardEventHandler<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:"Callback fired when the a key is pressed\n\n`(event: React.KeyboardEvent<HTMLButtonElement>) => void;`"}},composes:["UseAutocompleteProps"]};const $T=oe.forwardRef((n,e)=>Q(FC,{variant:"contained",ref:e,color:"primary",...n,children:n.children}));$T.__docgenInfo={description:"",methods:[],displayName:"PrimaryButton"};const mB=({autoFocus:n=!1,placeholder:e="Search",inputRef:t,name:i,value:r,onBlur:s,onChange:o,onSearch:a,disabled:l,width:c=600,...d})=>Re(Pn,{height:44,width:c,display:"flex",alignItems:"center",component:"form",onSubmit:a,children:[Q(o5,{"data-test-handle":"search-box-input",type:"search",sx:{height:"100%",width:"100%",borderWidth:1,borderRightWidth:0,borderColor:"#6D6D6D",borderStyle:"solid",borderTopLeftRadius:4,borderBottomLeftRadius:4},inputProps:{sx:{paddingInline:1.5}},ref:t,autoFocus:n,placeholder:e,onBlur:s,onChange:o,value:r,name:i,disabled:l,...d}),Q($T,{"data-test-handle":"search-box-button","aria-label":"search",type:"submit",disabled:l,sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:4,borderBottomRightRadius:4,height:"100%"},disableElevation:!0,children:Q(ap,{size:"xl"})})]});mB.__docgenInfo={description:"",methods:[],displayName:"SearchBox",props:{autoFocus:{required:!1,tsType:{name:"boolean"},description:"If true, the input element is focused during the first mount.",defaultValue:{value:"false",computed:!1}},inputRef:{required:!1,tsType:{name:"union",raw:"React.ForwardedRef<HTMLInputElement> | React.RefObject<HTMLInputElement>",elements:[{name:"ReactForwardedRef",raw:"React.ForwardedRef<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]}]},description:"Pass a ref to the input element."},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the input looses focus (i.e. blurred).
Notice that the first argument (event) might be undefined.
@param event
@returns void`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the value is changed.
@param event The event source of the callback. You can pull out the new value by accessing event.target.value (string).
@returns void`},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<HTMLFormElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLFormElement>",elements:[{name:"HTMLFormElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback fired when the search button is clicked.
@param event
@returns`},name:{required:!1,tsType:{name:'InputBaseProps["name"]',raw:'InputBaseProps["name"]'},description:"Name attribute of the input element."},placeholder:{required:!1,tsType:{name:'InputBaseProps["placeholder"]',raw:'InputBaseProps["placeholder"]'},description:"The short hint displayed in the input before the user enters a value.",defaultValue:{value:'"Search"',computed:!1}},value:{required:!1,tsType:{name:"Value"},description:"The value of the input element, required for a controlled component."},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"600",computed:!1}}}};var lp={exports:{}},UT={};function GT(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=GT(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function M1(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=GT(n))&&(i&&(i+=" "),i+=e);return i}const yB=Object.freeze(Object.defineProperty({__proto__:null,clsx:M1,default:M1},Symbol.toStringTag,{value:"Module"})),_B=pC(yB);var an={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.dontSetMe=EB;is.findInArray=vB;is.int=bB;is.isFunction=xB;is.isNum=wB;function vB(n,e){for(let t=0,i=n.length;t<i;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function xB(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function wB(n){return typeof n=="number"&&!isNaN(n)}function bB(n){return parseInt(n,10)}function EB(n,e,t){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.browserPrefixToKey=WT;Wa.browserPrefixToStyle=CB;Wa.default=void 0;Wa.getPrefix=qT;const _m=["Moz","Webkit","O","ms"];function qT(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!t||e in t)return"";for(let i=0;i<_m.length;i++)if(WT(e,_m[i])in t)return _m[i];return""}function WT(n,e){return e?"".concat(e).concat(TB(n)):n}function CB(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function TB(n){let e="",t=!0;for(let i=0;i<n.length;i++)t?(e+=n[i].toUpperCase(),t=!1):n[i]==="-"?t=!0:e+=n[i];return e}Wa.default=qT();Object.defineProperty(an,"__esModule",{value:!0});an.addClassName=VT;an.addEvent=IB;an.addUserSelectStyles=BB;an.createCSSTransform=FB;an.createSVGTransform=DB;an.getTouch=NB;an.getTouchIdentifier=zB;an.getTranslation=Ky;an.innerHeight=LB;an.innerWidth=kB;an.matchesSelector=HT;an.matchesSelectorAndParentsTo=RB;an.offsetXYFromParent=OB;an.outerHeight=PB;an.outerWidth=MB;an.removeClassName=XT;an.removeEvent=AB;an.removeUserSelectStyles=$B;var zi=is,L1=SB(Wa);function jT(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(jT=function(i){return i?t:e})(n)}function SB(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=jT(e);if(t&&t.has(n))return t.get(n);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=r?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=n[s]}return i.default=n,t&&t.set(n,i),i}let fd="";function HT(n,e){return fd||(fd=(0,zi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,zi.isFunction)(n[t])})),(0,zi.isFunction)(n[fd])?n[fd](e):!1}function RB(n,e,t){let i=n;do{if(HT(i,e))return!0;if(i===t)return!1;i=i.parentNode}while(i);return!1}function IB(n,e,t,i){if(!n)return;const r={capture:!0,...i};n.addEventListener?n.addEventListener(e,t,r):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function AB(n,e,t,i){if(!n)return;const r={capture:!0,...i};n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function PB(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,zi.int)(t.borderTopWidth),e+=(0,zi.int)(t.borderBottomWidth),e}function MB(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,zi.int)(t.borderLeftWidth),e+=(0,zi.int)(t.borderRightWidth),e}function LB(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,zi.int)(t.paddingTop),e-=(0,zi.int)(t.paddingBottom),e}function kB(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,zi.int)(t.paddingLeft),e-=(0,zi.int)(t.paddingRight),e}function OB(n,e,t){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-r.left)/t,o=(n.clientY+e.scrollTop-r.top)/t;return{x:s,y:o}}function FB(n,e){const t=Ky(n,e,"px");return{[(0,L1.browserPrefixToKey)("transform",L1.default)]:t}}function DB(n,e){return Ky(n,e,"")}function Ky(n,e,t){let{x:i,y:r}=n,s="translate(".concat(i).concat(t,",").concat(r).concat(t,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+t),a="".concat(typeof e.y=="string"?e.y:e.y+t);s="translate(".concat(o,", ").concat(a,")")+s}return s}function NB(n,e){return n.targetTouches&&(0,zi.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,zi.findInArray)(n.changedTouches,t=>e===t.identifier)}function zB(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function BB(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&VT(n.body,"react-draggable-transparent-selection")}function $B(n){if(n)try{if(n.body&&XT(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function VT(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function XT(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.canDragX=qB;rs.canDragY=WB;rs.createCoreData=HB;rs.createDraggableData=VB;rs.getBoundPosition=UB;rs.getControlPosition=jB;rs.snapToGrid=GB;var Pi=is,Ml=an;function UB(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:i}=n.props;i=typeof i=="string"?i:XB(i);const r=Zy(n);if(typeof i=="string"){const{ownerDocument:s}=r,o=s.defaultView;let a;if(i==="parent"?a=r.parentNode:a=s.querySelector(i),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const l=a,c=o.getComputedStyle(r),d=o.getComputedStyle(l);i={left:-r.offsetLeft+(0,Pi.int)(d.paddingLeft)+(0,Pi.int)(c.marginLeft),top:-r.offsetTop+(0,Pi.int)(d.paddingTop)+(0,Pi.int)(c.marginTop),right:(0,Ml.innerWidth)(l)-(0,Ml.outerWidth)(r)-r.offsetLeft+(0,Pi.int)(d.paddingRight)-(0,Pi.int)(c.marginRight),bottom:(0,Ml.innerHeight)(l)-(0,Ml.outerHeight)(r)-r.offsetTop+(0,Pi.int)(d.paddingBottom)-(0,Pi.int)(c.marginBottom)}}return(0,Pi.isNum)(i.right)&&(e=Math.min(e,i.right)),(0,Pi.isNum)(i.bottom)&&(t=Math.min(t,i.bottom)),(0,Pi.isNum)(i.left)&&(e=Math.max(e,i.left)),(0,Pi.isNum)(i.top)&&(t=Math.max(t,i.top)),[e,t]}function GB(n,e,t){const i=Math.round(e/n[0])*n[0],r=Math.round(t/n[1])*n[1];return[i,r]}function qB(n){return n.props.axis==="both"||n.props.axis==="x"}function WB(n){return n.props.axis==="both"||n.props.axis==="y"}function jB(n,e,t){const i=typeof e=="number"?(0,Ml.getTouch)(n,e):null;if(typeof e=="number"&&!i)return null;const r=Zy(t),s=t.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,Ml.offsetXYFromParent)(i||n,s,t.props.scale)}function HB(n,e,t){const i=!(0,Pi.isNum)(n.lastX),r=Zy(n);return i?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:r,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function VB(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function XB(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function Zy(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var up={},cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.default=YB;function YB(){}Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var vm=ZB(oe),pi=Jy(DC),KB=Jy(Yf),Vn=an,to=rs,xm=is,Uu=Jy(cp);function Jy(n){return n&&n.__esModule?n:{default:n}}function YT(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(YT=function(i){return i?t:e})(n)}function ZB(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=YT(e);if(t&&t.has(n))return t.get(n);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var o=r?Object.getOwnPropertyDescriptor(n,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=n[s]}return i.default=n,t&&t.set(n,i),i}function ri(n,e,t){return e=JB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JB(n){var e=QB(n,"string");return typeof e=="symbol"?e:String(e)}function QB(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const dr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let no=dr.mouse,hp=class extends vm.Component{constructor(){super(...arguments),ri(this,"dragging",!1),ri(this,"lastX",NaN),ri(this,"lastY",NaN),ri(this,"touchIdentifier",null),ri(this,"mounted",!1),ri(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=t;if(this.props.disabled||!(e.target instanceof i.defaultView.Node)||this.props.handle&&!(0,Vn.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,Vn.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const r=(0,Vn.getTouchIdentifier)(e);this.touchIdentifier=r;const s=(0,to.getControlPosition)(e,r,this);if(s==null)return;const{x:o,y:a}=s,l=(0,to.createCoreData)(this,o,a);(0,Uu.default)("DraggableCore: handleDragStart: %j",l),(0,Uu.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Vn.addUserSelectStyles)(i),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Vn.addEvent)(i,no.move,this.handleDrag),(0,Vn.addEvent)(i,no.stop,this.handleDragStop))}),ri(this,"handleDrag",e=>{const t=(0,to.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:i,y:r}=t;if(Array.isArray(this.props.grid)){let a=i-this.lastX,l=r-this.lastY;if([a,l]=(0,to.snapToGrid)(this.props.grid,a,l),!a&&!l)return;i=this.lastX+a,r=this.lastY+l}const s=(0,to.createCoreData)(this,i,r);if((0,Uu.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=i,this.lastY=r}),ri(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,to.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:i,y:r}=t;if(Array.isArray(this.props.grid)){let l=i-this.lastX||0,c=r-this.lastY||0;[l,c]=(0,to.snapToGrid)(this.props.grid,l,c),i=this.lastX+l,r=this.lastY+c}const s=(0,to.createCoreData)(this,i,r);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Vn.removeUserSelectStyles)(a.ownerDocument),(0,Uu.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Uu.default)("DraggableCore: Removing handlers"),(0,Vn.removeEvent)(a.ownerDocument,no.move,this.handleDrag),(0,Vn.removeEvent)(a.ownerDocument,no.stop,this.handleDragStop))}),ri(this,"onMouseDown",e=>(no=dr.mouse,this.handleDragStart(e))),ri(this,"onMouseUp",e=>(no=dr.mouse,this.handleDragStop(e))),ri(this,"onTouchStart",e=>(no=dr.touch,this.handleDragStart(e))),ri(this,"onTouchEnd",e=>(no=dr.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Vn.addEvent)(e,dr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,Vn.removeEvent)(t,dr.mouse.move,this.handleDrag),(0,Vn.removeEvent)(t,dr.touch.move,this.handleDrag),(0,Vn.removeEvent)(t,dr.mouse.stop,this.handleDragStop),(0,Vn.removeEvent)(t,dr.touch.stop,this.handleDragStop),(0,Vn.removeEvent)(e,dr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Vn.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:KB.default.findDOMNode(this)}render(){return vm.cloneElement(vm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};up.default=hp;ri(hp,"displayName","DraggableCore");ri(hp,"propTypes",{allowAnyClick:pi.default.bool,children:pi.default.node.isRequired,disabled:pi.default.bool,enableUserSelectHack:pi.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:pi.default.arrayOf(pi.default.number),handle:pi.default.string,cancel:pi.default.string,nodeRef:pi.default.object,onStart:pi.default.func,onDrag:pi.default.func,onStop:pi.default.func,onMouseDown:pi.default.func,scale:pi.default.number,className:xm.dontSetMe,style:xm.dontSetMe,transform:xm.dontSetMe});ri(hp,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),n.default=void 0;var e=p(oe),t=d(DC),i=d(Yf),r=d(_B),s=an,o=rs,a=is,l=d(up),c=d(cp);function d(E){return E&&E.__esModule?E:{default:E}}function f(E){if(typeof WeakMap!="function")return null;var S=new WeakMap,C=new WeakMap;return(f=function(R){return R?C:S})(E)}function p(E,S){if(E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var C=f(S);if(C&&C.has(E))return C.get(E);var R={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in E)if(O!=="default"&&Object.prototype.hasOwnProperty.call(E,O)){var N=F?Object.getOwnPropertyDescriptor(E,O):null;N&&(N.get||N.set)?Object.defineProperty(R,O,N):R[O]=E[O]}return R.default=E,C&&C.set(E,R),R}function y(){return y=Object.assign?Object.assign.bind():function(E){for(var S=1;S<arguments.length;S++){var C=arguments[S];for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(E[R]=C[R])}return E},y.apply(this,arguments)}function m(E,S,C){return S=v(S),S in E?Object.defineProperty(E,S,{value:C,enumerable:!0,configurable:!0,writable:!0}):E[S]=C,E}function v(E){var S=x(E,"string");return typeof S=="symbol"?S:String(S)}function x(E,S){if(typeof E!="object"||E===null)return E;var C=E[Symbol.toPrimitive];if(C!==void 0){var R=C.call(E,S);if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(E)}class w extends e.Component{static getDerivedStateFromProps(S,C){let{position:R}=S,{prevPropsPosition:F}=C;return R&&(!F||R.x!==F.x||R.y!==F.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:R,prevPropsPosition:F}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(S){super(S),m(this,"onDragStart",(C,R)=>{if((0,c.default)("Draggable: onDragStart: %j",R),this.props.onStart(C,(0,o.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(C,R)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",R);const F=(0,o.createDraggableData)(this,R),O={x:F.x,y:F.y,slackX:0,slackY:0};if(this.props.bounds){const{x:L,y:z}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[$,U]=(0,o.getBoundPosition)(this,O.x,O.y);O.x=$,O.y=U,O.slackX=this.state.slackX+(L-O.x),O.slackY=this.state.slackY+(z-O.y),F.x=O.x,F.y=O.y,F.deltaX=O.x-this.state.x,F.deltaY=O.y-this.state.y}if(this.props.onDrag(C,F)===!1)return!1;this.setState(O)}),m(this,"onDragStop",(C,R)=>{if(!this.state.dragging||this.props.onStop(C,(0,o.createDraggableData)(this,R))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",R);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:L,y:z}=this.props.position;O.x=L,O.y=z}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:S.position?S.position.x:S.defaultPosition.x,y:S.position?S.position.y:S.defaultPosition.y,prevPropsPosition:{...S.position},slackX:0,slackY:0,isElementSVG:!1},S.position&&!(S.onDrag||S.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var S,C;return(S=(C=this.props)===null||C===void 0||(C=C.nodeRef)===null||C===void 0?void 0:C.current)!==null&&S!==void 0?S:i.default.findDOMNode(this)}render(){const{axis:S,bounds:C,children:R,defaultPosition:F,defaultClassName:O,defaultClassNameDragging:N,defaultClassNameDragged:L,position:z,positionOffset:$,scale:U,...X}=this.props;let q={},G=null;const H=!!!z||this.state.dragging,V=z||F,ne={x:(0,o.canDragX)(this)&&H?this.state.x:V.x,y:(0,o.canDragY)(this)&&H?this.state.y:V.y};this.state.isElementSVG?G=(0,s.createSVGTransform)(ne,$):q=(0,s.createCSSTransform)(ne,$);const j=(0,r.default)(R.props.className||"",O,{[N]:this.state.dragging,[L]:this.state.dragged});return e.createElement(l.default,y({},X,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(R),{className:j,style:{...R.props.style,...q},transform:G}))}}n.default=w,m(w,"displayName","Draggable"),m(w,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(UT);const{default:KT,DraggableCore:e$}=UT;lp.exports=KT;lp.exports.default=KT;lp.exports.DraggableCore=e$;var t$=lp.exports;const n$=jf(t$);var _n=function(){return _n=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},_n.apply(this,arguments)},k1={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},O1={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},pd={width:"20px",height:"20px",position:"absolute",zIndex:1},i$={top:_n(_n({},k1),{top:"-5px"}),right:_n(_n({},O1),{left:void 0,right:"-5px"}),bottom:_n(_n({},k1),{top:void 0,bottom:"-5px"}),left:_n(_n({},O1),{left:"-5px"}),topRight:_n(_n({},pd),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:_n(_n({},pd),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:_n(_n({},pd),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:_n(_n({},pd),{left:"-10px",top:"-10px",cursor:"nw-resize"})},r$=oe.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,s=n.className,o=oe.useCallback(function(c){e(c,t)},[e,t]),a=oe.useCallback(function(c){e(c,t)},[e,t]),l=oe.useMemo(function(){return _n(_n({position:"absolute",userSelect:"none"},i$[t]),r??{})},[r,t]);return it.jsx("div",{className:s||void 0,style:l,onMouseDown:o,onTouchStart:a,children:i})}),s$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Nr=function(){return Nr=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Nr.apply(this,arguments)},o$={width:"auto",height:"auto"},gd=function(n,e,t){return Math.max(Math.min(n,t),e)},F1=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},fl=function(n,e){return new RegExp(n,"i").test(e)},md=function(n){return!!(n.touches&&n.touches.length)},a$=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},D1=function(n,e,t){t===void 0&&(t=0);var i=e.reduce(function(s,o,a){return Math.abs(o-n)<Math.abs(e[s]-n)?a:s},0),r=Math.abs(e[i]-n);return t===0||r<t?e[i]:n},wm=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},yd=function(n,e,t,i){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var r=Number(n.replace("%",""))/100;return e*r}if(n.endsWith("vw")){var r=Number(n.replace("vw",""))/100;return t*r}if(n.endsWith("vh")){var r=Number(n.replace("vh",""))/100;return i*r}}return n},l$=function(n,e,t,i,r,s,o){return i=yd(i,n.width,e,t),r=yd(r,n.height,e,t),s=yd(s,n.width,e,t),o=yd(o,n.height,e,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},u$=function(n){return Array.isArray(n)?n:[n,n]},c$=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],N1="__resizable_base__",h$=function(n){s$(e,n);function e(t){var i,r,s,o,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(N1):c.className+=N1,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(r=(i=a.propsSize)===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||o$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,r=function(a){var l;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((l=t.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var c=t.getParentSize(),d=Number(t.state[a].toString().replace("px","")),f=d/c[a]*100;return"".concat(f,"%")}return wm(t.state[a])},s=i&&typeof i.width<"u"&&!this.state.isResizing?wm(i.width):r("width"),o=i&&typeof i.height<"u"&&!this.state.isResizing?wm(i.height):r("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var s={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=r),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof r>"u"||r==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&&fl("left",s),a=r&&fl("top",s),l,c;if(this.props.bounds==="parent"){var d=this.parentNode;d&&(l=o?this.resizableRight-this.parentLeft:d.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:d.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),c&&Number.isFinite(c)&&(i=i&&i<c?i:c),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,s=u$(this.props.resizeRatio||1),o=s[0],a=s[1],l=this.state,c=l.direction,d=l.original,f=this.props,p=f.lockAspectRatio,y=f.lockAspectRatioExtraHeight,m=f.lockAspectRatioExtraWidth,v=d.width,x=d.height,w=y||0,E=m||0;return fl("right",c)&&(v=d.width+(t-d.x)*o/r,p&&(x=(v-E)/this.ratio+w)),fl("left",c)&&(v=d.width-(t-d.x)*o/r,p&&(x=(v-E)/this.ratio+w)),fl("bottom",c)&&(x=d.height+(i-d.y)*a/r,p&&(v=(x-w)*this.ratio+E)),fl("top",c)&&(x=d.height-(i-d.y)*a/r,p&&(v=(x-w)*this.ratio+E)),{newWidth:v,newHeight:x}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,s){var o=this.props,a=o.lockAspectRatio,l=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,d=typeof s.width>"u"?10:s.width,f=typeof r.width>"u"||r.width<0?t:r.width,p=typeof s.height>"u"?10:s.height,y=typeof r.height>"u"||r.height<0?i:r.height,m=l||0,v=c||0;if(a){var x=(p-m)*this.ratio+v,w=(y-m)*this.ratio+v,E=(d-v)/this.ratio+m,S=(f-v)/this.ratio+m,C=Math.max(d,x),R=Math.min(f,w),F=Math.max(p,E),O=Math.min(y,S);t=gd(t,C,R),i=gd(i,F,O)}else t=gd(t,d,f),i=gd(i,p,y);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,d=o.bottom;this.resizableLeft=a*t,this.resizableRight=c*t,this.resizableTop=l*t,this.resizableBottom=d*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(t.nativeEvent&&a$(t.nativeEvent)?(r=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&&md(t.nativeEvent)&&(r=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(t,i,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var d=this.window.getComputedStyle(c).flexDirection;this.flexDir=d.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Nr(Nr({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:a};this.setState(f)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&md(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,a=r.minWidth,l=r.minHeight,c=md(t)?t.touches[0].clientX:t.clientX,d=md(t)?t.touches[0].clientY:t.clientY,f=this.state,p=f.direction,y=f.original,m=f.width,v=f.height,x=this.getParentSize(),w=l$(x,this.window.innerWidth,this.window.innerHeight,s,o,a,l);s=w.maxWidth,o=w.maxHeight,a=w.minWidth,l=w.minHeight;var E=this.calculateNewSizeFromDirection(c,d),S=E.newHeight,C=E.newWidth,R=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(C=D1(C,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(S=D1(S,this.props.snap.y,this.props.snapGap));var F=this.calculateNewSizeFromAspectRatio(C,S,{width:R.maxWidth,height:R.maxHeight},{width:a,height:l});if(C=F.newWidth,S=F.newHeight,this.props.grid){var O=F1(C,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),N=F1(S,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),L=this.props.snapGap||0,z=L===0||Math.abs(O-C)<=L?O:C,$=L===0||Math.abs(N-S)<=L?N:S;C=z,S=$}var U={width:C-y.width,height:S-y.height};if(this.delta=U,m&&typeof m=="string"){if(m.endsWith("%")){var X=C/x.width*100;C="".concat(X,"%")}else if(m.endsWith("vw")){var q=C/this.window.innerWidth*100;C="".concat(q,"vw")}else if(m.endsWith("vh")){var G=C/this.window.innerHeight*100;C="".concat(G,"vh")}}if(v&&typeof v=="string"){if(v.endsWith("%")){var X=S/x.height*100;S="".concat(X,"%")}else if(v.endsWith("vw")){var q=S/this.window.innerWidth*100;S="".concat(q,"vw")}else if(v.endsWith("vh")){var G=S/this.window.innerHeight*100;S="".concat(G,"vh")}}var Z={width:this.createSizeForCssProperty(C,"width"),height:this.createSizeForCssProperty(S,"height")};this.flexDir==="row"?Z.flexBasis=Z.width:this.flexDir==="column"&&(Z.flexBasis=Z.height);var H=this.state.width!==Z.width,V=this.state.height!==Z.height,ne=this.state.flexBasis!==Z.flexBasis,j=H||V||ne;j&&Yf.flushSync(function(){i.setState(Z)}),this.props.onResize&&j&&this.props.onResize(t,p,this.resizable,U)}},e.prototype.onMouseUp=function(t){var i,r,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Nr(Nr({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(r=t.height)!==null&&r!==void 0?r:"auto"})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,a=i.handleWrapperStyle,l=i.handleWrapperClass,c=i.handleComponent;if(!r)return null;var d=Object.keys(r).map(function(f){return r[f]!==!1?it.jsx(r$,{direction:f,onResizeStart:t.onResizeStart,replaceStyles:s&&s[f],className:o&&o[f],children:c&&c[f]?c[f]:null},f):null});return it.jsx("div",{className:l,style:a,children:d})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(o,a){return c$.indexOf(a)!==-1||(o[a]=t.props[a]),o},{}),r=Nr(Nr(Nr({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return it.jsxs(s,Nr({style:r,className:this.props.className},i,{ref:function(o){o&&(t.resizable=o)},children:[this.state.isResizing&&it.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(oe.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var P0=function(n,e){return P0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},P0(n,e)};function d$(n,e){P0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Sn=function(){return Sn=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Sn.apply(this,arguments)};function f$(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}var p$={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},g$=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},m$=function(n){d$(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,r=t.top,s=this.getDraggablePosition(),o=s.x,a=s.y;this.draggable.setState({x:o-i,y:a-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,r=t.y;return{x:i,y:r}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/i;case"body":return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/i;case"body":return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&&this.props.onDragStart(t,i);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var l=s.getBoundingClientRect(),c=l.left,d=l.top,f=document.body.getBoundingClientRect(),p=-(c-s.offsetLeft*o-f.left)/o,y=-(d-s.offsetTop*o-f.top)/o,m=(document.body.offsetWidth-this.resizable.size.width*o)/o+p,v=(document.body.offsetHeight-this.resizable.size.height*o)/o+y;return this.setState({bounds:{top:y,right:m,bottom:v,left:p}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var x=s.getBoundingClientRect(),w=x.left,E=x.top,S=-(w-s.offsetLeft*o)/o,C=-(E-s.offsetTop*o)/o,m=(window.innerWidth-this.resizable.size.width*o)/o+S,v=(window.innerHeight-this.resizable.size.height*o)/o+C;return this.setState({bounds:{top:C,right:m,bottom:v,left:S}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var R=a.getBoundingClientRect(),F=R.left,O=R.top,N=s.getBoundingClientRect(),L=N.left,z=N.top,$=(F-L)/o,U=O-z;if(this.resizable){this.updateOffsetFromParent();var X=this.offsetFromParent;this.setState({bounds:{top:U-X.top,right:$+(a.offsetWidth-this.resizable.size.width)-X.left/o,bottom:U+(a.offsetHeight-this.resizable.size.height)-X.top,left:$-X.left/o}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,Sn(Sn({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(t,Sn(Sn({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,Sn(Sn({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,Sn(Sn({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,Sn(Sn({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,Sn(Sn({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,r){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+o.left,y:a.y+o.top},this.originalPosition=a,this.props.bounds){var l=this.getParent(),c=void 0;this.props.bounds==="parent"?c=l:this.props.bounds==="body"?c=document.body:this.props.bounds==="window"?c=window:typeof this.props.bounds=="string"?c=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(c=this.props.bounds);var d=this.getSelfElement();if(d instanceof Element&&(c instanceof HTMLElement||c===window)&&l instanceof HTMLElement){var f=this.getMaxSizesFromProps(),p=f.maxWidth,y=f.maxHeight,m=this.getParentSize();if(p&&typeof p=="string")if(p.endsWith("%")){var v=Number(p.replace("%",""))/100;p=m.width*v}else p.endsWith("px")&&(p=Number(p.replace("px","")));if(y&&typeof y=="string")if(y.endsWith("%")){var v=Number(y.replace("%",""))/100;y=m.height*v}else y.endsWith("px")&&(y=Number(y.replace("px","")));var x=d.getBoundingClientRect(),w=x.left,E=x.top,S=this.props.bounds==="window"?{left:0,top:0}:c.getBoundingClientRect(),C=S.left,R=S.top,F=this.getOffsetWidth(c),O=this.getOffsetHeight(c),N=i.toLowerCase().endsWith("left"),L=i.toLowerCase().endsWith("right"),z=i.startsWith("top"),$=i.startsWith("bottom");if((N||z)&&this.resizable){var U=(w-C)/s+this.resizable.size.width;this.setState({maxWidth:U>Number(p)?p:U})}if(L||this.props.lockAspectRatio&&!N&&!z){var U=F+(C-w)/s;this.setState({maxWidth:U>Number(p)?p:U})}if((z||N)&&this.resizable){var U=(E-R)/s+this.resizable.size.height;this.setState({maxHeight:U>Number(y)?y:U})}if($||this.props.lockAspectRatio&&!z&&!N){var U=O+(R-E)/s;this.setState({maxHeight:U>Number(y)?y:U})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,i,r)},e.prototype.onResize=function(t,i,r,s){var o=this,a={x:this.originalPosition.x,y:this.originalPosition.y},l=-s.width,c=-s.height,d=["top","left","topLeft","bottomLeft","topRight"];d.includes(i)&&(i==="bottomLeft"?a.x+=l:(i==="topRight"||(a.x+=l),a.y+=c));var f=this.draggable.state;(a.x!==f.x||a.y!==f.y)&&Yf.flushSync(function(){o.draggable.setState(a)}),this.updateOffsetFromParent();var p=this.offsetFromParent,y=this.getDraggablePosition().x+p.left,m=this.getDraggablePosition().y+p.top;this.resizingPosition={x:y,y:m},this.props.onResize&&this.props.onResize(t,i,r,s,{x:y,y:m})},e.prototype.onResizeStop=function(t,i,r,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),a=o.maxWidth,l=o.maxHeight;this.setState({maxWidth:a,maxHeight:l}),this.props.onResizeStop&&this.props.onResizeStop(t,i,r,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),r=this.getSelfElement();if(!i||r===null)return{top:0,left:0};var s=i.getBoundingClientRect(),o=s.left,a=s.top,l=r.getBoundingClientRect(),c=this.getDraggablePosition(),d=i.scrollLeft,f=i.scrollTop;this.offsetFromParent={left:l.left-o+d-c.x*t,top:l.top-a+f-c.y*t}},e.prototype.render=function(){var t=this,i=this.props,r=i.disableDragging,s=i.style,o=i.dragHandleClassName,a=i.position,l=i.onMouseDown,c=i.onMouseUp,d=i.dragAxis,f=i.dragGrid,p=i.bounds,y=i.enableUserSelectHack,m=i.cancel,v=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var x=i.resizeHandleStyles,w=i.resizeHandleClasses,E=i.resizeHandleComponent,S=i.enableResizing,C=i.resizeGrid,R=i.resizeHandleWrapperClass,F=i.resizeHandleWrapperStyle,O=i.scale,N=i.allowAnyClick,L=i.dragPositionOffset,z=f$(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),$=this.props.default?Sn({},this.props.default):void 0;delete z.default;var U=r||o?{cursor:"auto"}:{cursor:"move"},X=Sn(Sn(Sn({},p$),U),s),q=this.offsetFromParent,G=q.left,Z=q.top,H;a&&(H={x:a.x-G,y:a.y-Z});var V=this.state.resizing?void 0:H,ne=this.state.resizing?"both":d;return oe.createElement(n$,{ref:function(j){j&&(t.draggable=j)},handle:o?".".concat(o):void 0,defaultPosition:$,onMouseDown:l,onMouseUp:c,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ne,disabled:r,grid:f,bounds:p?this.state.bounds:void 0,position:V,enableUserSelectHack:y,cancel:m,scale:O,allowAnyClick:N,nodeRef:this.resizableElement,positionOffset:L},oe.createElement(h$,Sn({},z,{ref:function(j){j&&(t.resizable=j,t.resizableElement.current=j.resizable)},defaultSize:$,size:this.props.size,enable:typeof S=="boolean"?g$(S):S,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:X,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:C,handleWrapperClass:R,handleWrapperStyle:F,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:x,handleClasses:w,handleComponent:E,scale:this.props.scale}),v))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(oe.PureComponent);const y$=oe.createContext(void 0),Qy=()=>{const n=oe.useContext(y$);if(!n)throw new Error("FloatingPanel.ToggleButton must be used within a FloatingPanel.Provider");return n},ZT=({count:n=0,iconBeforeTitle:e,targetId:t,title:i,children:r,width:s,dragHandle:o=null,menu:a,...l})=>{var y;const c=$s(),d=Qy(),f=(y=d.panels[t])==null?void 0:y.visible,p="#2D2D2D";return Re(Pn,{sx:{width:"100%",height:"100%",visibility:f?"visible":"hidden",backgroundColor:p,display:"flex",flexDirection:"column",minHeight:0},...l,children:[Re(Py,{direction:"row",spacing:1,padding:1,sx:{justifyContent:"space-between",alignItems:"center",backgroundColor:p,width:"100%",borderTopLeftRadius:4,borderTopRightRadius:4,flex:"0 0 auto"},children:[Re(ui,{direction:"row",gap:1,alignItems:"center",className:"drag-handle",sx:{cursor:"move"},children:[o,e,Re(er,{sx:{paddingRight:4},children:[i,n>0?Re("span",{css:uu({marginLeft:4,color:c.palette.primary.main},"",""),children:["(",n,")"]}):null]})]}),Re(ui,{direction:"row",gap:1,alignItems:"center",children:[a,Q(Wr,{size:"small",onClick:()=>d==null?void 0:d.toggleVisibility(t),color:"primary","aria-label":"close",children:Q(kC,{fontSize:"small"})})]})]}),Re(Pn,{sx:{backgroundColor:p,width:"100%",flex:1,minHeight:0,borderBottomLeftRadius:4,borderBottomRightRadius:4,borderTopRightRadius:4,pl:1,pr:1,pb:1},children:[r,Q("div",{style:{position:"absolute",bottom:0,right:0,width:"1rem",height:"1rem",borderRight:"2px solid #9CA3AF",borderBottom:"2px solid #9CA3AF",zIndex:100}})]})]})};ZT.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{targetId:{required:!0,tsType:{name:"string"},description:"For linking to associated ToggleButtonState"},title:{required:!0,tsType:{name:"string"},description:"Panel title."},width:{required:!1,tsType:{name:"string"},description:""},count:{required:!1,tsType:{name:"number"},description:"Total number of items",defaultValue:{value:"0",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Component content"},dragHandle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",defaultValue:{value:"null",computed:!1}},dragHandleClassName:{required:!1,tsType:{name:"string"},description:`Specifies a selector to be used as the handle that initiates drag. Example:
drag-handle.`},iconBeforeTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The icon to be displayed before the title"},defaultPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:"The x and y property is used to set the default position of the component."},menu:{required:!1,tsType:{name:"any"},description:""}},composes:["HTMLAttributes"]};const _$=({bounds:n,defaultPosition:e={x:50,y:150},dragHandleClassName:t="drag-handle",targetId:i,menu:r,children:s,...o})=>{var p,y;const a=Qy(),l=$s(),c=!((p=a.panels[i])!=null&&p.minimised)&&((y=a.panels[i])==null?void 0:y.visible),d=256,f=Q(u5,{className:t,sx:{fontSize:14,color:l.palette.grey[400],cursor:"move"}});return Q(m$,{bounds:n,enableResizing:{bottomRight:!0},minWidth:d,minHeight:d,dragHandleClassName:t,default:{x:e.x,y:e.y,width:500,height:500},cancel:".map",css:uu({visibility:c?"visible":"hidden"},"",""),children:Q(ZT,{targetId:i,dragHandle:f,...o,menu:r,children:s})})};_$.__docgenInfo={description:"",methods:[],displayName:"DraggableFloatingPanel",props:{targetId:{required:!0,tsType:{name:"string"},description:"For linking to associated ToggleButtonState"},title:{required:!0,tsType:{name:"string"},description:"Panel title."},bounds:{required:!1,tsType:{name:"union",raw:'"parent" | "window" | "body" | string | Element',elements:[{name:"literal",value:'"parent"'},{name:"literal",value:'"window"'},{name:"literal",value:'"body"'},{name:"string"},{name:"Element"}]},description:`Specifies movement boundaries. Accepted values:

parent restricts movement
within the node's offsetParent (nearest node with position relative or
absolute), window, body, Selector like .fooClassName or Element.`},count:{required:!1,tsType:{name:"number"},description:"Total number of items"},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Component content"},dragHandleClassName:{required:!1,tsType:{name:"string"},description:`Specifies a selector to be used as the handle that initiates drag. Example:
drag-handle.`,defaultValue:{value:'"drag-handle"',computed:!1}},iconBeforeTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The icon to be displayed before the title"},defaultPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:"The x and y property is used to set the default position of the component.",defaultValue:{value:"{ x: 50, y: 150 }",computed:!1}},menu:{required:!1,tsType:{name:"any"},description:""}},composes:["HTMLAttributes"]};mn(XC)(()=>({border:0}));const v$=({count:n=0,iconBeforeTitle:e,targetId:t,title:i,children:r,dragHandle:s=null,...o})=>{var f,p;const a=$s(),l=Qy(),c=!((f=l.panels[t])!=null&&f.minimised)&&((p=l.panels[t])==null?void 0:p.visible),d=a.palette.mode==="dark"?a.palette.grey[900]:a.palette.grey[300];return Re(Pn,{sx:{width:"fit-content",height:"fit-content",visibility:c?"visible":"hidden"},...o,children:[Re(Py,{direction:"row",spacing:1,alignItems:"center",padding:1,sx:{backgroundColor:d,width:"fit-content",borderTopLeftRadius:4,borderTopRightRadius:4},children:[s,e,Re(er,{sx:{paddingRight:4},children:[i,n>0?Re("span",{css:uu({marginLeft:4,color:a.palette.primary.main},"",""),children:["(",n,")"]}):null]}),Q(Wr,{size:"small",onClick:()=>l==null?void 0:l.toggleVisibility(t),color:"primary","aria-label":"minimise",children:Q(kC,{fontSize:"small"})})]}),Q(Pn,{sx:{backgroundColor:d,width:"fit-content",height:"fit-content",borderBottomLeftRadius:4,borderBottomRightRadius:4,borderTopRightRadius:4,padding:.4},children:!(l!=null&&l.get(t,"minimised"))&&r})]})};v$.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{targetId:{required:!0,tsType:{name:"string"},description:"For linking to associated ToggleButtonState"},title:{required:!0,tsType:{name:"string"},description:"Panel title."},count:{required:!1,tsType:{name:"number"},description:"Total number of items",defaultValue:{value:"0",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Component content"},dragHandle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",defaultValue:{value:"null",computed:!1}},dragHandleClassName:{required:!1,tsType:{name:"string"},description:`Specifies a selector to be used as the handle that initiates drag. Example:
drag-handle.`},iconBeforeTitle:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The icon to be displayed before the title"},defaultPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:"The x and y property is used to set the default position of the component."}},composes:["HTMLAttributes"]};const x$=({children:n,sx:e,...t})=>{const i=$s();return Q(yN,{disableGutters:!0,variant:"dense",sx:{backgroundColor:i.palette.mode==="dark"?"#2e2e2e":"#eeeeee",paddingX:2,paddingY:1,...e},...t,children:n})};x$.__docgenInfo={description:"",methods:[],displayName:"Toolbar"};const w$=Ps({type:nf([Xn(),Al(),CC(),Ps({}).passthrough()]),props:EC(fr()),key:nf([Xn(),hc(),bC()]).optional()}),b$=Ps({open:Mi(),children:w$,className:Xn().optional(),id:Xn().optional(),role:Xn().optional(),closeAfterTransition:Mi().optional(),components:fr().optional(),componentsProps:fr().optional(),container:fr().optional(),disableAutoFocus:Mi().optional(),disableEnforceFocus:Mi().optional(),disableEscapeKeyDown:Mi().optional(),disablePortal:Mi().optional(),disableRestoreFocus:Mi().optional(),disableScrollLock:Mi().optional(),hideBackdrop:Mi().optional(),keepMounted:Mi().optional(),manager:fr().optional(),onBackdropClick:Al().optional(),onClose:Al().optional(),onTransitionEnter:Al().optional(),onTransitionExit:Al().optional(),sx:fr().optional(),BackdropComponent:fr().optional(),BackdropProps:fr().optional(),slots:fr().optional(),slotProps:fr().optional()}),E$=b$.omit({slots:!0,slotProps:!0,BackdropComponent:!0,BackdropProps:!0,closeAfterTransition:!0,components:!0,componentsProps:!0,container:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableEscapeKeyDown:!0,disableRestoreFocus:!0,hideBackdrop:!0,keepMounted:!0,onBackdropClick:!0,onTransitionEnter:!0,onTransitionExit:!0}).passthrough(),JT=({children:n,hideCloseButton:e,...t})=>(E$.parse({children:n,...t}),Q(LC,{...t,children:Re(Pn,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:24,minWidth:300,maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[Q(Pn,{sx:{display:"flex",justifyContent:"flex-end"},children:!e&&Re(FC,{onClick:i=>{var r;return(r=t.onClose)==null?void 0:r.call(t,i,"closeButtonClick")},color:"inherit",sx:{fontSize:18},children:["Close¬†",Q(c5,{sx:{fontSize:14}})]})}),n]})}));JT.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{onClose:{required:!0,tsType:{name:"union",raw:`| ((
    event: {},
    reason:
      | "backdropClick" // MUI in-built
      | "escapeKeyDown" // MUI in-built
      | "closeButtonClick" // custom event. Maybe delete and _misuse_ "backdropClick"
  ) => void)
| undefined`,elements:[{name:"unknown"},{name:"undefined"}]},description:""},hideCloseButton:{required:!1,tsType:{name:"boolean"},description:""}}};const C$=oe.createContext(null),bm={didCatch:!1,error:null};class QT extends oe.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=bm}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,i,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];(t=(i=this.props).onReset)===null||t===void 0||t.call(i,{args:s,reason:"imperative-api"}),this.setState(bm)}}componentDidCatch(e,t){var i,r;(i=(r=this.props).onError)===null||i===void 0||i.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:i}=this.state,{resetKeys:r}=this.props;if(i&&t.error!==null&&T$(e.resetKeys,r)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(bm)}}render(){const{children:e,fallbackRender:t,FallbackComponent:i,fallback:r}=this.props,{didCatch:s,error:o}=this.state;let a=e;if(s){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")a=t(l);else if(i)a=oe.createElement(i,l);else if(r!==void 0)a=r;else throw o}return oe.createElement(C$.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}}function T$(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,i)=>!Object.is(t,e[i]))}var S$="Expected a function",z1=NaN,R$="[object Symbol]",I$=/^\s+|\s+$/g,A$=/^[-+]0x[0-9a-f]+$/i,P$=/^0b[01]+$/i,M$=/^0o[0-7]+$/i,L$=parseInt,k$=typeof Ss=="object"&&Ss&&Ss.Object===Object&&Ss,O$=typeof self=="object"&&self&&self.Object===Object&&self,F$=k$||O$||Function("return this")(),D$=Object.prototype,N$=D$.toString,z$=Math.max,B$=Math.min,Em=function(){return F$.Date.now()};function $$(n,e,t){var i,r,s,o,a,l,c=0,d=!1,f=!1,p=!0;if(typeof n!="function")throw new TypeError(S$);e=B1(e)||0,M0(t)&&(d=!!t.leading,f="maxWait"in t,s=f?z$(B1(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function y(F){var O=i,N=r;return i=r=void 0,c=F,o=n.apply(N,O),o}function m(F){return c=F,a=setTimeout(w,e),d?y(F):o}function v(F){var O=F-l,N=F-c,L=e-O;return f?B$(L,s-N):L}function x(F){var O=F-l,N=F-c;return l===void 0||O>=e||O<0||f&&N>=s}function w(){var F=Em();if(x(F))return E(F);a=setTimeout(w,v(F))}function E(F){return a=void 0,p&&i?y(F):(i=r=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function C(){return a===void 0?o:E(Em())}function R(){var F=Em(),O=x(F);if(i=arguments,r=this,l=F,O){if(a===void 0)return m(l);if(f)return a=setTimeout(w,e),y(l)}return a===void 0&&(a=setTimeout(w,e)),o}return R.cancel=S,R.flush=C,R}function M0(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function U$(n){return!!n&&typeof n=="object"}function G$(n){return typeof n=="symbol"||U$(n)&&N$.call(n)==R$}function B1(n){if(typeof n=="number")return n;if(G$(n))return z1;if(M0(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=M0(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(I$,"");var t=P$.test(n);return t||M$.test(n)?L$(n.slice(2),t?2:8):A$.test(n)?z1:+n}var q$=$$;const W$=jf(q$);function eS(n){const{markers:e,geoPolygons:t,selected:i}=n,r=oe.useRef(null),[s,o]=oe.useState("auto"),a=oe.useRef([0,0]),l=()=>{o("auto")},c=W$(()=>{if(!r.current||t.features.length<1&&e.length<1)return;const f=r.current;let p;if(i.length<1)p=Ww(e,t.features);else{const y=e.reduce((v,x)=>(i.find(w=>x.uri===w)&&v.push(x),v),[]),m=t.features.reduce((v,x)=>(i.find(w=>{var E;return(E=x.properties)==null?void 0:E.iso3166_a3.endsWith(w.split("#")[1])})&&v.push(x),v),[]);p=Ww(y,m)}f.resize(),f.fitBounds(p,{padding:20,maxZoom:8,duration:500,offset:a.current})},0,{leading:!1,trailing:!0});return oe.useEffect(()=>{c()},[t,e,i]),{mapRef:r,cursor:s,onDragStart:()=>o("move"),onDragEnd:l,onMouseEnter:()=>o("pointer"),onMouseLeave:l,onLoad:()=>{c()},setOffset:f=>{a.current=f,c()}}}const j$=({markers:n=[],selected:e,geoPolygons:t=mC,initialViewState:i=yC,defaultStyle:r,onClickMarker:s,findByClassUri:o,attributionControl:a=!0,polygonLayers:l})=>{const{mapRef:c,cursor:d,onDragStart:f,onDragEnd:p,onMouseEnter:y,onMouseLeave:m,onLoad:v}=eS({markers:n,geoPolygons:t,selected:e});return Q(QT,{fallback:Q("p",{children:"Failed to load map"}),children:Q(My,{m:0,direction:"column",style:{width:"100%",height:"100%"},children:Q(sf,{flexGrow:1,children:Q(gC,{mapRef:c,initialViewState:i,cursor:d,onDragStart:f,onDragEnd:p,onMouseEnter:y,onMouseLeave:m,onLoad:v,defaultStyle:r,attributionControl:a,markers:n,geoPolygons:t,selected:e,onClickMarker:s,findByClassUri:o,polygonLayers:l})})})})};j$.__docgenInfo={description:"",methods:[],displayName:"BasicMap",props:{theme:{required:!1,tsType:{name:"zod.infer",elements:[{name:"UIThemeSchema"}],raw:"zod.infer<typeof UIThemeSchema>"},description:""},polygonLayers:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:`(
  | mapboxgl.FillLayer
  | mapboxgl.LineLayer
  | mapboxgl.SymbolLayer
)[]`},description:""},markers:{defaultValue:{value:"[]",computed:!1},required:!1},geoPolygons:{defaultValue:{value:'{ type: "FeatureCollection", features: [] }',computed:!1},required:!1},initialViewState:{defaultValue:{value:`{
  latitude: 53.42148743839479,
  longitude: -3.863068679356047,
  zoom: 3,
  maxZoom: 16,
}`,computed:!1},required:!1},attributionControl:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["RequiredRest","Optionalized"]};const Zl=({borderColor:n,src:e,alt:t,title:i,role:r})=>Q(Pn,{sx:{border:`2px solid ${n}`,borderRadius:"3px",overflow:"hidden",display:"inline-block",height:"1em",fontSize:"1.5rem"},mr:1,children:Q("img",{src:e,alt:t,role:r,title:i,style:{width:25,height:20}})});Zl.__docgenInfo={description:"",methods:[],displayName:"Image",props:{borderColor:{required:!1,tsType:{name:"string"},description:""},src:{required:!0,tsType:{name:"string"},description:""},alt:{required:!1,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},role:{required:!1,tsType:{name:"ReactAriaRole",raw:"React.AriaRole"},description:""}}};const tS=({data:n,selectedIndex:e,anchorEl:t,onClickDropdown:i,sx:r,variant:s,color:o})=>{var d;const a=ts(),l=!!t,c=l?"layer-selector-popover":void 0;return((d=n==null?void 0:n[e])==null?void 0:d.image)===void 0&&console.warn(`No image at ${e} in ${JSON.stringify(n)}`),Re(Oa,{id:"layer-selector",size:"large","aria-describedby":c,onClick:i,sx:r,variant:s,color:o,children:[Q(Zl,{borderColor:a.palette.primary.main,src:n[e].image,alt:n[e].label,title:n[e].label}),Q(Bs,{icon:l?Ty:Sy})]})},e_=({data:n,selectedIndex:e,anchorEl:t,onCloseDropdown:i,onListItemClick:r})=>{const s=ts(),o=!!t;return Q(x5,{id:o?"layer-selector-popover":void 0,open:o,anchorEl:t,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Q(My,{direction:"column",children:n.map((l,c)=>Q(sf,{alignContent:"flex-start",children:Re(Oa,{disabled:c===e,onClick:()=>r(c),variant:"text",sx:{width:"100%",justifyContent:"flex-start"},children:[Q(Zl,{borderColor:c===e?s.palette.primary.main:"transparent",src:l.image,alt:l.label,title:l.label}),Q(er,{textTransform:"capitalize",variant:"body2",children:l.label})]},l.label)},l.label))})})};tS.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalButton",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};e_.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorPresentationalPopOver",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};const nS=({data:n,onChange:e})=>{const[t,i]=oe.useState(null),[r,s]=oe.useState(0);Hf.useEffect(()=>{e(n[r])},[]);const o=d=>{t?l():i(d.currentTarget)},a=()=>{i(null)},l=()=>{const d=(r+1)%n.length;s(d),e(n[d])};return{data:n,selectedIndex:r,anchorEl:t,onClickDropdown:o,onCloseDropdown:a,onListItemClick:d=>{s(d),e(n[d]),a()}}},iS=()=>{const n=_C(),e=nS(n.styleSelector.props);return n.styleSelector.props.data.length<=1?null:Re("div",{children:[Q(tS,{variant:"text",...e}),Q(e_,{...e})]})};iS.__docgenInfo={description:"",methods:[],displayName:"LayerSelector"};const H$=({markers:n=[],selected:e,theme:t="DocumentPink",geoPolygons:i=mC,initialViewState:r=yC,defaultStyle:s,onClickMarker:o,findByClassUri:a,attributionControl:l=!0,polygonLayers:c})=>{const{mapRef:d,cursor:f,onDragStart:p,onDragEnd:y,onMouseEnter:m,onMouseLeave:v,onLoad:x}=eS({markers:n,geoPolygons:i,selected:e});return Q(y5,{dark:!0,theme:t,children:Q(QT,{fallback:Q("p",{children:"Failed to load map"}),children:Q("div",{className:"contents",children:Re(My,{m:0,direction:"column",style:{width:"100%",height:"100%"},children:[Q(sf,{flexGrow:1,children:Q(yF,{children:Q(gC,{mapRef:d,initialViewState:r,cursor:f,onDragStart:p,onDragEnd:y,onMouseEnter:m,onMouseLeave:v,onLoad:x,defaultStyle:s,attributionControl:l,markers:n,geoPolygons:i,selected:e,onClickMarker:o,findByClassUri:a,polygonLayers:c})})}),Q(sf,{flexGrow:0,p:1,children:Q(iS,{})})]})})})})};H$.__docgenInfo={description:"",methods:[],displayName:"FeatureMap",props:{theme:{required:!1,tsType:{name:"zod.infer",elements:[{name:"UIThemeSchema"}],raw:"zod.infer<typeof UIThemeSchema>"},description:"",defaultValue:{value:'"DocumentPink"',computed:!1}},polygonLayers:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:`(
  | mapboxgl.FillLayer
  | mapboxgl.LineLayer
  | mapboxgl.SymbolLayer
)[]`},description:""},markers:{defaultValue:{value:"[]",computed:!1},required:!1},geoPolygons:{defaultValue:{value:'{ type: "FeatureCollection", features: [] }',computed:!1},required:!1},initialViewState:{defaultValue:{value:`{
  latitude: 53.42148743839479,
  longitude: -3.863068679356047,
  zoom: 3,
  maxZoom: 16,
}`,computed:!1},required:!1},attributionControl:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["RequiredRest","Optionalized"]};const rS=({data:n,selectedIndex:e,anchorEl:t,onClickDropdown:i,sx:r,color:s,variant:o})=>{const a=ts(),l=!!t;return Q(Pn,{children:Q(Ly,{children:Re(Oa,{size:"large",id:"layer-selector","aria-describedby":l?"layer-selector-popover":void 0,onClick:i,sx:{display:"flex",alignItems:"center",height:"100%",width:"100%",...r},color:s,variant:o,children:[Q(Zl,{borderColor:a.palette.primary.main,src:n[e].image,alt:n[e].label,title:n[e].label}),"¬†",Q(Pn,{component:"span",sx:{ml:1,display:"flex"},children:Q(Bs,{icon:l?Ty:Sy})})]})})})},V$=({variant:n,color:e,sx:t})=>{const i=_C(),r=nS(i.styleSelector.props);return i.styleSelector.props.data.length<=1?null:Re(Uc,{children:[Q(rS,{variant:n,color:e,sx:t,...r}),Q(e_,{...r})]})};rS.__docgenInfo={description:"",methods:[],displayName:"PresentationalButton",props:{selectedIndex:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"LayerOption"}],raw:"LayerOption[]"},description:""},anchorEl:{required:!0,tsType:{name:"union",raw:"HTMLButtonElement | null",elements:[{name:"HTMLButtonElement"},{name:"null"}]},description:""},onCloseDropdown:{required:!0,tsType:{name:'PopOverProps["onClose"]',raw:'PopOverProps["onClose"]'},description:""},onClickDropdown:{required:!0,tsType:{name:'intersection["onClick"]',raw:'ButtonProps["onClick"]'},description:""},onListItemClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Pick"]};V$.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorInsetInMap"};const gf={left:{paper:{border:"none",borderRadius:"8 !important",borderTopLeftRadius:"0 !important",borderBottomLeftRadius:"0 !important"}},HACK_NO_BORDER:{border:"none !important",borderRadius:"0 !important"}},L0=({id:n,BoxSx:e,PaperSx:t,onClick:i,children:r})=>Q(Pn,{id:n,sx:{position:"absolute",top:"50%",transform:"translateY(-50%)",height:"100%",maxHeight:185,width:34,display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",pointerEvents:"auto",...e},children:Q(w5,{id:`${n}-Paper`,elevation:0,variant:"outlined",sx:{boxShadow:"none !important",height:"100%",width:"100%",...gf.HACK_NO_BORDER,...gf.left.paper,...t},children:Q(Wr,{id:`${n}-IconButton`,color:"inherit",onClick:i,disableRipple:!0,sx:{"&:hover":{backgroundColor:"transparent"},height:"100%",width:"100%",p:0},children:r})})});L0.__docgenInfo={description:"",methods:[],displayName:"TabButton",props:{id:{required:!0,tsType:{name:"string"},description:""},BoxSx:{required:!0,tsType:{name:'BoxProps["sx"]',raw:'BoxProps["sx"]'},description:""},onClick:{required:!0,tsType:{name:'IconButtonProps["onClick"]',raw:'IconButtonProps["onClick"]'},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""}}};const pl="drawer-presentational",X$=(n,e,t=800)=>{if(n!=null)return n;const i=parseFloat(String(e));return Number.isFinite(i)?i:t},t_=oe.forwardRef(function({open:e,onClose:t,onToggle:i,PaperProps:r,PaperSx:s,drawerWidth:o,style:a,children:l,["id"]:c="",...d},f){const p=X$(o,a==null?void 0:a.width,800),y={width:p,boxSizing:"border-box",position:"relative",overflow:"visible",transform:e?"translateX(0)":`translateX(-${p}px) `,transition:"transform 300ms ease",...gf.HACK_NO_BORDER},m=Object.assign({},y,...Array.isArray(s)?s:[s],...r!=null&&r.sx?Array.isArray(r.sx)?r.sx:[r.sx]:[]);return Re(Pn,{id:c||pl,sx:{position:"relative",overflow:"visible",height:"100%"},children:[Re(q3,{id:`${pl}--drawer`,variant:"persistent",anchor:"left",open:e,onClose:t,ModalProps:{keepMounted:!0,sx:{overflow:"visible"}},SlideProps:{style:{overflow:"visible"}},PaperProps:{id:`${pl}--muidrawer-paper`,elevation:0,square:!0,sx:{...m,...gf.HACK_NO_BORDER},...r},style:a,...d,children:[Q(Pn,{id:`${pl}--box-scrollable`,ref:f,sx:{width:p,height:"100%",overflowY:"auto",position:"relative"},children:l}),i&&e&&Q(L0,{BoxSx:{right:-34},PaperSx:s,onClick:i,id:`${pl}--toggle-stand-in`,children:Q(I5,{id:"chevron-left-icon",fontSize:"large"})})]}),i&&Q(L0,{BoxSx:{transform:"translate(0%, -50%)",zIndex:v=>v.zIndex.drawer+1,transition:"transform 300ms ease 300ms, opacity 0ms ease",opacity:e?0:1,pointerEvents:e?"none":"auto",left:0},PaperSx:s,onClick:i,id:`${pl}--toggle-animated-slide`,children:Q(A5,{id:"chevron-right-icon",fontSize:"large"})})]})});t_.displayName="DrawerPresentational";t_.__docgenInfo={description:"",methods:[],displayName:"DrawerPresentational",props:{PaperProps:{required:!1,tsType:{name:'MuiMuiDrawerProps["PaperProps"]',raw:'MuiMuiDrawerProps["PaperProps"]'},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""},drawerWidth:{required:!1,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},onToggle:{required:!1,tsType:{name:"ReactMouseEventHandler",raw:"React.MouseEventHandler<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""},id:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}},composes:["Omit"]};function Y$(n){const[e,t]=oe.useState(n.initialOpen),i=oe.useRef(null),r=oe.useCallback(()=>t(!0),[]),s=oe.useCallback(()=>t(!1),[]),o=oe.useCallback(()=>t(a=>!a),[]);return oe.useEffect(()=>{var a;(a=n.onVisibilityChange)==null||a.call(n,e)},[e,n.onVisibilityChange]),oe.useImperativeHandle(n.ref,()=>({openDrawer:r,closeDrawer:s,toggleDrawer:o,getContainer:()=>i.current}),[r,s,o]),{open:e,openDrawer:r,closeDrawer:s,toggleDrawer:o,ref:i,drawerProps:{ref:i,onToggle:o,onClose:s,open:e}}}const sS=oe.forwardRef(({initialOpen:n=!0,onVisibilityChange:e,children:t,...i},r)=>{const{drawerProps:s}=Y$({ref:r,initialOpen:n,onVisibilityChange:e});return Q(t_,{...s,...i,children:t})});sS.displayName="Drawer";sS.__docgenInfo={description:"",methods:[],displayName:"Drawer",props:{initialOpen:{required:!1,tsType:{name:"boolean"},description:"(default: true)",defaultValue:{value:"true",computed:!1}},onVisibilityChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},PaperSx:{required:!1,tsType:{name:"SxProps",elements:[{name:"Theme"}],raw:"SxProps<Theme>"},description:""}},composes:["Omit"]};const oS=({position:n,children:e,sx:t,...i})=>{const r={position:"absolute"};switch(n){case"left":Object.assign(r,{left:0,top:"50%",transform:"translateY(-50%)"});break;case"topLeft":Object.assign(r,{left:0,top:0});break;case"bottomLeft":Object.assign(r,{left:0,bottom:0});break;case"right":Object.assign(r,{right:0,top:"50%",transform:"translateY(-50%)"});break;case"topRight":Object.assign(r,{right:0,top:0});break;case"bottomRight":Object.assign(r,{right:0,bottom:0});break;case"top":Object.assign(r,{top:0,left:"50%",transform:"translateX(-50%)"});break;case"center":Object.assign(r,{top:"50%",left:"50%",transform:"translate(-50%, -50%)"});break;case"bottom":Object.assign(r,{bottom:0,left:"50%",transform:"translateX(-50%)"});break}return Q(Pn,{...i,sx:{...r,...t},children:e})},aS=({sx:n=null,...e})=>Q(Pn,{sx:{position:"relative",width:"100%",height:"100%",...n},...e}),lS=n=>Q(Pn,{...n,sx:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden",...n.sx}}),K$={Background:aS,Content:lS,ControlArea:oS};oS.__docgenInfo={description:"",methods:[],displayName:"ControlArea",props:{position:{required:!0,tsType:{name:"union",raw:`| "topLeft"
| "top"
| "topRight"
| "right"
| "bottomRight"
| "bottom"
| "bottomLeft"
| "left"
| "center"`,elements:[{name:"literal",value:'"topLeft"'},{name:"literal",value:'"top"'},{name:"literal",value:'"topRight"'},{name:"literal",value:'"right"'},{name:"literal",value:'"bottomRight"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"bottomLeft"'},{name:"literal",value:'"left"'},{name:"literal",value:'"center"'}]},description:""}},composes:["Omit"]};aS.__docgenInfo={description:"",methods:[],displayName:"Background",props:{sx:{defaultValue:{value:"null",computed:!1},required:!1}}};lS.__docgenInfo={description:"",methods:[],displayName:"Content"};const{Background:Z$,Content:J$,ControlArea:Q$}=K$,eU=({content:n,controlArea:e={},sx:t,children:i,...r})=>Re(Z$,{sx:t,...r,children:[Q(J$,{children:n}),Object.entries(e).map(([s,o])=>Q(Q$,{position:s,children:o},s)),i]});eU.__docgenInfo={description:"",methods:[],displayName:"InsetInMap",props:{content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},controlArea:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:`| "topLeft"
| "top"
| "topRight"
| "right"
| "bottomRight"
| "bottom"
| "bottomLeft"
| "left"
| "center"`,elements:[{name:"literal",value:'"topLeft"'},{name:"literal",value:'"top"'},{name:"literal",value:'"topRight"'},{name:"literal",value:'"right"'},{name:"literal",value:'"bottomRight"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"bottomLeft"'},{name:"literal",value:'"left"'},{name:"literal",value:'"center"'}]},{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"Record<Position, React.ReactNode>"}],raw:"Partial<Record<Position, React.ReactNode>>"},description:"",defaultValue:{value:"{}",computed:!1}}}};const Fn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function k0(n){const e=ir();for(let t=0,i=n.length;t<i;++t)ac(e,n[t]);return e}function tU(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),s=Math.max.apply(null,n),o=Math.max.apply(null,e);return Fs(i,r,s,o,t)}function Ao(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function uS(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function ja(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Da(n,e){return n_(n,e[0],e[1])}function As(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function n_(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function O0(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let l=Fn.UNKNOWN;return o<t?l=l|Fn.LEFT:o>r&&(l=l|Fn.RIGHT),a<i?l=l|Fn.BELOW:a>s&&(l=l|Fn.ABOVE),l===Fn.UNKNOWN&&(l=Fn.INTERSECTING),l}function ir(){return[1/0,1/0,-1/0,-1/0]}function Fs(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function cu(n){return Fs(1/0,1/0,-1/0,-1/0,n)}function cS(n,e){const t=n[0],i=n[1];return Fs(t,i,t,i,e)}function i_(n,e,t,i,r){const s=cu(r);return dS(s,n,e,t,i)}function Ds(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function hS(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function ac(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function dS(n,e,t,i,r){for(;t<i;t+=r)nU(n,e[t],e[t+1]);return n}function nU(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function fS(n,e){let t;return t=e(dp(n)),t||(t=e(fp(n)),t)||(t=e(pp(n)),t)||(t=e(Us(n)),t)?t:!1}function F0(n){let e=0;return Ha(n)||(e=lt(n)*pn(n)),e}function dp(n){return[n[0],n[1]]}function fp(n){return[n[2],n[1]]}function $i(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function iU(n,e){let t;if(e==="bottom-left")t=dp(n);else if(e==="bottom-right")t=fp(n);else if(e==="top-left")t=Us(n);else if(e==="top-right")t=pp(n);else throw new Error("Invalid corner");return t}function mf(n,e,t,i,r){const[s,o,a,l,c,d,f,p]=pS(n,e,t,i);return Fs(Math.min(s,a,c,f),Math.min(o,l,d,p),Math.max(s,a,c,f),Math.max(o,l,d,p),r)}function pS(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,d=s*o,f=s*a,p=n[0],y=n[1];return[p-l+f,y-c-d,p-l-f,y-c+d,p+l-f,y+c+d,p+l+f,y+c-d,p-l+f,y-c-d]}function pn(n){return n[3]-n[1]}function Tr(n,e,t){const i=t||ir();return on(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):cu(i),i}function Us(n){return[n[0],n[3]]}function pp(n){return[n[2],n[3]]}function lt(n){return n[2]-n[0]}function on(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Ha(n){return n[2]<n[0]||n[3]<n[1]}function rU(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function sU(n,e,t){let i=!1;const r=O0(n,e),s=O0(n,t);if(r===Fn.INTERSECTING||s===Fn.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],d=e[0],f=e[1],p=t[0],y=t[1],m=(y-f)/(p-d);let v,x;s&Fn.ABOVE&&!(r&Fn.ABOVE)&&(v=p-(y-c)/m,i=v>=o&&v<=l),!i&&s&Fn.RIGHT&&!(r&Fn.RIGHT)&&(x=y-(p-l)*m,i=x>=a&&x<=c),!i&&s&Fn.BELOW&&!(r&Fn.BELOW)&&(v=p-(y-a)/m,i=v>=o&&v<=l),!i&&s&Fn.LEFT&&!(r&Fn.LEFT)&&(x=y-(p-o)*m,i=x>=a&&x<=c)}return i}function gS(n,e,t,i){if(Ha(n))return cu(t);let r=[];if(i>1){const a=n[2]-n[0],l=n[3]-n[1];for(let c=0;c<i;++c)r.push(n[0]+a*c/i,n[1],n[2],n[1]+l*c/i,n[2]-a*c/i,n[3],n[0],n[3]-l*c/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return tU(s,o,t)}function mS(n,e){const t=e.getExtent(),i=$i(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=lt(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function yS(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];mS(n,e);const r=lt(i);if(lt(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function Qt(n,e,t){return Math.min(Math.max(n,e),t)}function oU(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return Ra(n,e,t,i)}function Ra(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function aU(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function $1(n){return n*180/Math.PI}function Po(n){return n*Math.PI/180}function Ol(n,e){const t=n%e;return t*e<0?t+e:t}function Li(n,e,t){return n+t*(e-n)}function gp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function _d(n,e){return Math.floor(gp(n,e))}function Eo(n,e){return Math.ceil(gp(n,e))}function D0(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function ze(){throw new Error("Unimplemented abstract method.")}let lU=0;function Oe(n){return n.ol_uid||(n.ol_uid=String(++lU))}const Jl={PROPERTYCHANGE:"propertychange"},ke={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Wc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function uU(n,e,t){let i,r;t=t||Hr;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function Hr(n,e){return n>e?1:n<e?-1:0}function cU(n,e){return n<e?1:n>e?-1:0}function mp(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function hU(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function tr(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function No(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function dU(n,e,t){const i=e||Hr;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||o===0)})}function Na(){return!0}function jc(){return!1}function vc(){}function _S(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!No(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function Ql(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function hu(n){for(const e in n)delete n[e]}function Lo(n){let e;for(e in n)return!1;return!e}class rr{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Hc extends Wc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new rr(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,d=r.length;c<d;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,vc);delete o[i]}return l}disposeInternal(){this.listeners_&&hu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=vc,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function _t(n,e,t,i,r){if(r){const o=t;t=function(a){return n.removeEventListener(e,t),o.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function yf(n,e,t,i){return _t(n,e,t,i,!0)}function Bt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),hu(n))}class Vc extends Hc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ke.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=_t(this,e[s],t);return r}return _t(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=yf(this,e[s],t)}else i=yf(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)fU(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Vc.prototype.on;Vc.prototype.once;Vc.prototype.un;function fU(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Bt(n[e]);else Bt(n)}class U1 extends rr{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class ss extends Vc{constructor(e){super(),this.on,this.once,this.un,Oe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new U1(i,e,t)),i=Jl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new U1(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Lo(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}function vS(...n){console.warn(...n)}function pU(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function _f(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function r_(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function gU(n,e){return n[0]*=e,n[1]*=e,n}function mU(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function yU(n,e){return Math.sqrt(mU(n,e))}function s_(n,e){if(e.canWrapX()){const t=lt(e.getExtent()),i=_U(n,e,t);i&&(n[0]-=i*t)}return n}function _U(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||lt(i),r=Math.floor((n[0]-i[0])/t)),r}const ko={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class yp{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ko[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Xc=6378137,Ll=Math.PI*Xc,vU=[-Ll,-Ll,Ll,Ll],xU=[-180,-85,180,85],vd=Xc*Math.log(Math.tan(Math.PI/2));class gl extends yp{constructor(e){super({code:e,units:"m",extent:vU,global:!0,worldExtent:xU,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Xc)}})}}const G1=[new gl("EPSG:3857"),new gl("EPSG:102100"),new gl("EPSG:102113"),new gl("EPSG:900913"),new gl("http://www.opengis.net/def/crs/EPSG/0/3857"),new gl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function wU(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Ll*n[s]/180;let o=Xc*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));o>vd?o=vd:o<-vd&&(o=-vd),e[s+1]=o}return e}function bU(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*n[s]/Ll,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Xc))/Math.PI-90;return e}const EU=6378137,q1=[-180,-90,180,90],CU=Math.PI*EU/180;class na extends yp{constructor(e,t){super({code:e,units:"degrees",extent:q1,axisOrientation:t,global:!0,metersPerUnit:CU,worldExtent:q1})}}const W1=[new na("CRS:84"),new na("EPSG:4326","neu"),new na("urn:ogc:def:crs:OGC:1.3:CRS84"),new na("urn:ogc:def:crs:OGC:2:84"),new na("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new na("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new na("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let N0={};function TU(n){return N0[n]||N0[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function SU(n,e){N0[n]=e}let Fl={};function xc(n,e,t){const i=n.getCode(),r=e.getCode();i in Fl||(Fl[i]={}),Fl[i][r]=t}function Cm(n,e){return n in Fl&&e in Fl[n]?Fl[n][e]:null}const vf=.9996,nr=.00669438,_p=nr*nr,vp=_p*nr,pa=nr/(1-nr),j1=Math.sqrt(1-nr),eu=(1-j1)/(1+j1),xS=eu*eu,o_=xS*eu,a_=o_*eu,wS=a_*eu,bS=1-nr/4-3*_p/64-5*vp/256,RU=3*nr/8+3*_p/32+45*vp/1024,IU=15*_p/256+45*vp/1024,AU=35*vp/3072,PU=3/2*eu-27/32*o_+269/512*wS,MU=21/16*xS-55/32*a_,LU=151/96*o_-417/128*wS,kU=1097/512*a_,xf=6378137;function OU(n,e,t){const i=n-5e5,o=(t.north?e:e-1e7)/vf/(xf*bS),a=o+PU*Math.sin(2*o)+MU*Math.sin(4*o)+LU*Math.sin(6*o)+kU*Math.sin(8*o),l=Math.sin(a),c=l*l,d=Math.cos(a),f=l/d,p=f*f,y=p*p,m=1-nr*c,v=Math.sqrt(1-nr*c),x=xf/v,w=(1-nr)/m,E=pa*d**2,S=E*E,C=i/(x*vf),R=C*C,F=R*C,O=F*C,N=O*C,L=N*C,z=a-f/w*(R/2-O/24*(5+3*p+10*E-4*S-9*pa))+L/720*(61+90*p+298*E+45*y-252*pa-3*S);let $=(C-F/6*(1+2*p+E)+N/120*(5-2*E+28*p-3*S+8*pa+24*y))/d;return $=D0($+Po(ES(t.number)),-Math.PI,Math.PI),[$1($),$1(z)]}const H1=-80,V1=84,FU=-180,DU=180;function NU(n,e,t){n=D0(n,FU,DU),e<H1?e=H1:e>V1&&(e=V1);const i=Po(e),r=Math.sin(i),s=Math.cos(i),o=r/s,a=o*o,l=a*a,c=Po(n),d=ES(t.number),f=Po(d),p=xf/Math.sqrt(1-nr*r**2),y=pa*s**2,m=s*D0(c-f,-Math.PI,Math.PI),v=m*m,x=v*m,w=x*m,E=w*m,S=E*m,C=xf*(bS*i-RU*Math.sin(2*i)+IU*Math.sin(4*i)-AU*Math.sin(6*i)),R=vf*p*(m+x/6*(1-a+y)+E/120*(5-18*a+l+72*y-58*pa))+5e5;let F=vf*(C+p*o*(v/2+w/24*(5-a+9*y+4*y**2)+S/720*(61-58*a+l+600*y-330*pa)));return t.north||(F+=1e7),[R,F]}function ES(n){return(n-1)*6-180+3}const zU=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function CS(n){let e=0;for(const r of zU){const s=n.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function X1(n,e){return function(t,i,r,s){const o=t.length;r=r>1?r:2,s=s??r,i||(r>2?i=t.slice():i=new Array(o));for(let a=0;a<o;a+=s){const l=t[a],c=t[a+1],d=n(l,c,e);i[a]=d[0],i[a+1]=d[1]}return i}}function BU(n){return CS(n)?new yp({code:n,units:"m"}):null}function $U(n){const e=CS(n.getCode());return e?{forward:X1(NU,e),inverse:X1(OU,e)}:null}const UU=63710088e-1;function Y1(n,e,t){t=t||UU;const i=Po(n[1]),r=Po(e[1]),s=(r-i)/2,o=Po(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const GU=[$U],qU=[BU];let z0=!0;function TS(n){z0=!1}function l_(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function B0(n){SU(n.getCode(),n),xc(n,n,l_)}function WU(n){n.forEach(B0)}function It(n){if(typeof n!="string")return n;const e=TU(n);if(e)return e;for(const t of qU){const i=t(n);if(i)return i}return null}function $0(n,e,t,i){n=It(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/ko[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=Yc(n,It("EPSG:4326"));if(!a&&o!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const d=Y1(c.slice(0,2),c.slice(2,4)),f=Y1(c.slice(4,6),c.slice(6,8));r=(d+f)/2}const l=i?ko[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function K1(n){WU(n),n.forEach(function(e){n.forEach(function(t){e!==t&&xc(e,t,l_)})})}function jU(n,e,t,i){n.forEach(function(r){e.forEach(function(s){xc(r,s,t),xc(s,r,i)})})}function u_(n,e){return n?typeof n=="string"?It(n):n:It(e)}function HU(n){return function(e,t,i,r){const s=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=r){const a=n(e.slice(o,o+i)),l=a.length;for(let c=0,d=r;c<d;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t}}function tu(n,e){return TS(),c_(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Yn(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Yc(n,e)===l_)&&t}function Yc(n,e){const t=n.getCode(),i=e.getCode();let r=Cm(t,i);if(r)return r;let s=null,o=null;for(const l of GU)s||(s=l(n)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=Tm(s.inverse,o.forward);else{const l=Cm(t,a);l&&(r=Tm(l,o.forward))}else{const l=Cm(a,i);l&&(r=Tm(s.inverse,l))}return r&&(B0(n),B0(e),xc(n,e,r)),r}function Tm(n,e){return function(t,i,r,s){return i=n(t,i,r,s),e(i,i,r,s)}}function za(n,e){const t=It(n),i=It(e);return Yc(t,i)}function c_(n,e,t){const i=za(e,t);if(!i){const r=It(e).getCode(),s=It(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return i(n,void 0,n.length)}function jd(n,e,t,i){const r=za(e,t);return gS(n,r,void 0,i)}let VU=null;function XU(){return VU}function U0(n,e){return n}function Es(n,e){return z0&&!_f(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(z0=!1,vS("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function h_(n,e){return n}function Gr(n,e){return n}function YU(){K1(G1),K1(W1),jU(W1,G1,wU,bU)}YU();function Rt(n,e){if(!n)throw new Error(e)}const SS=new Array(6);function vi(){return[1,0,0,1,0,0]}function Z1(n){return f_(n,1,0,0,1,0,0)}function d_(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=e[0],c=e[1],d=e[2],f=e[3],p=e[4],y=e[5];return n[0]=t*l+r*c,n[1]=i*l+s*c,n[2]=t*d+r*f,n[3]=i*d+s*f,n[4]=t*p+r*y+o,n[5]=i*p+s*y+a,n}function f_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function KU(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function vn(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Sm(n,e,t){return d_(n,f_(SS,e,0,0,t,0,0))}function ZU(n,e,t){return d_(n,f_(SS,1,0,0,1,e,t))}function Jr(n,e,t,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function RS(n,e){const t=JU(e);Rt(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function JU(n){return n[0]*n[3]-n[1]*n[2]}const QU=[1e5,1e5,1e5,1e5,2,2];function eG(n){return"matrix("+n.join(", ")+")"}function G0(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function tG(n,e){const t=G0(n),i=G0(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*QU[r])!==0)return!1;return!0}function Mo(n,e,t,i,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<t;l+=i){const c=n[l],d=n[l+1];s[a++]=r[0]*c+r[2]*d+r[4],s[a++]=r[1]*c+r[3]*d+r[5];for(let f=2;f<o;f++)s[a++]=n[l+f]}return s&&s.length!=a&&(s.length=a),s}function IS(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],d=s[1];let f=0;for(let p=e;p<t;p+=i){const y=n[p]-c,m=n[p+1]-d;o[f++]=c+y*a-m*l,o[f++]=d+y*l+m*a;for(let v=p+2;v<p+i;++v)o[f++]=n[v]}return o&&o.length!=f&&(o.length=f),o}function nG(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let d=0;for(let f=e;f<t;f+=i){const p=n[f]-l,y=n[f+1]-c;a[d++]=l+r*p,a[d++]=c+s*y;for(let m=f+2;m<f+i;++m)a[d++]=n[m]}return a&&a.length!=d&&(a.length=d),a}function iG(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}const J1=vi(),rG=[NaN,NaN];class AS extends ss{constructor(){super(),this.extent_=ir(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=_S((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ze()}closestPointXY(e,t,i,r){return ze()}containsXY(e,t){return this.closestPointXY(e,t,rG,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ze()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&cu(t),this.extentRevision_=this.getRevision()}return rU(this.extent_,e)}rotate(e,t){ze()}scale(e,t,i){ze()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ze()}getType(){return ze()}applyTransform(e){ze()}intersectsExtent(e){return ze()}translate(e,t){ze()}transform(e,t){const i=It(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),d=pn(c)/pn(l);Jr(J1,c[0],c[3],d,-d,0,0,0);const f=Mo(s,0,s.length,a,J1,o),p=za(i,t);return p?p(f,f,a):f}:za(i,t);return this.applyTransform(r),this}}class Va extends AS{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return i_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ze()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Q1(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ze()}setLayout(e,t,i){let r;if(e)r=Q1(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=Xa(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();IS(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=$i(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();nG(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();iG(i,0,i.length,r,e,t,i),this.changed()}}}function Xa(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Q1(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function sG(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Mo(i,0,i.length,r,e,t)}function oG(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function xp(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function Kc(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=xp(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function PS(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Kc(n,e,t[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}class Qr extends Va{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Qr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=Ra(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return cS(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return n_(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oG(this.flatCoordinates,0,e,this.stride),this.changed()}}const eb=(n,e)=>{const t=[];return n.forEach(i=>{if("getSource"in i&&typeof i.getSource=="function"){const r=i.getSource();if(!(r!=null&&r.getFeatureById))return;e.forEach(s=>{const o=r.getFeatureById(s);o&&t.push(o)})}}),t},Hd=(n,e,t={})=>{const{duration:i=600,maxZoom:r=16,padding:s=[50,50,50,50]}=t,o=e.getGeometry();if(!o)return;const a=n.getView();if(!a)return;const c=a.getProjection().getExtent(),d=lt(c),f=y=>{for(;y<c[0];)y+=d;for(;y>c[2];)y-=d;return y};let p;if(o instanceof Qr){const y=o.getCoordinates();p=[y[0],y[1],y[0],y[1]]}else{const y=o.getExtent();if(!y)return;let m=f(y[0]),v=f(y[2]);if(v-m>d/2){const w=m+d,E=f((w+v)/2);m=E,v=E}p=[m,y[1],v,y[3]]}a.fit(p,{maxZoom:r,duration:i,padding:s})},MS=(n,e,t={})=>{const{padding:i=[50,50,50,50],maxZoom:r=16,duration:s=600}=t;if(!e.length)return;const o=n.getView();if(!o)return;const l=o.getProjection().getExtent(),c=lt(l),d=y=>{for(;y<l[0];)y+=c;for(;y>l[2];)y-=c;return y},f=e.map(y=>{var m;return(m=y.getGeometry())==null?void 0:m.getExtent()}).filter(y=>!!y).map(y=>[d(y[0]),y[1],d(y[2]),y[3]]);if(!f.length)return;let p=f[0];for(const y of f.slice(1)){const m=y[0],v=y[2];let x=p[0],w=p[2];v-m>c/2?(p[0]=Math.max(x,m),p[2]=Math.min(w,v)):(p[0]=Math.min(x,m),p[2]=Math.max(w,v)),p[1]=Math.min(p[1],y[1]),p[3]=Math.max(p[3],y[3])}o.fit(p,{maxZoom:r,padding:i,duration:s})},Dn={ADD:"add",REMOVE:"remove"},tb={LENGTH:"length"};class xd extends rr{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Fi extends ss{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(tb.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new xd(Dn.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new xd(Dn.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new xd(Dn.REMOVE,r,e)),this.dispatchEvent(new xd(Dn.ADD,t,e))}updateLength_(){this.set(tb.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,s=i.length;r<s;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class Ns extends ss{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ns(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Bt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=_t(e,ke.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?aG(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function aG(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Rt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const Vt={SINGLECLICK:"singleclick",CLICK:ke.CLICK,DBLCLICK:ke.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ba=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",lG=Ba.includes("safari")&&!Ba.includes("chrom");lG&&(Ba.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ba));const uG=Ba.includes("webkit")&&!Ba.includes("edge"),LS=Ba.includes("macintosh"),cG=typeof devicePixelRatio<"u"?devicePixelRatio:1,Zi=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,kS=typeof Image<"u"&&Image.prototype.decode,hG=typeof createImageBitmap=="function",OS=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function q0(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const dG=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},fG=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},FS=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?fG(n):!0},pG=Na,gG=function(n){return n.type==Vt.CLICK},DS=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(uG&&LS&&e.ctrlKey)},nb=jc,mG=function(n){return n.type==Vt.SINGLECLICK},NS=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},yG=function(n){const e=n.originalEvent;return LS?e.metaKey:e.ctrlKey},zS=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},BS=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Rm=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},_G=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0},Xt={ANIMATING:0,INTERACTING:1};function en(n,e,t,i){let r;return t&&t.length?r=t.shift():Zi?r=new class extends OffscreenCanvas{constructor(){super(...arguments);Nu(this,"style",{})}}(n??300,e??150):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let Im;function wf(){return Im||(Im=en(1,1)),Im}function Zc(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function bf(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function vG(n){for(;n.lastChild;)n.lastChild.remove()}function xG(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}function $S(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function Co(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const Ji={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ve={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},p_=[NaN,NaN,NaN,0];let Am;function wG(){return Am||(Am=en(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Am}const bG=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,EG=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,CG=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,TG=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function wd(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function lc(n){throw new Error('failed to parse "'+n+'" as color')}function US(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(EG)||n.match(bG)||n.match(CG);if(s){const o=s[4],a=100/255;return[Qt(wd(s[1],a)+.5|0,0,255),Qt(wd(s[2],a)+.5|0,0,255),Qt(wd(s[3],a)+.5|0,0,255),o!==void 0?Qt(wd(o,100),0,1):1]}lc(n)}if(n.startsWith("#")){if(TG.test(n)){const s=n.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let d=parseInt(s.substring(l,l+o),16);o===1&&(d+=d<<4),a[l/o]=d}return a[3]=a[3]/255,a}lc(n)}const e=wG();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&lc(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return US(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=gp(r[3]/255,3),r}function SG(n){return typeof n=="string"?n:m_(n)}const RG=1024,Gu={};let Pm=0;function IG(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function Mm(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function Lm(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function km(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function Om(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function ib(n){const e=km(n[0]),t=km(n[1]),i=km(n[2]),r=Om(e*.222488403+t*.716873169+i*.06060791),s=500*(Om(e*.452247074+t*.399439023+i*.148375274)-r),o=200*(r-Om(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,n[3]]}function AG(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=Lm(e),s=Lm(e+t/500*Math.cos(i)),o=Lm(e-t/200*Math.sin(i)),a=Mm(s*3.021973625-r*1.617392459-o*.404875592),l=Mm(s*-.943766287+r*1.916279586+o*.027607165),c=Mm(s*.069407491-r*.22898585+o*1.159737864);return[Qt(a+.5|0,0,255),Qt(l+.5|0,0,255),Qt(c+.5|0,0,255),n[3]]}function g_(n){if(n==="none")return p_;if(Gu.hasOwnProperty(n))return Gu[n];if(Pm>=RG){let t=0;for(const i in Gu)t++&3||(delete Gu[i],--Pm)}const e=US(n);e.length!==4&&lc(n);for(const t of e)isNaN(t)&&lc(n);return Gu[n]=e,++Pm,e}function nu(n){return Array.isArray(n)?n:g_(n)}function m_(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}class y_ extends Hc{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?ve.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(ke.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ve.IDLE&&this.loader){this.state=ve.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Ql(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||hG&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=ve.LOADED}).catch(i=>{this.state=ve.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function PG(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[yf(i,ke.LOAD,function(){o=!0,s||e()})];return i.src&&kS?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(yf(i,ke.ERROR,t)),function(){r=!1,a.forEach(Bt)}}function MG(n,e){return new Promise((t,i)=>{function r(){o(),t(n)}function s(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s)})}function LG(n,e){return e&&(n.src=e),n.src&&kS?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):MG(n)}class kG{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=Fm(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=Fm(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,s){const o=Fm(e,t,i),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===ve.IDLE&&r.load(),r.getImageState()===ve.LOADING?r.ready().then(()=>{this.patternCache_[o]=wf().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=wf().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Fm(n,e,t){const i=t?nu(t):"null";return e+":"+n+":"+i}const Qi=new kG;let qu=null;class GS extends Hc{constructor(e,t,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?ve.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ve.LOADED){qu||(qu=en(1,1,void 0,{willReadFrequently:!0})),qu.drawImage(this.image_,0,0);try{qu.getImageData(0,0,1,1),this.tainted_=!1}catch{qu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ke.CHANGE)}handleImageError_(){this.imageState_=ve.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ve.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=en(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ve.IDLE){this.image_||this.initializeImage_(),this.imageState_=ve.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&LG(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ve.LOADED)return;const t=this.image_,i=en(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=SG(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ve.LOADED||this.imageState_===ve.ERROR)e();else{const t=()=>{(this.imageState_===ve.LOADED||this.imageState_===ve.ERROR)&&(this.removeEventListener(ke.CHANGE,t),e())};this.addEventListener(ke.CHANGE,t)}})),this.ready_}}function Ef(n,e,t,i,r,s){let o=e===void 0?void 0:Qi.get(e,t,r);return o||(o=new GS(n,n&&"src"in n?n.src||void 0:e,t,i,r),Qi.set(e,t,r,o,s)),s&&o&&!Qi.getPattern(e,t,r)&&Qi.set(e,t,r,o,s),o}function qr(n){return n?Array.isArray(n)?m_(n):typeof n=="object"&&"src"in n?OG(n):n:null}function OG(n){if(!n.offset||!n.size)return Qi.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Qi.getPattern(e,void 0,n.color);if(t)return t;const i=Qi.get(n.src,"anonymous",null);if(i.getImageState()!==ve.LOADED)return null;const r=en(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Ef(r.canvas,e,void 0,ve.LOADED,n.color,!0),Qi.getPattern(e,void 0,n.color)}function To(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function wc(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=To(n,e,l,i,r[s]),e=l}return r.length=s,r}function W0(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:wc(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}class qS{drawCustom(e,t,i,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const bd="ol-hidden",Jc="ol-unselectable",rb="ol-unsupported",wp="ol-control",sb="ol-collapsed",FG=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),ob=["style","variant","weight","size","lineHeight","family"],j0={normal:400,bold:700},H0=function(n){const e=n.match(FG);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=ob.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[ob[i]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in j0&&(t.weight=j0[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t},WS="10px sans-serif",gi="#000",iu="round",Ms=[],Ls=0,ru="round",bc=10,Ec="#000",Cc="center",Cf="middle",ga=[0,0,0,0],Tc=1,ua=new ss;let Wu=null,ab;const V0={},DG=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function NG(n,e,t){return`${n} ${e} 16px "${t}"`}const jS=function(){let e,t;async function i(s){await t.ready;const o=await t.load(s);if(o.length===0)return!1;const a=H0(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(d=>{const f=d.family.replace(/^['"]|['"]$/g,"").toLowerCase(),p=j0[d.weight]||d.weight;return f===l&&d.style===a.style&&p==c})}async function r(){await t.ready;let s=!0;const o=ua.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let d=o[c];d<100&&(await i(c)?(hu(V0),ua.set(c,100)):(d+=10,ua.set(c,d,!0),d<100&&(s=!1)))}e=void 0,s||(e=setTimeout(r,100))}return async function(s){t||(t=Zi?self.fonts:document.fonts);const o=H0(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(DG.has(c))continue;const d=NG(o.style,o.weight,c);ua.get(d)===void 0&&(ua.set(d,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(r,100))}}(),zG=function(){let n;return function(e){let t=V0[e];if(t==null){if(Zi){const i=H0(e),r=HS(e,"≈Ωg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);V0[e]=t}return t}}();function HS(n,e){return Wu||(Wu=en(1,1)),n!=ab&&(Wu.font=n,ab=Wu.font),Wu.measureText(e)}function VS(n,e){return HS(n,e).width}function lb(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,VS(n,s)),0);return t[e]=i,i}function BG(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,d=e.length;c<=d;c+=2){const f=e[c];if(f===`
`||c===d){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const p=e[c+1]||n.font,y=VS(p,f);t.push(y),o+=y;const m=zG(p);i.push(m),l=Math.max(l,m)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function $G(n,e,t,i,r,s,o,a,l,c,d){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=f=>f.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(d[0],d[1]),UG(i,n)):d[0]<0||d[1]<0?(n.translate(l,c),n.scale(d[0],d[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*d[0],a*d[1]),n.restore()}function UG(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}const Te={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ed=[Te.FILL],So=[Te.STROKE],ma=[Te.BEGIN_PATH],ub=[Te.CLOSE_PATH];class Qc extends qS{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],Da(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let d=e[t],f=e[t+1];const p=this.tmpCoordinate_;let y=!0,m,v,x;for(m=t+r;m<i;m+=r)p[0]=e[m],p[1]=e[m+1],x=O0(c,p),x!==v?(y&&(a[l++]=d,a[l++]=f,y=!1),a[l++]=p[0],a[l++]=p[1]):x===Fn.INTERSECTING?(a[l++]=p[0],a[l++]=p[1],y=!1):y=!0,d=p[0],f=p[1],v=x;return(s&&y||m===t+r)&&(a[l++]=d,a[l++]=f),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,d,f,p,y;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),p=[];const m=e.getEndss();y=0;for(let v=0,x=m.length;v<x;++v){const w=[];y=this.drawCustomCoordinates_(c,y,m[v],a,w),p.push(w)}this.instructions.push([Te.CUSTOM,l,p,e,i,W0,s]),this.hitDetectionInstructions.push([Te.CUSTOM,l,p,e,r||i,W0,s]);break;case"Polygon":case"MultiLineString":f=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),y=this.drawCustomCoordinates_(c,0,e.getEnds(),a,f),this.instructions.push([Te.CUSTOM,l,f,e,i,wc,s]),this.hitDetectionInstructions.push([Te.CUSTOM,l,f,e,r||i,wc,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),d=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Te.CUSTOM,l,d,e,i,To,s]),this.hitDetectionInstructions.push([Te.CUSTOM,l,d,e,r||i,To,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),d=this.appendFlatPointCoordinates(c,a),d>l&&(this.instructions.push([Te.CUSTOM,l,d,e,i,To,s]),this.hitDetectionInstructions.push([Te.CUSTOM,l,d,e,r||i,To,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),d=this.coordinates.length,this.instructions.push([Te.CUSTOM,l,d,e,i,void 0,s]),this.hitDetectionInstructions.push([Te.CUSTOM,l,d,e,r||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Te.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Te.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Te.END_GEOMETRY?o=t:s==Te.BEGIN_GEOMETRY&&(r[2]=t,hU(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=qr(i||gi)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=qr(i||Ec);const r=e.getLineCap();t.lineCap=r!==void 0?r:iu;const s=e.getLineDash();t.lineDash=s?s.slice():Ms;const o=e.getLineDashOffset();t.lineDashOffset=o||Ls;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:ru;const l=e.getWidth();t.lineWidth=l!==void 0?l:Tc;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:bc,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Te.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Te.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!No(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Te.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=uS(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Ao(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class GG extends Qc{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Da(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),s=[];for(let l=0,c=r.length;l<c;l+=e.getStride())(!this.maxExtent||Da(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([Te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class qG extends Qc{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Te.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ms,Ls],ma);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(So),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ms,Ls],ma);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let d=0;for(let f=0,p=a.length;f<p;++f)d=this.drawFlatCoordinates_(l,d,a[f],c);this.hitDetectionInstructions.push(So),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(So),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(So),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ma)}}function bp(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let d=0;for(;c.length>0;){const f=c.pop(),p=c.pop();let y=0;const m=n[p],v=n[p+1],x=n[f],w=n[f+1];for(let E=p+i;E<f;E+=i){const S=n[E],C=n[E+1],R=oU(S,C,m,v,x,w);R>y&&(d=E,y=R)}y>r&&(l[(d-e)/i]=1,p+i<d&&c.push(p,d),d+i<f&&c.push(d,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=n[e+f*i],s[o++]=n[e+f*i+1]);return o}function XS(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const d=t[l];o=bp(n,e,d,i,r,s,o),a.push(o),e=d}return o}function aa(n,e){return e*Math.round(n/e)}function WG(n,e,t,i,r,s,o){if(e==t)return o;let a=aa(n[e],r),l=aa(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,d;do if(c=aa(n[e],r),d=aa(n[e+1],r),e+=i,e==t)return s[o++]=c,s[o++]=d,o;while(c==a&&d==l);for(;e<t;){const f=aa(n[e],r),p=aa(n[e+1],r);if(e+=i,f==c&&p==d)continue;const y=c-a,m=d-l,v=f-a,x=p-l;if(y*x==m*v&&(y<0&&v<y||y==v||y>0&&v>y)&&(m<0&&x<m||m==x||m>0&&x>m)){c=f,d=p;continue}s[o++]=c,s[o++]=d,a=c,l=d,c=f,d=p}return s[o++]=c,s[o++]=d,o}function __(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const d=t[l];o=WG(n,e,d,i,r,s,o),a.push(o),e=d}return o}function jG(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const d=t[l],f=[];o=__(n,e,d,i,r,s,o,f),a.push(f),e=d[d.length-1]}return o}class cb extends Qc{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(ma),this.hitDetectionInstructions.push(ma);for(let c=0;c<l;++c){const d=i[c],f=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,d,r,!0,!a),y=[Te.MOVE_TO_LINE_TO,f,p];this.instructions.push(y),this.hitDetectionInstructions.push(y),a&&(this.instructions.push(ub),this.hitDetectionInstructions.push(ub)),t=d}return o&&(this.instructions.push(Ed),this.hitDetectionInstructions.push(Ed)),a&&(this.instructions.push(So),this.hitDetectionInstructions.push(So)),t}drawCircle(e,t,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,gi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ms,Ls]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const d=[Te.CIRCLE,c];this.instructions.push(ma,d),this.hitDetectionInstructions.push(ma,d),r.fillStyle!==void 0&&(this.instructions.push(Ed),this.hitDetectionInstructions.push(Ed)),r.strokeStyle!==void 0&&(this.instructions.push(So),this.hitDetectionInstructions.push(So)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,gi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ms,Ls]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,gi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ms,Ls]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let d=0;for(let f=0,p=a.length;f<p;++f)d=this.drawFlatCoordinatess_(l,d,a[f],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=aa(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function HG(n,e,t,i,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+r<i;){const[c,d]=l.slice(-2),f=e[o+r],p=e[o+r+1],y=Math.sqrt((f-c)*(f-c)+(p-d)*(p-d));if(a+=y,a>=n){const m=(n-a+y)/y,v=Li(c,f,m),x=Li(d,p,m);l.push(v,x),s.push(l),l=[v,x],a==n&&(o+=r),a=0}else if(a<n)l.push(e[o+r],e[o+r+1]),o+=r;else{const m=y-a,v=Li(c,f,m/y),x=Li(d,p,m/y);l.push(v,x),s.push(l),l=[v,x],a=0,o+=r}}return a>0&&s.push(l),s}function VG(n,e,t,i,r){let s=t,o=t,a=0,l=0,c=t,d,f,p,y,m,v,x,w,E,S;for(f=t;f<i;f+=r){const C=e[f],R=e[f+1];m!==void 0&&(E=C-m,S=R-v,y=Math.sqrt(E*E+S*S),x!==void 0&&(l+=p,d=Math.acos((x*E+w*S)/(p*y)),d>n&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),p=y,x=E,w=S),m=C,v=R}return l+=y,l>a?[c,f]:[s,o]}const Tf={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class XG extends Qc{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[gi]={fillStyle:gi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let d=null,f=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!on(this.maxExtent,e.getExtent()))return;let p;if(d=e.getFlatCoordinates(),c=="LineString")p=[d.length];else if(c=="MultiLineString")p=e.getEnds();else if(c=="Polygon")p=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const x=e.getEndss();p=[];for(let w=0,E=x.length;w<E;++w)p.push(x[w][0])}this.beginGeometry(e,t,i);const y=o.repeat,m=y?void 0:o.textAlign;let v=0;for(let x=0,w=p.length;x<w;++x){let E;y?E=HG(y*this.resolution,d,v,p[x],f):E=[d.slice(v,p[x])];for(let S=0,C=E.length;S<C;++S){const R=E[S];let F=0,O=R.length;if(m==null){const L=VG(o.maxAngle,R,0,R.length,2);F=L[0],O=L[1]}for(let L=F;L<O;L+=f)a.push(R[L],R[L+1]);const N=a.length;v=p[x],this.drawChars_(l,N),l=N}}this.endGeometry(t)}else{let p=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":d=e.getFlatCoordinates();break;case"LineString":d=e.getFlatMidpoint();break;case"Circle":d=e.getCenter();break;case"MultiLineString":d=e.getFlatMidpoints(),f=2;break;case"Polygon":d=e.getFlatInteriorPoint(),o.overflow||p.push(d[2]/this.resolution),f=3;break;case"MultiPolygon":const C=e.getFlatInteriorPoints();d=[];for(let R=0,F=C.length;R<F;R+=3)o.overflow||p.push(C[R+2]/this.resolution),d.push(C[R],C[R+1]);if(d.length===0)return;f=2;break}const y=this.appendFlatPointCoordinates(d,f);if(y===l)return;if(p&&(y-l)/2!==d.length/f){let C=l/2;p=p.filter((R,F)=>{const O=a[(C+F)*2]===d[F*f]&&a[(C+F)*2+1]===d[F*f+1];return O||--C,O})}this.saveTextStates_();const m=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,v=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,i);let x=o.padding;if(x!=ga&&(o.scale[0]<0||o.scale[1]<0)){let C=o.padding[0],R=o.padding[1],F=o.padding[2],O=o.padding[3];o.scale[0]<0&&(R=-R,O=-O),o.scale[1]<0&&(C=-C,F=-F),x=[C,R,F,O]}const w=this.pixelRatio;this.instructions.push([Te.DRAW_IMAGE,l,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,x==ga?ga:x.map(function(C){return C*w}),m,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]);const E=1/w,S=m?m.slice(0):null;S&&(S[1]=gi),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,l,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[E,E],NaN,this.declutterMode_,this.declutterImageWithText_,x,S,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?gi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Cc,justify:t.justify,textBaseline:t.textBaseline||Cf,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Tf[r.textBaseline],d=this.textOffsetY_*l,f=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Te.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,d,s,p*l,f,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Te.DRAW_CHARS,e,t,c,r.overflow,a&&gi,r.maxAngle,l,d,s,p*l,f,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=qr(o.getColor()||gi)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=a.getLineDash(),x=a.getLineDashOffset(),w=a.getWidth(),E=a.getMiterLimit();s.lineCap=a.getLineCap()||iu,s.lineDash=v?v.slice():Ms,s.lineDashOffset=x===void 0?Ls:x,s.lineJoin=a.getLineJoin()||ru,s.lineWidth=w===void 0?Tc:w,s.miterLimit=E===void 0?bc:E,s.strokeStyle=qr(a.getColor()||Ec)}i=this.textState_;const l=e.getFont()||WS;jS(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Cf,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||ga,i.scale=c===void 0?[1,1]:c;const d=e.getOffsetX(),f=e.getOffsetY(),p=e.getRotateWithView(),y=e.getKeepUpright(),m=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=d===void 0?0:d,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=p===void 0?!1:p,this.textKeepUpright_=y===void 0?!0:y,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Oe(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Oe(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const YG={Circle:cb,Default:Qc,Image:GG,LineString:qG,Polygon:cb,Text:XG};class YS{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=YG[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function v_(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}function KG(n,e,t,i,r,s,o,a,l,c,d,f,p=!0){let y=n[e],m=n[e+1],v=0,x=0,w=0,E=0;function S(){v=y,x=m,e+=i,y=n[e],m=n[e+1],E+=w,w=Math.sqrt((y-v)*(y-v)+(m-x)*(m-x))}do S();while(e<t-i&&E+w<s);let C=w===0?0:(s-E)/w;const R=Li(v,y,C),F=Li(x,m,C),O=e-i,N=E,L=s+a*l(c,r,d);for(;e<t-i&&E+w<L;)S();C=w===0?0:(L-E)/w;const z=Li(v,y,C),$=Li(x,m,C);let U=!1;if(p)if(f){const H=[R,F,z,$];IS(H,0,4,2,f,H,H),U=H[0]>H[2]}else U=R>z;const X=Math.PI,q=[],G=O+i===e;e=O,w=0,E=N,y=n[e],m=n[e+1];let Z;if(G){S(),Z=Math.atan2(m-x,y-v),U&&(Z+=Z>0?-X:X);const H=(z+R)/2,V=($+F)/2;return q[0]=[H,V,(L-s)/2,Z,r],q}r=r.replace(/\n/g," ");for(let H=0,V=r.length;H<V;){S();let ne=Math.atan2(m-x,y-v);if(U&&(ne+=ne>0?-X:X),Z!==void 0){let Ee=ne-Z;if(Ee+=Ee>X?-2*X:Ee<-X?2*X:0,Math.abs(Ee)>o)return null}Z=ne;const j=H;let ge=0;for(;H<V;++H){const Ee=U?V-H-1:H,Ke=a*l(c,r[Ee],d);if(e+i<t&&E+w<s+ge+Ke/2)break;ge+=Ke}if(H===j)continue;const le=U?r.substring(V-j,V-H):r.substring(j,H);C=w===0?0:(s+ge/2-E)/w;const Ce=Li(v,y,C),qe=Li(x,m,C);q.push([Ce,qe,ge/2,ne,le]),s+=ge}return q}class x_{constructor(){Nu(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(wf(),{get:(e,t)=>{if(typeof wf()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const o=t[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ml=ir(),io=[],xs=[],ws=[],ro=[];function hb(n){return n[3].declutterBox}const db=new RegExp("[÷ë-‡£øÔ¨ù-Ô∑øÔπ∞-Ôªº‡†Ä-‡øøÓ†Ä-Óøø]");function Dm(n,e){return e==="start"?e=db.test(n)?"right":"left":e==="end"&&(e=db.test(n)?"left":"right"),Tf[e]}function ZG(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function JG(n,e,t){return t%2===0&&(n+=e),n}class QG{constructor(e,t,i,r,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=vi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new x_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,d=[l.scale[0]*c,l.scale[1]*c],f=l.justify?Tf[l.justify]:Dm(Array.isArray(e)?e[0]:e,l.textAlign||Cc),p=r&&o.lineWidth?o.lineWidth:0,y=Array.isArray(e)?e:String(e).split(`
`).reduce(ZG,[]),{width:m,height:v,widths:x,heights:w,lineWidths:E}=BG(l,y),S=m+p,C=[],R=(S+2)*d[0],F=(v+p)*d[1],O={width:R<0?Math.floor(R):Math.ceil(R),height:F<0?Math.floor(F):Math.ceil(F),contextInstructions:C};(d[0]!=1||d[1]!=1)&&C.push("scale",d),r&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",p),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),i&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const N=.5-f;let L=f*S+N*p;const z=[],$=[];let U=0,X=0,q=0,G=0,Z;for(let H=0,V=y.length;H<V;H+=2){const ne=y[H];if(ne===`
`){X+=U,U=0,L=f*S+N*p,++G;continue}const j=y[H+1]||l.font;j!==Z&&(r&&z.push("font",j),i&&$.push("font",j),Z=j),U=Math.max(U,w[q]);const ge=[ne,L+N*x[q]+f*(x[q]-E[G]),.5*(p+U)+X];L+=x[q],r&&z.push("strokeText",ge),i&&$.push("fillText",ge),++q}return Array.prototype.push.apply(C,z),Array.prototype.push.apply(C,$),this.labels_[s]=O,O}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,c,d,f,p,y,m,v,x){a*=p[0],l*=p[1];let w=i-a,E=r-l;const S=s+c>e?e-c:s,C=o+d>t?t-d:o,R=m[3]+S*p[0]+m[1],F=m[0]+C*p[1]+m[2],O=w-m[3],N=E-m[0];(v||f!==0)&&(io[0]=O,ro[0]=O,io[1]=N,xs[1]=N,xs[0]=O+R,ws[0]=xs[0],ws[1]=N+F,ro[1]=ws[1]);let L;return f!==0?(L=Jr(vi(),i,r,1,1,f,-i,-r),vn(L,io),vn(L,xs),vn(L,ws),vn(L,ro),Fs(Math.min(io[0],xs[0],ws[0],ro[0]),Math.min(io[1],xs[1],ws[1],ro[1]),Math.max(io[0],xs[0],ws[0],ro[0]),Math.max(io[1],xs[1],ws[1],ro[1]),ml)):Fs(Math.min(O,O+R),Math.min(N,N+F),Math.max(O,O+R),Math.max(N,N+F),ml),y&&(w=Math.round(w),E=Math.round(E)),{drawImageX:w,drawImageY:E,drawImageW:S,drawImageH:C,originX:c,originY:d,declutterBox:{minX:ml[0],minY:ml[1],maxX:ml[2],maxY:ml[3],value:x},canvasTransform:L,scale:p}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=t[0]&&c.maxX+d>=0&&c.minY-d<=t[1]&&c.maxY+d>=0&&(l&&this.replayTextBackground_(e,io,xs,ws,ro,o,a),$G(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=vn(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Dm(Array.isArray(e)?e[0]:e,s.textAlign||Cc),d=Tf[s.textBaseline||Cf],f=a&&a.lineWidth?a.lineWidth:0,p=o.width/l-2*s.scale[0],y=c*p+2*(.5-c)*f,m=d*o.height/l+2*(.5-d)*f;return{label:o,anchorX:y,anchorY:m}}execute_(e,t,i,r,s,o,a,l){const c=this.zIndexContext_;let d;this.pixelCoordinates_&&No(i,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=Mo(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),KU(this.renderedTransform_,i));let f=0;const p=r.length;let y=0,m,v,x,w,E,S,C,R,F,O,N,L,z,$=0,U=0;const X=this.coordinateCache_,q=this.viewRotation_,G=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Z={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:q},H=this.instructions!=r||this.overlaps?0:200;let V,ne,j,ge;for(;f<p;){const le=r[f];switch(le[0]){case Te.BEGIN_GEOMETRY:V=le[1],ge=le[3],V.getGeometry()?a!==void 0&&!on(a,ge.getExtent())?f=le[2]+1:++f:f=le[2],c&&(c.zIndex=le[4]);break;case Te.BEGIN_PATH:$>H&&(this.fill_(e),$=0),U>H&&(e.stroke(),U=0),!$&&!U&&(e.beginPath(),E=NaN,S=NaN),++f;break;case Te.CIRCLE:y=le[1];const qe=d[y],Ee=d[y+1],Ke=d[y+2],$e=d[y+3],Se=Ke-qe,De=$e-Ee,de=Math.sqrt(Se*Se+De*De);e.moveTo(qe+de,Ee),e.arc(qe,Ee,de,0,2*Math.PI,!0),++f;break;case Te.CLOSE_PATH:e.closePath(),++f;break;case Te.CUSTOM:y=le[1],m=le[2];const At=le[3],Nn=le[4],Ue=le[5];Z.geometry=At,Z.feature=V,f in X||(X[f]=[]);const Nt=X[f];Ue?Ue(d,y,m,2,Nt):(Nt[0]=d[y],Nt[1]=d[y+1],Nt.length=2),c&&(c.zIndex=le[6]),Nn(Nt,Z),++f;break;case Te.DRAW_IMAGE:y=le[1],m=le[2],F=le[3],v=le[4],x=le[5];let ut=le[6];const vt=le[7],Ut=le[8],dt=le[9],Mn=le[10];let Gt=le[11];const k=le[12];let Dt=le[13];w=le[14]||"declutter";const Ve=le[15];if(!F&&le.length>=20){O=le[19],N=le[20],L=le[21],z=le[22];const un=this.drawLabelWithPointPlacement_(O,N,L,z);F=un.label,le[3]=F;const zn=le[23];v=(un.anchorX-zn)*this.pixelRatio,le[4]=v;const wn=le[24];x=(un.anchorY-wn)*this.pixelRatio,le[5]=x,ut=F.height,le[6]=ut,Dt=F.width,le[13]=Dt}let ct;le.length>25&&(ct=le[25]);let We,Ze,be;le.length>17?(We=le[16],Ze=le[17],be=le[18]):(We=ga,Ze=null,be=null),Mn&&G?Gt+=q:!Mn&&!G&&(Gt-=q);let wt=0;for(;y<m;y+=2){if(ct&&ct[wt++]<Dt/this.pixelRatio)continue;const un=this.calculateImageOrLabelDimensions_(F.width,F.height,d[y],d[y+1],Dt,ut,v,x,Ut,dt,Gt,k,s,We,!!Ze||!!be,V),zn=[e,t,F,un,vt,Ze,be];if(l){let wn,qn,nn;if(Ve){const bt=m-y;if(!Ve[bt]){Ve[bt]={args:zn,declutterMode:w};continue}const xt=Ve[bt];wn=xt.args,qn=xt.declutterMode,delete Ve[bt],nn=hb(wn)}let ei,cn;if(wn&&(qn!=="declutter"||!l.collides(nn))&&(ei=!0),(w!=="declutter"||!l.collides(un.declutterBox))&&(cn=!0),qn==="declutter"&&w==="declutter"){const bt=ei&&cn;ei=bt,cn=bt}ei&&(qn!=="none"&&l.insert(nn),this.replayImageOrLabel_.apply(this,wn)),cn&&(w!=="none"&&l.insert(un.declutterBox),this.replayImageOrLabel_.apply(this,zn))}else this.replayImageOrLabel_.apply(this,zn)}++f;break;case Te.DRAW_CHARS:const Fe=le[1],Ie=le[2],Ae=le[3],Et=le[4];z=le[5];const jt=le[6],Kt=le[7],Ct=le[8];L=le[9];const kt=le[10];O=le[11],Array.isArray(O)&&(O=O.reduce(JG,"")),N=le[12];const ft=[le[13],le[13]];w=le[14]||"declutter";const qt=le[15],tn=this.textStates[N],pt=tn.font,ln=[tn.scale[0]*Kt,tn.scale[1]*Kt];let Gn;pt in this.widths_?Gn=this.widths_[pt]:(Gn={},this.widths_[pt]=Gn);const sr=v_(d,Fe,Ie,2),Ei=Math.abs(ln[0])*lb(pt,O,Gn);if(Et||Ei<=sr){const un=this.textStates[N].textAlign,zn=(sr-Ei)*Dm(O,un),wn=KG(d,Fe,Ie,2,O,zn,jt,Math.abs(ln[0]),lb,pt,Gn,G?0:this.viewRotation_,qt);e:if(wn){const qn=[];let nn,ei,cn,bt,xt;if(L)for(nn=0,ei=wn.length;nn<ei;++nn){xt=wn[nn],cn=xt[4],bt=this.createLabel(cn,N,"",L),v=xt[2]+(ln[0]<0?-kt:kt),x=Ae*bt.height+(.5-Ae)*2*kt*ln[1]/ln[0]-Ct;const bn=this.calculateImageOrLabelDimensions_(bt.width,bt.height,xt[0],xt[1],bt.width,bt.height,v,x,0,0,xt[3],ft,!1,ga,!1,V);if(l&&w==="declutter"&&l.collides(bn.declutterBox))break e;qn.push([e,t,bt,bn,1,null,null])}if(z)for(nn=0,ei=wn.length;nn<ei;++nn){xt=wn[nn],cn=xt[4],bt=this.createLabel(cn,N,z,""),v=xt[2],x=Ae*bt.height-Ct;const bn=this.calculateImageOrLabelDimensions_(bt.width,bt.height,xt[0],xt[1],bt.width,bt.height,v,x,0,0,xt[3],ft,!1,ga,!1,V);if(l&&w==="declutter"&&l.collides(bn.declutterBox))break e;qn.push([e,t,bt,bn,1,null,null])}l&&w!=="none"&&l.load(qn.map(hb));for(let bn=0,$o=qn.length;bn<$o;++bn)this.replayImageOrLabel_.apply(this,qn[bn])}}++f;break;case Te.END_GEOMETRY:if(o!==void 0){V=le[1];const un=o(V,ge,w);if(un)return un}++f;break;case Te.FILL:H?$++:this.fill_(e),++f;break;case Te.MOVE_TO_LINE_TO:for(y=le[1],m=le[2],ne=d[y],j=d[y+1],e.moveTo(ne,j),E=ne+.5|0,S=j+.5|0,y+=2;y<m;y+=2)ne=d[y],j=d[y+1],C=ne+.5|0,R=j+.5|0,(y==m-2||C!==E||R!==S)&&(e.lineTo(ne,j),E=C,S=R);++f;break;case Te.SET_FILL_STYLE:this.alignAndScaleFill_=le[2],$&&(this.fill_(e),$=0,U&&(e.stroke(),U=0)),e.fillStyle=le[1],++f;break;case Te.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,le),++f;break;case Te.STROKE:H?U++:e.stroke(),++f;break;default:++f;break}}$&&this.fill_(e),U&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}}const ca=["Polygon","Circle","LineString","Image","Text","Default"],Sf=["Image","Text"],eq=ca.filter(n=>!Sf.includes(n));class KS{constructor(e,t,i,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=vi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=e[i];for(const o in s){const a=s[o];r[o]=new QG(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Jr(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=en(a,a));const d=this.hitDetectionContext_;d.canvas.width!==a||d.canvas.height!==a?(d.canvas.width=a,d.canvas.height=a):c||d.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=ir(),ac(f,e),Ao(f,t*(this.renderBuffer_+r),f));const p=tq(r);let y;function m(R,F,O){const N=d.getImageData(0,0,a,a).data;for(let L=0,z=p.length;L<z;L++)if(N[p[L]]>0){if(!o||O==="none"||y!=="Image"&&y!=="Text"||o.includes(R)){const $=(p[L]-3)/4,U=r-$%a,X=r-($/a|0),q=s(R,F,U*U+X*X);if(q)return q}d.clearRect(0,0,a,a);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Hr);let x,w,E,S,C;for(x=v.length-1;x>=0;--x){const R=v[x].toString();for(E=this.executorsByZIndex_[R],w=ca.length-1;w>=0;--w)if(y=ca[w],S=E[y],S!==void 0&&(C=S.executeHitDetection(d,l,i,m,f),C))return C}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return Mo(a,0,8,2,e,a),a}isEmpty(){return Lo(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?cU:Hr),o=o||ca;const c=ca.length;for(let d=0,f=l.length;d<f;++d){const p=l[d].toString(),y=this.executorsByZIndex_[p];for(let m=0,v=o.length;m<v;++m){const x=o[m],w=y[x];if(w!==void 0){const E=a===null?void 0:w.getZIndexContext(),S=E?E.getContext():e,C=this.maxExtent_&&x!=="Image"&&x!=="Text";if(C&&(S.save(),this.clip(S,i)),!E||x==="Text"||x==="Image"?w.execute(S,t,i,r,s,a):E.pushFunction(R=>w.execute(R,t,i,r,s,a)),C&&S.restore(),E){E.offset();const R=l[d]*c+ca.indexOf(x);this.deferredZIndexContexts_[R]||(this.deferredZIndexContexts_[R]=[]),this.deferredZIndexContexts_[R].push(E)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Hr);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const Nm={};function tq(n){if(Nm[n]!==void 0)return Nm[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Nm[n]=r,r}function fb(n){return n[0]>0&&n[1]>0}function nq(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Jn(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Ep{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Jn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ep({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ze()}getImage(e){return ze()}getHitDetectionImage(){return ze()}getPixelRatio(e){return 1}getImageState(){return ze()}getImageSize(){return ze()}getOrigin(){return ze()}getSize(){return ze()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Jn(e)}listenImageChange(e){ze()}load(){ze()}unlistenImageChange(e){ze()}ready(){return Promise.resolve()}}class Cp extends Ep{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ve.LOADING:ve.LOADED,this.imageState_===ve.LOADING&&this.ready().then(()=>this.imageState_=ve.LOADED),this.render()}clone(){const e=this.getScale(),t=new Cp({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,o;const t=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=(o=Qi.get(i,null,null))==null?void 0:o.getImage(1);if(!r){const a=this.renderOptions_,l=Math.ceil(a.size*e),c=en(l,l);this.draw_(a,c,e),r=c.canvas,Qi.set(i,null,null,new GS(r,void 0,null,ve.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const F=r;r=s,s=F}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),d=r-c,f=Math.sqrt(l*l+d*d),p=f/l;if(e==="miter"&&p<=i)return p*t;const y=t/2/p,m=t/2*(d/f),x=Math.sqrt((r+y)*(r+y)+m*m)-r;if(this.radius2_===void 0||e==="bevel")return x*2;const w=r*Math.sin(a),E=Math.sqrt(r*r-w*w),S=s-E,R=Math.sqrt(w*w+S*S)/w;if(R<=i){const F=R*t/2-s-r;return 2*Math.max(x,F)}return x*2}createRenderOptions(){let e=iu,t=ru,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=qr(this.stroke_.getColor()??Ec),a=this.stroke_.getWidth()??Tc,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??ru,e=this.stroke_.getLineCap()??iu,i=this.stroke_.getMiterLimit()??bc);const l=this.calculateLineJoinSize_(t,a,i),c=Math.max(this.radius,this.radius2_||0),d=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:d,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=gi),t.fillStyle=qr(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=nu(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=en(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=gi,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class zo extends Cp{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new zo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Qn{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Qn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Ef(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ve.IDLE&&t.load(),t.getImageState()===ve.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Oe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:nu(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function pb(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class $a extends Ep{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Rt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Oe(o)),Rt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Rt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ve.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?ve.LOADED:ve.IDLE:l=ve.LOADING:l=ve.LOADED),this.color_=e.color!==void 0?nu(e.color):null,this.iconImage_=Ef(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,d;if(e.size)[c,d]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,d=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const p=()=>{if(this.unlistenImageChange(p),!this.initialOptions_)return;const y=this.iconImage_.getSize();this.setScale(pb(y[0],y[1],e.width,e.height))};this.listenImageChange(p);return}}c!==void 0&&this.setScale(pb(c,d,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new $a({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=Ef(null,e,this.crossOrigin_,ve.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ve.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ve.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ke.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ke.CHANGE,e)}ready(){return this.iconImage_.ready()}}class li{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new li({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class fn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=gb,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new fn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=gb,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function iq(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Rt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let zm=null;function ZS(n,e){if(!zm){const t=new Qn({color:"rgba(255,255,255,0.4)"}),i=new li({color:"#3399CC",width:1.25});zm=[new fn({image:new zo({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return zm}function rq(){const n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n.Polygon=[new fn({fill:new Qn({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new fn({stroke:new li({color:e,width:i+2})}),new fn({stroke:new li({color:t,width:i})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new fn({image:new zo({radius:i*2,fill:new Qn({color:t}),stroke:new li({color:e,width:i/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function gb(n){return n.getGeometry()}const sq="#333";class Tp{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Jn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Qn({color:sq}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Tp({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Qn?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Jn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}class oq extends qS{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?gp(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=vi()}drawImages_(e,t,i,r){if(!this.image_)return;const s=Mo(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-this.imageAnchorX_,y=s[d+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=p+this.imageAnchorX_,v=y+this.imageAnchorY_;Jr(a,m,v,1,1,c,-m,-v),o.save(),o.transform.apply(o,a),o.translate(m,v),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,y,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Mo(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=Mo(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!on(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=sG(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!on(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(on(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!on(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!on(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),No(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:Cc;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:qr(i||gi)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),d=s||Ms;this.strokeState_={lineCap:r!==void 0?r:iu,lineDash:this.pixelRatio_===1?d:d.map(f=>f*this.pixelRatio_),lineDashOffset:(o||Ls)*this.pixelRatio_,lineJoin:a!==void 0?a:ru,lineWidth:(l!==void 0?l:Tc)*this.pixelRatio_,miterLimit:c!==void 0?c:bc,strokeStyle:qr(i||Ec)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const y=t.getColor();this.textFillState_={fillStyle:qr(y||gi)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const y=i.getColor(),m=i.getLineCap(),v=i.getLineDash(),x=i.getLineDashOffset(),w=i.getLineJoin(),E=i.getWidth(),S=i.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:iu,lineDash:v||Ms,lineDashOffset:x||Ls,lineJoin:w!==void 0?w:ru,lineWidth:E!==void 0?E:Tc,miterLimit:S!==void 0?S:bc,strokeStyle:qr(y||Ec)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),d=e.getText(),f=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:r!==void 0?r:WS,textAlign:f!==void 0?f:Cc,textBaseline:p!==void 0?p:Cf},this.text_=d!==void 0?Array.isArray(d)?d.reduce((y,m,v)=>y+=v%2?" ":m,""):d:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const ki=.5;function JS(n,e,t,i,r,s,o,a,l){const c=l?h_(r):r,d=n[0]*ki,f=n[1]*ki,p=en(d,f);p.imageSmoothingEnabled=!1;const y=p.canvas,m=new oq(p,ki,r,null,o,a,l?Yc(XU(),l):null),v=t.length,x=Math.floor((256*256*256-1)/v),w={};for(let S=1;S<=v;++S){const C=t[S-1],R=C.getStyleFunction()||i;if(!R)continue;let F=R(C,s);if(!F)continue;Array.isArray(F)||(F=[F]);const N=(S*x).toString(16).padStart(7,"#00000");for(let L=0,z=F.length;L<z;++L){const $=F[L],U=$.getGeometryFunction()(C);if(!U||!on(c,U.getExtent()))continue;const X=$.clone(),q=X.getFill();q&&q.setColor(N);const G=X.getStroke();G&&(G.setColor(N),G.setLineDash(null)),X.setText(void 0);const Z=$.getImage();if(Z){const j=Z.getImageSize();if(!j)continue;const ge=en(j[0],j[1],void 0,{alpha:!1}),le=ge.canvas;ge.fillStyle=N,ge.fillRect(0,0,le.width,le.height),X.setImage(new $a({img:le,anchor:Z.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Z.getOrigin(),opacity:1,size:Z.getSize(),scale:Z.getScale(),rotation:Z.getRotation(),rotateWithView:Z.getRotateWithView()}))}const H=X.getZIndex()||0;let V=w[H];V||(V={},w[H]=V,V.Polygon=[],V.Circle=[],V.LineString=[],V.Point=[]);const ne=U.getType();if(ne==="GeometryCollection"){const j=U.getGeometriesArrayRecursive();for(let ge=0,le=j.length;ge<le;++ge){const Ce=j[ge];V[Ce.getType().replace("Multi","")].push(Ce,X)}}else V[ne.replace("Multi","")].push(U,X)}}const E=Object.keys(w).map(Number).sort(Hr);for(let S=0,C=E.length;S<C;++S){const R=w[E[S]];for(const F in R){const O=R[F];for(let N=0,L=O.length;N<L;N+=2){m.setStyle(O[N+1]);for(let z=0,$=e.length;z<$;++z)m.setTransform(e[z]),m.drawGeometry(O[N])}}}return p.getImageData(0,0,y.width,y.height)}function QS(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*ki),s=Math.floor(Math.round(n[1])*ki),o=(Qt(r,0,t.width-1)+Qt(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],d=t.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/e.length);d&&d%f===0&&i.push(e[d/f-1])}return i}const aq=.5,eR={Point:gq,LineString:dq,Polygon:yq,MultiPoint:mq,MultiLineString:fq,MultiPolygon:pq,GeometryCollection:hq,Circle:uq};function lq(n,e){return parseInt(Oe(n),10)-parseInt(Oe(e),10)}function X0(n,e){const t=tR(n,e);return t*t}function tR(n,e){return aq*n/e}function uq(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function Rf(n,e,t,i,r,s,o,a){const l=[],c=t.getImage();if(c){let p=!0;const y=c.getImageState();y==ve.LOADED||y==ve.ERROR?p=!1:y==ve.IDLE&&c.load(),p&&l.push(c.ready())}const d=t.getFill();d&&d.loading()&&l.push(d.ready());const f=l.length>0;return f&&Promise.all(l).then(()=>r(null)),cq(n,e,t,i,s,o,a),f}function cq(n,e,t,i,r,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r);if(t.getRenderer())nR(n,l,t,e,o);else{const d=eR[l.getType()];d(n,l,t,e,o,s)}}function nR(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)nR(n,o[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function hq(n,e,t,i,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=eR[o[a].getType()];c(n,o[a],t,i,r,s)}}function dq(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i,r)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function fq(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i,r)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function pq(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}function gq(n,e,t,i,r,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=ve.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,c),d.drawPoint(e,i,r)}if(l){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(a,c),d.drawText(e,i,r)}}function mq(n,e,t,i,r,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),d=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=ve.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(o,d),f.drawMultiPoint(e,i,r)}if(c){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,d),f.drawText(e,i,r)}}function yq(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}class iR extends rr{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}const _q=5;class vq extends Vc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=_q}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ze()}getData(e){return null}prepareFrame(e){return ze()}renderFrame(e,t){return ze()}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ve.LOADED||t.getState()===ve.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ve.LOADED&&t!=ve.ERROR&&e.addEventListener(ke.CHANGE,this.boundHandleImageChange_),t==ve.IDLE&&(e.load(),t=e.getState()),t==ve.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const mb=[];let Cl=null;function xq(){Cl=en(1,1,void 0,{willReadFrequently:!0})}class w_ extends vq{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=vi(),this.pixelTransform=vi(),this.inversePixelTransform=vi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){Cl||xq(),Cl.clearRect(0,0,1,1);let r;try{Cl.drawImage(e,t,i,1,1,0,0,1,1),r=Cl.getImageData(0,0,1,1).data}catch{return Cl=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&No(nu(e.style.backgroundColor),nu(i)))){const a=e.firstElementChild;Co(a)&&(o=a.getContext("2d"))}if(o&&tG(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Zi?$S():document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=en();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=Us(i),s=pp(i),o=fp(i),a=dp(i);vn(t.coordinateToPixelTransform,r),vn(t.coordinateToPixelTransform,s),vn(t.coordinateToPixelTransform,o),vn(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;vn(l,r),vn(l,s),vn(l,o),vn(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(lt(i)/r*o),l=Math.round(pn(i)/r*o);Jr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),RS(this.inversePixelTransform,this.pixelTransform);const c=eG(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const d=this.context.canvas;d.width!=a||d.height!=l?(d.width=a,d.height=l):this.context.clearRect(0,0,a,l),c!==d.style.transform&&(d.style.transform=c)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new iR(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ji.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ji.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new x_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ji.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ji.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,s,o,a){const l=s/2,c=o/2,d=r/t,f=-d,p=-e[0]+a,y=-e[1];return Jr(this.tempTransform,l,c,d,f,-i,p,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class wq extends w_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ir(),this.wrappedRenderedExtent_=ir(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,d=l.getExtent(),f=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),y=t.pixelRatio,m=t.viewHints,v=!(m[Xt.ANIMATING]||m[Xt.INTERACTING]),x=this.context,w=Math.round(lt(r)/a*y),E=Math.round(pn(r)/a*y),S=f.getWrapX()&&l.canWrapX(),C=S?lt(d):null,R=S?Math.ceil((r[2]-d[2])/C)+1:1;let F=S?Math.floor((r[0]-d[0])/C):0;do{let O=this.getRenderTransform(o,a,0,y,w,E,F*C);t.declutter&&(O=O.slice(0)),e.execute(x,[x.canvas.width,x.canvas.height],O,c,v,i===void 0?ca:i?Sf:eq,i?p&&t.declutter[p]:void 0)}while(++F<R)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=en(this.context.canvas.width,this.context.canvas.height,mb))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Zc(this.context),mb.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Ji.PRERENDER)||this.getLayer().hasListener(Ji.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=Gr(i.extent);a=on(l,e.extent),this.clipped_=a&&!As(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),d=[],f=i[0]*ki,p=i[1]*ki;d.push(this.getRenderTransform(r,s,o,ki,f,p,0).slice());const y=c.getSource(),m=a.getExtent();if(y.getWrapX()&&a.canWrapX()&&!As(m,l)){let v=l[0];const x=lt(m);let w=0,E;for(;v<m[0];)--w,E=x*w,d.push(this.getRenderTransform(r,s,o,ki,f,p,E).slice()),v+=x;for(w=0,v=l[2];v>m[2];)++w,E=x*w,d.push(this.getRenderTransform(r,s,o,ki,f,p,E).slice()),v-=x}this.hitDetectionImageData_=JS(i,d,this.renderedFeatures_,c.getStyleFunction(),l,s,o,X0(s,this.renderedPixelRatio_),null)}t(QS(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){var p,y;if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},d=function(m,v,x){const w=Oe(m),E=c[w];if(E){if(E!==!0&&x<E.distanceSq){if(x===0)return c[w]=!0,s.splice(s.lastIndexOf(E),1),r(m,l,v);E.geometry=v,E.distanceSq=x}}else{if(x===0)return c[w]=!0,r(m,l,v);s.push(c[w]={feature:m,layer:l,geometry:v,distanceSq:x,callback:r})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,i,d,f?(y=(p=t.declutter)==null?void 0:p[f])==null?void 0:y.all().map(m=>m.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Xt.ANIMATING],s=e.viewHints[Xt.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,d=c.projection,f=c.resolution,p=e.pixelRatio,y=t.getRevision(),m=t.getRenderBuffer();let v=t.getRenderOrder();v===void 0&&(v=lq);const x=c.center.slice(),w=Ao(l,m*f),E=w.slice(),S=[w.slice()],C=d.getExtent();if(i.getWrapX()&&d.canWrapX()&&!As(C,e.extent)){const q=lt(C),G=Math.max(lt(w)/2,q);w[0]=C[0]-G,w[2]=C[2]+G,s_(x,d);const Z=mS(S[0],d);Z[0]<C[0]&&Z[2]<C[2]?S.push([Z[0]+q,Z[1],Z[2]+q,Z[3]]):Z[0]>C[0]&&Z[2]>C[2]&&S.push([Z[0]-q,Z[1],Z[2]-q,Z[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==y&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!e.declutter&&As(this.wrappedRenderedExtent_,w))return No(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const R=new YS(tR(f,p),w,f,p);let F;for(let q=0,G=S.length;q<G;++q)i.loadFeatures(S[q],f,d);const O=X0(f,p);let N=!0;const L=(q,G)=>{let Z;const H=q.getStyleFunction()||t.getStyleFunction();if(H&&(Z=H(q,f)),Z){const V=this.renderFeature(q,O,Z,R,F,this.getLayer().getDeclutter(),G);N=N&&!V}},z=h_(w),$=i.getFeaturesInExtent(z);v&&$.sort(v);for(let q=0,G=$.length;q<G;++q)L($[q],q);this.renderedFeatures_=$,this.ready=N;const U=R.finish(),X=new KS(w,f,p,i.getOverlaps(),U,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=y,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=E,this.wrappedRenderedExtent_=w,this.renderedCenter_=x,this.renderedProjection_=d,this.renderedPixelRatio_=p,this.replayGroup_=X,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,d=i.length;c<d;++c)l=Rf(r,e,i[c],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Rf(r,e,i,t,this.boundHandleStyleImageChange_,s,o,a);return l}}function rR(n,e,t=0,i=n.length-1,r=bq){for(;i>t;){if(i-t>600){const l=i-t+1,c=e-t+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),y=Math.max(t,Math.floor(e-c*f/l+p)),m=Math.min(i,Math.floor(e+(l-c)*f/l+p));rR(n,e,y,m,r)}const s=n[e];let o=t,a=i;for(ju(n,t,e),r(n[i],s)>0&&ju(n,t,i);o<a;){for(ju(n,o,a),o++,a--;r(n[o],s)<0;)o++;for(;r(n[a],s)>0;)a--}r(n[t],s)===0?ju(n,t,a):(a++,ju(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function ju(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function bq(n,e){return n<e?-1:n>e?1:0}let sR=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Td(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;Td(e,l)&&(t.leaf?i.push(a):$m(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!Td(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(Td(e,o)){if(t.leaf||$m(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Tl([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const d=Eq(e,i.children,t);if(d!==-1)return i.children.splice(d,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&$m(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=Tl(e.slice(t,i+1)),yl(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Tl([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));yb(e,t,i,c,this.compareMinX);for(let d=t;d<=i;d+=c){const f=Math.min(d+c-1,i);yb(e,d,f,l,this.compareMinY);for(let p=d;p<=f;p+=l){const y=Math.min(p+l-1,f);a.children.push(this._build(e,p,y,r-1))}}return yl(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],d=Bm(c),f=Sq(e,c)-d;f<o?(o=f,s=d<s?d:s,a=c):f===o&&d<s&&(s=d,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),tc(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Tl(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,yl(i,this.toBBox),yl(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=Tl([e,t]),this.data.height=e.height+1,this.data.leaf=!1,yl(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=ec(e,0,a,this.toBBox),c=ec(e,a,i,this.toBBox),d=Rq(l,c),f=Bm(l)+Bm(c);d<s?(s=d,r=a,o=f<o?f:o):d===s&&f<o&&(o=f,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Cq,s=e.leaf?this.compareMinY:Tq,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=ec(e,0,t,s),a=ec(e,i-t,i,s);let l=Cd(o)+Cd(a);for(let c=t;c<i-t;c++){const d=e.children[c];tc(o,e.leaf?s(d):d),l+=Cd(o)}for(let c=i-t-1;c>=t;c--){const d=e.children[c];tc(a,e.leaf?s(d):d),l+=Cd(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)tc(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():yl(e[t],this.toBBox)}};function Eq(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function yl(n,e){ec(n,0,n.children.length,e,n)}function ec(n,e,t,i,r){r||(r=Tl(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];tc(r,n.leaf?i(o):o)}return r}function tc(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Cq(n,e){return n.minX-e.minX}function Tq(n,e){return n.minY-e.minY}function Bm(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Cd(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Sq(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Rq(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function $m(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Td(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Tl(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yb(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;rR(n,o,e,t,r),s.push(e,o,o,t)}}let Ya=0;const ai=1<<Ya++,yt=1<<Ya++,mi=1<<Ya++,_r=1<<Ya++,Ua=1<<Ya++,nc=1<<Ya++,Sd=Math.pow(2,Ya)-1,b_={[ai]:"boolean",[yt]:"number",[mi]:"string",[_r]:"color",[Ua]:"number[]",[nc]:"size"},Iq=Object.keys(b_).map(Number).sort(Hr);function Aq(n){return n in b_}function ic(n){const e=[];for(const t of Iq)rc(n,t)&&e.push(b_[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function rc(n,e){return(n&e)===e}function so(n,e){return n===e}class Rn{constructor(e,t){if(!Aq(e))throw new Error(`literal expressions must have a specific type, got ${ic(e)}`);this.type=e,this.value=t}}class Pq{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function oR(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Un(n,e,t){switch(typeof n){case"boolean":{if(so(e,mi))return new Rn(mi,n?"true":"false");if(!rc(e,ai))throw new Error(`got a boolean, but expected ${ic(e)}`);return new Rn(ai,n)}case"number":{if(so(e,nc))return new Rn(nc,Jn(n));if(so(e,ai))return new Rn(ai,!!n);if(so(e,mi))return new Rn(mi,n.toString());if(!rc(e,yt))throw new Error(`got a number, but expected ${ic(e)}`);return new Rn(yt,n)}case"string":{if(so(e,_r))return new Rn(_r,g_(n));if(so(e,ai))return new Rn(ai,!!n);if(!rc(e,mi))throw new Error(`got a string, but expected ${ic(e)}`);return new Rn(mi,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Uq(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(so(e,nc)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Rn(nc,n)}if(so(e,_r)){if(n.length===3)return new Rn(_r,[...n,1]);if(n.length===4)return new Rn(_r,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!rc(e,Ua))throw new Error(`got an array of numbers, but expected ${ic(e)}`);return new Rn(Ua,n)}const se={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Mq={[se.Get]:Ne(nt(1,1/0),_b),[se.Var]:Ne(nt(1,1),Lq),[se.Has]:Ne(nt(1,1/0),_b),[se.Id]:Ne(kq,_l),[se.Concat]:Ne(nt(2,1/0),St(mi)),[se.GeometryType]:Ne(Oq,_l),[se.LineMetric]:Ne(_l),[se.Resolution]:Ne(Um,_l),[se.Zoom]:Ne(Um,_l),[se.Time]:Ne(Um,_l),[se.Any]:Ne(nt(2,1/0),St(ai)),[se.All]:Ne(nt(2,1/0),St(ai)),[se.Not]:Ne(nt(1,1),St(ai)),[se.Equal]:Ne(nt(2,2),St(Sd)),[se.NotEqual]:Ne(nt(2,2),St(Sd)),[se.GreaterThan]:Ne(nt(2,2),St(yt)),[se.GreaterThanOrEqualTo]:Ne(nt(2,2),St(yt)),[se.LessThan]:Ne(nt(2,2),St(yt)),[se.LessThanOrEqualTo]:Ne(nt(2,2),St(yt)),[se.Multiply]:Ne(nt(2,1/0),vb),[se.Coalesce]:Ne(nt(2,1/0),vb),[se.Divide]:Ne(nt(2,2),St(yt)),[se.Add]:Ne(nt(2,1/0),St(yt)),[se.Subtract]:Ne(nt(2,2),St(yt)),[se.Clamp]:Ne(nt(3,3),St(yt)),[se.Mod]:Ne(nt(2,2),St(yt)),[se.Pow]:Ne(nt(2,2),St(yt)),[se.Abs]:Ne(nt(1,1),St(yt)),[se.Floor]:Ne(nt(1,1),St(yt)),[se.Ceil]:Ne(nt(1,1),St(yt)),[se.Round]:Ne(nt(1,1),St(yt)),[se.Sin]:Ne(nt(1,1),St(yt)),[se.Cos]:Ne(nt(1,1),St(yt)),[se.Atan]:Ne(nt(1,2),St(yt)),[se.Sqrt]:Ne(nt(1,1),St(yt)),[se.Match]:Ne(nt(4,1/0),xb,Dq),[se.Between]:Ne(nt(3,3),St(yt)),[se.Interpolate]:Ne(nt(6,1/0),xb,Nq),[se.Case]:Ne(nt(3,1/0),Fq,zq),[se.In]:Ne(nt(2,2),Bq),[se.Number]:Ne(nt(1,1/0),St(Sd)),[se.String]:Ne(nt(1,1/0),St(Sd)),[se.Array]:Ne(nt(1,1/0),St(yt)),[se.Color]:Ne(nt(1,4),St(yt)),[se.Band]:Ne(nt(1,3),St(yt)),[se.Palette]:Ne(nt(2,2),$q),[se.ToString]:Ne(nt(1,1),St(ai|yt|mi|_r))};function _b(n,e,t){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=n[s+1];switch(typeof o){case"number":{r[s]=new Rn(yt,o);break}case"string":{r[s]=new Rn(mi,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return r}function Lq(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new Rn(mi,i)]}function kq(n,e,t){t.featureId=!0}function Oq(n,e,t){t.geometryType=!0}function Um(n,e,t){t.mapState=!0}function _l(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function nt(n,e){return function(t,i,r){const s=t[0],o=t.length-1;if(n===e){if(o!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${s}, got ${o}`)}}else if(o<n||o>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function vb(n,e,t){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=Un(n[s+1],e,t);r[s]=o}return r}function St(n){return function(e,t,i){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Un(e[o+1],n,i);s[o]=a}return s}}function Fq(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function xb(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Dq(n,e,t){const i=n.length-1,r=mi|yt|ai,s=Un(n[1],r,t),o=Un(n[n.length-1],e,t),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const c=Un(n[l+2],s.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Un(n[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function Nq(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new Rn(yt,r);let o;try{o=Un(n[2],yt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){try{const c=Un(n[l+3],yt,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Un(n[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function zq(n,e,t){const i=Un(n[n.length-1],e,t),r=new Array(n.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=Un(n[s+1],ai,t);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Un(n[s+2],i.type,t);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=i,r}function Bq(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=mi}else r=yt;const s=new Array(i.length);for(let a=0;a<s.length;a++)try{const l=Un(i[a],r,t);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Un(n[1],r,t),...s]}function $q(n,e,t){let i;try{i=Un(n[1],yt,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=Un(r[o],_r,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Rn))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[i,...s]}function Ne(...n){return function(e,t,i){const r=e[0];let s;for(let o=0;o<n.length;o++){const a=n[o](e,t,i);if(o==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new Pq(t,r,...s)}}function Uq(n,e,t){const i=n[0],r=Mq[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function aR(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return aR(n.getGeometries()[0]);default:return""}}function lR(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Gs(n,e,t){const i=Un(n,e,t);return Ir(i)}function Ir(n,e){if(n instanceof Rn){if(n.type===_r&&typeof n.value=="string"){const i=g_(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case se.Number:case se.String:case se.Coalesce:return Gq(n);case se.Get:case se.Var:case se.Has:return qq(n);case se.Id:return i=>i.featureId;case se.GeometryType:return i=>i.geometryType;case se.Concat:{const i=n.args.map(r=>Ir(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case se.Resolution:return i=>i.resolution;case se.Any:case se.All:case se.Between:case se.In:case se.Not:return jq(n);case se.Equal:case se.NotEqual:case se.LessThan:case se.LessThanOrEqualTo:case se.GreaterThan:case se.GreaterThanOrEqualTo:return Wq(n);case se.Multiply:case se.Divide:case se.Add:case se.Subtract:case se.Clamp:case se.Mod:case se.Pow:case se.Abs:case se.Floor:case se.Ceil:case se.Round:case se.Sin:case se.Cos:case se.Atan:case se.Sqrt:return Hq(n);case se.Case:return Vq(n);case se.Match:return Xq(n);case se.Interpolate:return Yq(n);case se.ToString:return Kq(n);default:throw new Error(`Unsupported operator ${t}`)}}function Gq(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ir(n.args[s]);switch(t){case se.Coalesce:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case se.Number:case se.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function qq(n,e){const i=n.args[0].value;switch(n.operator){case se.Get:return r=>{const s=n.args;let o=r.properties[i];for(let a=1,l=s.length;a<l;++a){const d=s[a].value;o=o[d]}return o};case se.Var:return r=>r.variables[i];case se.Has:return r=>{const s=n.args;if(!(i in r.properties))return!1;let o=r.properties[i];for(let a=1,l=s.length;a<l;++a){const d=s[a].value;if(!o||!Object.hasOwn(o,d))return!1;o=o[d]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Wq(n,e){const t=n.operator,i=Ir(n.args[0]),r=Ir(n.args[1]);switch(t){case se.Equal:return s=>i(s)===r(s);case se.NotEqual:return s=>i(s)!==r(s);case se.LessThan:return s=>i(s)<r(s);case se.LessThanOrEqualTo:return s=>i(s)<=r(s);case se.GreaterThan:return s=>i(s)>r(s);case se.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function jq(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ir(n.args[s]);switch(t){case se.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case se.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case se.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case se.In:return s=>{const o=r[0](s);for(let a=1;a<i;++a)if(o===r[a](s))return!0;return!1};case se.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Hq(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ir(n.args[s]);switch(t){case se.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case se.Divide:return s=>r[0](s)/r[1](s);case se.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case se.Subtract:return s=>r[0](s)-r[1](s);case se.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case se.Mod:return s=>r[0](s)%r[1](s);case se.Pow:return s=>Math.pow(r[0](s),r[1](s));case se.Abs:return s=>Math.abs(r[0](s));case se.Floor:return s=>Math.floor(r[0](s));case se.Ceil:return s=>Math.ceil(r[0](s));case se.Round:return s=>Math.round(r[0](s));case se.Sin:return s=>Math.sin(r[0](s));case se.Cos:return s=>Math.cos(r[0](s));case se.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case se.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Vq(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Ir(n.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(i[s](r))return i[s+1](r);return i[t-1](r)}}function Xq(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Ir(n.args[r]);return r=>{const s=i[0](r);for(let o=1;o<t-1;o+=2)if(s===i[o](r))return i[o+1](r);return i[t-1](r)}}function Yq(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Ir(n.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let c=2;c<t;c+=2){const d=i[c](r);let f=i[c+1](r);const p=Array.isArray(f);if(p&&(f=IG(f)),d>=o)return c===2?f:p?Zq(s,o,a,l,d,f):sc(s,o,a,l,d,f);a=d,l=f}return l}}function Kq(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ir(n.args[s]);switch(t){case se.ToString:return s=>{const o=r[0](s);return n.args[0].type===_r?m_(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function sc(n,e,t,i,r,s){const o=r-t;if(o===0)return i;const a=e-t,l=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return i+l*(s-i)}function Zq(n,e,t,i,r,s){if(r-t===0)return i;const a=ib(i),l=ib(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const d=[sc(n,e,t,a[0],r,l[0]),sc(n,e,t,a[1],r,l[1]),a[2]+sc(n,e,t,0,r,c),sc(n,e,t,i[3],r,s[3])];return AG(d)}function Jq(n){return!0}function Qq(n){const e=oR(),t=e8(n,e),i=lR();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=aR(r.getGeometry())),t(i)}}function wb(n){const e=oR(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=Y0(n[o],e);const r=lR(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){const d=i[c](r);d&&(s[l]=d,l+=1)}return s.length=l,s}}function e8(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const s=n[r],o="filter"in s?Gs(s.filter,ai,e):Jq;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Y0(s.style[c],e)}else a=[Y0(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=i[a].filter;if(l(r)&&!(n[a].else&&o)){o=!0;for(const c of i[a].styles){const d=c(r);d&&s.push(d)}}}return s}}function Y0(n,e){const t=Sc(n,"",e),i=Rc(n,"",e),r=t8(n,e),s=n8(n,e),o=yi(n,"z-index",e);if(!t&&!i&&!r&&!s&&!Lo(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new fn;return function(l){let c=!0;if(t){const d=t(l);d&&(c=!1),a.setFill(d)}if(i){const d=i(l);d&&(c=!1),a.setStroke(d)}if(r){const d=r(l);d&&(c=!1),a.setText(d)}if(s){const d=s(l);d&&(c=!1),a.setImage(d)}return o&&a.setZIndex(o(l)),c?null:a}}function Sc(n,e,t){let i;if(e+"fill-pattern-src"in n)i=o8(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;i=E_(n,e+"fill-color",t)}if(!i)return null;const r=new Qn;return function(s){const o=i(s);return o===p_?null:(r.setColor(o),r)}}function Rc(n,e,t){const i=yi(n,e+"stroke-width",t),r=E_(n,e+"stroke-color",t);if(!i&&!r)return null;const s=Cs(n,e+"stroke-line-cap",t),o=Cs(n,e+"stroke-line-join",t),a=uR(n,e+"stroke-line-dash",t),l=yi(n,e+"stroke-line-dash-offset",t),c=yi(n,e+"stroke-miter-limit",t),d=new li;return function(f){if(r){const p=r(f);if(p===p_)return null;d.setColor(p)}if(i&&d.setWidth(i(f)),s){const p=s(f);if(p!=="butt"&&p!=="round"&&p!=="square")throw new Error("Expected butt, round, or square line cap");d.setLineCap(p)}if(o){const p=o(f);if(p!=="bevel"&&p!=="round"&&p!=="miter")throw new Error("Expected bevel, round, or miter line join");d.setLineJoin(p)}return a&&d.setLineDash(a(f)),l&&d.setLineDashOffset(l(f)),c&&d.setMiterLimit(c(f)),d}}function t8(n,e){const t="text-",i=Cs(n,t+"value",e);if(!i)return null;const r=Sc(n,t,e),s=Sc(n,t+"background-",e),o=Rc(n,t,e),a=Rc(n,t+"background-",e),l=Cs(n,t+"font",e),c=yi(n,t+"max-angle",e),d=yi(n,t+"offset-x",e),f=yi(n,t+"offset-y",e),p=Dl(n,t+"overflow",e),y=Cs(n,t+"placement",e),m=yi(n,t+"repeat",e),v=Sp(n,t+"scale",e),x=Dl(n,t+"rotate-with-view",e),w=yi(n,t+"rotation",e),E=Cs(n,t+"align",e),S=Cs(n,t+"justify",e),C=Cs(n,t+"baseline",e),R=Dl(n,t+"keep-upright",e),F=uR(n,t+"padding",e),O=Rp(n,t+"declutter-mode"),N=new Tp({declutterMode:O});return function(L){if(N.setText(i(L)),r&&N.setFill(r(L)),s&&N.setBackgroundFill(s(L)),o&&N.setStroke(o(L)),a&&N.setBackgroundStroke(a(L)),l&&N.setFont(l(L)),c&&N.setMaxAngle(c(L)),d&&N.setOffsetX(d(L)),f&&N.setOffsetY(f(L)),p&&N.setOverflow(p(L)),y){const z=y(L);if(z!=="point"&&z!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(z)}if(m&&N.setRepeat(m(L)),v&&N.setScale(v(L)),x&&N.setRotateWithView(x(L)),w&&N.setRotation(w(L)),E){const z=E(L);if(z!=="left"&&z!=="center"&&z!=="right"&&z!=="end"&&z!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(z)}if(S){const z=S(L);if(z!=="left"&&z!=="right"&&z!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(z)}if(C){const z=C(L);if(z!=="bottom"&&z!=="top"&&z!=="middle"&&z!=="alphabetic"&&z!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(z)}return F&&N.setPadding(F(L)),R&&N.setKeepUpright(R(L)),N}}function n8(n,e){return"icon-src"in n?i8(n,e):"shape-points"in n?r8(n,e):"circle-radius"in n?s8(n,e):null}function i8(n,e){const t="icon-",i=t+"src",r=cR(n[i],i),s=If(n,t+"anchor",e),o=Sp(n,t+"scale",e),a=yi(n,t+"opacity",e),l=If(n,t+"displacement",e),c=yi(n,t+"rotation",e),d=Dl(n,t+"rotate-with-view",e),f=Eb(n,t+"anchor-origin"),p=Cb(n,t+"anchor-x-units"),y=Cb(n,t+"anchor-y-units"),m=c8(n,t+"color"),v=l8(n,t+"cross-origin"),x=u8(n,t+"offset"),w=Eb(n,t+"offset-origin"),E=Af(n,t+"width"),S=Af(n,t+"height"),C=a8(n,t+"size"),R=Rp(n,t+"declutter-mode"),F=new $a({src:r,anchorOrigin:f,anchorXUnits:p,anchorYUnits:y,color:m,crossOrigin:v,offset:x,offsetOrigin:w,height:S,width:E,size:C,declutterMode:R});return function(O){return a&&F.setOpacity(a(O)),l&&F.setDisplacement(l(O)),c&&F.setRotation(c(O)),d&&F.setRotateWithView(d(O)),o&&F.setScale(o(O)),s&&F.setAnchor(s(O)),F}}function r8(n,e){const t="shape-",i=t+"points",r=t+"radius",s=K0(n[i],i),o=K0(n[r],r),a=Sc(n,t,e),l=Rc(n,t,e),c=Sp(n,t+"scale",e),d=If(n,t+"displacement",e),f=yi(n,t+"rotation",e),p=Dl(n,t+"rotate-with-view",e),y=Af(n,t+"radius2"),m=Af(n,t+"angle"),v=Rp(n,t+"declutter-mode"),x=new Cp({points:s,radius:o,radius2:y,angle:m,declutterMode:v});return function(w){return a&&x.setFill(a(w)),l&&x.setStroke(l(w)),d&&x.setDisplacement(d(w)),f&&x.setRotation(f(w)),p&&x.setRotateWithView(p(w)),c&&x.setScale(c(w)),x}}function s8(n,e){const t="circle-",i=Sc(n,t,e),r=Rc(n,t,e),s=yi(n,t+"radius",e),o=Sp(n,t+"scale",e),a=If(n,t+"displacement",e),l=yi(n,t+"rotation",e),c=Dl(n,t+"rotate-with-view",e),d=Rp(n,t+"declutter-mode"),f=new zo({radius:5,declutterMode:d});return function(p){return s&&f.setRadius(s(p)),i&&f.setFill(i(p)),r&&f.setStroke(r(p)),a&&f.setDisplacement(a(p)),l&&f.setRotation(l(p)),c&&f.setRotateWithView(c(p)),o&&f.setScale(o(p)),f}}function yi(n,e,t){if(!(e in n))return;const i=Gs(n[e],yt,t);return function(r){return K0(i(r),e)}}function Cs(n,e,t){if(!(e in n))return null;const i=Gs(n[e],mi,t);return function(r){return cR(i(r),e)}}function o8(n,e,t){const i=Cs(n,e+"pattern-src",t),r=bb(n,e+"pattern-offset",t),s=bb(n,e+"pattern-size",t),o=E_(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function Dl(n,e,t){if(!(e in n))return null;const i=Gs(n[e],ai,t);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function E_(n,e,t){if(!(e in n))return null;const i=Gs(n[e],_r,t);return function(r){return hR(i(r),e)}}function uR(n,e,t){if(!(e in n))return null;const i=Gs(n[e],Ua,t);return function(r){return eh(i(r),e)}}function If(n,e,t){if(!(e in n))return null;const i=Gs(n[e],Ua,t);return function(r){const s=eh(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function bb(n,e,t){if(!(e in n))return null;const i=Gs(n[e],Ua,t);return function(r){return dR(i(r),e)}}function Sp(n,e,t){if(!(e in n))return null;const i=Gs(n[e],Ua|yt,t);return function(r){return h8(i(r),e)}}function Af(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function a8(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Jn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function l8(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Eb(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Cb(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function u8(n,e){const t=n[e];if(t!==void 0)return eh(t,e)}function Rp(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function c8(n,e){const t=n[e];if(t!==void 0)return hR(t,e)}function eh(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function cR(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function K0(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function hR(n,e){if(typeof n=="string")return n;const t=eh(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function dR(n,e){const t=eh(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function h8(n,e){return typeof n=="number"?n:dR(n,e)}const hr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Tb(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,d=a?a[0]:0,f=a?a[1]:0;let p=n[0]+l/2+d,y=n[2]-l/2+d,m=n[1]+c/2+f,v=n[3]-c/2+f;p>y&&(p=(y+p)/2,y=p),m>v&&(m=(v+m)/2,v=m);let x=Qt(i[0],p,y),w=Qt(i[1],m,v);if(o&&t&&r){const E=30*r;x+=-E*Math.log(1+Math.max(0,p-i[0])/E)+E*Math.log(1+Math.max(0,i[0]-y)/E),w+=-E*Math.log(1+Math.max(0,m-i[1])/E)+E*Math.log(1+Math.max(0,i[1]-v)/E)}return[x,w]}}function d8(n){return n}function fR(n){return Math.pow(n,3)}function du(n){return 1-fR(1-n)}function f8(n){return 3*n*n-2*n*n*n}function p8(n){return n}function pR(n,e,t,i){let r=0;const s=n[t-i],o=n[t-i+1];let a=0,l=0;for(;e<t;e+=i){const c=n[e]-s,d=n[e+1]-o;r+=l*c-a*d,a=c,l=d}return r/2}function gR(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=pR(n,e,a,i),e=a}return r}function g8(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=gR(n,e,a,i),e=a[a.length-1]}return r}function Sb(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],c=n[t]-a,d=n[t+1]-l;let f;if(c===0&&d===0)f=e;else{const p=((r-a)*c+(s-l)*d)/(c*c+d*d);if(p>1)f=t;else if(p>0){for(let y=0;y<i;++y)o[y]=Li(n[e+y],n[t+y],p);o.length=i;return}else f=e}for(let p=0;p<i;++p)o[p]=n[f+p];o.length=i}function C_(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=Ra(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function T_(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=C_(n,e,a,i,r),e=a}return r}function m8(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=T_(n,e,a,i,r),e=a[a.length-1]}return r}function S_(n,e,t,i,r,s,o,a,l,c,d){if(e==t)return c;let f,p;if(r===0){if(p=Ra(o,a,n[e],n[e+1]),p<c){for(f=0;f<i;++f)l[f]=n[e+f];return l.length=i,p}return c}d=d||[NaN,NaN];let y=e+i;for(;y<t;)if(Sb(n,y-i,y,i,o,a,d),p=Ra(o,a,d[0],d[1]),p<c){for(c=p,f=0;f<i;++f)l[f]=d[f];l.length=i,y+=i}else y+=i*Math.max((Math.sqrt(p)-Math.sqrt(c))/r|0,1);if(s&&(Sb(n,t-i,e,i,o,a,d),p=Ra(o,a,d[0],d[1]),p<c)){for(c=p,f=0;f<i;++f)l[f]=d[f];l.length=i}return c}function R_(n,e,t,i,r,s,o,a,l,c,d){d=d||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const y=t[f];c=S_(n,e,y,i,r,s,o,a,l,c,d),e=y}return c}function y8(n,e,t,i,r,s,o,a,l,c,d){d=d||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const y=t[f];c=R_(n,e,y,i,r,s,o,a,l,c,d),e=y[y.length-1]}return c}class Ic extends Va{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Ic(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<ja(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),S_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return pR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=bp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ic(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xp(this.flatCoordinates,0,e,this.stride),this.changed()}}function _8(n,e,t,i,r){return!fS(r,function(o){return!ya(n,e,t,i,o[0],o[1])})}function ya(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],d=n[e+1];l<=s?d>s&&(c-a)*(s-l)-(r-a)*(d-l)>0&&o++:d<=s&&(c-a)*(s-l)-(r-a)*(d-l)<0&&o--,a=c,l=d}return o!==0}function I_(n,e,t,i,r,s){if(t.length===0||!ya(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(ya(n,t[o-1],t[o],i,r,s))return!1;return!0}function v8(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(I_(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function A_(n,e,t,i,r,s,o){let a,l,c,d,f,p,y;const m=r[s+1],v=[];for(let E=0,S=t.length;E<S;++E){const C=t[E];for(d=n[C-i],p=n[C-i+1],a=e;a<C;a+=i)f=n[a],y=n[a+1],(m<=p&&y<=m||p<=m&&m<=y)&&(c=(m-p)/(y-p)*(f-d)+d,v.push(c)),d=f,p=y}let x=NaN,w=-1/0;for(v.sort(Hr),d=v[0],a=1,l=v.length;a<l;++a){f=v[a];const E=Math.abs(f-d);E>w&&(c=(d+f)/2,I_(n,e,t,i,c,m)&&(x=c,w=E)),d=f}return isNaN(x)&&(x=r[s]),o?(o.push(x,m,w),o):[x,m,w]}function mR(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=A_(n,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function yR(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function Ip(n,e,t,i,r,s){return s=s??dS(ir(),n,e,t,i),on(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:yR(n,e,t,i,function(o,a){return sU(r,o,a)}):!1}function x8(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(Ip(n,e,t[s],i,r))return!0;e=t[s]}return!1}function _R(n,e,t,i,r){return!!(Ip(n,e,t,i,r)||ya(n,e,t,i,r[0],r[1])||ya(n,e,t,i,r[0],r[3])||ya(n,e,t,i,r[2],r[1])||ya(n,e,t,i,r[2],r[3]))}function vR(n,e,t,i,r){if(!_R(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(_8(n,t[s-1],t[s],i,r)&&!Ip(n,t[s-1],t[s],i,r))return!1;return!0}function w8(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(vR(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function b8(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function P_(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function M_(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=P_(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function xR(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!M_(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Pf(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=P_(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&b8(n,e,a,i),e=a}return e}function Z0(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=Pf(n,e,t[s],i,r);return e}function wR(n,e){const t=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=P_(n,i,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,i=l}return t}class Ar extends Va{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?tr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ar(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ja(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(T_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),R_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return I_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return gR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Pf(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,wc(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=$i(this.getExtent());this.flatInteriorPoint_=A_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ic(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Ic(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;M_(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Pf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=__(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Ar(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return vR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Kc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Rb(n){if(Ha(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new Ar(s,"XY",[s.length])}function L_(n,e,t,i){const r=lt(e)/t[0],s=pn(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function k_(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Qt(i,t/2,e*2)}function E8(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],c=n[n.length-1],d=t?L_(l,t,o,i):l;if(a)return e?k_(r,d,c):Qt(r,c,d);const f=Math.min(d,r),p=Math.floor(mp(n,f,s));return n[p]>d&&p<n.length-1?n[p+1]:n[p]}}}function C8(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const d=r?L_(e,r,l,s):e;if(c)return i?k_(o,d,t):Qt(o,t,d);const f=1e-9,p=Math.ceil(Math.log(e/d)/Math.log(n)-f),y=-a*(.5-f)+.5,m=Math.min(d,o),v=Math.floor(Math.log(e/m)/Math.log(n)+y),x=Math.max(p,v),w=e/Math.pow(n,x);return Qt(w,t,d)}}}function Ib(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=i?L_(n,i,a,r):n;return!t||!l?Qt(s,e,c):k_(s,c,e)}}}function O_(n){if(n!==void 0)return 0}function Ab(n){if(n!==void 0)return n}function T8(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function S8(n){const e=Po(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const bR=42,F_=256,Gm=0;class vr extends ss{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=u_(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&TS(),e.center&&(e.center=Es(e.center,this.projection_)),e.extent&&(e.extent=Gr(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in hr)delete t[a];this.setProperties(t,!0);const i=I8(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=R8(e),s=i.constraint,o=A8(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Es(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Es(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const d=arguments[r];d.center&&this.setCenterInternal(d.center),d.zoom!==void 0?this.setZoom(d.zoom):d.resolution&&this.setResolution(d.resolution),d.rotation!==void 0&&this.setRotation(d.rotation)}if(r===t){i&&Rd(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const d=arguments[r],f={start:s,complete:!1,anchor:d.anchor,duration:d.duration!==void 0?d.duration:1e3,easing:d.easing||f8,callback:i};if(d.center&&(f.sourceCenter=o,f.targetCenter=d.center.slice(),o=f.targetCenter),d.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(d.zoom),a=f.targetResolution):d.resolution&&(f.sourceResolution=a,f.targetResolution=d.resolution,a=f.targetResolution),d.rotation!==void 0){f.sourceRotation=l;const p=Ol(d.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+p,l=f.targetRotation}P8(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(Xt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Xt.ANIMATING]>0}getInteracting(){return this.hints_[Xt.INTERACTING]>0}cancelAnimations(){this.setHint(Xt.ANIMATING,-this.hints_[Xt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Rd(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let d=l.duration>0?c/l.duration:1;d>=1?(l.complete=!0,d=1):s=!1;const f=l.easing(d);if(l.sourceCenter){const p=l.sourceCenter[0],y=l.sourceCenter[1],m=l.targetCenter[0],v=l.targetCenter[1];this.nextCenter_=l.targetCenter;const x=p+f*(m-p),w=y+f*(v-y);this.targetCenter_=[x,w]}if(l.sourceResolution&&l.targetResolution){const p=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const y=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(p,0,y,!0);this.targetCenter_=this.calculateCenterZoom(m,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const p=f===1?Ol(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const y=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(y,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Xt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Rd(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],r_(i,e-this.getRotation()),pU(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&U0(e,this.getProjection())}getCenterInternal(){return this.get(hr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return h_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Rt(t,"The view center is not defined");const i=this.getResolution();Rt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Rt(r!==void 0,"The view rotation is not defined"),mf(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(hr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Gr(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=lt(e)/t[0],r=pn(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(hr.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=qm(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=mp(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Qt(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,Qt(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Rt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Rt(!Ha(e),"Cannot fit empty extent provided as `geometry`");const r=Gr(e,this.getProjection());i=Rb(r)}else if(e.getType()==="Circle"){const r=Gr(e.getExtent(),this.getProjection());i=Rb(r),i.rotate(this.getRotation(),$i(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,d=-1/0;for(let f=0,p=s.length;f<p;f+=o){const y=s[f]*i-s[f+1]*r,m=s[f]*r+s[f+1]*i;a=Math.min(a,y),l=Math.min(l,m),c=Math.max(c,y),d=Math.max(d,m)}return[a,l,c,d]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),d=Math.sin(c),f=Math.cos(c),p=$i(a);p[0]+=(r[1]-r[3])/2*l,p[1]+=(r[0]-r[2])/2*l;const y=p[0]*f-p[1]*d,m=p[1]*f+p[0]*d,v=this.getConstrainedCenter([y,m],l),x=t.callback?t.callback:vc;t.duration!==void 0?this.animateInternal({resolution:l,center:v,duration:t.duration,easing:t.easing},x):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),Rd(x,!0))}centerOn(e,t,i){this.centerOnInternal(Es(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(qm(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=qm(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=U0(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Es(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Es(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Es(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(hr.ROTATION)!==r&&this.set(hr.ROTATION,r),this.get(hr.RESOLUTION)!==o&&(this.set(hr.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(hr.CENTER)||!_f(this.get(hr.CENTER),a))&&this.set(hr.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!_f(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:du,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Xt.INTERACTING,1)}endInteraction(e,t,i){i=i&&Es(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Xt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Rd(n,e){setTimeout(function(){n(e)},0)}function R8(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Tb(n.extent,n.constrainOnlyCenter,t)}const e=u_(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Tb(t,!1,!1)}return d8}function I8(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:Gm,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,d=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,p=u_(n.projection,"EPSG:3857"),y=p.getExtent();let m=n.constrainOnlyCenter,v=n.extent;if(!c&&!v&&p.isGlobal()&&(m=!1,v=y),n.resolutions!==void 0){const x=n.resolutions;t=x[o],i=x[a]!==void 0?x[a]:x[x.length-1],n.constrainResolution?e=E8(x,d,!m&&v,f):e=Ib(t,i,d,!m&&v,f)}else{const w=(y?Math.max(lt(y),pn(y)):360*ko.degrees/p.getMetersPerUnit())/F_/Math.pow(2,Gm),E=w/Math.pow(2,28-Gm);t=n.maxResolution,t!==void 0?o=0:t=w/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=w/Math.pow(l,a):i=E),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=C8(l,t,i,d,!m&&v,f):e=Ib(t,i,d,!m&&v,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function A8(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?S8():t===!1?Ab:typeof t=="number"?T8(t):Ab}return O_}function P8(n){return!(n.sourceCenter&&n.targetCenter&&!_f(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function qm(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,d=l*s+a*o;return[c,d]}const Ft={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ER extends ss{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ft.OPACITY]=e.opacity!==void 0?e.opacity:1,Rt(typeof t[Ft.OPACITY]=="number","Layer opacity must be a number"),t[Ft.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ft.Z_INDEX]=e.zIndex,t[Ft.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ft.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ft.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ft.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Qt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ze()}getLayerStatesArray(e){return ze()}getExtent(){return this.get(Ft.EXTENT)}getMaxResolution(){return this.get(Ft.MAX_RESOLUTION)}getMinResolution(){return this.get(Ft.MIN_RESOLUTION)}getMinZoom(){return this.get(Ft.MIN_ZOOM)}getMaxZoom(){return this.get(Ft.MAX_ZOOM)}getOpacity(){return this.get(Ft.OPACITY)}getSourceState(){return ze()}getVisible(){return this.get(Ft.VISIBLE)}getZIndex(){return this.get(Ft.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ft.EXTENT,e)}setMaxResolution(e){this.set(Ft.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ft.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ft.MAX_ZOOM,e)}setMinZoom(e){this.set(Ft.MIN_ZOOM,e)}setOpacity(e){Rt(typeof e=="number","Layer opacity must be a number"),this.set(Ft.OPACITY,e)}setVisible(e){this.set(Ft.VISIBLE,e)}setZIndex(e){this.set(Ft.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class fu extends ER{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ft.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ft.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Bt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=_t(e,ke.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof vr?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return D_(r,t.viewState)&&(!s||on(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const i=e instanceof vr?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ft.MAP,e)}getMapInternal(){return this.get(Ft.MAP)}setMap(e){this.mapPrecomposeKey_&&(Bt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Bt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=_t(e,Ji.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=_t(this,ke.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Rt(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Ft.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function D_(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const Pb={RENDER_ORDER:"renderOrder"};class N_ extends fu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Pb.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new sR(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Pb.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?ZS:e;const t=M8(e);this.styleFunction_=e===null?void 0:iq(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function M8(n){if(n===void 0)return ZS;if(!n)return null;if(typeof n=="function"||n instanceof fn)return n;if(!Array.isArray(n))return wb([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof fn){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!(o instanceof fn))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return Qq(r)}return wb(n)}class th extends N_{constructor(e){super(e)}createRenderer(){return new wq(this)}}const Mb={ACTIVE:"active"};class pu extends ss{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Mb.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Mb.ACTIVE,e)}setMap(e){this.map_=e}}function L8(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:p8,center:n.getConstrainedCenter(r)})}}function z_(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:du})}const Id={SELECT:"select"};class Ad extends rr{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const Pd={};class B_ extends pu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:mG,this.addCondition_=e.addCondition?e.addCondition:nb,this.removeCondition_=e.removeCondition?e.removeCondition:nb,this.toggleCondition_=e.toggleCondition?e.toggleCondition:zS,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Na,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:k8(),this.features_=e.features||new Fi;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=Na;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Oe(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Oe(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Dn.ADD,this.boundAddFeature_),this.features_.addEventListener(Dn.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Dn.ADD,this.boundAddFeature_),this.features_.removeEventListener(Dn.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.findLayerOfFeature_(t);i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(i){if(i instanceof th&&i.getSource()&&i.getSource().hasFeature(e))return i})}getStyle(){return this.style_}applySelectedStyle_(e){const t=Oe(e);t in Pd||(Pd[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof B_&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const i=Oe(e);e.setStyle(Pd[i]),delete Pd[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Oe(e)]}selectFeatureInternal_(e,t,i){if(!(e instanceof Ns)||!this.filter_(e,t))return;const r=this.getFeatures();return r.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,t),r.push(e),i==null||i.push(e)),e}selectFeature(e){const t=this.findLayerOfFeature_(e);if(!this.layerFilter_(t))return!1;const i=this.selectFeatureInternal_(e,t);return i&&this.dispatchEvent(new Ad(Id.SELECT,[i],[],void 0)),!!i}removeFeatureInternal_(e,t){const i=this.getFeatures();if(!(!(e instanceof Ns)||!i.getArray().includes(e)))return i.remove(e),this.removeFeatureLayerAssociation_(e),t==null||t.push(e),e}deselectFeature(e){const t=this.removeFeatureInternal_(e);return t&&this.dispatchEvent(new Ad(Id.SELECT,[],[t],void 0)),!!t}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){hu(this.featureLayerAssociation_);const e=this.getFeatures(),t=e.getArray().slice();e.clear(),t.length!==0&&this.dispatchEvent(new Ad(Id.SELECT,[],t,void 0))}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){let d=!1;o.forEachFeatureAtPixel(e.pixel,(f,p)=>{if(d=!0,!!this.selectFeatureInternal_(f,p,c))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=a.getLength()-1;f>=0;--f){const p=a.item(f);(c.length>0&&!c.includes(p)||!d)&&this.removeFeatureInternal_(p,l)}}else o.forEachFeatureAtPixel(e.pixel,(d,f)=>{let p;if((i||r)&&(p=this.removeFeatureInternal_(d,l)),(t||r)&&!p&&(p=this.selectFeatureInternal_(d,f,c)),!!p)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(c.length>0||l.length>0)&&this.dispatchEvent(new Ad(Id.SELECT,c,l,e)),!0}}function k8(){const n=rq();return tr(n.Polygon,n.LineString),tr(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}const O8=({map:n,layer:e,onSelect:t})=>{const i=new B_({layers:[e],condition:gG,style:r=>{const s=r.get("originalStyle");return Array.isArray(s)?s:s?[s]:[]}});return n.addInteraction(i),t&&i.on("select",r=>{const s=r.selected;t(s)}),i},F8=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="36" viewBox="0 0 24 36">
  <path d="M12 0C7 0 3 4 3 9c0 7.5 9 27 9 27s9-19.5 9-27c0-5-4-9-9-9z" fill="#FF6600"/>
  <circle cx="12" cy="9" r="4" fill="#fff"/>
</svg>
`,D8=`data:image/svg+xml;base64,${btoa(F8)}`;new fn({fill:new Qn({color:"rgba(0, 0, 255, 0.1)"}),stroke:new li({color:"#3399CC",width:1}),image:new zo({radius:5,fill:new Qn({color:"#3399CC"}),stroke:new li({color:"#000",width:1})}),text:void 0});const N8=n=>{var r;const e=n.geohash.includes("http")?n.geohash.split("http://geohash.org/")[1]:n.geohash,{latitude:t,longitude:i}=vC.decode(e);return{type:"Point",coordinates:[i,t],label:(r=n.meta)==null?void 0:r.label,marker:(n==null?void 0:n.style)??D8,meta:n.meta}},CR=(n,e)=>n.find(t=>t.get("id")===e);var z8=8,B8={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},$8={"*":{type:"source"}},U8=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],G8={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},q8={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},W8={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},j8={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},H8={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},V8={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},X8={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Y8=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],K8={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Z8={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},J8={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Q8={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},eW={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tW={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nW={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},iW={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rW={type:"array",value:"*"},sW={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},oW={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},aW={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},lW={type:"array",value:"*",minimum:1},uW={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},cW={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},hW={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},dW={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},fW=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],pW={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},gW={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},mW={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},yW={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_W={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},vW={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xW={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},wW={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},bW={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},EW={"*":{type:"string"}},CW={$version:z8,$root:B8,sources:$8,source:U8,source_vector:G8,source_raster:q8,source_raster_dem:W8,source_geojson:j8,source_video:H8,source_image:V8,layer:X8,layout:Y8,layout_background:K8,layout_fill:Z8,layout_circle:J8,layout_heatmap:Q8,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:eW,layout_symbol:tW,layout_raster:nW,layout_hillshade:iW,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:rW,filter_operator:sW,geometry_type:oW,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:aW,expression:lW,light:uW,sky:cW,terrain:hW,projection:dW,paint:fW,paint_fill:pW,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:gW,paint_circle:mW,paint_heatmap:yW,paint_symbol:_W,paint_raster:vW,paint_hillshade:xW,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:wW,transition:bW,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:EW};const TW=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function SW(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return TW.forEach(i=>{i in e&&(t[i]=e[i])}),t}function TR(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=SW(n[t],e[n[t].ref]));return n}class Ur extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class $_{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new $_(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Ap={kind:"null"},fe={kind:"number"},st={kind:"string"},Xe={kind:"boolean"},Vr={kind:"color"},Pp={kind:"projectionDefinition"},Ia={kind:"object"},He={kind:"value"},RW={kind:"error"},Mp={kind:"collator"},Lp={kind:"formatted"},kp={kind:"padding"},Ac={kind:"colorArray"},Op={kind:"numberArray"},nh={kind:"resolvedImage"},Fp={kind:"variableAnchorOffsetCollection"};function Oi(n,e){return{kind:"array",itemType:n,N:e}}function Yt(n){if(n.kind==="array"){const e=Yt(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const IW=[Ap,fe,st,Xe,Vr,Pp,Lp,Ia,Oi(He),kp,Op,Ac,nh,Fp];function Pc(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Pc(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of IW)if(!Pc(t,e))return null}}return`Expected ${Yt(n)} but found ${Yt(e)} instead.`}function U_(n,e){return e.some(t=>t.kind===n.kind)}function Aa(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function oo(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const SR=.96422,RR=1,IR=.82521,AR=4/29,Nl=6/29,PR=3*Nl*Nl,AW=Nl*Nl*Nl,PW=Math.PI/180,MW=180/Math.PI;function MR(n){return n=n%360,n<0&&(n+=360),n}function LR([n,e,t,i]){n=Wm(n),e=Wm(e),t=Wm(t);let r,s;const o=jm((.2225045*n+.7168786*e+.0606169*t)/RR);n===e&&e===t?r=s=o:(r=jm((.4360747*n+.3850649*e+.1430804*t)/SR),s=jm((.0139322*n+.0971045*e+.7141733*t)/IR));const a=116*o-16;return[a<0?0:a,500*(r-o),200*(o-s),i]}function Wm(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function jm(n){return n>AW?Math.pow(n,1/3):n/PR+AR}function kR([n,e,t,i]){let r=(n+16)/116,s=isNaN(e)?r:r+e/500,o=isNaN(t)?r:r-t/200;return r=RR*Vm(r),s=SR*Vm(s),o=IR*Vm(o),[Hm(3.1338561*s-1.6168667*r-.4906146*o),Hm(-.9787684*s+1.9161415*r+.033454*o),Hm(.0719453*s-.2289914*r+1.4052427*o),i]}function Hm(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function Vm(n){return n>Nl?n*n*n:PR*(n-AR)}function LW(n){const[e,t,i,r]=LR(n),s=Math.sqrt(t*t+i*i);return[Math.round(s*1e4)?MR(Math.atan2(i,t)*MW):NaN,s,e,r]}function kW([n,e,t,i]){return n=isNaN(n)?0:n*PW,kR([t,Math.cos(n)*e,Math.sin(n)*e,i])}function OW([n,e,t,i]){n=MR(n),e/=100,t/=100;function r(s){const o=(s+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(o-3,9-o,1))}return[r(0),r(8),r(4),i]}const FW=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function OR(n,e){return FW(n,e)?n[e]:void 0}function DW(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=OR(NW,n);if(e){const[r,s,o]=e;return[r/255,s/255,o/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let o=1;return[Md(n.slice(o,o+=s)),Md(n.slice(o,o+=s)),Md(n.slice(o,o+=s)),Md(n.slice(o,o+s)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(r);if(s){const[o,a,l,c,d,f,p,y,m,v,x,w]=s,E=[c||" ",p||" ",v].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const S=[l,f,m].join(""),C=S==="%%%"?100:S===""?255:0;if(C){const R=[Sl(+a/C,0,1),Sl(+d/C,0,1),Sl(+y/C,0,1),x?Lb(+x,w):1];if(kb(R))return R}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,s,o,a,l,c,d,f,p]=i,y=[o||" ",l||" ",d].join("");if(y==="  "||y==="  /"||y===",,"||y===",,,"){const m=[+s,Sl(+a,0,100),Sl(+c,0,100),f?Lb(+f,p):1];if(kb(m))return OW(m)}}}function Md(n){return parseInt(n.padEnd(2,n),16)/255}function Lb(n,e){return Sl(e?n/100:n,0,1)}function Sl(n,e,t){return Math.min(Math.max(e,n),t)}function kb(n){return!n.some(Number.isNaN)}const NW={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Pa(n,e,t){return n+t*(e-n)}function Mc(n,e,t){return n.map((i,r)=>Pa(i,e[r],t))}class Lt{constructor(e,t,i,r=1,s=!0){this.r=e,this.g=t,this.b=i,this.a=r,s||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Lt)return e;if(typeof e!="string")return;const t=DW(e);if(t)return new Lt(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,s=r||1/0;return this.overwriteGetter("rgb",[e/s,t/s,i/s,r])}get hcl(){return this.overwriteGetter("hcl",LW(this.rgb))}get lab(){return this.overwriteGetter("lab",LR(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(s=>Math.round(s*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[s,o,a,l]=Mc(e.rgb,t.rgb,i);return new Lt(s,o,a,l,!1)}case"hcl":{const[s,o,a,l]=e.hcl,[c,d,f,p]=t.hcl;let y,m;if(!isNaN(s)&&!isNaN(c)){let S=c-s;c>s&&S>180?S-=360:c<s&&s-c>180&&(S+=360),y=s+i*S}else isNaN(s)?isNaN(c)?y=NaN:(y=c,(a===1||a===0)&&(m=d)):(y=s,(f===1||f===0)&&(m=o));const[v,x,w,E]=kW([y,m??Pa(o,d,i),Pa(a,f,i),Pa(l,p,i)]);return new Lt(v,x,w,E,!1)}case"lab":{const[s,o,a,l]=kR(Mc(e.lab,t.lab,i));return new Lt(s,o,a,l,!1)}}}}Lt.black=new Lt(0,0,0,1);Lt.white=new Lt(1,1,1,1);Lt.transparent=new Lt(0,0,0,0);Lt.red=new Lt(1,0,0,1);class G_{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zW=["bottom","center","top"];class J0{constructor(e,t,i,r,s,o){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=s,this.verticalAlign=o}}class ks{constructor(e){this.sections=e}static fromString(e){return new ks([new J0(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof ks?e:ks.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Er{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Er)return e;if(typeof e=="number")return new Er([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Er(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Er(Mc(e.values,t.values,i))}}class Cr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Cr)return e;if(typeof e=="number")return new Cr([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Cr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Cr(Mc(e.values,t.values,i))}}class Di{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Di)return e;if(typeof e=="string"){const i=Lt.parse(e);return i?new Di([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Lt.parse(i);if(!r)return;t.push(r)}return new Di(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const s=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let o=0;o<e.values.length;o++)s.push(Lt.interpolate(e.values[o],t.values[o],i,r));return new Di(s)}}class Jt extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const BW=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Xr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Xr)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!BW.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new Xr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,s=t.values;if(r.length!==s.length)throw new Jt(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let a=0;a<r.length;a+=2){if(r[a]!==s[a])throw new Jt(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${s[a]}`);o.push(r[a]);const[l,c]=r[a+1],[d,f]=s[a+1];o.push([Pa(l,d,i),Pa(c,f,i)])}return new Xr(o)}}class Bo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Bo({name:e,available:!1}):null}}class xr{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new xr(e,t,i)}static parse(e){if(e instanceof xr)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new xr(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new xr(e.from,e.to,e.transition);if(typeof e=="string")return new xr(e,e,1)}}function FR(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Lc(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof xr||n instanceof Lt||n instanceof G_||n instanceof ks||n instanceof Er||n instanceof Cr||n instanceof Di||n instanceof Xr||n instanceof Bo)return!0;if(Array.isArray(n)){for(const e of n)if(!Lc(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Lc(n[e]))return!1;return!0}else return!1}function xn(n){if(n===null)return Ap;if(typeof n=="string")return st;if(typeof n=="boolean")return Xe;if(typeof n=="number")return fe;if(n instanceof Lt)return Vr;if(n instanceof xr)return Pp;if(n instanceof G_)return Mp;if(n instanceof ks)return Lp;if(n instanceof Er)return kp;if(n instanceof Cr)return Op;if(n instanceof Di)return Ac;if(n instanceof Xr)return Fp;if(n instanceof Bo)return nh;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=xn(i);if(!t)t=r;else{if(t===r)continue;t=He;break}}return Oi(t||He,e)}else return Ia}function uc(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Lt||n instanceof xr||n instanceof ks||n instanceof Er||n instanceof Cr||n instanceof Di||n instanceof Xr||n instanceof Bo?n.toString():JSON.stringify(n)}class su{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Lc(e[1]))return t.error("invalid value");const i=e[1];let r=xn(i);const s=t.expectedType;return r.kind==="array"&&r.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(r=s),new su(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ld={string:st,number:fe,boolean:Xe,object:Ia};class wr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const s=e[0];if(s==="array"){let a;if(e.length>2){const c=e[1];if(typeof c!="string"||!(c in Ld)||c==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Ld[c],i++}else a=He;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);l=e[2],i++}r=Oi(a,l)}else{if(!Ld[s])throw new Error(`Types doesn't contain name = ${s}`);r=Ld[s]}const o=[];for(;i<e.length;i++){const a=t.parse(e[i],i,He);if(!a)return null;o.push(a)}return new wr(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(Pc(this.type,xn(i))){if(t===this.args.length-1)throw new Jt(`Expected value to be of type ${Yt(this.type)}, but found ${Yt(xn(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Ob={"to-boolean":Xe,"to-color":Vr,"to-number":fe,"to-string":st};class Ro{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!Ob[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=Ob[i],s=[];for(let o=1;o<e.length;o++){const a=t.parse(e[o],o,He);if(!a)return null;s.push(a)}return new Ro(r,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Lt)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=FR(t[0],t[1],t[2],t[3]),!i))return new Lt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Jt(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Er.parse(t);if(r)return r}throw new Jt(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Cr.parse(t);if(r)return r}throw new Jt(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Di.parse(t);if(r)return r}throw new Jt(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Xr.parse(t);if(r)return r}throw new Jt(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Jt(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return ks.fromString(uc(this.args[0].evaluate(e)));case"resolvedImage":return Bo.fromString(uc(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return uc(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const $W=["Unknown","Point","LineString","Polygon"];class DR{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$W[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Lt.parse(e),this._parseColorCache.set(e,t)),t}}class Dp{constructor(e,t,i=[],r,s=new $_,o=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=s,this.errors=o,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,s={}){return t?this.concat(t,i,r)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,s,o){return o==="assert"?new wr(s,[r]):o==="coerce"?new Ro(s,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[r];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,l=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")o=i(o,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(l.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(l.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(l.kind)||a.kind==="colorArray"&&["value","string","array"].includes(l.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(l.kind))o=i(o,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(o instanceof su)&&o.type.kind!=="resolvedImage"&&this._isConstant(o)){const a=new DR;try{o=new su(o.type,o.evaluate(a))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,s=i?this.scope.concat(i):this.scope;return new Dp(this.registry,this._isConstant,r,t||null,s,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Ur(i,e))}checkSubtype(e,t){const i=Pc(e,t);return i&&this.error(i),i}}class Np{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let s=1;s<e.length-1;s+=2){const o=e[s];if(typeof o!="string")return t.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=t.parse(e[s+1],s+1);if(!a)return null;i.push([o,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new Np(i,r):null}outputDefined(){return this.result.outputDefined()}}class zp{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new zp(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class q_{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,fe),r=t.parse(e[2],2,Oi(t.expectedType||He));if(!i||!r)return null;const s=r.type;return new q_(s.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Jt(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Jt(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Jt(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class W_{constructor(e,t){this.type=Xe,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,He),r=t.parse(e[2],2,He);return!i||!r?null:U_(i.type,[Xe,st,fe,Ap,He])?new W_(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Aa(t,["boolean","string","number","null"]))throw new Jt(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(xn(t))} instead.`);if(!Aa(i,["string","array"]))throw new Jt(`Expected second argument to be of type array or string, but found ${Yt(xn(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Mf{constructor(e,t,i){this.type=fe,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,He),r=t.parse(e[2],2,He);if(!i||!r)return null;if(!U_(i.type,[Xe,st,fe,Ap,He]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(i.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,fe);return s?new Mf(i,r,s):null}else return new Mf(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Aa(t,["boolean","string","number","null"]))throw new Jt(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(xn(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Aa(i,["string"])){const s=i.indexOf(t,r);return s===-1?-1:[...i.slice(0,s)].length}else{if(Aa(i,["array"]))return i.indexOf(t,r);throw new Jt(`Expected second argument to be of type array or string, but found ${Yt(xn(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class j_{constructor(e,t,i,r,s,o){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=s,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const s={},o=[];for(let c=2;c<e.length-1;c+=2){let d=e[c];const f=e[c+1];Array.isArray(d)||(d=[d]);const p=t.concat(c);if(d.length===0)return p.error("Expected at least one branch label.");for(const m of d){if(typeof m!="number"&&typeof m!="string")return p.error("Branch labels must be numbers or strings.");if(typeof m=="number"&&Math.abs(m)>Number.MAX_SAFE_INTEGER)return p.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof m=="number"&&Math.floor(m)!==m)return p.error("Numeric branch labels must be integer values.");if(!i)i=xn(m);else if(p.checkSubtype(i,xn(m)))return null;if(typeof s[String(m)]<"u")return p.error("Branch labels must be unique.");s[String(m)]=o.length}const y=t.parse(f,c,r);if(!y)return null;r=r||y.type,o.push(y)}const a=t.parse(e[1],1,He);if(!a)return null;const l=t.parse(e[e.length-1],e.length-1,r);return!l||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new j_(i,r,a,s,o,l)}evaluate(e){const t=this.input.evaluate(e);return(xn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class H_{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const a=t.parse(e[o],o,Xe);if(!a)return null;const l=t.parse(e[o+1],o+1,i);if(!l)return null;r.push([a,l]),i=i||l.type}const s=t.parse(e[e.length-1],e.length-1,i);if(!s)return null;if(!i)throw new Error("Can't infer output type");return new H_(i,r,s)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Lf{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,He),r=t.parse(e[2],2,fe);if(!i||!r)return null;if(!U_(i.type,[Oi(He),st,He]))return t.error(`Expected first argument to be of type array or string, but found ${Yt(i.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,fe);return s?new Lf(i.type,i,r,s):null}else return new Lf(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Aa(t,["string"]))return[...t].slice(i,r).join("");if(Aa(t,["array"]))return t.slice(i,r);throw new Jt(`Expected first argument to be of type array or string, but found ${Yt(xn(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function NR(n,e){const t=n.length-1;let i=0,r=t,s=0,o,a;for(;i<=r;)if(s=Math.floor((i+r)/2),o=n[s],a=n[s+1],o<=e){if(s===t||e<a)return s;i=s+1}else if(o>e)r=s-1;else throw new Jt("Input is not a number.");return 0}class Bp{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,s]of i)this.labels.push(r),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,fe);if(!i)return null;const r=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let o=1;o<e.length;o+=2){const a=o===1?-1/0:e[o],l=e[o+1],c=o,d=o+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);const f=t.parse(l,d,s);if(!f)return null;s=s||f.type,r.push([a,f])}return new Bp(s,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const s=t.length;if(r>=t[s-1])return i[s-1].evaluate(e);const o=NR(t,r);return i[o].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function UW(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xm,Fb;function GW(){if(Fb)return Xm;Fb=1,Xm=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var s=this.sampleCurveX(i)-e;if(Math.abs(s)<t)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i=i-s/o}var a=0,l=1;for(i=e,r=0;r<20&&(s=this.sampleCurveX(i),!(Math.abs(s-e)<t));r++)e>s?a=i:l=i,i=(l-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Xm}var qW=GW(),WW=UW(qW);class Yr{constructor(e,t,i,r,s){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let s=0;if(e.name==="exponential")s=Ym(t,e.base,i,r);else if(e.name==="linear")s=Ym(t,1,i,r);else if(e.name==="cubic-bezier"){const o=e.controlPoints;s=new WW(o[0],o[1],o[2],o[3]).solve(Ym(t,1,i,r))}return s}static parse(e,t){let[i,r,s,...o]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const c=r[1];if(typeof c!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:c}}else if(r[0]==="cubic-bezier"){const c=r.slice(1);if(c.length!==4||c.some(d=>typeof d!="number"||d<0||d>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:c}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,fe),!s)return null;const a=[];let l=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=Ac?l=Vr:t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(let c=0;c<o.length;c+=2){const d=o[c],f=o[c+1],p=c+3,y=c+4;if(typeof d!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(a.length&&a[a.length-1][0]>=d)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);const m=t.parse(f,y,l);if(!m)return null;l=l||m.type,a.push([d,m])}return!oo(l,fe)&&!oo(l,Pp)&&!oo(l,Vr)&&!oo(l,kp)&&!oo(l,Op)&&!oo(l,Ac)&&!oo(l,Fp)&&!oo(l,Oi(fe))?t.error(`Type ${Yt(l)} is not interpolatable.`):new Yr(l,i,r,s,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const s=t.length;if(r>=t[s-1])return i[s-1].evaluate(e);const o=NR(t,r),a=t[o],l=t[o+1],c=Yr.interpolationFactor(this.interpolation,r,a,l),d=i[o].evaluate(e),f=i[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Pa(d,f,c);case"color":return Lt.interpolate(d,f,c);case"padding":return Er.interpolate(d,f,c);case"colorArray":return Di.interpolate(d,f,c);case"numberArray":return Cr.interpolate(d,f,c);case"variableAnchorOffsetCollection":return Xr.interpolate(d,f,c);case"array":return Mc(d,f,c);case"projectionDefinition":return xr.interpolate(d,f,c)}case"interpolate-hcl":switch(this.type.kind){case"color":return Lt.interpolate(d,f,c,"hcl");case"colorArray":return Di.interpolate(d,f,c,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Lt.interpolate(d,f,c,"lab");case"colorArray":return Di.interpolate(d,f,c,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Ym(n,e,t,i){const r=i-t,s=n-t;return r===0?0:e===1?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}class kc{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const s=[];for(const a of e.slice(1)){const l=t.parse(a,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,s.push(l)}if(!i)throw new Error("No output type");return r&&s.some(a=>Pc(r,a.type))?new kc(He,s):new kc(i,s)}evaluate(e){let t=null,i=0,r;for(const s of this.args)if(i++,t=s.evaluate(e),t&&t instanceof Bo&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Db(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function jW(n,e,t){return e===t}function HW(n,e,t){return e!==t}function VW(n,e,t){return e<t}function XW(n,e,t){return e>t}function YW(n,e,t){return e<=t}function KW(n,e,t){return e>=t}function zR(n,e,t,i){return i.compare(e,t)===0}function ZW(n,e,t,i){return!zR(n,e,t,i)}function JW(n,e,t,i){return i.compare(e,t)<0}function QW(n,e,t,i){return i.compare(e,t)>0}function ej(n,e,t,i){return i.compare(e,t)<=0}function tj(n,e,t,i){return i.compare(e,t)>=0}function gu(n,e,t){const i=n!=="=="&&n!=="!=";return class BR{constructor(s,o,a){this.type=Xe,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let l=o.parse(s[1],1,He);if(!l)return null;if(!Db(a,l.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${Yt(l.type)}'.`);let c=o.parse(s[2],2,He);if(!c)return null;if(!Db(a,c.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${Yt(c.type)}'.`);if(l.type.kind!==c.type.kind&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error(`Cannot compare types '${Yt(l.type)}' and '${Yt(c.type)}'.`);i&&(l.type.kind==="value"&&c.type.kind!=="value"?l=new wr(c.type,[l]):l.type.kind!=="value"&&c.type.kind==="value"&&(c=new wr(l.type,[c])));let d=null;if(s.length===4){if(l.type.kind!=="string"&&c.type.kind!=="string"&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(d=o.parse(s[3],3,Mp),!d)return null}return new BR(l,c,d)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(i&&this.hasUntypedArgument){const l=xn(o),c=xn(a);if(l.kind!==c.kind||!(l.kind==="string"||l.kind==="number"))throw new Jt(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${l.kind}, ${c.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const l=xn(o),c=xn(a);if(l.kind!=="string"||c.kind!=="string")return e(s,o,a)}return this.collator?t(s,o,a,this.collator.evaluate(s)):e(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const nj=gu("==",jW,zR),ij=gu("!=",HW,ZW),rj=gu("<",VW,JW),sj=gu(">",XW,QW),oj=gu("<=",YW,ej),aj=gu(">=",KW,tj);class $p{constructor(e,t,i){this.type=Mp,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Xe);if(!r)return null;const s=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Xe);if(!s)return null;let o=null;return i.locale&&(o=t.parse(i.locale,1,st),!o)?null:new $p(r,s,o)}evaluate(e){return new G_(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class V_{constructor(e,t,i,r,s){this.type=st,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,fe);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let s=null;if(r.locale&&(s=t.parse(r.locale,1,st),!s))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,st),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,fe),!a))return null;let l=null;return r["max-fraction-digits"]&&(l=t.parse(r["max-fraction-digits"],1,fe),!l)?null:new V_(i,s,o,a,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class X_{constructor(e){this.type=Lp,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let s=!1;for(let o=1;o<=e.length-1;++o){const a=e[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let l=null;if(a["font-scale"]&&(l=t.parse(a["font-scale"],1,fe),!l))return null;let c=null;if(a["text-font"]&&(c=t.parse(a["text-font"],1,Oi(st)),!c))return null;let d=null;if(a["text-color"]&&(d=t.parse(a["text-color"],1,Vr),!d))return null;let f=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!zW.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(f=t.parse(a["vertical-align"],1,st),!f)return null}const p=r[r.length-1];p.scale=l,p.font=c,p.textColor=d,p.verticalAlign=f}else{const l=t.parse(e[o],1,He);if(!l)return null;const c=l.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,r.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new X_(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return xn(r)===nh?new J0("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new J0(uc(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new ks(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class Y_{constructor(e){this.type=nh,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,st);return i?new Y_(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Bo.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class K_{constructor(e){this.type=fe,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Yt(i.type)} instead.`):new K_(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Jt(`Expected value to be of type string or array, but found ${Yt(xn(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Kr=8192;function lj(n,e){const t=uj(n[0]),i=hj(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Kr),Math.round(i*r*Kr)]}function Z_(n,e){const t=Math.pow(2,e.z),i=(n[0]/Kr+e.x)/t,r=(n[1]/Kr+e.y)/t;return[cj(i),dj(r)]}function uj(n){return(180+n)/360}function cj(n){return n*360-180}function hj(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function dj(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function ih(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Oc(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function fj(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function pj(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],s=n[0]-t[0],o=n[1]-t[1];return i*o-s*r===0&&i*s<=0&&r*o<=0}function Up(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],s=[i[0]-t[0],i[1]-t[1]];return _j(s,r)===0?!1:!!(Nb(n,e,t,i)&&Nb(t,i,n,e))}function gj(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(Up(n,e,i[r],i[r+1]))return!0;return!1}function mu(n,e,t=!1){let i=!1;for(const r of e)for(let s=0;s<r.length-1;s++){if(pj(n,r[s],r[s+1]))return t;fj(n,r[s],r[s+1])&&(i=!i)}return i}function mj(n,e){for(const t of e)if(mu(n,t))return!0;return!1}function $R(n,e){for(const t of n)if(!mu(t,e))return!1;for(let t=0;t<n.length-1;++t)if(gj(n[t],n[t+1],e))return!1;return!0}function yj(n,e){for(const t of e)if($R(n,t))return!0;return!1}function _j(n,e){return n[0]*e[1]-n[1]*e[0]}function Nb(n,e,t,i){const r=n[0]-t[0],s=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1],l=i[0]-t[0],c=i[1]-t[1],d=r*c-l*s,f=o*c-l*a;return d>0&&f<0||d<0&&f>0}function J_(n,e,t){const i=[];for(let r=0;r<n.length;r++){const s=[];for(let o=0;o<n[r].length;o++){const a=lj(n[r][o],t);ih(e,a),s.push(a)}i.push(s)}return i}function UR(n,e,t){const i=[];for(let r=0;r<n.length;r++){const s=J_(n[r],e,t);i.push(s)}return i}function GR(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let s=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;s===0&&(s=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=s}ih(e,n)}function vj(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function zb(n,e,t,i){const r=Math.pow(2,i.z)*Kr,s=[i.x*Kr,i.y*Kr],o=[];for(const a of n)for(const l of a){const c=[l.x+s[0],l.y+s[1]];GR(c,e,t,r),o.push(c)}return o}function Bb(n,e,t,i){const r=Math.pow(2,i.z)*Kr,s=[i.x*Kr,i.y*Kr],o=[];for(const a of n){const l=[];for(const c of a){const d=[c.x+s[0],c.y+s[1]];ih(e,d),l.push(d)}o.push(l)}if(e[2]-e[0]<=r/2){vj(e);for(const a of o)for(const l of a)GR(l,e,t,r)}return o}function xj(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const s=J_(e.coordinates,i,r),o=zb(n.geometry(),t,i,r);if(!Oc(t,i))return!1;for(const a of o)if(!mu(a,s))return!1}if(e.type==="MultiPolygon"){const s=UR(e.coordinates,i,r),o=zb(n.geometry(),t,i,r);if(!Oc(t,i))return!1;for(const a of o)if(!mj(a,s))return!1}return!0}function wj(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const s=J_(e.coordinates,i,r),o=Bb(n.geometry(),t,i,r);if(!Oc(t,i))return!1;for(const a of o)if(!$R(a,s))return!1}if(e.type==="MultiPolygon"){const s=UR(e.coordinates,i,r),o=Bb(n.geometry(),t,i,r);if(!Oc(t,i))return!1;for(const a of o)if(!yj(a,s))return!1}return!0}class Ma{constructor(e,t){this.type=Xe,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Lc(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const s of i.features){const{type:o,coordinates:a}=s.geometry;o==="Polygon"&&r.push(a),o==="MultiPolygon"&&r.push(...a)}if(r.length){const s={type:"MultiPolygon",coordinates:r};return new Ma(i,s)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Ma(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Ma(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return xj(e,this.geometries);if(e.geometryType()==="LineString")return wj(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class qR{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(i(r,o)>=0)break;t[e]=o,e=s}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,s=t[e];for(;e<r;){let o=(e<<1)+1;const a=o+1;if(a<this.length&&i(t[a],t[o])<0&&(o=a),i(t[o],s)>=0)break;t[e]=t[o],e=o}t[e]=s}}function bj(n,e){if(n.length<=1)return[n];const i=[];let r,s;for(const o of n){const a=Ej(o);a!==0&&(o.area=Math.abs(a),s===void 0&&(s=a<0),s===a<0?(r&&i.push(r),r=[o]):r.push(o))}return r&&i.push(r),i}function Ej(n){let e=0;for(let t=0,i=n.length,r=i-1,s,o;t<i;r=t++)s=n[t],o=n[r],e+=(o.x-s.x)*(s.y+o.y);return e}const Cj=6378.137,$b=1/298.257223563,Ub=$b*(2-$b),Gb=Math.PI/180;class Q_{constructor(e){const t=Gb*Cj*1e3,i=Math.cos(e*Gb),r=1/(1-Ub*(1-i*i)),s=Math.sqrt(r);this.kx=t*s*i,this.ky=t*s*r*(1-Ub)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,s,o,a;for(let l=0;l<e.length-1;l++){let c=e[l][0],d=e[l][1],f=this.wrap(e[l+1][0]-c)*this.kx,p=(e[l+1][1]-d)*this.ky,y=0;(f!==0||p!==0)&&(y=(this.wrap(t[0]-c)*this.kx*f+(t[1]-d)*this.ky*p)/(f*f+p*p),y>1?(c=e[l+1][0],d=e[l+1][1]):y>0&&(c+=f/this.kx*y,d+=p/this.ky*y)),f=this.wrap(t[0]-c)*this.kx,p=(t[1]-d)*this.ky;const m=f*f+p*p;m<i&&(i=m,r=c,s=d,o=l,a=y)}return{point:[r,s],index:o,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const Q0=100,ey=50;function WR(n,e){return e[0]-n[0]}function kf(n){return n[1]-n[0]+1}function zs(n,e){return n[1]>=n[0]&&n[1]<e}function ty(n,e){if(n[0]>n[1])return[null,null];const t=kf(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function ny(n,e){if(!zs(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)ih(t,n[i]);return t}function iy(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)ih(e,i);return e}function qb(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function ev(n,e,t){if(!qb(n)||!qb(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function _a(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function tv(n,e,t,i,r){const s=Math.min(_a(n,[t,i],r),_a(e,[t,i],r)),o=Math.min(_a(t,[n,e],r),_a(i,[n,e],r));return Math.min(s,o)}function Tj(n,e,t,i,r){if(!(zs(e,n.length)&&zs(i,t.length)))return 1/0;let o=1/0;for(let a=e[0];a<e[1];++a){const l=n[a],c=n[a+1];for(let d=i[0];d<i[1];++d){const f=t[d],p=t[d+1];if(Up(l,c,f,p))return 0;o=Math.min(o,tv(l,c,f,p,r))}}return o}function Sj(n,e,t,i,r){if(!(zs(e,n.length)&&zs(i,t.length)))return NaN;let o=1/0;for(let a=e[0];a<=e[1];++a)for(let l=i[0];l<=i[1];++l)if(o=Math.min(o,r.distance(n[a],t[l])),o===0)return o;return o}function Rj(n,e,t){if(mu(n,e,!0))return 0;let i=1/0;for(const r of e){const s=r[0],o=r[r.length-1];if(s!==o&&(i=Math.min(i,_a(n,[o,s],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Ij(n,e,t,i){if(!zs(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(mu(n[s],t,!0))return 0;let r=1/0;for(let s=e[0];s<e[1];++s){const o=n[s],a=n[s+1];for(const l of t)for(let c=0,d=l.length,f=d-1;c<d;f=c++){const p=l[f],y=l[c];if(Up(o,a,p,y))return 0;r=Math.min(r,tv(o,a,p,y,i))}}return r}function Wb(n,e){for(const t of n)for(const i of t)if(mu(i,e,!0))return!0;return!1}function Aj(n,e,t,i=1/0){const r=iy(n),s=iy(e);if(i!==1/0&&ev(r,s,t)>=i)return i;if(Oc(r,s)){if(Wb(n,e))return 0}else if(Wb(e,n))return 0;let o=1/0;for(const a of n)for(let l=0,c=a.length,d=c-1;l<c;d=l++){const f=a[d],p=a[l];for(const y of e)for(let m=0,v=y.length,x=v-1;m<v;x=m++){const w=y[x],E=y[m];if(Up(f,p,w,E))return 0;o=Math.min(o,tv(f,p,w,E,t))}}return o}function jb(n,e,t,i,r,s){if(!s)return;const o=ev(ny(i,s),r,t);o<e&&n.push([o,s,[0,0]])}function kd(n,e,t,i,r,s,o){if(!s||!o)return;const a=ev(ny(i,s),ny(r,o),t);a<e&&n.push([a,s,o])}function Of(n,e,t,i,r=1/0){let s=Math.min(i.distance(n[0],t[0][0]),r);if(s===0)return s;const o=new qR([[0,[0,n.length-1],[0,0]]],WR),a=iy(t);for(;o.length>0;){const l=o.pop();if(l[0]>=s)continue;const c=l[1],d=e?ey:Q0;if(kf(c)<=d){if(!zs(c,n.length))return NaN;if(e){const f=Ij(n,c,t,i);if(isNaN(f)||f===0)return f;s=Math.min(s,f)}else for(let f=c[0];f<=c[1];++f){const p=Rj(n[f],t,i);if(s=Math.min(s,p),s===0)return 0}}else{const f=ty(c,e);jb(o,s,i,n,a,f[0]),jb(o,s,i,n,a,f[1])}}return s}function Ff(n,e,t,i,r,s=1/0){let o=Math.min(s,r.distance(n[0],t[0]));if(o===0)return o;const a=new qR([[0,[0,n.length-1],[0,t.length-1]]],WR);for(;a.length>0;){const l=a.pop();if(l[0]>=o)continue;const c=l[1],d=l[2],f=e?ey:Q0,p=i?ey:Q0;if(kf(c)<=f&&kf(d)<=p){if(!zs(c,n.length)&&zs(d,t.length))return NaN;let y;if(e&&i)y=Tj(n,c,t,d,r),o=Math.min(o,y);else if(e&&!i){const m=n.slice(c[0],c[1]+1);for(let v=d[0];v<=d[1];++v)if(y=_a(t[v],m,r),o=Math.min(o,y),o===0)return o}else if(!e&&i){const m=t.slice(d[0],d[1]+1);for(let v=c[0];v<=c[1];++v)if(y=_a(n[v],m,r),o=Math.min(o,y),o===0)return o}else y=Sj(n,c,t,d,r),o=Math.min(o,y)}else{const y=ty(c,e),m=ty(d,i);kd(a,o,r,n,t,y[0],m[0]),kd(a,o,r,n,t,y[0],m[1]),kd(a,o,r,n,t,y[1],m[0]),kd(a,o,r,n,t,y[1],m[1])}}return o}function Pj(n,e){const t=n.geometry(),i=t.flat().map(o=>Z_([o.x,o.y],n.canonical));if(t.length===0)return NaN;const r=new Q_(i[0][1]);let s=1/0;for(const o of e){switch(o.type){case"Point":s=Math.min(s,Ff(i,!1,[o.coordinates],!1,r,s));break;case"LineString":s=Math.min(s,Ff(i,!1,o.coordinates,!0,r,s));break;case"Polygon":s=Math.min(s,Of(i,!1,o.coordinates,r,s));break}if(s===0)return s}return s}function Mj(n,e){const t=n.geometry(),i=t.flat().map(o=>Z_([o.x,o.y],n.canonical));if(t.length===0)return NaN;const r=new Q_(i[0][1]);let s=1/0;for(const o of e){switch(o.type){case"Point":s=Math.min(s,Ff(i,!0,[o.coordinates],!1,r,s));break;case"LineString":s=Math.min(s,Ff(i,!0,o.coordinates,!0,r,s));break;case"Polygon":s=Math.min(s,Of(i,!0,o.coordinates,r,s));break}if(s===0)return s}return s}function Lj(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=bj(t).map(o=>o.map(a=>a.map(l=>Z_([l.x,l.y],n.canonical)))),r=new Q_(i[0][0][0][1]);let s=1/0;for(const o of e)for(const a of i){switch(o.type){case"Point":s=Math.min(s,Of([o.coordinates],!1,a,r,s));break;case"LineString":s=Math.min(s,Of(o.coordinates,!0,a,r,s));break;case"Polygon":s=Math.min(s,Aj(a,o.coordinates,r,s));break}if(s===0)return s}return s}function Km(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class La{constructor(e,t){this.type=fe,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Lc(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new La(i,i.features.map(r=>Km(r.geometry)).flat());if(i.type==="Feature")return new La(i,Km(i.geometry));if("type"in i&&"coordinates"in i)return new La(i,Km(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Pj(e,this.geometries);if(e.geometryType()==="LineString")return Mj(e,this.geometries);if(e.geometryType()==="Polygon")return Lj(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class rh{constructor(e){this.type=He,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new rh(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:OR(i,this.key)}eachChild(){}outputDefined(){return!1}}const Gp={"==":nj,"!=":ij,">":sj,"<":rj,">=":aj,"<=":oj,array:wr,at:q_,boolean:wr,case:H_,coalesce:kc,collator:$p,format:X_,image:Y_,in:W_,"index-of":Mf,interpolate:Yr,"interpolate-hcl":Yr,"interpolate-lab":Yr,length:K_,let:Np,literal:su,match:j_,number:wr,"number-format":V_,object:wr,slice:Lf,step:Bp,string:wr,"to-boolean":Ro,"to-color":Ro,"to-number":Ro,"to-string":Ro,var:zp,within:Ma,distance:La,"global-state":rh};class Ni{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Ni.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([c])=>!Array.isArray(c)||c.length===e.length-1);let l=null;for(const[c,d]of a){l=new Dp(t.registry,Df,t.path,null,t.scope);const f=[];let p=!1;for(let y=1;y<e.length;y++){const m=e[y],v=Array.isArray(c)?c[y-1]:c.type,x=l.parse(m,1+f.length,v);if(!x){p=!0;break}f.push(x)}if(!p){if(Array.isArray(c)&&c.length!==f.length){l.error(`Expected ${c.length} arguments, but found ${f.length} instead.`);continue}for(let y=0;y<f.length;y++){const m=Array.isArray(c)?c[y]:c.type,v=f[y];l.concat(y+1).checkSubtype(m,v.type)}if(l.errors.length===0)return new Ni(i,s,d,f)}}if(a.length===1)t.errors.push(...l.errors);else{const d=(a.length?a:o).map(([p])=>Oj(p)).join(" | "),f=[];for(let p=1;p<e.length;p++){const y=t.parse(e[p],1+f.length);if(!y)return null;f.push(Yt(y.type))}t.error(`Expected arguments of type ${d}, but found (${f.join(", ")}) instead.`)}return null}static register(e,t){Ni.definitions=t;for(const i in t)e[i]=Ni}}function Hb(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const s=r?r.evaluate(n):1,o=FR(e,t,i,s);if(o)throw new Jt(o);return new Lt(e/255,t/255,i/255,s,!1)}function Vb(n,e){return n in e}function Zm(n,e){const t=e[n];return typeof t>"u"?null:t}function kj(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function ia(n){return{type:n}}Ni.register(Gp,{error:[RW,[st],(n,[e])=>{throw new Jt(e.evaluate(n))}],typeof:[st,[He],(n,[e])=>Yt(xn(e.evaluate(n)))],"to-rgba":[Oi(fe,4),[Vr],(n,[e])=>{const[t,i,r,s]=e.evaluate(n).rgb;return[t*255,i*255,r*255,s]}],rgb:[Vr,[fe,fe,fe],Hb],rgba:[Vr,[fe,fe,fe,fe],Hb],has:{type:Xe,overloads:[[[st],(n,[e])=>Vb(e.evaluate(n),n.properties())],[[st,Ia],(n,[e,t])=>Vb(e.evaluate(n),t.evaluate(n))]]},get:{type:He,overloads:[[[st],(n,[e])=>Zm(e.evaluate(n),n.properties())],[[st,Ia],(n,[e,t])=>Zm(e.evaluate(n),t.evaluate(n))]]},"feature-state":[He,[st],(n,[e])=>Zm(e.evaluate(n),n.featureState||{})],properties:[Ia,[],n=>n.properties()],"geometry-type":[st,[],n=>n.geometryType()],id:[He,[],n=>n.id()],zoom:[fe,[],n=>n.globals.zoom],"heatmap-density":[fe,[],n=>n.globals.heatmapDensity||0],elevation:[fe,[],n=>n.globals.elevation||0],"line-progress":[fe,[],n=>n.globals.lineProgress||0],accumulated:[He,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[fe,ia(fe),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[fe,ia(fe),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:fe,overloads:[[[fe,fe],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[fe],(n,[e])=>-e.evaluate(n)]]},"/":[fe,[fe,fe],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[fe,[fe,fe],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[fe,[],()=>Math.LN2],pi:[fe,[],()=>Math.PI],e:[fe,[],()=>Math.E],"^":[fe,[fe,fe],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[fe,[fe],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[fe,[fe],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[fe,[fe],(n,[e])=>Math.log(e.evaluate(n))],log2:[fe,[fe],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[fe,[fe],(n,[e])=>Math.sin(e.evaluate(n))],cos:[fe,[fe],(n,[e])=>Math.cos(e.evaluate(n))],tan:[fe,[fe],(n,[e])=>Math.tan(e.evaluate(n))],asin:[fe,[fe],(n,[e])=>Math.asin(e.evaluate(n))],acos:[fe,[fe],(n,[e])=>Math.acos(e.evaluate(n))],atan:[fe,[fe],(n,[e])=>Math.atan(e.evaluate(n))],min:[fe,ia(fe),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[fe,ia(fe),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[fe,[fe],(n,[e])=>Math.abs(e.evaluate(n))],round:[fe,[fe],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[fe,[fe],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[fe,[fe],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Xe,[st,He],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Xe,[He],(n,[e])=>n.id()===e.value],"filter-type-==":[Xe,[st],(n,[e])=>n.geometryType()===e.value],"filter-<":[Xe,[st,He],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Xe,[He],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Xe,[st,He],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Xe,[He],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Xe,[st,He],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Xe,[He],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Xe,[st,He],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Xe,[He],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Xe,[He],(n,[e])=>e.value in n.properties()],"filter-has-id":[Xe,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Xe,[Oi(st)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Xe,[Oi(He)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Xe,[st,Oi(He)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Xe,[st,Oi(He)],(n,[e,t])=>kj(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Xe,overloads:[[[Xe,Xe],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ia(Xe),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Xe,overloads:[[[Xe,Xe],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ia(Xe),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Xe,[Xe],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Xe,[st],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[st,[st],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[st,[st],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[st,ia(He),(n,e)=>e.map(t=>uc(t.evaluate(n))).join("")],"resolved-locale":[st,[Mp],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Oj(n){return Array.isArray(n)?`(${n.map(Yt).join(", ")})`:`(${Yt(n.type)}...)`}function Df(n){if(n instanceof zp)return Df(n.boundExpression);if(n instanceof Ni&&n.name==="error")return!1;if(n instanceof $p)return!1;if(n instanceof Ma)return!1;if(n instanceof La)return!1;if(n instanceof rh)return!1;const e=n instanceof Ro||n instanceof wr;let t=!0;return n.eachChild(i=>{e?t=t&&Df(i):t=t&&i instanceof su}),t?nv(n)&&rv(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function nv(n){if(n instanceof Ni){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Ma||n instanceof La)return!1;let e=!0;return n.eachChild(t=>{e&&!nv(t)&&(e=!1)}),e}function iv(n){if(n instanceof Ni&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!iv(t)&&(e=!1)}),e}function rv(n,e){if(n instanceof Ni&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!rv(i,e)&&(t=!1)}),t}function ry(n){return{result:"success",value:n}}function Rl(n){return{result:"error",value:n}}function Fj(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Dj(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Nj(n){return!!n.expression&&n.expression.interpolated}function jR(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&xn(n)===Ia}class zj{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new DR,this._defaultValue=t?Gj(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,s,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,s,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Jt(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function Bj(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Gp}function HR(n,e){const t=new Dp(Gp,Df,[],e?Uj(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?ry(new zj(i,e)):Rl(t.errors)}class Xb{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!iv(t.expression),this.globalStateRefs=qp(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,s,o)}evaluate(e,t,i,r,s,o){return this._styleExpression.evaluate(e,t,i,r,s,o)}}class Yb{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!iv(t.expression),this.globalStateRefs=qp(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,s,o)}evaluate(e,t,i,r,s,o){return this._styleExpression.evaluate(e,t,i,r,s,o)}interpolationFactor(e,t,i){return this.interpolationType?Yr.interpolationFactor(this.interpolationType,e,t,i):0}}function $j(n,e){const t=HR(n,e);if(t.result==="error")return t;const i=t.value.expression,r=nv(i);if(!r&&!Fj(e))return Rl([new Ur("","data expressions not supported")]);const s=rv(i,["zoom"]);if(!s&&!Dj(e))return Rl([new Ur("","zoom expressions not supported")]);const o=Vd(i);if(!o&&!s)return Rl([new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Ur)return Rl([o]);if(o instanceof Yr&&!Nj(e))return Rl([new Ur("",'"interpolate" expressions cannot be used with this property')]);if(!o)return ry(r?new Xb("constant",t.value):new Xb("source",t.value));const a=o instanceof Yr?o.interpolation:void 0;return ry(r?new Yb("camera",t.value,o.labels,a):new Yb("composite",t.value,o.labels,a))}function Vd(n){let e=null;if(n instanceof Np)e=Vd(n.result);else if(n instanceof kc){for(const t of n.args)if(e=Vd(t),e)break}else(n instanceof Bp||n instanceof Yr)&&n.input instanceof Ni&&n.input.name==="zoom"&&(e=n);return e instanceof Ur||n.eachChild(t=>{const i=Vd(t);i instanceof Ur?e=i:!e&&i?e=new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Ur("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function qp(n,e=new Set){return n instanceof rh&&e.add(n.key),n.eachChild(t=>{qp(t,e)}),e}function Uj(n){const e={color:Vr,string:st,number:fe,enum:st,boolean:Xe,formatted:Lp,padding:kp,numberArray:Op,colorArray:Ac,projectionDefinition:Pp,resolvedImage:nh,variableAnchorOffsetCollection:Fp};return n.type==="array"?Oi(e[n.value]||He,n.length):e[n.type]}function Gj(n){if(n.type==="color"&&jR(n.default))return new Lt(0,0,0,0);switch(n.type){case"color":return Lt.parse(n.default)||null;case"padding":return Er.parse(n.default)||null;case"numberArray":return Cr.parse(n.default)||null;case"colorArray":return Di.parse(n.default)||null;case"variableAnchorOffsetCollection":return Xr.parse(n.default)||null;case"projectionDefinition":return xr.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function VR(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!VR(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const qj={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wj(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};VR(n)||(n=Nf(n));const e=HR(n,qj);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=XR(n);return{filter:(i,r,s)=>e.value.evaluate(i,r,{},s),needGeometry:t,getGlobalStateRefs:()=>qp(e.value.expression)}}}function jj(n,e){return n<e?-1:n>e?1:0}function XR(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(XR(n[e]))return!0;return!1}function Nf(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Jm(n[1],n[2],"=="):e==="!="?Od(Jm(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Jm(n[1],n[2],e):e==="any"?Hj(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Nf)):e==="none"?["all"].concat(n.slice(1).map(Nf).map(Od)):e==="in"?Kb(n[1],n.slice(2)):e==="!in"?Od(Kb(n[1],n.slice(2))):e==="has"?Zb(n[1]):e==="!has"?Od(Zb(n[1])):!0}function Jm(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Hj(n){return["any"].concat(n.map(Nf))}function Kb(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(jj)]]:["filter-in-small",n,["literal",e]]}}function Zb(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Od(n){return["!",n]}function Fc(n){return typeof n=="object"?["literal",n]:n}function Vj(n,e){let t=n.stops;if(!t)return Xj(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,s=i||!r;return t=t.map(o=>!r&&e.tokens&&typeof o[1]=="string"?[o[0],Jj(o[1])]:[o[0],Fc(o[1])]),i?Yj(n,e,t):s?Zj(n,e,t):sy(n,e,t)}function Xj(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,Fc(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function sv(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Yj(n,e,t){const i={},r={},s=[];for(let a=0;a<t.length;a++){const l=t[a],c=l[0].zoom;i[c]===void 0&&(i[c]={zoom:c,type:n.type,property:n.property,default:n.default},r[c]=[],s.push(c)),r[c].push([l[0].value,l[1]])}if(av({},e)==="exponential"){const a=[sv(n),["linear"],["zoom"]];for(const l of s){const c=sy(i[l],e,r[l]);zl(a,l,c,!1)}return a}else{const a=["step",["zoom"]];for(const l of s){const c=sy(i[l],e,r[l]);zl(a,l,c,!0)}return ov(a),a}}function Kj(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Jb(n,e){const t=Fc(Kj(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function sy(n,e,t){const i=av(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const o of t)s.push(["==",r,o[0]],o[1]);return s.push(Jb(n,e)),s}else if(i==="categorical"){const s=["match",r];for(const o of t)zl(s,o[0],o[1],!1);return s.push(Jb(n,e)),s}else if(i==="interval"){const s=["step",["number",r]];for(const o of t)zl(s,o[0],o[1],!0);return ov(s),n.default===void 0?s:["case",["==",["typeof",r],"number"],s,Fc(n.default)]}else if(i==="exponential"){const s=n.base!==void 0?n.base:1,o=[sv(n),s===1?["linear"]:["exponential",s],["number",r]];for(const a of t)zl(o,a[0],a[1],!1);return n.default===void 0?o:["case",["==",["typeof",r],"number"],o,Fc(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function Zj(n,e,t,i=["zoom"]){const r=av(n,e);let s,o=!1;if(r==="interval")s=["step",i],o=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;s=[sv(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)zl(s,a[0],a[1],o);return ov(s),s}function ov(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function zl(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function av(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function Jj(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const s=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const Qj=CW;var Qb={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Hu=" ",eE=/(italic|oblique)$/i,tE={};function oy(n,e,t){var i=tE[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,s="normal",o=[],a,l,c=0,d=n.length;c<d;++c){var f=n[c],p=f.split(" "),y=p[p.length-1].toLowerCase();y=="normal"||y=="italic"||y=="oblique"?(s=l?s:y,l=!0,p.pop(),y=p[p.length-1].toLowerCase()):eE.test(y)&&(y=y.replace(eE,""),s=l?s:p[p.length-1].replace(y,""),l=!0);for(var m in Qb){var v=p.length>1?p[p.length-2].toLowerCase():"";if(y==m||y==m.replace("-","")||v+"-"+y==m){r=a?r:Qb[m],p.pop(),v&&m.startsWith(v)&&p.pop();break}}!a&&typeof y=="number"&&(r=y,a=!0);var x=p.join(Hu).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");x.indexOf(Hu)!==-1&&(x='"'+x+'"'),o.push(x)}i=tE[n]=[s,r,o]}return i[0]+Hu+i[1]+Hu+e+"px"+(t?"/"+t:"")+Hu+i[2]}class Il extends rr{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class ho extends Il{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ay={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class eH extends Hc{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=_t(i,ay.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=_t(i,ay.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ke.TOUCHMOVE,this.boundHandleTouchMove_,OS?{passive:!1}:!1)}emulateClick_(e){let t=new ho(Vt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ho(Vt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ho(Vt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Vt.POINTERUP||t.type==Vt.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Vt.POINTERDOWN||t.type==Vt.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ho(Vt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ho(Vt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(_t(i,Vt.POINTERMOVE,this.handlePointerMove_,this),_t(i,Vt.POINTERUP,this.handlePointerUp_,this),_t(this.element_,Vt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(_t(this.element_.getRootNode(),Vt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ho(Vt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ho(Vt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Bt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ke.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Bt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const fo={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},On={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},pe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},zf=1/0;class tH{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,hu(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Rt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=zf?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),d=c<r&&i[c]<i[l]?c:l;t[e]=t[d],i[e]=i[d],e=d}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==zf?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}class YR extends tH{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(ke.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===pe.LOADED||i===pe.ERROR||i===pe.EMPTY){i!==pe.ERROR&&t.removeEventListener(ke.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===pe.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}}function nH(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return zf;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Wp extends ss{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,r=this.listenerKeys.length;i<r;++i)Bt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==vc&&this.listenerKeys.push(_t(e,fo.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class iH extends Wp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"‚Ä∫",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ke.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Jc+" "+wp+(this.collapsed_&&this.collapsible_?" "+sb:"")+(this.collapsible_?"":" ol-uncollapsible"),d=this.element;d.className=c,d.appendChild(this.toggleButton_),d.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>Ql(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!No(t,this.renderedAttributions_)){vG(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(sb),this.collapsed_?bf(this.collapseLabel_,this.label_):bf(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class KR extends Wp{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"‚áß",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(ke.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Jc+" "+wp,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(bd)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:du}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(bd);!s&&i===0?this.element.classList.add(bd):s&&i!==0&&this.element.classList.remove(bd)}this.label_.style.transform=r}this.rotation_=i}}class ZR extends Wp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"‚Äì",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=r,d.setAttribute("type","button"),d.title=l,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(ke.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(ke.CLICK,this.handleClick_.bind(this,-i),!1);const p=t+" "+Jc+" "+wp,y=this.element;y.className=p,y.appendChild(d),y.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:du})):i.setZoom(s)}}}function JR(n){n=n||{};const e=new Fi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new ZR(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new KR(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new iH(n.attributionOptions)),e}class rH{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class sH extends pu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Vt.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();z_(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}class sh extends pu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Vt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Vt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Vt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Vt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function lv(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class oH extends sh{constructor(e){super({stopDown:jc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:q0(NS,_G);this.condition_=e.onFocusOnly?q0(FS,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(lv(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();gU(s,a.getResolution()),r_(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:du})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class aH extends sh{constructor(e){e=e||{},super({stopDown:jc}),this.condition_=e.condition?e.condition:dG,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Rm(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===O_)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Rm(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Rm(e)&&DS(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class lH extends Wc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ar([r])}getGeometry(){return this.geometry_}}const vl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Vu extends rr{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class uH extends sh{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new lH(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??DS,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Vu(vl.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Vu(t?vl.BOXEND:vl.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Vu(vl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Vu(vl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Vu(vl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class cH extends uH{constructor(e){e=e||{};const t=e.condition?e.condition:zS;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:du})}}const ra={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class hH extends pu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return NS(t)&&BS(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ke.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==ra.DOWN||r==ra.LEFT||r==ra.RIGHT||r==ra.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==ra.DOWN?c=-a:r==ra.LEFT?l=-a:r==ra.RIGHT?l=a:c=a;const d=[l,c];r_(d,o.getRotation()),L8(o,d,this.duration_),i.preventDefault(),t=!0}}return!t}}class dH extends pu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!yG(t)&&BS(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ke.KEYDOWN||e.type==ke.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();z_(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const fH=40,pH=300;class gH extends pu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:pG;this.condition_=e.onFocusOnly?q0(FS,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==ke.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=fH;break;case WheelEvent.DOM_DELTA_PAGE:s*=pH;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),z_(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class mH extends sh{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=jc),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==O_&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(lv(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class yH extends sh{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=jc),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(lv(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function _H(n){n=n||{};const e=new Fi,t=new rH(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new aH),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new sH({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new oH({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new mH),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new yH({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new hH),e.push(new dH({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new gH({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new cH({duration:n.zoomDuration})),e}const ao={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class mo extends rr{constructor(e,t){super(e),this.layer=t}}const Qm={LAYERS:"layers"};class Oo extends ER{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Qm.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Fi(i.slice(),{unique:!0}):Rt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Fi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Bt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(_t(e,Dn.ADD,this.handleLayersAdd_,this),_t(e,Dn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Bt);hu(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new mo(ao.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[_t(e,Jl.PROPERTYCHANGE,this.handleLayerChange_,this),_t(e,ke.CHANGE,this.handleLayerChange_,this)];e instanceof Oo&&t.push(_t(e,ao.ADDLAYER,this.handleLayerGroupAdd_,this),_t(e,ao.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Oe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new mo(ao.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new mo(ao.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new mo(ao.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Oe(t);this.listenerKeys_[i].forEach(Bt),delete this.listenerKeys_[i],this.dispatchEvent(new mo(ao.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(Qm.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new mo(ao.REMOVELAYER,i[r]))}this.set(Qm.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Tr(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class vH extends Wc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ze()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Jr(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),RS(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c;const d=t.viewState;function f(C,R,F,O){return s.call(o,R,C?F:null,O)}const p=d.projection,y=s_(e.slice(),p),m=[[0,0]];if(p.canWrapX()&&r){const C=p.getExtent(),R=lt(C);m.push([-R,0],[R,0])}const v=t.layerStatesArray,x=v.length,w=[],E=[];for(let C=0;C<m.length;C++)for(let R=x-1;R>=0;--R){const F=v[R],O=F.layer;if(O.hasRenderer()&&D_(F,d)&&a.call(l,O)){const N=O.getRenderer(),L=O.getSource();if(N&&L){const z=L.getWrapX()?y:e,$=f.bind(null,F.managed);E[0]=z[0]+m[C][0],E[1]=z[1]+m[C][1],c=N.forEachFeatureAtCoordinate(E,t,i,$,w)}if(c)return c}}if(w.length===0)return;const S=1/w.length;return w.forEach((C,R)=>C.distanceSq+=R*S),w.sort((C,R)=>C.distanceSq-R.distanceSq),w.some(C=>c=C.callback(C.feature,C.layer,C.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,Na,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ze()}scheduleExpireIconCache(e){Qi.canExpireCache()&&e.postRenderFunctions.push(xH)}}function xH(n,e){Qi.expire()}class wH extends vH{constructor(e){super(e),this.fontChangeListenerKey_=_t(ua,Jl.PROPERTYCHANGE,e.redrawText,e),this.element_=Zi?$S():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Jc+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new iR(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Bt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ji.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,d)=>c.zIndex-d.zIndex);t.some(c=>c.layer instanceof N_&&c.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,d=t.length;c<d;++c){const f=t[c];e.layerIndex=c;const p=f.layer,y=p.getSourceState();if(!D_(f,r)||y!="ready"&&y!="undefined"){p.unrender();continue}const m=p.render(e,o);m&&(m!==o&&(this.children_.push(m),o=m),s.push(f))}this.declutter(e,s),xG(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Co(l)){const c=l.getContext("2d");for(const d of this.children_){const f=d.firstElementChild||d,p=d.style.backgroundColor;if(p&&(!Co(f)||f.width>0)&&(c.fillStyle=p,c.fillRect(0,0,l.width,l.height)),Co(f)&&f.width>0){const y=d.style.opacity||f.style.opacity;c.globalAlpha=y===""?1:Number(y);const m=f.style.transform;if(m)c.setTransform(...G0(m));else{const v=parseFloat(f.style.width)/f.width,x=parseFloat(f.style.height)/f.height;c.setTransform(v,0,0,x,0,0)}c.drawImage(f,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Ji.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function QR(n){if(n instanceof fu){n.setMapInternal(null);return}n instanceof Oo&&n.getLayers().forEach(QR)}function e2(n,e){if(n instanceof fu){n.setMapInternal(e);return}if(n instanceof Oo){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)e2(t[i],e)}}let jp=class extends ss{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=bH(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:cG,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=vi(),this.pixelToCoordinateTransform_=vi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Zi||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Zi||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Zi?new Fi:JR()),this.interactions=t.interactions||(Zi?new Fi:_H({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new YR(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(On.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(On.VIEW,this.handleViewChanged_),this.addChangeListener(On.SIZE,this.handleSizeChanged_),this.addChangeListener(On.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof vr)&&e.view.then(function(r){i.setView(new vr(r))}),this.controls.addEventListener(Dn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Dn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Dn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Dn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Dn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Dn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){e2(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){var e;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(e=this.resizeObserver_)==null||e.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Na,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Oo?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Na,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(On.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return U0(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?vn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(On.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Fi){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Es(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?vn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(On.SIZE)}getView(){return this.get(On.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return nH(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new ho(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===ay.POINTERDOWN||i===ke.WHEEL||i===ke.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Xt.ANIMATING]||o[Xt.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ji.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ji.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Il(fo.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Il(fo.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var i,r;if(this.mapBrowserEventHandler_){for(let s=0,o=this.targetChangeHandlerKeys_.length;s<o;++s)Bt(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ke.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ke.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Co(this.targetElement_)){(i=this.resizeObserver_)==null||i.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Co(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new wH(this)),!Co(t)){this.mapBrowserEventHandler_=new eH(this,this.moveTolerance_);for(const o in Vt)this.mapBrowserEventHandler_.addEventListener(Vt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ke.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ke.WHEEL,this.boundHandleBrowserEvent_,OS?{passive:!1}:!1);let s;if(this.keyboardEventTarget_)s=this.keyboardEventTarget_;else{const o=t.getRootNode();s=o instanceof ShadowRoot?o.host:t}if(this.targetChangeHandlerKeys_=[_t(s,ke.KEYDOWN,this.handleBrowserEvent,this),_t(s,ke.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const o=t.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),(r=this.resizeObserver_)==null||r.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Bt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Bt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=_t(e,Jl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_t(e,ke.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Bt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new mo("addlayer",e)),this.layerGroupPropertyListenerKeys_=[_t(e,Jl.PROPERTYCHANGE,this.render,this),_t(e,ke.CHANGE,this.render,this),_t(e,"addlayer",this.handleLayerAdd_,this),_t(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){QR(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&fb(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:mf(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Oe(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=mf(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Ha(this.previousExtent_)&&!Ds(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Il(fo.MOVESTART,this,r)),this.previousExtent_=cu(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Xt.ANIMATING]&&!s.viewHints[Xt.INTERACTING]&&!Ds(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Il(fo.MOVEEND,this,s)),uS(s.extent,this.previousExtent_))),this.dispatchEvent(new Il(fo.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(fo.LOADSTART)||this.hasListener(fo.LOADEND)||this.hasListener(Ji.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new mo("removelayer",t)),this.set(On.LAYERGROUP,e)}setSize(e){this.set(On.SIZE,e)}setTarget(e){this.set(On.TARGET,e)}setView(e){if(!e||e instanceof vr){this.set(On.VIEW,e);return}this.set(On.VIEW,new vr);const t=this;e.then(function(i){t.setView(new vr(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let r,s;if(Co(e))r=e.width,s=e.height;else{const o=getComputedStyle(e);r=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(r)&&!isNaN(s)&&(t=[Math.max(0,r),Math.max(0,s)],!fb(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&vS("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!No(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function bH(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Oo({layers:n.layers});t[On.LAYERGROUP]=i,t[On.TARGET]=n.target,t[On.VIEW]=n.view instanceof vr?n.view:new vr;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Fi(n.controls.slice()):(Rt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Fi(n.interactions.slice()):(Rt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Fi(n.overlays.slice()):(Rt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Fi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}function t2(n,e,t,i){const r=[];let s=ir();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=i_(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}function Bf(n,e,t,i,r,s,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let d=n[e],f=n[e+1],p=0;const y=[0];for(let x=e+i;x<t;x+=i){const w=n[x],E=n[x+1];p+=Math.sqrt((w-d)*(w-d)+(E-f)*(E-f)),y.push(p),d=w,f=E}const m=r*p,v=uU(y,m);v<0?(l=(m-y[-v-2])/(y[-v-1]-y[-v-2]),a=e+(-v-2)*i):a=e+v*i}o=o>1?o:2,s=s||new Array(o);for(let d=0;d<o;++d)s[d]=a===void 0?NaN:l===void 0?n[a+d]:Li(n[a+d],n[a+i+d],l);return s}function ly(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const p=a+l>>1;r<n[(p+1)*i-1]?l=p:a=p+1}const c=n[a*i-1];if(r==c)return n.slice((a-1)*i,(a-1)*i+i);const d=n[(a+1)*i-1],f=(r-c)/(d-c);o=[];for(let p=0;p<i-1;++p)o.push(Li(n[(a-1)*i+p],n[a*i+p],f));return o.push(r),o}function EH(n,e,t,i,r,s,o){if(o)return ly(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,c=t.length;l<c;++l){const d=t[l];if(e!=d){if(r<n[e+i-1])return null;if(r<=n[d-1])return ly(n,e,d,i,r,!1);e=d}}return null}class $f extends AS{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Bt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(_t(e[t],ke.CHANGE,this.changed,this))}clone(){const e=new $f(e0(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<ja(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){cu(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)hS(e,t[i].getExtent());return e}getGeometries(){return e0(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}return r?new $f(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=$i(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(e0(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function e0(n){return n.map(e=>e.clone())}class Ga extends Va{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){tr(this.flatCoordinates,e),this.changed()}clone(){const e=new Ga(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ja(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),S_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return yR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Bf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return v_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=bp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ga(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ip(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xp(this.flatCoordinates,0,e,this.stride),this.changed()}}class Dc extends Va{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,s=[],o=[];for(let l=0,c=r.length;l<c;++l){const d=r[l];tr(s,d.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){tr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Dc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<ja(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(T_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),R_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,EH(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return wc(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ga(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new Ga(e.slice(s,l),i);r.push(c),s=l}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,s=e.length;r<s;++r)i+=v_(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=Bf(t,i,l,s,.5);tr(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=XS(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new Dc(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return x8(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Kc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class oh extends Va{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){tr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new oh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<ja(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Ra(e,t,s[a],s[a+1]);if(c<r){r=c;for(let d=0;d<o;++d)i[d]=s[a+d];i.length=o}}return r}getCoordinates(){return To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Qr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Qr(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(n_(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xp(this.flatCoordinates,0,e,this.stride),this.changed()}}class ou extends Va{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const c=r[a],d=s.length,f=c.getEnds();for(let p=0,y=f.length;p<y;++p)f[p]+=d;tr(s,c.getFlatCoordinates()),o.push(f)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;tr(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new ou(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<ja(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m8(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),y8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return v8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return g8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Z0(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,W0(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=t2(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=mR(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new oh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;xR(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Z0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=jG(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new ou(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Ar(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,p=l.length;f<p;++f)l[f]-=s;const d=new Ar(t.slice(s,c),e,l);r.push(d),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return w8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=PS(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const nE=vi();class Kn{constructor(e,t,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?cS(this.flatCoordinates_):i_(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=$i(this.getExtent());this.flatInteriorPoints_=A_(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=wR(this.flatCoordinates_,this.ends_),t=t2(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=mR(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Bf(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=Bf(e,t,o,2,.5);tr(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=It(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=pn(i)/pn(t);Jr(nE,i[0],i[3],r,-r,0,0,0),Mo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,nE,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Kn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=_S((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=bp(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=XS(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=__(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Kn(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Kn.prototype.getFlatCoordinates=Kn.prototype.getOrientedFlatCoordinates;let CH=!1;function n2(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=CH,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let d;c=="text"||c=="json"?d=a.responseText:c=="xml"?d=a.responseXML||a.responseText:c=="arraybuffer"&&(d=a.response),d?s(e.readFeatures(d,{extent:t,featureProjection:r}),e.readProjection(d)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function iE(n,e){return function(t,i,r,s,o){n2(n,e,t,i,r,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function TH(n,e){return[[-1/0,-1/0,1/0,1/0]]}function SH(n,e){return[n]}class rE{constructor(e){this.rbush_=new sR(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Oe(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Oe(a)]=l}this.rbush_.load(i)}remove(e){const t=Oe(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Oe(t)],r=[i.minX,i.minY,i.maxX,i.maxY];Ds(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Lo(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Fs(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class yu extends ss{constructor(e){super(),this.projection=It(e.projection),this.attributions_=sE(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=sE(e),this.changed()}setState(e){this.state_=e,this.changed()}}function sE(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Yi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class lo extends rr{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class cc extends yu{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=vc,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Rt(this.format_,"`format` must be set when `url` is set"),this.loader_=iE(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:TH;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new rE:null,this.loadedExtentsRtree_=new rE,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Fi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Oe(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new lo(Yi.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Kn||(this.featureChangeKeys_[e]=[_t(t,ke.CHANGE,this.handleFeatureChange_,this),_t(t,Jl.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof Kn){const s=this.idIndex_[r];s instanceof Kn?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:i=!1}else i=!1}return i&&(Rt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Oe(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Oe(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const d=c.getExtent();t.push(d),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Yi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new lo(Yi.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Yi.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Yi.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Dn.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Dn.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Bt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new lo(Yi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof Kn||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Kn||r.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Lo(this.nullGeometryFeatures_)||tr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=yS(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Na,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const d=c.getGeometry(),f=a;if(a=d instanceof Kn?0:d.closestPointXY(i,r,o,a),a<f){s=c;const p=Math.sqrt(a);l[0]=i-p,l[1]=r-p,l[2]=i+p,l[3]=r+p}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Oe(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new lo(Yi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Oe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Lo(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(d){return As(d.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new lo(Yi.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,d=>{--this.loadingExtentsCount_,this.dispatchEvent(new lo(Yi.FEATURESLOADEND,void 0,d))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new lo(Yi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(Ds(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Oe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(Bt),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Yi.REMOVEFEATURE)&&this.dispatchEvent(new lo(Yi.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Rt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(iE(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class RH extends y_{constructor(e,t,i,r,s){const o=s!==void 0?ve.IDLE:ve.LOADED;super(e,t,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=ve.ERROR):this.state=ve.LOADED,this.changed()}load(){this.state==ve.IDLE&&(this.state=ve.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class ah extends Hc{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ke.CHANGE)}release(){this.setState(pe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==pe.EMPTY){if(this.state!==pe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){ze()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:fR(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class i2 extends ah{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_,Zi?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=pe.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=pe.ERROR,this.unlistenImage_(),this.image_=IH(),this.changed()}handleImageLoad_(){if(Zi)this.state=pe.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=pe.LOADED:this.state=pe.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==pe.ERROR&&(this.state=pe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==pe.IDLE&&(this.state=pe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=PG(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function IH(){const n=en(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class uv{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function xl(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new uv(n,e,t,i)}const oE=[];class AH extends ah{constructor(e,t,i,r,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=en(1,1,oE)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Oe(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Zc(this.context_),oE.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let r2=class extends ah{constructor(e,t,i,r,s,o){super(e,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==pe.IDLE&&(this.setState(pe.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(pe.ERROR)}setFeatures(e){this.features_=e,this.setState(pe.LOADED)}setLoader(e){this.loader_=e}};const s2="https://api.mapbox.com";function cv(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function PH(n,e,t){if(typeof n=="string")return[{id:"default",url:aE(n,e,t)}];for(const i of n)i.url=aE(i.url,e,t);return n}function aE(n,e,t){const i=cv(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=i.slice(r.length);return`${s2}/styles/v1/${s}/sprite?access_token=${e}`}function Uf(n,e){const t=cv(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${s2}/styles/v1/${r}?&access_token=${e}`}const MH=["a","b","c","d"];function Xd(n,e,t,i){const r=new URL(n,i||location.href),s=cv(n);if(!s)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(s==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${o}.webp?access_token=${e}`]}return MH.map(o=>`https://${o}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const br=Object.freeze({}),lE={},uE={};let LH=0;function hv(n){return n.id||(n.id=LH++),n.id}function kH(n,e){return hv(n)+"."+Oe(e)}function o2(n){let e=lE[n.id];return e||(e={},lE[hv(n)]=e),e}function OH(n){let e=uE[n.id];return e||(e={},uE[hv(n)]=e),e}function t0(n){return n*Math.PI/180}const Zr=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function Hp(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function dv(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return i-1}function oc(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const wl={};function au(n,e,t={},i){if(e in wl)return i&&(i.url=wl[e][0].url),wl[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,s=function(l){return delete wl[e],Promise.reject(new Error("Error fetching source "+e))},o=function(l){return delete wl[e],l.ok?l.json():Promise.reject(new Error("Error fetching source "+e))},a=Ql(()=>r).then(l=>l instanceof Response?(i&&(i.url=l.url),o(l)):(l instanceof Request||(l=new Request(l)),l.headers.get("Accept")||l.headers.set("Accept","application/json"),i&&(i.url=l.url),fetch(l).then(o).catch(s))).catch(s);return wl[e]=[r,a],a}function a2(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=Uf(n,e.accessToken),au("Style",n,e);else return Promise.resolve(n)}const cE={};function l2(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=cE[i];if(!r||t.transformRequest){let s;t.transformRequest&&(s=(a,l)=>{const c=t.transformRequest&&t.transformRequest(l,"Tiles")||l;if(a instanceof r2)a.setLoader((d,f,p)=>{const y=function(m){m.arrayBuffer().then(v=>{const w=a.getFormat().readFeatures(v,{extent:d,featureProjection:p});a.setFeatures(w)})};Ql(()=>c).then(m=>{if(m instanceof Response)return y(m);fetch(m).then(y).catch(v=>a.setState(pe.ERROR))}).catch(m=>a.setState(pe.ERROR))});else{const d=a.getImage();Ql(()=>c).then(f=>{if(typeof f=="string"){d.src=f;return}const p=y=>y.blob().then(m=>{const v=URL.createObjectURL(m);d.addEventListener("load",()=>URL.revokeObjectURL(v)),d.addEventListener("error",()=>URL.revokeObjectURL(v)),d.src=v});if(f instanceof Response)return p(f);fetch(f).then(p).catch(y=>a.setState(pe.ERROR))}).catch(f=>a.setState(pe.ERROR))}});const o=n.url;if(o&&!n.tiles){const a=Xd(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:s});else{const l={};r=au("Source",a[0],t,l).then(function(c){return c.tiles=c.tiles.map(function(d){return c.scheme==="tms"&&(d=d.replace("{y}","{-y}")),Xd(d,t.accessToken,t.accessTokenParam||"access_token",l.url)[0]}),Promise.resolve({tileJson:c,tileLoadFunction:s})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),Xd(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));cE[i]=r}return r}function hE(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=Hp(r[0],r[1]),o=s.getContext("2d");o.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,r[0],r[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const l=a.data;for(let c=0,d=a.width;c<d;++c)for(let f=0,p=a.height;f<p;++f){const y=(f*d+c)*4;l[y+3]>0&&o.arc(c,f,t*e.pixelRatio,0,2*Math.PI)}return o.fill(),s}function FH(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function dE(n,e,t){const i=Hp(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0,l=s.width;a<l;++a)for(let c=0,d=s.height;c<d;++c){const f=(c*l+a)*4,p=o[f+3]/255,y=.75,m=.1,v=FH(y-m,y+m,p);v>0?(o[f+0]=Math.round(255*t.r*v),o[f+1]=Math.round(255*t.g*v),o[f+2]=Math.round(255*t.b*v),o[f+3]=Math.round(255*v)):o[f+3]=0}return r.putImageData(s,0,0),i}const DH=Array(256).join("‚Ää");function uy(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=DH.slice(0,Math.round(e/.1));for(let s=0,o=i.length;s<o;++s)s>0&&(t+=`
`),t+=i[s].split("").join(r);return t}return n}let n0;function u2(){return n0||(n0=Hp(1,1).getContext("2d")),n0}function sa(n,e){return u2().measureText(n).width+(n.length-1)*e}const fE={};function cy(n,e,t,i){if(n.indexOf(`
`)!==-1){const o=n.split(`
`),a=[];for(let l=0,c=o.length;l<c;++l)a.push(cy(o[l],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let s=fE[r];if(!s){const o=n.split(" ");if(o.length>1){const a=u2();a.font=e;const c=a.measureText("M").width*t;let d="";const f=[];for(let p=0,y=o.length;p<y;++p){const m=o[p],v=d+(d?" ":"")+m;sa(v,i)<=c?d=v:(d&&f.push(d),d=m)}d&&f.push(d);for(let p=0,y=f.length;p<y&&y>1;++p){const m=f[p];if(sa(m,i)<c*.35){const v=p>0?sa(f[p-1],i):1/0,x=p<y-1?sa(f[p+1],i):1/0;f.splice(p,1),y-=1,v<x?(f[p-1]+=" "+m,p-=1):f[p]=m+" "+f[p]}}for(let p=0,y=f.length-1;p<y;++p){const m=f[p],v=f[p+1];if(sa(m,i)>c*.7&&sa(v,i)<c*.6){const x=m.split(" "),w=x.pop();sa(w,i)<c*.2&&(f[p]=x.join(" "),f[p+1]=w+" "+v),y-=1}}s=f.join(`
`)}else s=n;s=uy(s,i),fE[r]=s}return s}const NH=/font-family: ?([^;]*);/,zH=/("|')/g;let Fd;function BH(n){if(!Fd){Fd={};const e=document.styleSheets;for(let t=0,i=e.length;t<i;++t){const r=e[t];try{const s=r.rules||r.cssRules;if(s)for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.type==5){const c=l.cssText.match(NH);Fd[c[1].replace(zH,"")]=!0}}}catch{}}}return n in Fd}const i0={};function $H(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in i0)return i0[t];const i=[];for(let r=0,s=n.length;r<s;++r){n[r]=n[r].replace("Arial Unicode MS","Arial");const o=n[r],a=oy(o,1);jS(a);const l=a.split(" ");i.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(let r=0,s=i.length;r<s;++r){const o=i[r],a=o[0];if(!BH(a)&&ua.get(`${o[2]}
${o[1]} 
${a}`)!==100){const l=e.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+l+'"]')){const c=document.createElement("link");c.href=l,c.rel="stylesheet",document.head.appendChild(c)}}}return i0[t]=n,n}const UH={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},GH={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},qH=function(n,e){const t=$j(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Bi={zoom:0,distanceFromCenter:0};Ni.register(Gp,{...Ni.definitions,pitch:[{kind:"number"},[],n=>Bi.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Bi.distanceFromCenter||0]});let Dd,r0;function xe(n,e,t,i,r,s){const o=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[o]||(r[o]={});const a=r[o];if(!a[t]){let l=(n[e]||br)[t];const c=Qj[`${e}_${n.type}`][t];l===void 0&&(l=c.default);let d=Bj(l);if(!d&&jR(l)&&(l=Vj(l,c),d=!0),d){const f=qH(l,c);a[t]=f.evaluate.bind(f)}else c.type=="color"&&(l=Lt.parse(l)),a[t]=function(){return l}}return a[t](Bi,i,s)}function pE(n,e,t,i){return xe(n,"layout",`${t}-allow-overlap`,e,i)?xe(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function WH(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=Wj(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Bi,t)}function po(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const jH=/\{[^{}}]*\}/g;function s0(n,e){return n.replace(jH,function(t){return e[t.slice(1,-1)]||""})}function gE(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const HH={};function VH(n,e,t,i=Zr,r=void 0,s=void 0,o=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");HH[kH(e,n)]=Array.from(arguments);const l={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(const R in s){const F=s[R];Ql(()=>F).then(async O=>{let N;if(typeof Image<"u"){const L=new Image;if(typeof O=="string")L.crossOrigin="anonymous",L.src=O;else{let z;O instanceof Request?z=await fetch(O):O instanceof Response&&(z=O);const $=await z.blob();N=URL.createObjectURL($),L.src=N}L.addEventListener("load",function z(){L.removeEventListener("load",z),l[R]={image:L,size:[L.width,L.height]},n.changed(),N&&URL.revokeObjectURL(N)}),L.addEventListener("error",function z(){URL.revokeObjectURL(N),L.removeEventListener("error",z)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const L=self;L.postMessage({action:"loadImage",src:O}),L.addEventListener("message",function($){$.data.action==="imageLoaded"&&$.data.src===O&&(l[R]={image:$.data.image,size:[$.data.image.width,$.data.image.height]})})}})}const c=TR(e.layers),d={},f=[],p={},y={},m=o2(e),v=OH(e);let x;for(let R=0,F=c.length;R<F;++R){const O=c[R],N=O.id;if(typeof t=="string"&&O.source==t||Array.isArray(t)&&t.indexOf(N)!==-1){const L=O["source-layer"];if(x){if(O.source!==x)throw new Error(`Layer "${N}" does not use source "${x}`)}else{x=O.source;const $=e.sources[x];if(!$)throw new Error(`Source "${x}" is not defined`);const U=$.type;if(U!=="vector"&&U!=="geojson")throw new Error(`Source "${x}" is not of type "vector" or "geojson", but "${U}"`)}let z=d[L];z||(z=[],d[L]=z),z.push({layer:O,index:R}),f.push(N)}}const w=new li,E=new Qn,S=[],C=function(R,F,O){const N=R.getProperties(),L=d[N.layer];if(!L)return;let z=i.indexOf(F);z==-1&&(z=dv(F,i)),Bi.zoom=z,Bi.distanceFromCenter=0;const $=R.getGeometry(),U=UH[$.getType()],X=n.get("map");if(X&&X instanceof jp&&U===1){const H=X.getSize();if(H){const V=X.getView().getCenter(),ne=$i($.getExtent());Bi.distanceFromCenter=yU(V,ne)/F/H[1]}}const q={id:R.getId(),properties:N,type:U},G=n.get("mapbox-featurestate")[R.getId()];let Z=-1;for(let H=0,V=L.length;H<V;++H){const ne=L[H],j=ne.layer,ge=j.id;if(O!==void 0&&O!==ge)continue;const le=j.layout||br,Ce=j.paint||br;if(le.visibility==="none"||"minzoom"in j&&z<j.minzoom||"maxzoom"in j&&z>=j.maxzoom)continue;const qe=j.filter;if(!qe||WH(ge,qe,q,v)){let Ee,Ke,$e,Se,De,de;const At=ne.index;if(U==3&&(j.type=="fill"||j.type=="fill-extrusion"))if(Ke=xe(j,"paint",j.type+"-opacity",q,m,G),j.type+"-pattern"in Ce){const ct=xe(j,"paint",j.type+"-pattern",q,m,G);if(ct){const We=typeof ct=="string"?s0(ct,N):ct.toString(),Ze=gE(We,l);if(r&&r[We]&&Ze){++Z,de=S[Z],(!de||!de.getFill()||de.getStroke()||de.getText())&&(de=new fn({fill:new Qn}),S[Z]=de),$e=de.getFill(),de.setZIndex(At);const be=We+"."+Ke;let wt=y[be];if(!wt){const Fe=r[We],Ie=Hp(Fe.width,Fe.height),Ae=Ie.getContext("2d");Ae.globalAlpha=Ke,Ae.drawImage(Ze.image,Fe.x,Fe.y,Fe.width,Fe.height,0,0,Fe.width,Fe.height),wt=Ae.createPattern(Ie,"repeat"),y[be]=wt}$e.setColor(wt)}}}else Ee=po(xe(j,"paint",j.type+"-color",q,m,G),Ke),j.type+"-outline-color"in Ce&&(De=po(xe(j,"paint",j.type+"-outline-color",q,m,G),Ke)),De||(De=Ee),(Ee||De)&&(++Z,de=S[Z],(!de||Ee&&!de.getFill()||!Ee&&de.getFill()||De&&!de.getStroke()||!De&&de.getStroke()||de.getText())&&(de=new fn({fill:Ee?new Qn:void 0,stroke:De?new li:void 0}),S[Z]=de),Ee&&($e=de.getFill(),$e.setColor(Ee)),De&&(Se=de.getStroke(),Se.setColor(De),Se.setWidth(.5)),de.setZIndex(At));if(U!=1&&j.type=="line"){"line-pattern"in Ce?Ee=void 0:Ee=po(xe(j,"paint","line-color",q,m,G),xe(j,"paint","line-opacity",q,m,G));const ct=xe(j,"paint","line-width",q,m,G);Ee&&ct>0&&(++Z,de=S[Z],(!de||!de.getStroke()||de.getFill()||de.getText())&&(de=new fn({stroke:new li}),S[Z]=de),Se=de.getStroke(),Se.setLineCap(xe(j,"layout","line-cap",q,m,G)),Se.setLineJoin(xe(j,"layout","line-join",q,m,G)),Se.setMiterLimit(xe(j,"layout","line-miter-limit",q,m,G)),Se.setColor(Ee),Se.setWidth(ct),Se.setLineDash(Ce["line-dasharray"]?xe(j,"paint","line-dasharray",q,m,G).map(function(We){return We*ct}):null),de.setZIndex(At))}let Nn=!1,Ue=null,Nt=0,ut,vt,Ut;if((U==1||U==2)&&"icon-image"in le){const ct=xe(j,"layout","icon-image",q,m,G);if(ct){ut=typeof ct=="string"?s0(ct,N):ct.toString();let We;const Ze=a?a(n,ut):void 0,be=gE(ut,l);if(r&&r[ut]&&be||Ze){const wt=xe(j,"layout","icon-rotation-alignment",q,m,G);if(U==2){const Fe=R.getGeometry();if(Fe.getFlatMidpoint||Fe.getFlatMidpoints){const Ie=Fe.getExtent();if(Math.sqrt(Math.max(Math.pow((Ie[2]-Ie[0])/F,2),Math.pow((Ie[3]-Ie[1])/F,2)))>150){const Et=Fe.getType()==="MultiLineString"?Fe.getFlatMidpoints():Fe.getFlatMidpoint();if(r0||(Dd=[NaN,NaN],r0=new Kn("Point",Dd,[],2,{},void 0)),We=r0,Dd[0]=Et[0],Dd[1]=Et[1],xe(j,"layout","symbol-placement",q,m,G)==="line"&&wt==="map"){const Kt=Fe.getStride(),Ct=Fe.getFlatCoordinates();for(let kt=0,ft=Ct.length-Kt;kt<ft;kt+=Kt){const qt=Ct[kt],tn=Ct[kt+1],pt=Ct[kt+Kt],ln=Ct[kt+Kt+1],Gn=Math.min(qt,pt),sr=Math.max(qt,pt),Ei=Et[0],un=Et[1],zn=(ln-tn)*(Ei-qt)-(pt-qt)*(un-tn);if(Math.abs(zn)<.001&&Ei<=sr&&Ei>=Gn){Nt=Math.atan2(tn-ln,pt-qt);break}}}}}}if(U!==2||We){const Fe=xe(j,"layout","icon-size",q,m,G),Ie=Ce["icon-color"]!==void 0?xe(j,"paint","icon-color",q,m,G):null;if(!Ie||Ie.a!==0){const Ae=xe(j,"paint","icon-halo-color",q,m,G),Et=xe(j,"paint","icon-halo-width",q,m,G);let jt=`${ut}.${Fe}.${Et}.${Ae}`;if(Ie!==null&&(jt+=`.${Ie}`),vt=p[jt],!vt){const Kt=pE(j,q,"icon",m);let Ct;"icon-offset"in le&&(Ct=xe(j,"layout","icon-offset",q,m,G).slice(0),Ct[0]*=Fe,Ct[1]*=-Fe);let kt=Ie?[Ie.r*255,Ie.g*255,Ie.b*255,Ie.a]:void 0;if(Ze){const ft={color:kt,rotateWithView:wt==="map",displacement:Ct,declutterMode:Kt,scale:Fe};typeof Ze=="string"?ft.src=Ze:(ft.img=Ze,ft.imgSize=[Ze.width,Ze.height]),vt=new $a(ft)}else{const ft=r[ut];let qt,tn,pt;if(Et)ft.sdf?(qt=hE(dE(be.image,ft,Ie||[0,0,0,1]),{x:0,y:0,width:ft.width,height:ft.height,pixelRatio:ft.pixelRatio},Et,Ae),kt=void 0):qt=hE(be.image,ft,Et,Ae);else{if(ft.sdf&&!be.unSDFed){const ln=dE(be.image,{x:0,y:0,width:be.size[0],height:be.size[1]},{r:1,g:1,b:1});be.image=ln,be.unSDFed=!0}qt=be.image,tn=[ft.width,ft.height],pt=[ft.x,ft.y]}vt=new $a({color:kt,img:qt,imgSize:be.size,size:tn,offset:pt,rotateWithView:wt==="map",scale:Fe/ft.pixelRatio,displacement:Ct,declutterMode:Kt})}p[jt]=vt}}vt&&(++Z,de=S[Z],(!de||!de.getImage()||de.getFill()||de.getStroke())&&(de=new fn,S[Z]=de),de.setGeometry(We),vt.setRotation(Nt+t0(xe(j,"layout","icon-rotate",q,m,G))),vt.setOpacity(xe(j,"paint","icon-opacity",q,m,G)),vt.setAnchor(GH[xe(j,"layout","icon-anchor",q,m,G)]),de.setImage(vt),Ue=de.getText(),de.setText(void 0),de.setZIndex(At),Nn=!0,Ut=!1)}else Ut=!0}}}if(U==1&&j.type==="circle"){++Z,de=S[Z],(!de||!de.getImage()||de.getFill()||de.getStroke())&&(de=new fn,S[Z]=de);const ct="circle-radius"in Ce?xe(j,"paint","circle-radius",q,m,G):5,We=po(xe(j,"paint","circle-stroke-color",q,m,G),xe(j,"paint","circle-stroke-opacity",q,m,G)),Ze=xe(j,"paint","circle-translate",q,m,G),be=po(xe(j,"paint","circle-color",q,m,G),xe(j,"paint","circle-opacity",q,m,G)),wt=xe(j,"paint","circle-stroke-width",q,m,G),Fe=ct+"."+We+"."+be+"."+wt+"."+Ze[0]+"."+Ze[1];vt=p[Fe],vt||(vt=new zo({radius:ct,displacement:[Ze[0],-Ze[1]],stroke:We&&wt>0?new li({width:wt,color:We}):void 0,fill:be?new Qn({color:be}):void 0,declutterMode:"none"}),p[Fe]=vt),de.setImage(vt),Ue=de.getText(),de.setText(void 0),de.setGeometry(void 0),de.setZIndex(At),Nn=!0}let dt,Mn,Gt,k,Dt,Ve;if("text-field"in le){k=Math.round(xe(j,"layout","text-size",q,m,G));const ct=xe(j,"layout","text-font",q,m,G);Gt=xe(j,"layout","text-line-height",q,m,G),Mn=oy(o?o(ct,e.metadata?e.metadata["ol:webfonts"]:void 0):ct,k,Gt),Mn.includes("sans-serif")||(Mn+=",sans-serif"),Dt=xe(j,"layout","text-letter-spacing",q,m,G),Ve=xe(j,"layout","text-max-width",q,m,G);const We=xe(j,"layout","text-field",q,m,G);typeof We=="object"&&We.sections?We.sections.length===1?dt=We.toString():dt=We.sections.reduce((Ze,be,wt)=>{const Fe=be.fontStack?be.fontStack.split(","):ct,Ie=oy(o?o(Fe):Fe,k*(be.scale||1),Gt);let Ae=be.text;if(Ae===`
`)return Ze.push(`
`,""),Ze;if(U==2)return Ze.push(uy(Ae,Dt),Ie),Ze;Ae=cy(Ae,Ie,Ve,Dt).split(`
`);for(let Et=0,jt=Ae.length;Et<jt;++Et)Et>0&&Ze.push(`
`,""),Ze.push(Ae[Et],Ie);return Ze},[]):dt=s0(We,N).trim(),Ke=xe(j,"paint","text-opacity",q,m,G)}if(dt&&Ke&&!Ut){Nn||(++Z,de=S[Z],(!de||!de.getText()||de.getFill()||de.getStroke())&&(de=new fn,S[Z]=de),de.setImage(void 0),de.setGeometry(void 0));const ct=pE(j,q,"text",m);de.getText()||de.setText(Ue),Ue=de.getText(),(!Ue||"getDeclutterMode"in Ue&&Ue.getDeclutterMode()!==ct)&&(Ue=new Tp({padding:[2,2,2,2],declutterMode:ct}),de.setText(Ue));const We=xe(j,"layout","text-transform",q,m,G);We=="uppercase"?dt=Array.isArray(dt)?dt.map((pt,ln)=>ln%2?pt:pt.toUpperCase()):dt.toUpperCase():We=="lowercase"&&(dt=Array.isArray(dt)?dt.map((pt,ln)=>ln%2?pt:pt.toLowerCase()):dt.toLowerCase());const Ze=Array.isArray(dt)?dt:U==2?uy(dt,Dt):cy(dt,Mn,Ve,Dt);if(Ue.setText(Ze),Ue.setFont(Mn),Ue.setRotation(t0(xe(j,"layout","text-rotate",q,m,G))),typeof Ue.setKeepUpright=="function"){const pt=xe(j,"layout","text-keep-upright",q,m,G);Ue.setKeepUpright(pt)}const be=xe(j,"layout","text-anchor",q,m,G),wt=Nn||U==1?"point":xe(j,"layout","symbol-placement",q,m,G);let Fe;if(wt==="line-center"?(Ue.setPlacement("line"),Fe="center"):Ue.setPlacement(wt),wt==="line"&&typeof Ue.setRepeat=="function"){const pt=xe(j,"layout","symbol-spacing",q,m,G);Ue.setRepeat(pt*2)}Ue.setOverflow(wt==="point");let Ie=xe(j,"paint","text-halo-width",q,m,G);const Ae=xe(j,"layout","text-offset",q,m,G),Et=xe(j,"paint","text-translate",q,m,G);let jt=0,Kt=0;if(wt=="point"){Fe="center",be.indexOf("left")!==-1?(Fe="left",Kt=Ie):be.indexOf("right")!==-1&&(Fe="right",Kt=-Ie);const pt=xe(j,"layout","text-rotation-alignment",q,m,G);Ue.setRotateWithView(pt=="map")}else Ue.setMaxAngle(t0(xe(j,"layout","text-max-angle",q,m,G))*dt.length/Ze.length),Ue.setRotateWithView(!1);Ue.setTextAlign(Fe);let Ct="middle";be.indexOf("bottom")==0?(Ct="bottom",jt=-Ie-.5*(Gt-1)*k):be.indexOf("top")==0&&(Ct="top",jt=Ie+.5*(Gt-1)*k),Ue.setTextBaseline(Ct);const kt=xe(j,"layout","text-justify",q,m,G);Ue.setJustify(kt==="auto"?void 0:kt),Ue.setOffsetX(Ae[0]*k+Kt+Et[0]),Ue.setOffsetY(Ae[1]*k+jt+Et[1]),E.setColor(po(xe(j,"paint","text-color",q,m,G),Ke)),Ue.setFill(E);const ft=po(xe(j,"paint","text-halo-color",q,m,G),Ke);if(ft&&Ie>0){w.setColor(ft),Ie*=2;const pt=.5*k;w.setWidth(Ie<=pt?Ie:pt),Ue.setStroke(w)}else Ue.setStroke(void 0);const qt=xe(j,"layout","text-padding",q,m,G),tn=Ue.getPadding();qt!==tn[0]&&(tn[0]=qt,tn[1]=qt,tn[2]=qt,tn[3]=qt),de.setZIndex(At)}}}if(Z>-1)return S.length=Z+1,S};return n.setStyle(C),n.set("mapbox-layers",f),n.set("mapbox-source",x),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),C}class c2{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ns,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?It(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=It(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ze()}readFeature(e,t){return ze()}readFeatures(e,t){return ze()}readGeometry(e,t){return ze()}readProjection(e){return ze()}writeFeature(e,t){return ze()}writeFeatures(e,t){return ze()}writeGeometry(e,t){return ze()}}function Vp(n,e,t){const i=t?It(t.featureProjection):null,r=t?It(t.dataProjection):null;let s=n;if(i&&r&&!Yn(i,r)){e&&(s=n.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(za(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,d=l.length;c<d;++c)l[c]=Math.round(l[c]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}const XH={Point:Qr,LineString:Ga,Polygon:Ar,MultiPoint:oh,MultiLineString:Dc,MultiPolygon:ou};function YH(n,e,t){return Array.isArray(e[0])?(xR(n,0,e,t)||(n=n.slice(),Z0(n,0,e,t)),n):(M_(n,0,e,t)||(n=n.slice(),Pf(n,0,e,t)),n)}function h2(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>h2({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return Vp(new Kn(i,i==="Polygon"?YH(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function fv(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>fv(r,e));return new $f(i)}const t=XH[n.type];return Vp(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class KH extends c2{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Nd(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Nd(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ze()}readFeaturesFromObject(e,t){return ze()}readGeometry(e,t){return this.readGeometryFromObject(Nd(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ze()}readProjection(e){return this.readProjectionFromObject(Nd(e))}readProjectionFromObject(e){return ze()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ze()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ze()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ze()}}function Nd(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class mE extends KH{constructor(e){e=e||{},super(),this.dataProjection=It(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=It(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=pv(i.geometry);if(this.featureClass===Kn)return h2({geometry:r,id:i.id,properties:i.properties},t);const s=new Ns;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(fv(r,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],t);c&&r.push(c)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return ZH(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=It(t.properties.name);else if(t.type==="EPSG")i=It("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=hy(o,t),delete s[e.getGeometryName()]),Lo(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return hy(e,this.adaptOptions(t))}}function pv(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=QH(n);break}case"LineString":{t=e7(n);break}case"Polygon":{t=r7(n);break}case"MultiPoint":{t=n7(n);break}case"MultiLineString":{t=t7(n);break}case"MultiPolygon":{t=i7(n);break}case"GeometryCollection":{t=JH(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function ZH(n,e){const t=pv(n);return fv(t,e)}function JH(n,e){return n.geometries.map(function(i){return pv(i)})}function QH(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Xa(e.length)}}function e7(n){var i;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Xa(((i=e[0])==null?void 0:i.length)||2)}}function t7(n){var s,o;const e=n.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,i=[],r=Kc(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:Xa(t)}}function n7(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Xa(((t=e[0])==null?void 0:t.length)||2)}}function i7(n){var s,o;const e=n.coordinates,t=[],i=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,r=PS(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:Xa(i)}}function r7(n){var s,o;const e=n.coordinates,t=[],i=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,r=Kc(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:Xa(i)}}function hy(n,e){n=Vp(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=c7(n);break}case"LineString":{i=o7(n);break}case"Polygon":{i=h7(n,e);break}case"MultiPoint":{i=l7(n);break}case"MultiLineString":{i=a7(n);break}case"MultiPolygon":{i=u7(n,e);break}case"GeometryCollection":{i=s7(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function s7(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return hy(i,e)})}}function o7(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function a7(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function l7(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function u7(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function c7(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function h7(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const dy=65536*65536,yE=1/dy,d7=12,_E=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),o0=0,zd=1,Xu=2,Bd=5;class f7{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),s=r>>3,o=this.pos;this.type=r&7,e(s,t,this),this.pos===o&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*dy;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*dy;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,p7(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=d7&&_E?_E.decode(this.buf.subarray(t,e)):R7(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Xu?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===o0)for(;this.buf[this.pos++]>127;);else if(t===Xu)this.pos=this.readVarint()+this.pos;else if(t===Bd)this.pos+=4;else if(t===zd)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*yE),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*yE),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){g7(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=I7(this.buf,e,this.pos);const i=this.pos-t;i>=128&&vE(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&vE(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,Xu),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,_7,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,v7,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,b7,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,x7,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,w7,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,E7,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,C7,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,T7,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,S7,t)}writeBytesField(e,t){this.writeTag(e,Xu),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Bd),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Bd),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,zd),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,zd),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,o0),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,o0),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Xu),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Bd),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,zd),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function p7(n,e,t){const i=t.buf;let r,s;if(s=i[t.pos++],r=(s&112)>>4,s<128||(s=i[t.pos++],r|=(s&127)<<3,s<128)||(s=i[t.pos++],r|=(s&127)<<10,s<128)||(s=i[t.pos++],r|=(s&127)<<17,s<128)||(s=i[t.pos++],r|=(s&127)<<24,s<128)||(s=i[t.pos++],r|=(s&1)<<31,s<128))return bl(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function bl(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function g7(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),m7(t,i,e),y7(i,e)}function m7(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function y7(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function vE(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function _7(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function v7(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function x7(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function w7(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function b7(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function E7(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function C7(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function T7(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function S7(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function R7(n,e,t){let i="",r=e;for(;r<t;){const s=n[r];let o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>t)break;let l,c,d;a===1?s<128&&(o=s):a===2?(l=n[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=n[r+1],c=n[r+2],(l&192)===128&&(c&192)===128&&(o=(s&15)<<12|(l&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=n[r+1],c=n[r+2],d=n[r+3],(l&192)===128&&(c&192)===128&&(d&192)===128&&(o=(s&15)<<18|(l&63)<<12|(c&63)<<6|d&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),r+=a}return i}function I7(n,e,t){for(let i=0,r,s;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(s)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=r;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class d2 extends c2{constructor(e){super(),e=e||{},this.dataProjection=new yp({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Kn,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,c=0,d=0,f=0;for(;e.pos<s;){if(!a){const p=e.readVarint();o=p&7,a=p>>3}if(a--,o===1||o===2)l+=e.readSVarint(),c+=e.readSVarint(),o===1&&d>f&&(r.push(d),f=d),i.push(l,c),d+=2;else if(o===7)d>f&&(i.push(i[f],i[f+1]),d+=2);else throw new Error("Invalid command found in the PBF")}d>f&&(r.push(d),f=d)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],c=[];this.readRawGeometry_(e,t,l,c);const d=k7(r,c.length);if(this.featureClass===Kn)s=new this.featureClass(d,l,c,2,o,a),s.transform(i.dataProjection);else{let f;if(d=="Polygon"){const m=wR(l,c);f=m.length>1?new ou(l,"XY",m):new Ar(l,"XY",c)}else f=d==="Point"?new Qr(l,"XY"):d==="LineString"?new Ga(l,"XY"):d==="MultiPoint"?new oh(l,"XY"):d==="MultiLineString"?new Dc(l,"XY",c):null;const p=this.featureClass;s=new p,this.geometryName_&&s.setGeometryName(this.geometryName_);const y=Vp(f,!1,i);s.setGeometry(y),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=It(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const s=new f7(e),o=s.readFields(A7,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const c=o[l],d=c?[0,0,c.extent,c.extent]:null;r.setExtent(d);for(let f=0,p=c.length;f<p;++f){const y=L7(s,c,f),m=this.createFeature_(s,y,t);m!==null&&a.push(m)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function A7(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(P7,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function P7(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function M7(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[r]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function L7(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(M7,r,i),r}function k7(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class O7 extends w_{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Tr(l,Gr(t.extent,r.projection))),!a[Xt.ANIMATING]&&!a[Xt.INTERACTING]&&!Ha(l))if(o){const c=r.projection,d=o.getImage(l,s,i,c);d&&(this.loadImage(d)?this.image=d:d.getState()===ve.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=vn(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Da(s,r))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=lt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const d=pn(o),f=Math.floor(a.height*((o[3]-r[1])/d));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(e,t){const i=this.image,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],d=e.pixelRatio,f=e.viewState,p=f.center,y=f.resolution,m=d*o/(y*l),v=d*a/(y*l);this.prepareContainer(e,t);const x=this.context.canvas.width,w=this.context.canvas.height,E=this.getRenderContext(e);let S=!1,C=!0;if(c.extent){const L=Gr(c.extent,f.projection);C=on(L,e.extent),S=C&&!As(L,e.extent),S&&this.clipUnrotated(E,e,L)}const R=i.getImage(),F=Jr(this.tempTransform,x/2,w/2,m,v,0,l*(r[0]-p[0])/o,l*(p[1]-r[3])/a);this.renderedResolution=a*d/l;const O=R.width*F[0],N=R.height*F[3];if(this.getLayer().getSource().getInterpolate()||(E.imageSmoothingEnabled=!1),this.preRender(E,e),C&&O>=.5&&N>=.5){const L=F[4],z=F[5],$=c.opacity;$!==1&&(E.save(),E.globalAlpha=$),E.drawImage(R,0,0,+R.width,+R.height,L,z,O,N),$!==1&&E.restore()}return this.postRender(this.context,e),S&&E.restore(),E.imageSmoothingEnabled=!0,this.container}}class F7 extends fu{constructor(e){e=e||{},super(e)}}class f2 extends F7{constructor(e){super(e)}createRenderer(){return new O7(this)}getData(e){return super.getData(e)}}function fy(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const D7=new Error("disposed"),N7=[256,256];class xE extends ah{constructor(e){const t=pe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=fy(this.data_);return e?[e.width,e.height]:N7}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==pe.IDLE&&this.state!==pe.ERROR)return;this.state=pe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=pe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=pe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(D7),this.controller_=null),super.disposeInternal()}}let a0;const Bl=[];function wE(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function l0(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function z7(){if(a0===void 0){const n=en(6,6,Bl);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",wE(n,4,5,4,0),wE(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;a0=l0(e,0)||l0(e,4)||l0(e,8),Zc(n),Bl.push(n.canvas)}return a0}function py(n,e,t,i){const r=c_(t,e,n);let s=$0(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||Da(l,r)){const c=$0(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function B7(n,e,t,i){const r=$i(t);let s=py(n,e,r,i);return(!isFinite(s)||s<=0)&&fS(t,function(o){return s=py(n,e,o,i),isFinite(s)&&s>0}),s}function p2(n,e,t,i,r,s,o,a,l,c,d,f,p,y){const m=en(Math.round(t*n),Math.round(t*e),Bl);if(f||(m.imageSmoothingEnabled=!1),l.length===0)return m.canvas;m.scale(t,t);function v(R){return Math.round(R*t)/t}m.globalCompositeOperation="lighter";const x=ir();l.forEach(function(R,F,O){hS(x,R.extent)});let w;const E=t/i,S=(f?1:1+Math.pow(2,-24))/E;if(!p||l.length!==1||c!==0){if(w=en(Math.round(lt(x)*E),Math.round(pn(x)*E),Bl),f||(w.imageSmoothingEnabled=!1),r&&y){const R=(r[0]-x[0])*E,F=-(r[3]-x[3])*E,O=lt(r)*E,N=pn(r)*E;w.rect(R,F,O,N),w.clip()}l.forEach(function(R,F,O){if(R.image.width>0&&R.image.height>0){if(R.clipExtent){w.save();const U=(R.clipExtent[0]-x[0])*E,X=-(R.clipExtent[3]-x[3])*E,q=lt(R.clipExtent)*E,G=pn(R.clipExtent)*E;w.rect(f?U:Math.round(U),f?X:Math.round(X),f?q:Math.round(U+q)-Math.round(U),f?G:Math.round(X+G)-Math.round(X)),w.clip()}const N=(R.extent[0]-x[0])*E,L=-(R.extent[3]-x[3])*E,z=lt(R.extent)*E,$=pn(R.extent)*E;w.drawImage(R.image,c,c,R.image.width-2*c,R.image.height-2*c,f?N:Math.round(N),f?L:Math.round(L),f?z:Math.round(N+z)-Math.round(N),f?$:Math.round(L+$)-Math.round(L)),R.clipExtent&&w.restore()}})}const C=Us(o);return a.getTriangles().forEach(function(R,F,O){const N=R.source,L=R.target;let z=N[0][0],$=N[0][1],U=N[1][0],X=N[1][1],q=N[2][0],G=N[2][1];const Z=v((L[0][0]-C[0])/s),H=v(-(L[0][1]-C[1])/s),V=v((L[1][0]-C[0])/s),ne=v(-(L[1][1]-C[1])/s),j=v((L[2][0]-C[0])/s),ge=v(-(L[2][1]-C[1])/s),le=z,Ce=$;z=0,$=0,U-=le,X-=Ce,q-=le,G-=Ce;const qe=[[U,X,0,0,V-Z],[q,G,0,0,j-Z],[0,0,U,X,ne-H],[0,0,q,G,ge-H]],Ee=aU(qe);if(!Ee)return;if(m.save(),m.beginPath(),z7()||!f){m.moveTo(V,ne);const $e=4,Se=Z-V,De=H-ne;for(let de=0;de<$e;de++)m.lineTo(V+v((de+1)*Se/$e),ne+v(de*De/($e-1))),de!=$e-1&&m.lineTo(V+v((de+1)*Se/$e),ne+v((de+1)*De/($e-1)));m.lineTo(j,ge)}else m.moveTo(V,ne),m.lineTo(Z,H),m.lineTo(j,ge);m.clip(),m.transform(Ee[0],Ee[2],Ee[1],Ee[3],Z,H),m.translate(x[0]-le,x[3]-Ce);let Ke;if(w)Ke=w.canvas,m.scale(S,-S);else{const $e=l[0],Se=$e.extent;Ke=$e.image,m.scale(lt(Se)/Ke.width,-pn(Se)/Ke.height)}m.drawImage(Ke,0,0),m.restore()}),w&&(Zc(w),Bl.push(w.canvas)),d&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,a.getTriangles().forEach(function(R,F,O){const N=R.target,L=(N[0][0]-C[0])/s,z=-(N[0][1]-C[1])/s,$=(N[1][0]-C[0])/s,U=-(N[1][1]-C[1])/s,X=(N[2][0]-C[0])/s,q=-(N[2][1]-C[1])/s;m.beginPath(),m.moveTo($,U),m.lineTo(L,z),m.lineTo(X,q),m.closePath(),m.stroke()}),m.restore()),m.canvas}const $7=10,bE=.25;class g2{constructor(e,t,i,r,s,o,a){this.sourceProj_=e,this.targetProj_=t;let l={};const c=a?HU(S=>vn(a,c_(S,this.targetProj_,this.sourceProj_))):za(this.targetProj_,this.sourceProj_);this.transformInv_=function(S){const C=S[0]+"/"+S[1];return l[C]||(l[C]=c(S)),l[C]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&lt(r)>=lt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?lt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?lt(this.targetProj_.getExtent()):null;const d=Us(i),f=pp(i),p=fp(i),y=dp(i),m=this.transformInv_(d),v=this.transformInv_(f),x=this.transformInv_(p),w=this.transformInv_(y),E=$7+(o?Math.max(0,Math.ceil(Math.log2(F0(i)/(o*o*256*256)))):0);if(this.addQuad_(d,f,p,y,m,v,x,w,E),this.wrapsXInSource_){let S=1/0;this.triangles_.forEach(function(C,R,F){S=Math.min(S,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(C=>{if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-S>this.sourceWorldWidth_/2){const R=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];R[0][0]-S>this.sourceWorldWidth_/2&&(R[0][0]-=this.sourceWorldWidth_),R[1][0]-S>this.sourceWorldWidth_/2&&(R[1][0]-=this.sourceWorldWidth_),R[2][0]-S>this.sourceWorldWidth_/2&&(R[2][0]-=this.sourceWorldWidth_);const F=Math.min(R[0][0],R[1][0],R[2][0]);Math.max(R[0][0],R[1][0],R[2][0])-F<this.sourceWorldWidth_/2&&(C.source=R)}})}l={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){const d=k0([s,o,a,l]),f=this.sourceWorldWidth_?lt(d)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&f>.5&&f<1;let m=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=k0([e,t,i,r]);m=lt(x)/this.targetWorldWidth_>bE||m}!y&&this.sourceProj_.isGlobal()&&f&&(m=f>bE||m)}if(!m&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3])&&!on(d,this.maxSourceExtent_))return;let v=0;if(!m&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)m=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(c>0){if(!m){const x=[(e[0]+i[0])/2,(e[1]+i[1])/2],w=this.transformInv_(x);let E;y?E=(Ol(s[0],p)+Ol(a[0],p))/2-Ol(w[0],p):E=(s[0]+a[0])/2-w[0];const S=(s[1]+a[1])/2-w[1];m=E*E+S*S>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const x=[(t[0]+i[0])/2,(t[1]+i[1])/2],w=this.transformInv_(x),E=[(r[0]+e[0])/2,(r[1]+e[1])/2],S=this.transformInv_(E);this.addQuad_(e,t,x,E,s,o,w,S,c-1),this.addQuad_(E,x,i,r,S,w,a,l,c-1)}else{const x=[(e[0]+t[0])/2,(e[1]+t[1])/2],w=this.transformInv_(x),E=[(i[0]+r[0])/2,(i[1]+r[1])/2],S=this.transformInv_(E);this.addQuad_(e,x,E,r,s,w,S,l,c-1),this.addQuad_(x,t,i,E,w,o,a,S,c-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}v&11||this.addTriangle_(e,i,r,s,a,l),v&14||this.addTriangle_(e,i,t,s,a,o),v&&(v&13||this.addTriangle_(t,r,e,o,l,s),v&7||this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=ir();return this.triangles_.forEach(function(t,i,r){const s=t.source;ac(e,s[0]),ac(e,s[1]),ac(e,s[2])}),e}getTriangles(){return this.triangles_}}const m2=.5;class y2 extends ah{constructor(e,t,i,r,s,o,a,l,c,d,f,p){super(s,pe.IDLE,p),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const y=r.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const x=m?Tr(y,m):y;if(F0(x)===0){this.state=pe.EMPTY;return}const w=e.getExtent();w&&(v?v=Tr(v,w):v=w);const E=r.getResolution(this.wrappedTileCoord_[0]),S=B7(e,i,x,E);if(!isFinite(S)||S<=0){this.state=pe.EMPTY;return}const C=d!==void 0?d:m2;if(this.triangulation_=new g2(e,i,x,v,S*C,E),this.triangulation_.getTriangles().length===0){this.state=pe.EMPTY;return}this.sourceZ_=t.getZForResolution(S);let R=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(R[1]=Qt(R[1],v[1],v[3]),R[3]=Qt(R[3],v[1],v[3])):R=Tr(R,v)),!F0(R))this.state=pe.EMPTY;else{let F=0,O=0;e.canWrapX()&&(F=lt(w),O=Math.floor((R[0]-w[0])/F)),yS(R.slice(),e,!0).forEach(L=>{const z=t.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let $=z.minX;$<=z.maxX;$++)for(let U=z.minY;U<=z.maxY;U++){const X=c(this.sourceZ_,$,U,a);if(X){const q=O*F;this.sourceTiles_.push({tile:X,offset:q})}}++O}),this.sourceTiles_.length===0&&(this.state=pe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var r;const i=t.tile;if(i&&i.getState()==pe.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=pe.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=p2(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=pe.LOADED}this.changed()}load(){if(this.state==pe.IDLE){this.state=pe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==pe.IDLE||i==pe.LOADING){e++;const r=_t(t,ke.CHANGE,s=>{const o=t.getState();(o==pe.LOADED||o==pe.ERROR||o==pe.EMPTY)&&(Bt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==pe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Bt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Zc(this.canvas_.getContext("2d")),Bl.push(this.canvas_),this.canvas_=null),super.release()}}class EE{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Wc&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Rt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Rt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Rt(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Gf(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function U7(n,e,t){return n+"/"+e+"/"+t}function Yd(n,e,t,i,r){return`${Oe(n)},${e},${U7(t,i,r)}`}function G7(n){return q7(n[0],n[1],n[2])}function q7(n,e,t){return(e<<n)+t}function W7(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}function u0(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function j7(n,e,t){const i=n[t];return i?i.delete(e):!1}function CE(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Tr(e,Gr(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=Tr(e,r))}return e}class _2 extends w_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ir(),this.tempTileRange_=new uv(0,0,0,0),this.tempTileCoord_=Gf(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new EE(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new EE(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,r){const s=this.tileCache_,a=this.getLayer().getSource(),l=Yd(a,a.getKey(),e,t,i);let c;if(s.containsKey(l))c=s.get(l);else{const d=r.viewState.projection,f=a.getProjection();if(c=a.getTile(e,t,i,r.pixelRatio,d,!f||Yn(f,d)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,t,i,r){const s=this.getOrCreateTile(e,t,i,r);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=vn(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Da(s,r))return null;const o=t.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let d=l.getZForResolution(o.resolution);d>=l.getMinZoom();--d){const f=l.getTileCoordForCoordAndZ(r,d),p=this.getTile(d,f[1],f[2],t);if(!p||p.getState()!==pe.LOADED)continue;const y=l.getOrigin(d),m=Jn(l.getTileSize(d)),v=l.getResolution(d);let x;if(p instanceof i2||p instanceof y2)x=p.getImage();else if(p instanceof xE){if(x=fy(p.getData()),!x)continue}else continue;const w=Math.floor(c*((r[0]-y[0])/v-f[1]*m[0])),E=Math.floor(c*((y[1]-r[1])/v-f[2]*m[1])),S=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(x,w+S,E+S)}return null}prepareFrame(e){var r;this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),(r=this.sourceTileCache_)==null||r.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),d=Oe(l);d in e.wantedTiles||(e.wantedTiles[d]={});const f=e.wantedTiles[d],p=a.getMapInternal(),y=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),m=o.rotation,v=m?pS(o.center,o.resolution,m,e.size):void 0;for(let x=i;x>=y;--x){const w=c.getTileRangeForExtentAndZ(t,x,this.tempTileRange_),E=c.getResolution(x);for(let S=w.minX;S<=w.maxX;++S)for(let C=w.minY;C<=w.maxY;++C){if(m&&!c.tileCoordIntersectsViewport([x,S,C],v))continue;const R=this.getTile(x,S,C,e);if(!R||!u0(r,R,x))continue;const O=R.getKey();if(f[O]=!0,R.getState()===pe.IDLE&&!e.tileQueue.isKeyQueued(O)){const N=Gf(x,S,C,this.tempTileCoord_);e.tileQueue.enqueue([R,d,c.getTileCoordCenter(N),E])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=Yd(this.getLayer().getSource(),a[l],r,s,o);if(i.containsKey(c)){const d=i.peek(c);if(d.getState()===pe.LOADED)return d.endTransition(Oe(this)),u0(t,d,r),!0}}return!1}findAltTiles_(e,t,i,r){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let d=s.minX;d<=s.maxX;++d)for(let f=s.minY;f<=s.maxY;++f){const p=Yd(l,c,i,d,f);let y=!1;if(a.containsKey(p)){const m=a.peek(p);m.getState()===pe.LOADED&&(u0(r,m,i),y=!0)}y||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=e.pixelRatio,c=this.getLayer(),d=c.getSource(),f=d.getTileGridForProjection(s),p=f.getZForResolution(o,d.zDirection),y=f.getResolution(p),m=d.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==m&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=m):this.renderedSourceKey_=m;let v=e.extent;const x=d.getTilePixelRatio(l);this.prepareContainer(e,t);const w=this.context.canvas.width,E=this.context.canvas.height,S=i.extent&&Gr(i.extent);S&&(v=Tr(v,Gr(i.extent)));const C=y*w/2/x,R=y*E/2/x,F=[a[0]-C,a[1]-R,a[0]+C,a[1]+R],O={};this.renderedTiles.length=0;const N=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const V=f.getZForResolution(r.nextResolution,d.zDirection),ne=CE(e,e.nextExtent);this.enqueueTiles(e,ne,V,O,N)}const L=CE(e,v);if(this.enqueueTiles(e,L,p,O,0),N>0&&setTimeout(()=>{this.enqueueTiles(e,L,p-1,O,N-1)},0),!(p in O))return this.container;const z=Oe(this),$=e.time;for(const V of O[p]){const ne=V.getState();if(ne===pe.EMPTY)continue;const j=V.tileCoord;if(ne===pe.LOADED&&V.getAlpha(z,$)===1){V.endTransition(z);continue}if(ne!==pe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(j,O)){j7(O,V,p),e.animate=!0;continue}if(this.findAltTiles_(f,j,p+1,O))continue;const Ce=f.getMinZoom();for(let qe=p-1;qe>=Ce&&!this.findAltTiles_(f,j,qe,O);--qe);}const U=y/o*l/x,X=this.getRenderContext(e);Jr(this.tempTransform,w/2,E/2,U,U,0,-w/2,-E/2),i.extent&&this.clipUnrotated(X,e,S),d.getInterpolate()||(X.imageSmoothingEnabled=!1),this.preRender(X,e);const q=Object.keys(O).map(Number);q.sort(Hr);let G;const Z=[],H=[];for(let V=q.length-1;V>=0;--V){const ne=q[V],j=d.getTilePixelSize(ne,l,s),le=f.getResolution(ne)/y,Ce=j[0]*le*U,qe=j[1]*le*U,Ee=f.getTileCoordForCoordAndZ(Us(F),ne),Ke=f.getTileCoordExtent(Ee),$e=vn(this.tempTransform,[x*(Ke[0]-F[0])/y,x*(F[3]-Ke[3])/y]),Se=x*d.getGutterForProjection(s);for(const De of O[ne]){if(De.getState()!==pe.LOADED)continue;const de=De.tileCoord,At=Ee[1]-de[1],Nn=Math.round($e[0]-(At-1)*Ce),Ue=Ee[2]-de[2],Nt=Math.round($e[1]-(Ue-1)*qe),ut=Math.round($e[0]-At*Ce),vt=Math.round($e[1]-Ue*qe),Ut=Nn-ut,dt=Nt-vt,Mn=q.length===1;let Gt=!1;G=[ut,vt,ut+Ut,vt,ut+Ut,vt+dt,ut,vt+dt];for(let k=0,Dt=Z.length;k<Dt;++k)if(!Mn&&ne<H[k]){const Ve=Z[k];on([ut,vt,ut+Ut,vt+dt],[Ve[0],Ve[3],Ve[4],Ve[7]])&&(Gt||(X.save(),Gt=!0),X.beginPath(),X.moveTo(G[0],G[1]),X.lineTo(G[2],G[3]),X.lineTo(G[4],G[5]),X.lineTo(G[6],G[7]),X.moveTo(Ve[6],Ve[7]),X.lineTo(Ve[4],Ve[5]),X.lineTo(Ve[2],Ve[3]),X.lineTo(Ve[0],Ve[1]),X.clip())}Z.push(G),H.push(ne),this.drawTile(De,e,ut,vt,Ut,dt,Se,Mn),Gt&&X.restore(),this.renderedTiles.unshift(De),this.updateUsedTiles(e.usedTiles,d,De)}}if(this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!Ds(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=l,this.postRender(this.context,e),i.extent&&X.restore(),X.imageSmoothingEnabled=!0,this.renderComplete){const V=(ne,j)=>{var qe;const ge=Oe(d),le=j.wantedTiles[ge],Ce=le?Object.keys(le).length:0;this.updateCacheSize(Ce),this.tileCache_.expireCache(),(qe=this.sourceTileCache_)==null||qe.expireCache()};e.postRenderFunctions.push(V)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,s,o,a,l){let c;if(e instanceof xE){if(c=fy(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const d=this.getRenderContext(t),f=Oe(this),p=t.layerStatesArray[t.layerIndex],y=p.opacity*(l?e.getAlpha(f,t.time):1),m=y!==d.globalAlpha;m&&(d.save(),d.globalAlpha=y),d.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),m&&d.restore(),y!==p.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Oe(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const Io={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class H7 extends fu{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Io.PRELOAD)}setPreload(e){this.set(Io.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Io.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Io.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class gv extends H7{constructor(e){super(e)}createRenderer(){return new _2(this,{cacheSize:this.getCacheSize()})}}const V7={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},TE={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class X7 extends _2{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=vi(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,r,s,o,a,l){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,s,o,a,l)}getTile(e,t,i,r){const s=this.getOrCreateTile(e,t,i,r);if(!s)return null;const o=r.viewState,a=o.resolution,l=r.viewHints,c=this.getLayer().getSource(),d=c.getTileGridForProjection(o.projection),f=!(l[Xt.ANIMATING]||l[Xt.INTERACTING]),p=d.getZForResolution(a,c.zDirection)===e;return f&&p?s.wantedResolution=a:s.wantedResolution||(s.wantedResolution=d.getResolution(e)),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const c=r.getSource(),d=!!r.getDeclutter(),f=c.getTileGrid(),y=c.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),m=c.getSourceTiles(t,i,e),v=Oe(r);delete e.hitDetectionImageData[v],e.executorGroups[v]=[],l.dirty=!1;for(let x=0,w=m.length;x<w;++x){const E=m[x];if(E.getState()!=pe.LOADED)continue;const S=c.getProjection(),C=E.tileCoord;let R=f.getTileCoordExtent(C);i&&S&&!Yn(i,S)&&(R=jd(R,S,i,32));const F=Tr(y,R),O=Ao(F,r.getRenderBuffer()*a,this.tempExtent),N=Ds(R,F)?null:O,L=new YS(0,F,a,t),z=X0(a,t),$=function(Z,H){let V;const ne=Z.getStyleFunction()||r.getStyleFunction();if(ne&&(V=ne(Z,a)),V){const j=this.renderFeature(Z,z,V,L,d,H);l.dirty=l.dirty||j}},U=E.getFeatures();o&&o!==l.renderedRenderOrder&&U.sort(o);for(let Z=0,H=U.length;Z<H;++Z){let V=U[Z];i&&E.projection&&!Yn(i,E.projection)&&(V=V.clone(),V.getGeometry().applyTransform(za(E.projection,i))),(!N||on(N,V.getGeometry().getExtent()))&&$.call(this,V,Z)}const X=L.finish(),q=r.getRenderMode()!=="vector"&&d&&m.length===1?null:F,G=new KS(q,a,t,c.getOverlaps(),X,r.getRenderBuffer(),!0);e.executorGroups[v].push(G)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,s){var S,C;const o=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const l=this.getLayer(),d=l.getSource().getTileGridForProjection(t.viewState.projection),f=k0([e]);Ao(f,o*i,f);const p={},y=function(R,F,O){let N=R.getId();N===void 0&&(N=Oe(R));const L=p[N];if(L){if(L!==!0&&O<L.distanceSq){if(O===0)return p[N]=!0,s.splice(s.lastIndexOf(L),1),r(R,l,F);L.geometry=F,L.distanceSq=O}}else{if(O===0)return p[N]=!0,r(R,l,F);s.push(p[N]={feature:R,layer:l,geometry:F,distanceSq:O,callback:r})}},m=this.renderedTiles,v=Oe(l),x=l.getDeclutter(),w=x?(C=(S=t.declutter)==null?void 0:S[x])==null?void 0:C.all().map(R=>R.value):null;let E;e:for(let R=0,F=m.length;R<F;++R){const O=m[R],N=d.getTileCoordExtent(O.wrappedTileCoord);if(!on(N,f))continue;const L=O.executorGroups[v];for(let z=0,$=L.length;z<$;++z)if(E=L[z].forEachFeatureAtCoordinate(e,o,a,i,y,w),E)break e}return E}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),s=r.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,c=s.getTileGridForProjection(o),d=vn(this.renderedPixelToCoordinateTransform_,e.slice()),f=c.getTileCoordForCoordAndResolution(d,l).toString(),p=this.renderedTiles.find(S=>S.tileCoord.toString()===f&&S.getState()===pe.LOADED);if(!p||p.loadingSourceTiles>0){t([]);return}s.getWrapX()&&o.canWrapX()&&!As(a,c.getTileCoordExtent(p.tileCoord))&&s_(d,o);const y=Oe(r),m=c.getTileCoordExtent(p.wrappedTileCoord),v=Us(m),x=[(d[0]-v[0])/l,(v[1]-d[1])/l],w=p.getSourceTiles().reduce((S,C)=>S.concat(C.getFeatures()),[]);let E=p.hitDetectionImageData[y];if(!E){const S=Jn(c.getTileSize(c.getZForResolution(l,s.zDirection))),C=this.renderedRotation_,R=[this.getRenderTransform(c.getTileCoordCenter(p.wrappedTileCoord),l,0,ki,S[0]*ki,S[1]*ki,0)];E=JS(S,R,w,r.getStyleFunction(),c.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(r).renderedResolution,C),p.hitDetectionImageData[y]=E}t(QS(x,w,E))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=s.getZForResolution(this.renderedResolution),a={};return i.forEach(l=>{if(l.tileCoord[0]!==o||l.getState()!==pe.LOADED)return;const c=l.getSourceTiles();for(let d=0,f=c.length;d<f;++d){const p=c[d],y=p.getKey();if(y in a)continue;a[y]=!0;const m=p.tileCoord;if(on(e,s.getTileCoordExtent(m))){const v=p.getFeatures();if(v)for(let x=0,w=v.length;x<w;++x){const E=v[x],S=E.getGeometry();on(e,S.getExtent())&&t.push(E)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var p;const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[Xt.ANIMATING]||s[Xt.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?(p=e.declutter)==null?void 0:p[l]:void 0,d=Oe(this.getLayer()),f=this.renderedTiles;for(let y=0,m=f.length;y<m;++y){const v=f[y],x=v.executorGroups[d];if(x)for(let w=x.length-1;w>=0;--w)x[w].execute(this.context,a,this.getTileRenderTransform(v,e),e.viewState.rotation,o,Sf,c)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Oe(this.getLayer()),r=t.reduce((l,c,d)=>(c.executorGroups[i].forEach(f=>l.push({executorGroup:f,index:d})),l),[]),s=r.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),o={};for(let l=0,c=r.length;l<c;++l){const d=r[l].executorGroup.getDeferredZIndexContexts();for(const f in d)o[f]=!0}Object.keys(o).map(Number).sort(Hr).forEach(l=>{s.forEach((c,d)=>{c[l]&&(c[l].forEach(f=>{const{executorGroup:p,index:y}=r[d],m=p.getRenderedContext(),v=m.globalAlpha;m.globalAlpha=this.renderedOpacity_;const x=this.tileClipContexts_[y];x&&x.draw(m),f.draw(m),x&&m.restore(),m.globalAlpha=v,f.clear()}),c[l].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,s=r.center,o=r.resolution,a=r.rotation,l=t.size,c=Math.round(l[0]*i),d=Math.round(l[1]*i),p=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),y=e.tileCoord,m=p.getTileCoordExtent(e.wrappedTileCoord),v=p.getTileCoordExtent(y,this.tempExtent)[0]-m[0];return d_(Sm(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,o,a,i,c,d,v))}postRender(e,t){var R;const i=t.viewHints,r=!(i[Xt.ANIMATING]||i[Xt.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),c=l?TE[o].filter(F=>!Sf.includes(F)):TE[o],d=t.viewState,f=d.rotation,p=s.getSource(),m=p.getTileGridForProjection(d.projection).getZForResolution(d.resolution,p.zDirection),v=this.renderedTiles,x=[],w=[],E=[],S=Oe(s);let C=!0;for(let F=v.length-1;F>=0;--F){const O=v[F];C=C&&!O.getReplayState(s).dirty;const N=O.executorGroups[S].filter(G=>G.hasExecutors(c));if(N.length===0)continue;const L=this.getTileRenderTransform(O,t),z=O.tileCoord[0];let $=!1;const U=N[0].getClipCoords(L);let X=e,q;if(U){q=new x_,X=q.getContext();for(let G=0,Z=x.length;G<Z;++G)if(m!==z&&z<w[G]){const H=x[G];on([U[0],U[3],U[4],U[7]],[H[0],H[3],H[4],H[7]])&&($||(X.save(),$=!0),X.beginPath(),X.moveTo(U[0],U[1]),X.lineTo(U[2],U[3]),X.lineTo(U[4],U[5]),X.lineTo(U[6],U[7]),X.moveTo(H[6],H[7]),X.lineTo(H[4],H[5]),X.lineTo(H[2],H[3]),X.lineTo(H[0],H[1]),X.clip())}x.push(U),w.push(z)}for(let G=0,Z=N.length;G<Z;++G)N[G].execute(e,[e.canvas.width,e.canvas.height],L,f,r,c,(R=t.declutter)==null?void 0:R[l]);$&&(X===e?X.restore():E[F]=q)}e.globalAlpha=a,this.ready=C,this.tileClipContexts_=E,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=Rf(r,e,i[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=Rf(r,e,i,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),s=i.getRevision(),o=e.executorGroups[Oe(i)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],c=i.getSource();let d=t.pixelRatio;const p=t.viewState.projection,y=c.getTileGridForProjection(p),m=y.getResolution(e.tileCoord[0]),v=t.pixelRatio/e.wantedResolution*m,x=y.getResolution(l),w=e.getContext();d=Math.round(Math.max(d,v/d));const E=c.getTilePixelSize(l,d,p);w.canvas.width=E[0],w.canvas.height=E[1];const S=d/v;if(S!==1){const O=Z1(this.tmpTransform_);Sm(O,S,S),w.setTransform.apply(w,O)}const C=y.getTileCoordExtent(a,this.tempExtent),R=v/x,F=Z1(this.tmpTransform_);Sm(F,R,-R),ZU(F,-C[0],-C[3]);for(let O=0,N=o.length;O<N;++O)o[O].execute(w,[w.canvas.width*S,w.canvas.height*S],F,0,!0,V7[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class $l extends N_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";Rt(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new X7(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Io.PRELOAD)}getUseInterimTilesOnError(){return this.get(Io.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Io.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Io.USE_INTERIM_TILES_ON_ERROR,e)}}function gy(n){return Array.isArray(n)?Math.min(...n):n}class Y7 extends y_{constructor(e,t,i,r,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const d=c?Tr(i,c):i,f=$i(d),p=py(e,t,f,r),y=m2,m=new g2(e,t,d,l,p*y,r),v=m.calculateSourceExtent(),x=Ha(v)?null:o(v,p,s),w=x?ve.IDLE:ve.EMPTY,E=x?x.getPixelRatio():1;super(i,r,E,w),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=m,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=x,this.sourcePixelRatio_=E,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ve.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ve.LOADED){const t=lt(this.targetExtent_)/this.targetResolution_,i=pn(this.targetExtent_)/this.targetResolution_;this.canvas_=p2(t,i,this.sourcePixelRatio_,gy(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ve.IDLE){this.state=ve.LOADING,this.changed();const e=this.sourceImage_.getState();e==ve.LOADED||e==ve.ERROR?this.reproject_():(this.sourceListenerKey_=_t(this.sourceImage_,ke.CHANGE,t=>{const i=this.sourceImage_.getState();(i==ve.LOADED||i==ve.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Bt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const $d=4,c0={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class K7 extends rr{constructor(e,t){super(e),this.image=t}}class v2 extends yu{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=mp(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const s=this.getProjection();if(!s||!r||Yn(s,r))return s&&(r=s),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Yn(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&Ds(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Y7(s,r,e,t,i,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const s=Z7(e,t,i,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&As(this.wantedExtent_,s)||As(this.image.getExtent(),s))&&(this.wantedResolution_&&gy(this.wantedResolution_)===o||gy(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new y_(s,o,i,this.loader),this.image.addEventListener(ke.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case ve.LOADING:this.loading=!0,i=c0.IMAGELOADSTART;break;case ve.LOADED:this.loading=!1,i=c0.IMAGELOADEND;break;case ve.ERROR:this.loading=!1,i=c0.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new K7(i,t))}}function Z7(n,e,t,i){const r=e/t,s=$i(n),o=Eo(lt(n)/r,$d),a=Eo(pn(n)/r,$d),l=Eo((i-1)*o/2,$d),c=o+2*l,d=Eo((i-1)*a/2,$d),f=a+2*d;return mf(s,r,0,[c,f])}const El=[0,0,0],uo=5;class Xp{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Rt(dU(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Rt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Us(i)),Rt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Rt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:F_,Rt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new uv(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=xl(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return xl(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return xl(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),d=Math.floor(o*l);if(t<r)return xl(c,c,d,d,i);const f=Math.floor(l*(s+1))-1,p=Math.floor(l*(o+1))-1;return xl(c,f,d,p,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,El);const r=El[1],s=El[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,El);const o=El[1],a=El[2];return xl(r,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Jn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Jn(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Fs(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Jn(this.getTileSize(o),this.tmpSize_);let d=a*(e-l[0])/i/c[0],f=a*(l[1]-t)/i/c[1];return r?(d=Eo(d,uo)-1,f=Eo(f,uo)-1):(d=_d(d,uo),f=_d(f,uo)),Gf(o,d,f,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Jn(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],d=(o[1]-t)/a/l[1];return r?(c=Eo(c,uo)-1,d=Eo(d,uo)-1):(c=_d(c,uo),d=_d(d,uo)),Gf(i,c,d,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=mp(this.resolutions_,e,t||0);return Qt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return _R(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function mv(n){let e=n.getDefaultTileGrid();return e||(e=e9(n),n.setDefaultTileGrid(e)),e}function J7(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=uh(t);if(!Da(s,r)){const o=lt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function Q7(n,e,t,i){i=i!==void 0?i:"top-left";const r=x2(n,e,t);return new Xp({extent:n,origin:iU(n,i),resolutions:r,tileSize:t})}function lh(n){const e=n||{},t=e.extent||It("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:x2(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Xp(i)}function x2(n,e,t,i){e=e!==void 0?e:bR,t=Jn(t!==void 0?t:F_);const r=pn(n),s=lt(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function e9(n,e,t,i){const r=uh(n);return Q7(r,e,t,i)}function uh(n){n=It(n);let e=n.getExtent();if(!e){const t=180*ko.degrees/n.getMetersPerUnit();e=Fs(-t,-t,t,t)}return e}class w2 extends yu{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Jn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Oe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s,o){return ze()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:mv(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=Jn(r.getTileSize(e),this.tmpSize);return s==1?o:nq(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=J7(r,e,i)),W7(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class t9 extends rr{constructor(e,t){super(e),this.tile=t}}function b2(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,s=e.width,o=e.height,a=t.length,l=t[0].byteLength;if(r){const p=new Array(a);for(let m=0;m<a;++m)p[m]=new ImageData(new Uint8ClampedArray(t[m]),s,o);return n(p,i).data.buffer}const c=new Uint8ClampedArray(l),d=new Array(a),f=new Array(a);for(let p=0;p<a;++p)d[p]=new Uint8ClampedArray(t[p]),f[p]=[0,0,0,0];for(let p=0;p<l;p+=4){for(let m=0;m<a;++m){const v=d[m];f[m][0]=v[p],f[m][1]=v[p+1],f[m][2]=v[p+2],f[m][3]=v[p+3]}const y=n(f,i);c[p]=y[0],c[p+1]=y[1],c[p+2]=y[2],c[p+3]=y[3]}return c.buffer}}function n9(n,e){const i=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+b2.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function i9(n,e){const t=b2(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}class r9 extends Wc{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=n9(e,this.onWorkerMessage_.bind(this,r));else i[0]=i9(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(l){return l.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const c=l*a,d=[];for(let f=0,p=r.length;f<p;++f)d.push(r[f].slice(c,c+a));this.workers_[l].postMessage({buffers:d,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},d)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;i=new Uint8ClampedArray(s),r=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this.dataLookup_[a].buffer,c=a*o;i.set(new Uint8ClampedArray(l),c),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const SE={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class RE extends rr{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class E2 extends v2{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=a9(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(ke.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new YR(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:vi(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:o9(this.layers_),pixelRatio:1,pixelToCoordinateTransform:vi(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Oe(this),renderTargets:{}},this.setAttributions(function(i){var s;const r=[];for(let o=0,a=e.sources.length;o<a;++o){const l=e.sources[o],c=l instanceof yu?l:l.getSource();if(!c)continue;const d=(s=c.getAttributions())==null?void 0:s(i);typeof d=="string"?r.push(d):d!==void 0&&r.push(...d)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new r9({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const s=$i(e);r.size[0]=Math.ceil(lt(e)/t),r.size[1]=Math.ceil(pn(e)/t),r.extent=[s[0]-r.size[0]*t/2,s[1]-r.size[1]*t/2,s[0]+r.size[0]*t/2,s[1]+r.size[1]*t/2],r.time=Date.now();const o=r.viewState;return o.center=s,o.projection=i,o.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!Ds(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=s9(this.layers_[s],e);if(o)i[s]=o;else return}const r={};this.dispatchEvent(new RE(SE.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!Ds(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(lt(s)/o),c=Math.round(pn(s)/o);a=en(l,c),this.renderedImageCanvas_=new RH(s,o,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new RE(SE.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}E2.prototype.dispose;let oa=null;function s9(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===i&&o.height===r)return o.getContext("2d").getImageData(0,0,i,r)}if(!oa)oa=en(i,r,void 0,{willReadFrequently:!0});else{const a=oa.canvas;a.width!==i||a.height!==r?oa=en(i,r,void 0,{willReadFrequently:!0}):oa.clearRect(0,0,i,r)}return oa.drawImage(o,0,0,i,r),oa.getImageData(0,0,i,r)}function o9(n){return n.map(function(e){return e.getLayerState()})}function a9(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=l9(n[i]);return t}function l9(n){let e;return n instanceof yu?n instanceof w2?e=new gv({source:n}):n instanceof v2&&(e=new f2({source:n})):e=n,e}function u9(n,e,t,i){const r=document.createElement("script"),s="olc_"+Oe(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(r)}const c9=/\{z\}/g,h9=/\{x\}/g,d9=/\{y\}/g,f9=/\{-y\}/g;function p9(n,e,t,i,r){return n.replace(c9,e.toString()).replace(h9,t.toString()).replace(d9,i.toString()).replace(f9,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function g9(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function m9(n,e){return function(t,i,r){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return p9(n,o,t[1],t[2],s)}}function C2(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=m9(n[r],e);return y9(i)}function y9(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=G7(e),s=Ol(r,n.length);return n[s](e,t,i)}}const h0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Yp extends w2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Yp.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Oe(t),r=t.getState();let s;r==pe.LOADING?(this.tileLoadingKeys_[i]=!0,s=h0.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==pe.ERROR?h0.TILELOADERROR:r==pe.LOADED?h0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new t9(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=g9(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(C2(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class T2 extends Yp{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_9,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:i2,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Yn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Yn(t,e)))return this.tileGrid;const i=Oe(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=mv(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,d=new this.tileClass(a,c!==void 0?pe.IDLE:pe.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,d.addEventListener(ke.CHANGE,this.handleTileChange.bind(this)),d}getTile(e,t,i,r,s,o){const a=this.getProjection();if(!a||!s||Yn(a,s))return this.getTileInternal(e,t,i,r,a||s);const l=[e,t,i],c=this.getKey(),d=this.getTileGridForProjection(a),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),y=new y2(a,d,s,f,l,p,this.getTilePixelRatio(r),this.getGutter(),(m,v,x,w)=>this.getTileInternal(m,v,x,w,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=c,y}getTileInternal(e,t,i,r,s,o){const a=this.getKey(),l=Yd(this,a,e,t,i);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,t,i,r,s,a);return o==null||o.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=It(e);if(i){const r=Oe(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function _9(n,e){if(Zi){const t=n.getCrossOrigin();let i="same-origin",r="same-origin";t==="anonymous"||t===""?(i="cors",r="omit"):t==="use-credentials"&&(i="cors",r="include"),fetch(e,{mode:i,credentials:r}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{var l;const o=n.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),(l=s.close)==null||l.call(s),o.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class S2 extends T2{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:It("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)u9(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=It("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const c=Yc(t,i);r=gS(e.bounds,c)}const s=uh(i),o=e.minzoom||0,a=e.maxzoom||22,l=lh({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=C2(e.tiles,l),e.attribution&&!this.getAttributions()){const c=r!==void 0?r:s;this.setAttributions(function(d){return on(c,d.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class yv extends Yp{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||uh(t),r=e.tileGrid||lh({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:R2,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:r2,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===pe.IDLE){i.setState(pe.LOADING);const r=i.wrappedTileCoord,s=this.getTileGridForProjection(t);let o=s.getTileCoordExtent(r);const a=r[0],l=s.getResolution(a);Ao(o,-l,o);const c=this.projection;t&&this.projection&&!Yn(t,c)&&(o=jd(o,t,c));const d=this.tileGrid,f=d.getExtent();f&&Tr(o,f,o);let p=l;t&&c&&!Yn(t,c)&&(p=l/c.getMetersPerUnit()/t.getMetersPerUnit());const y=d.getZForResolution(p,this.zDirection);d.forEachTileCoord(o,y,m=>{const v=this.tileUrlFunction(m,e,t);this.sourceTiles_[v]||(this.sourceTiles_[v]=new this.tileClass(m,v?pe.IDLE:pe.EMPTY,v,this.format_,this.tileLoadFunction));const x=this.sourceTiles_[v];i.sourceTiles.push(x),this.tileKeysBySourceTileUrl_[v]||(this.tileKeysBySourceTileUrl_[v]=[]),this.tileKeysBySourceTileUrl_[v].push(i.getKey());const w=x.getState();if(w<pe.LOADED){const E=S=>{this.handleTileChange(S);const C=x.getState();if(C===pe.LOADED||C===pe.ERROR){const R=x.getKey();R in i.errorTileKeys?x.getState()===pe.LOADED&&delete i.errorTileKeys[R]:i.loadingSourceTiles--,C===pe.ERROR?i.errorTileKeys[R]=!0:x.removeEventListener(ke.CHANGE,E),i.loadingSourceTiles===0&&i.setState(Lo(i.errorTileKeys)?pe.LOADED:pe.ERROR)}};x.addEventListener(ke.CHANGE,E),i.loadingSourceTiles++}w===pe.IDLE&&(x.extent=d.getTileCoordExtent(m),x.projection=this.projection,x.resolution=d.getResolution(m[0]),x.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(m=>m.getState()===pe.ERROR)?pe.ERROR:pe.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,s=i.length;r<s;++r){const o=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const a=this.tileKeysBySourceTileUrl_[o].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(a,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,i,r,s){const o=[e,t,i];let a=this.getTileCoordForTileUrlFunction(o,s);const l=this.getTileGrid().getExtent(),c=this.projection,d=this.getTileGridForProjection(s);if(a&&l){const y=d.getTileCoordExtent(a);Ao(y,-d.getResolution(e),y),on(l,!s||!c||Yn(s,c)?y:jd(y,s,c))||(a=null)}let f=!0;if(a!==null){const y=this.tileGrid,m=d.getResolution(e);let v=m;s&&c&&!Yn(s,c)&&(v=m/c.getMetersPerUnit()/s.getMetersPerUnit());const x=y.getZForResolution(v,1),w=d.getTileCoordExtent(a);Ao(w,-m,w),y.forEachTileCoord(!s||!c||Yn(s,c)?w:jd(w,s,c),x,E=>{f=f&&!this.tileUrlFunction(E,r,c)})}const p=new AH(o,f?pe.EMPTY:pe.IDLE,a,this.getSourceTiles.bind(this,r,s),this.removeSourceTiles.bind(this));return p.key=this.getKey(),p}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.projection;if(r!==null&&!Yn(r,e))return mv(e);const s=this.tileGrid,o=s.getResolutions().slice(),a=o.map(function(d,f){return s.getOrigin(f)}),l=o.map(function(d,f){return s.getTileSize(f)}),c=bR+1;for(let d=o.length;d<c;++d)o.push(o[d-1]/2),a.push(a[d-1]),l.push(l[d-1]);i=new Xp({extent:s.getExtent(),origins:a,resolutions:o,tileSizes:l}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=Jn(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function R2(n,e){n.setLoader(function(t,i,r){n2(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function v9(n,e){const t=n[0],i=t.width,r=t.height,s=t.data,o=new Uint8ClampedArray(s.length),a=e.resolution*2,l=i-1,c=r-1,d=[0,0,0,0],f=2*Math.PI,p=Math.PI/2,y=Math.PI*e.sunEl/180,m=Math.PI*e.sunAz/180,v=Math.cos(y),x=Math.sin(y),w=e.highlightColor,E=e.shadowColor,S=e.accentColor,C=e.encoding;let R,F,O,N,L,z,$,U,X,q,G,Z,H,V,ne,j,ge,le,Ce,qe,Ee,Ke;function $e(Se,De="mapbox"){if(De==="mapbox")return(Se[0]*256*256+Se[1]*256+Se[2])*.1-1e4;if(De==="terrarium")return Se[0]*256+Se[1]+Se[2]/256-32768}for(F=0;F<=c;++F)for(L=F===0?0:F-1,z=F===c?c:F+1,R=0;R<=l;++R)O=R===0?0:R-1,N=R===l?l:R+1,$=(F*i+O)*4,d[0]=s[$],d[1]=s[$+1],d[2]=s[$+2],d[3]=s[$+3],U=e.vert*$e(d,C),$=(F*i+N)*4,d[0]=s[$],d[1]=s[$+1],d[2]=s[$+2],d[3]=s[$+3],X=e.vert*$e(d,C),q=(X-U)/a,$=(L*i+R)*4,d[0]=s[$],d[1]=s[$+1],d[2]=s[$+2],d[3]=s[$+3],U=e.vert*$e(d,C),$=(z*i+R)*4,d[0]=s[$],d[1]=s[$+1],d[2]=s[$+2],d[3]=s[$+3],X=e.vert*$e(d,C),G=(X-U)/a,H=Math.atan2(G,-q),H<0?H=p-H:H>p?H=f-H+p:H=p-H,Z=Math.atan(Math.sqrt(q*q+G*G)),Ke=x*Math.cos(Z)+v*Math.sin(Z)*Math.cos(m-H),V=Math.cos(Z),ne=255*Ke,Ce=Math.min(Math.max(2*e.sunEl,0),1),qe=1.875-e.opacity*1.75,Ee=e.opacity!==.5?p*((Math.pow(qe,Z)-1)/(Math.pow(qe,p)-1)):Z,ge={r:(1-V)*S.r*Ce*255,g:(1-V)*S.g*Ce*255,b:(1-V)*S.b*Ce*255,a:(1-V)*S.a*Ce*255},j=Math.abs(((H+m)/Math.PI+.5)%2-1),le={r:(w.r*(1-j)+E.r*j)*ne,g:(w.g*(1-j)+E.g*j)*ne,b:(w.b*(1-j)+E.b*j)*ne,a:(w.a*(1-j)+E.a*j)*ne},$=(F*i+R)*4,o[$]=ge.r*(1-j)+le.r,o[$+1]=ge.g*(1-j)+le.g,o[$+2]=ge.b*(1-j)+le.b,o[$+3]=s[$+3]*e.opacity*Ce*Math.sin(Ee);return new ImageData(o,i,r)}function x9(n,e=512){return n.getExtent()?lh({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Zr}function I2(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function A2(n,e,t="",i={},r=void 0){let s,o,a,l,c=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,l=a.source||a.layers,i=a):l=t,typeof i=="string"?(s=i,a={}):(s=i.styleUrl,a=i),a.updateSource===!1&&(c=!1),r||(r=a.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:Uf(s,a.accessToken),a=I2(s,a)),new Promise(function(d,f){a2(e,a).then(function(p){if(p.version!=8)return f(new Error("glStyle version 8 required."));if(!(n instanceof th||n instanceof $l))return f(new Error("Can only apply to VectorLayer or VectorTileLayer"));const y=n instanceof $l?"vector":"geojson";if(l?Array.isArray(l)?o=p.layers.find(function(C){return C.id===l[0]}).source:o=l:(o=p.layers.find(function(C){return C.source&&p.sources[C.source].type===y}).source,l=o),!o)return f(new Error(`No ${y} source found in the glStyle.`));function m(){if(!c)return Promise.resolve();if(n instanceof $l)return L2(p.sources[o],s,a).then(function(O){const N=n.getSource();N?O!==N&&(N.setTileUrlFunction(O.getTileUrlFunction()),typeof N.setUrls=="function"&&typeof O.getUrls=="function"&&N.setUrls(O.getUrls()),N.format_||(N.format_=O.format_),N.getAttributions()||N.setAttributions(O.getAttributions()),N.getTileLoadFunction()===R2&&N.setTileLoadFunction(O.getTileLoadFunction()),Yn(N.getProjection(),O.getProjection())&&(N.tileGrid=O.getTileGrid())):n.setSource(O);const L=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&L.getMinZoom()>0&&n.setMaxResolution(oc(Math.max(0,L.getMinZoom()-1e-12),L.getResolutions()))});const C=p.sources[o];let R=n.getSource();(!R||R.get("mapbox-source")!==C)&&(R=F2(C,s,a));const F=n.getSource();return F?R!==F&&(F.getAttributions()||F.setAttributions(R.getAttributions()),F.format_||(F.format_=R.getFormat()),F.url_=R.getUrl()):n.setSource(R),Promise.resolve()}let v,x;const w={},E={};function S(){if(!x&&(!p.sprite||w)){if(a.projection&&!r){const R=It(a.projection).getUnits();R!=="m"&&(r=Zr.map(F=>F/ko[R]))}x=VH(n,p,l,r,w,E,(C,R=a.webfonts)=>$H(C,R),a.getImage),n.getStyle()?m().then(d).catch(f):f(new Error(`Nothing to show for source [${o}]`))}else x?(n.setStyle(x),m().then(d).catch(f)):f(new Error("Something went wrong trying to apply style."))}if(p.sprite){const C=PH(p.sprite,a.accessToken,s||location.href);v=window.devicePixelRatio>=1.5?.5:1;const R=v==.5?"@2x":"";Promise.all(C.map(function(F){const O=new URL(F.url);let N=O.origin+O.pathname+R+".json"+O.search;return new Promise(function(L,z){au("Sprite",N,a).then(L).catch(function($){N=O.origin+O.pathname+".json"+O.search,au("Sprite",N,a).then(L).catch(z)})}).then(function(L){L===void 0&&f(new Error("No sprites found."));let z;if(z=O.origin+O.pathname+R+".png"+O.search,a.transformRequest){const $=a.transformRequest(z,"SpriteImage")||z;($ instanceof Request||$ instanceof Promise)&&(z=$)}E[F.id]=z;for(const $ in L){const U=F.id=="default"?$:`${F.id}:${$}`;w[U]=L[$]}}).catch(function(L){f(new Error(`Sprites cannot be loaded: ${N}: ${L.message}`))})})).then(S).catch(f)}else S()}).catch(f)})}function P2(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function w9(n,e){const t=n.bounds;if(t){const i=tu([t[0],t[1]],e),r=tu([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return It(e).getExtent()}function M2(n,e,t){const i=new S2({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),s=i.getTileGrid(),o=It(t.projection||"EPSG:3857"),a=w9(r,o),l=o.getExtent(),c=r.minzoom||0,d=r.maxzoom||22,f={attributions:i.getAttributions(),projection:o,tileGrid:new Xp({origin:l?Us(l):s.getOrigin(0),extent:a||s.getExtent(),minZoom:c,resolutions:x9(o,e.tileSize).slice(0,d+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?f.urls=r.tiles:f.url=r.tiles,f}function b9(n,e,t,i){const r={id:n.id,type:n.type},s=n.layout||{},o=n.paint||{};r.paint=o,Bi.zoom=dv(e,t.resolutions||Zr),Bi.distanceFromCenter=0;let a;const l=xe(r,"paint","background-color",br,i);return o["background-opacity"]!==void 0&&(a=xe(r,"paint","background-opacity",br,i)),s.visibility=="none"?void 0:po(l,a)}function E9(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new fu({source:new yu({}),render(r){const s=b9(n,r.viewState.resolution,e,t);return i.style.backgroundColor=s,i}})}function L2(n,e,t){return new Promise(function(i,r){l2(n,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=M2(n,s,t);a.tileLoadFunction=o,a.format=new d2;const l=new yv(a);l.set("mapbox-source",n),i(l)}).catch(r)})}function C9(n,e,t){const i=new $l({declutter:!0,visible:!1});return L2(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function k2(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function T9(n,e,t){return new Promise(function(i,r){l2(n,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=new S2({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});a.tileGrid=M2(n,s,t).tileGrid,t.projection&&(a.projection=It(t.projection));const l=a.getTileUrlFunction();o&&a.setTileLoadFunction(o),a.setTileUrlFunction(function(c,d,f){const p=k2(f);let y=l(c,d,f);if(y.indexOf(p)!=-1){const m=a.getTileGrid().getTileCoordExtent(c);y=y.replace(p,m.toString())}return y}),a.set("mapbox-source",n),i(a)}).catch(function(s){r(s)})})}function O2(n,e,t){const i=new gv;return T9(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function S9(n,e,t){const i=O2(n,e,t);return new f2({source:new E2({operationType:"image",operation:v9,sources:[i]})})}function F2(n,e,t){const i=t.projection?new mE({dataProjection:t.projection}):new mE,r=n.data,s={};if(typeof r=="string"){const[a]=Xd(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const c=(f,p,y)=>{const m=k2(y);return a.replace(m,`${f.join(",")}`)},d=new cc({attributions:n.attribution,format:i,loader:(f,p,y,m,v)=>{const x=typeof c=="function"?c(f,p,y):c;au("GeoJSON",x,t).then(w=>{const E=d.getFormat().readFeatures(w,{featureProjection:y});d.addFeatures(E),m(E)}).catch(w=>{d.removeLoadedExtent(f),v()})},strategy:SH});return d.set("mapbox-source",n),d}const l=new cc({attributions:n.attribution,format:i,url:a,loader:(c,d,f,p,y)=>{au("GeoJSON",a,t).then(m=>{const v=l.getFormat().readFeatures(m,{featureProjection:f});l.addFeatures(v),p(v)}).catch(m=>{l.removeLoadedExtent(c),y()})}});return l}s.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const o=new cc(Object.assign({attributions:n.attribution,format:i},s));return o.set("mapbox-source",n),o}function R9(n,e,t){return new th({declutter:!0,source:F2(n,e,t),visible:!1})}function I9(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],A9(n,e,i,t))}}function A9(n,e,t,i){Bi.zoom=t,Bi.distanceFromCenter=0;const r=xe(n,"paint","raster-opacity",br,i);e.setOpacity(r)}function P9(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=TR(i.layers),s=n.get("mapbox-layers"),o=r.filter(function(a){return s.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==o&&n.setVisible(o)}n.on("change",t),t()}function M9(n,e,t,i){const r=o2(n),s=n.layers,o=t.type,a=t.source||P2(s,t.ref),l=n.sources[a];let c;if(o=="background")c=E9(t,i,r);else if(l.type=="vector")c=C9(l,e,i);else if(l.type=="raster")c=O2(l,e,i),c.setVisible(t.layout?t.layout.visibility!=="none":!0),c.on("prerender",I9(t,c,r));else if(l.type=="geojson")c=R9(l,e,i);else if(l.type=="raster-dem"&&t.type=="hillshade"){const f=S9(l,e,i);c=f,f.getSource().on("beforeoperations",function(p){const y=p.data;y.resolution=$0(i.projection||"EPSG:3857",p.resolution,$i(p.extent),"m"),Bi.zoom=dv(p.resolution,i.resolutions||Zr),Bi.distanceFromCenter=0,y.encoding=l.encoding,y.vert=5*xe(t,"paint","hillshade-exaggeration",br,r),y.sunAz=xe(t,"paint","hillshade-illumination-direction",br,r),y.sunEl=35,y.opacity=.3,y.highlightColor=xe(t,"paint","hillshade-highlight-color",br,r),y.shadowColor=xe(t,"paint","hillshade-shadow-color",br,r),y.accentColor=xe(t,"paint","hillshade-accent-color",br,r)}),c.setVisible(t.layout?t.layout.visibility!=="none":!0)}const d=a;return c&&c.set("mapbox-source",d),c}function IE(n,e,t,i){const r=[];let s=null;if(e instanceof jp){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const f=i.projection?It(i.projection):s.getProjection();s=new vr(Object.assign(s.getProperties(),{maxResolution:Zr[0]/ko[f.getUnits()],projection:i.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(tu(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(Zr[0]/ko[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const o=n.layers;let a=[],l,c,d;for(let f=0,p=o.length;f<p;++f){const y=o[f],m=y.type;if(m=="heatmap"){console.debug(`layers[${f}].type "${m}" not supported`);continue}else d=y.source||P2(o,y.ref),(!d||d!=c)&&(a.length&&(r.push(PE(l,a,n,t,e,i)),a=[]),l=M9(n,t,y,i),l instanceof th||l instanceof $l||(a=[]),c=l.get("mapbox-source")),a.push(y.id)}return r.push(PE(l,a,n,t,e,i)),Promise.all(r)}function AE(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new jp({target:n}):r=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:Uf(e,t.accessToken);t=I2(s,t),i=new Promise(function(o,a){a2(e,t).then(function(l){IE(l,r,s,t).then(function(){o(r)}).catch(a)}).catch(function(l){a(new Error(`Could not load ${e}: ${l.message}`))})})}else i=new Promise(function(s,o){IE(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:Uf(t.styleUrl,t.accessToken),t).then(function(){s(r)}).catch(o)});return i}function PE(n,e,t,i,r,s={}){let o=24,a=0;const l=t.layers;for(let c=0,d=l.length;c<d;++c){const f=l[c];e.indexOf(f.id)!==-1&&(o=Math.min("minzoom"in f?f.minzoom:0,o),a=Math.max("maxzoom"in f?f.maxzoom:24,a))}return new Promise(function(c,d){const f=function(){const y=n.getSource();if(!y||y.getState()==="error"){d(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in y){const m=y.getTileGrid();if(m){const v=m.getMinZoom();(o>0||v>0)&&n.setMaxResolution(Math.min(oc(Math.max(0,o-1e-12),Zr),oc(Math.max(0,v-1e-12),m.getResolutions()))),a<24&&n.setMinResolution(oc(a,Zr))}}else o>0&&n.setMaxResolution(oc(Math.max(0,o-1e-12),Zr));y instanceof cc||y instanceof yv?A2(n,t,e,Object.assign({styleUrl:i},s)).then(function(){P9(n,r),c()}).catch(d):c()};n.set("mapbox-layers",e);const p=r.getLayers();p.getArray().indexOf(n)===-1&&p.push(n),n.getSource()?f():n.once("change:source",f)})}class L9 extends T2{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:lh({extent:uh(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const k9=()=>n=>{var t;return((t=n.getGeometry())==null?void 0:t.getType())==="Point"?new fn({image:new zo({radius:6,fill:new Qn({color:"#FF6600"}),stroke:new li({color:"#fff",width:2})})}):new fn({stroke:new li({color:"#FF6600",width:2}),fill:new Qn({color:"rgba(255, 102, 0, 0.2)"})})},O9=n=>{const e=new cc({features:(n.data??[]).map(i=>{let r;if(i.type==="Point"){const o=i.coordinates;r=new Qr(tu(o))}else r=new Ar(i.coordinates).transform("EPSG:4326","EPSG:3857");const s=new Ns({geometry:r,id:i.id,...i.meta});return i.label&&s.set("label",i.label),s})}),t=new th({source:e,visible:n.visible??!0,style:n.style??k9(),zIndex:n.zIndex??10});return t.set("id",n.id),t.set("kind",n.kind),t},F9=async n=>{switch(n.provider){case"mapbox":case"maptiler":const e=new Oo({visible:n.visible});return AE(e,n.styleUrl||n.url,{accessToken:n.accessToken}),e.set("id",n.id),e.set("kind",n.kind),e.set("label",n.label),Kd(e,{visible:!!n.visible,label:n.label,image:n.previewImage});case"arcgis":let t=function(l){const c=l[0],d=l[1],f=l[2];return`${n.url}/tile/${c}/${f}/${d}.pbf`};const i=`${n.url}/resources/styles/root.json`,r=It(n.projection),s=new $l({source:new yv({attributions:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',projection:r,format:new d2,tileGrid:lh({extent:r==null?void 0:r.getExtent(),tileSize:512,maxZoom:15}),tileUrlFunction:t}),visible:n.visible});s.set("id",n.id),s.set("kind",n.kind),s.set("label",n.label);const o=Kd(s,{visible:!!n.visible,label:n.label,image:n.previewImage});return await A2(o,i,"esri"),o;case"custom":const a=new Oo({visible:n.visible});return AE(a,n.styleUrl||n.url,{accessToken:n.accessToken}),a.set("id",n.id),a.set("kind",n.kind),a.set("label",n.label),Kd(a,{visible:!!n.visible,label:n.label,image:n.previewImage});default:throw new Error(`Unknown vector tile provider: ${n.provider}`)}},D9=n=>{const e=new gv({visible:n.visible??!0,source:new L9({url:n.url})});e.set("id",n.id),e.set("kind",n.kind),e.set("label",n.label);const{previewImage:t,label:i,visible:r}=n;return Kd(e,{image:t,label:i,visible:!!r})},Kd=(n,e)=>(n.set("meta",e),n),ha=n=>n.get("meta"),my="marker-layer",N9=(n,e=t=>console.warn("Tile error",t))=>{n.forEach(t=>{var i;if("getSource"in t&&typeof t.getSource=="function"){const r=t.getSource();(i=r==null?void 0:r.on)==null||i.call(r,"tileloaderror",e)}})},z9=(n=2,e=[0,0])=>(e||console.info("Center coordinates not set, using default"),new vr({constrainResolution:!1,zoom:n,center:tu(e),projection:"EPSG:3857",minZoom:0})),ME=["fullscreenchange","webkitfullscreenchange"],LE={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class B9 extends Wp{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"‚§¢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"√ó";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(ke.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Jc} ${wp}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(kE(t))if(OE(t))U9(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?$9(i):D2(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=OE(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(bf(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(LE.ENTERFULLSCREEN)):(bf(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(LE.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(On.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(On.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,r=e.length;i<r;++i)Bt(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();kE(i)?this.element.classList.remove(rb):this.element.classList.add(rb);for(let r=0,s=ME.length;r<s;++r)e.push(_t(i,ME[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function kE(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function OE(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function D2(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function $9(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():D2(n)}function U9(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}const G9=()=>JR({zoom:!1,rotate:!1,attribution:!0}),q9=(n,e=G9)=>{const t=e();return n!=null&&n.showZoom&&t.push(new ZR),n!=null&&n.showRotate&&t.push(new KR),n!=null&&n.showFullScreen&&t.push(new B9),t},W9=({target:n,layers:e,view:t,controls:i})=>new jp({target:n,layers:e,view:t,controls:i}),N2=({zoom:n,center:e,onFeatureClick:t,layers:i,mapInstanceRef:r,controls:s})=>{const o=oe.useRef(null),a=oe.useRef(z9(n,e));return oe.useEffect(()=>{if(!o.current||i.length<1)return;r.current=W9({target:o.current,controls:q9(s),layers:i,view:a.current}),N9(r.current.getLayers(),d=>console.warn("Tile error",d));const l=CR(i,my);if(!l){console.debug("No marker layer configured");return}const c=O8({map:r.current,layer:l,onSelect:d=>{const f=d.map(p=>{var y;return(y=p.getId)==null?void 0:y.call(p)}).filter(p=>typeof p=="string");d.length===1?Hd(r.current,d[0]):MS(r.current,d),t&&t(f)}});return()=>{var d,f;(d=r.current)==null||d.removeInteraction(c),(f=r.current)==null||f.setTarget(void 0)}},[i,n,e]),i.length<1?null:Q("div",{id:"TelicentMap",className:"map-container",style:{width:"100%",height:"100%",background:"#f8f4f0"},ref:o})};N2.__docgenInfo={description:"",methods:[],displayName:"MapCanvasV2",props:{layers:{required:!0,tsType:{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"},description:""},mapInstanceRef:{required:!0,tsType:{name:"ReactMutableRefObject",raw:"React.MutableRefObject<Map | null>",elements:[{name:"union",raw:"Map | null",elements:[{name:"Map"},{name:"null"}]}]},description:""},onFeatureClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},zoom:{required:!0,tsType:{name:"number"},description:""},center:{required:!0,tsType:{name:"Coordinate"},description:""},controls:{required:!1,tsType:{name:"Partial",elements:[{name:"MapControlsConfig"}],raw:"Partial<MapControlsConfig>"},description:""}}};const z2=({"aria-label":n,button:e,options:t,onSelect:i,onOpenChange:r,menuId:s="menu",anchorOrigin:o={vertical:"bottom",horizontal:"right"},transformOrigin:a={vertical:"top",horizontal:"right"},autoFocusSelected:l=!0})=>{const[c,d]=oe.useState(null),f=!!c,p=oe.useMemo(()=>t.findIndex(x=>x.selected),[t]),y=x=>{d(x.currentTarget),r==null||r(!0)},m=()=>{d(null),r==null||r(!1)};return Re(Uc,{children:[e({onClick:y,"aria-controls":f?s:void 0,"aria-haspopup":!0,"aria-expanded":f?!0:void 0}),Q(Iy,{id:s,anchorEl:c,open:f,onClose:m,anchorOrigin:o,transformOrigin:a,MenuListProps:{"aria-label":n,...l&&p>=0?{autoFocusItem:!0}:{}},children:t.map((x,w)=>Re(oe.Fragment,{children:[x.dividerAbove&&Q(b5,{}),Re(Ay,{disabled:x.disabled,selected:!!x.selected,autoFocus:l&&w===p,"aria-selected":x.selected?"true":void 0,onClick:()=>{var E;x.href&&window.open(x.href,x.target??"_self"),(E=x.onClick)==null||E.call(x),i==null||i(x),m()},children:[x.icon?Q(Qf,{children:x.icon}):null,Q(ep,{children:x.label})]})]},x.id))})]})};z2.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{"aria-label":{required:!1,tsType:{name:"string"},description:""},button:{required:!0,tsType:{name:"signature",type:"function",raw:`(props: {
  onClick: (e: React.MouseEvent<HTMLElement>) => void;
  "aria-controls": string | undefined;
  "aria-haspopup": true;
  "aria-expanded": boolean | undefined;
}) => React.ReactNode`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  onClick: (e: React.MouseEvent<HTMLElement>) => void;
  "aria-controls": string | undefined;
  "aria-haspopup": true;
  "aria-expanded": boolean | undefined;
}`,signature:{properties:[{key:"onClick",value:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLElement>",elements:[{name:"HTMLElement"}]},name:"e"}],return:{name:"void"}},required:!0}},{key:"aria-controls",value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}},{key:"aria-haspopup",value:{name:"literal",value:"true",required:!0}},{key:"aria-expanded",value:{name:"union",raw:"boolean | undefined",elements:[{name:"boolean"},{name:"undefined"}],required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  label: React.ReactNode;
  onClick?: () => void;

  disabled?: boolean;
  icon?: React.ReactNode;

  href?: string;
  target?: "_blank" | "_self" | "_parent" | "_top";
  dividerAbove?: boolean;
  selected?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!0}},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"href",value:{name:"string",required:!1}},{key:"target",value:{name:"union",raw:'"_blank" | "_self" | "_parent" | "_top"',elements:[{name:"literal",value:'"_blank"'},{name:"literal",value:'"_self"'},{name:"literal",value:'"_parent"'},{name:"literal",value:'"_top"'}],required:!1}},{key:"dividerAbove",value:{name:"boolean",required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]}}],raw:"MenuOption[]"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: MenuOption) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  label: React.ReactNode;
  onClick?: () => void;

  disabled?: boolean;
  icon?: React.ReactNode;

  href?: string;
  target?: "_blank" | "_self" | "_parent" | "_top";
  dividerAbove?: boolean;
  selected?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!0}},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"href",value:{name:"string",required:!1}},{key:"target",value:{name:"union",raw:'"_blank" | "_self" | "_parent" | "_top"',elements:[{name:"literal",value:'"_blank"'},{name:"literal",value:'"_self"'},{name:"literal",value:'"_parent"'},{name:"literal",value:'"_top"'}],required:!1}},{key:"dividerAbove",value:{name:"boolean",required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]}},name:"option"}],return:{name:"void"}}},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},menuId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"menu"',computed:!1}},anchorOrigin:{required:!1,tsType:{name:'ReactComponentProps["anchorOrigin"]',raw:'React.ComponentProps<typeof MUIMenu>["anchorOrigin"]'},description:"",defaultValue:{value:'{ vertical: "bottom", horizontal: "right" }',computed:!1}},transformOrigin:{required:!1,tsType:{name:'ReactComponentProps["transformOrigin"]',raw:'React.ComponentProps<typeof MUIMenu>["transformOrigin"]'},description:"",defaultValue:{value:'{ vertical: "top", horizontal: "right" }',computed:!1}},autoFocusSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const j9=n=>{const e=localStorage.getItem("map.baselayer"),t=n.filter(r=>r.get("kind")!=="overlay-vector");if(e){const r=t.findIndex(s=>{var o;return((o=ha(s))==null?void 0:o.label)===e});if(r!==-1)return r}const i=t.findIndex(r=>{var s;return(s=ha(r))==null?void 0:s.visible});return i!==-1?i:0},B2=({layers:n,style:e={}})=>{const t=ts(),i=j9(n),[r,s]=oe.useState(i!==-1?i:0),o=oe.useMemo(()=>n.filter(d=>{var f;return(f=d.get("kind"))==null?void 0:f.startsWith("base")}),[n]),a=oe.useMemo(()=>ha(o[r]),[o,r]),l=d=>{localStorage.setItem("map.baselayer",d),n.forEach(f=>{const p=ha(f);if(f.get("kind")==="overlay-vector")return;const y=(p==null?void 0:p.label)===d;if(f.setVisible(y),y){const m=o.findIndex(v=>{var x;return((x=ha(v))==null?void 0:x.label)===d});m!==-1&&s(m)}})};if(oe.useEffect(()=>{const d=localStorage.getItem("map.baselayer");if(d){l(d);return}const f=o.findIndex(p=>{var y;return(y=ha(p))==null?void 0:y.visible});s(f!==-1?f:0)},[n]),o.length<=1||r==null)return null;const c=o.map((d,f)=>{const p=ha(d),y=f===r;return{id:p.label,onClick:()=>l(p.label),selected:y,icon:Q(Zl,{src:p.image,role:"presentation",title:p.label}),label:Q(er,{textTransform:"capitalize",variant:"body2",children:p.label})}});return Q("div",{id:"layer-selector",style:{...e},children:Q(z2,{"aria-label":"layer selector",menuId:"layer-selector-menu",options:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},button:d=>Re(Oa,{...d,id:"layer-selector",variant:"text",sx:{p:1,display:"flex",alignItems:"center",gap:"6px",backgroundColor:"#1D1D1D",color:"white","&:hover":{color:t.palette.primary.main,backgroundColor:"#1D1D1D"}},children:[a!=null&&a.image?Q(Zl,{src:a.image,alt:a.label,title:a.label}):null,Q(Bs,{icon:d["aria-expanded"]?Ty:Sy})]})})})};B2.__docgenInfo={description:"",methods:[],displayName:"LayerSelectorV2",props:{layers:{required:!0,tsType:{name:"Array",elements:[{name:"BaseLayer"}],raw:"BaseLayer[]"},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"",defaultValue:{value:"{}",computed:!1}}}};function H9(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function Nc(n,e,t,i){this.message=n,this.expected=e,this.found=t,this.location=i,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Nc)}H9(Nc,Error);Nc.buildMessage=function(n,e){var t={literal:function(c){return'"'+r(c.text)+'"'},class:function(c){var d="",f;for(f=0;f<c.parts.length;f++)d+=c.parts[f]instanceof Array?s(c.parts[f][0])+"-"+s(c.parts[f][1]):s(c.parts[f]);return"["+(c.inverted?"^":"")+d+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function i(c){return c.charCodeAt(0).toString(16).toUpperCase()}function r(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d)})}function o(c){return t[c.type](c)}function a(c){var d=new Array(c.length),f,p;for(f=0;f<c.length;f++)d[f]=o(c[f]);if(d.sort(),d.length>0){for(f=1,p=1;f<d.length;f++)d[f-1]!==d[f]&&(d[p]=d[f],p++);d.length=p}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function l(c){return c?'"'+r(c)+'"':"end of input"}return"Expected "+a(n)+" but "+l(e)+" found."};function V9(n,e){e=e!==void 0?e:{};var t={},i={svg_path:jt},r=jt,s=function(T){if(!T)return[];for(var A=[],B=0;B<T.length;B++)A=A.concat.apply(A,T[B]);var M=A[0];return M&&M.code=="m"&&(delete M.relative,M.code="M"),A},o=function(T,A){return tg(T,A)},a=/^[Mm]/,l=be(["M","m"],!1,!1),c=function(T,A,B){var M=qs(T,[A]);return B&&(M=M.concat(qs(T=="M"?"L":"l",B[1]))),M},d=/^[Zz]/,f=be(["Z","z"],!1,!1),p=function(){return qs("Z")},y=/^[Ll]/,m=be(["L","l"],!1,!1),v=function(T,A){return qs(T,A)},x=/^[Hh]/,w=be(["H","h"],!1,!1),E=function(T,A){return qs(T,A.map(function(B){return{x:B}}))},S=/^[Vv]/,C=be(["V","v"],!1,!1),R=function(T,A){return qs(T,A.map(function(B){return{y:B}}))},F=/^[Cc]/,O=be(["C","c"],!1,!1),N=function(T,A,B){return{x1:T.x,y1:T.y,x2:A.x,y2:A.y,x:B.x,y:B.y}},L=/^[Ss]/,z=be(["S","s"],!1,!1),$=function(T,A){return{x2:T.x,y2:T.y,x:A.x,y:A.y}},U=/^[Qq]/,X=be(["Q","q"],!1,!1),q=function(T,A){return{x1:T.x,y1:T.y,x:A.x,y:A.y}},G=/^[Tt]/,Z=be(["T","t"],!1,!1),H=/^[Aa]/,V=be(["A","a"],!1,!1),ne=function(T,A,B,M,K,he){return{rx:T,ry:A,xAxisRotation:B,largeArc:M,sweep:K,x:he.x,y:he.y}},j=function(T,A){return{x:T,y:A}},ge=function(T){return T*1},le=function(T){return T.join("")*1},Ce=/^[01]/,qe=be(["0","1"],!1,!1),Ee=function(T){return T=="1"},Ke=function(){return""},$e=",",Se=Ze(",",!1),De=function(T){return T.join("")},de=".",At=Ze(".",!1),Nn=/^[eE]/,Ue=be(["e","E"],!1,!1),Nt=/^[+\-]/,ut=be(["+","-"],!1,!1),vt=/^[0-9]/,Ut=be([["0","9"]],!1,!1),dt=function(T){return T.join("")},Mn=/^[ \t\n\r]/,Gt=be([" ","	",`
`,"\r"],!1,!1),k=0,Dt=[{line:1,column:1}],Ve=0,ct=[],We;if("startRule"in e){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');r=i[e.startRule]}function Ze(T,A){return{type:"literal",text:T,ignoreCase:A}}function be(T,A,B){return{type:"class",parts:T,inverted:A,ignoreCase:B}}function wt(){return{type:"end"}}function Fe(T){var A=Dt[T],B;if(A)return A;for(B=T-1;!Dt[B];)B--;for(A=Dt[B],A={line:A.line,column:A.column};B<T;)n.charCodeAt(B)===10?(A.line++,A.column=1):A.column++,B++;return Dt[T]=A,A}function Ie(T,A){var B=Fe(T),M=Fe(A);return{start:{offset:T,line:B.line,column:B.column},end:{offset:A,line:M.line,column:M.column}}}function Ae(T){k<Ve||(k>Ve&&(Ve=k,ct=[]),ct.push(T))}function Et(T,A,B){return new Nc(Nc.buildMessage(T,A),T,A,B)}function jt(){var T,A,B,M,K;for(T=k,A=[],B=Qe();B!==t;)A.push(B),B=Qe();if(A!==t)if(B=Kt(),B===t&&(B=null),B!==t){for(M=[],K=Qe();K!==t;)M.push(K),K=Qe();M!==t?(A=s(B),T=A):(k=T,T=t)}else k=T,T=t;else k=T,T=t;return T}function Kt(){var T,A,B,M,K,he;if(T=k,A=Ct(),A!==t){for(B=[],M=k,K=[],he=Qe();he!==t;)K.push(he),he=Qe();for(K!==t?(he=Ct(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;){for(B.push(M),M=k,K=[],he=Qe();he!==t;)K.push(he),he=Qe();K!==t?(he=Ct(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t)}B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function Ct(){var T,A,B,M,K,he;if(T=k,A=ft(),A!==t){for(B=[],M=k,K=[],he=Qe();he!==t;)K.push(he),he=Qe();for(K!==t?(he=kt(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;){for(B.push(M),M=k,K=[],he=Qe();he!==t;)K.push(he),he=Qe();K!==t?(he=kt(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t)}B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function kt(){var T;return T=qt(),T===t&&(T=tn(),T===t&&(T=ln(),T===t&&(T=sr(),T===t&&(T=Ei(),T===t&&(T=wn(),T===t&&(T=ei(),T===t&&(T=xt(),T===t&&(T=$o())))))))),T}function ft(){var T,A,B,M,K,he,Ws;if(T=k,a.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(l)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=yn(),M!==t?(K=k,he=Pt(),he===t&&(he=null),he!==t?(Ws=pt(),Ws!==t?(he=[he,Ws],K=he):(k=K,K=t)):(k=K,K=t),K===t&&(K=null),K!==t?(A=c(A,M,K),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function qt(){var T,A;return T=k,d.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(f)),A!==t&&(A=p()),T=A,T}function tn(){var T,A,B,M;if(T=k,y.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(m)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=pt(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function pt(){var T,A,B,M,K,he;if(T=k,A=yn(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=yn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=yn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function ln(){var T,A,B,M;if(T=k,x.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(w)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=Gn(),M!==t?(A=E(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function Gn(){var T,A,B,M,K,he;if(T=k,A=or(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=or(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=or(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function sr(){var T,A,B,M;if(T=k,S.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(C)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=Gn(),M!==t?(A=R(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function Ei(){var T,A,B,M;if(T=k,F.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(O)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=un(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function un(){var T,A,B,M,K,he;if(T=k,A=zn(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=zn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=zn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function zn(){var T,A,B,M,K,he;return T=k,A=yn(),A!==t?(B=Pt(),B===t&&(B=null),B!==t?(M=yn(),M!==t?(K=Pt(),K===t&&(K=null),K!==t?(he=yn(),he!==t?(A=N(A,M,he),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t),T}function wn(){var T,A,B,M;if(T=k,L.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(z)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=qn(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function qn(){var T,A,B,M,K,he;if(T=k,A=nn(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=nn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=nn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function nn(){var T,A,B,M;return T=k,A=yn(),A!==t?(B=Pt(),B===t&&(B=null),B!==t?(M=yn(),M!==t?(A=$(A,M),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t),T}function ei(){var T,A,B,M;if(T=k,U.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(X)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=cn(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function cn(){var T,A,B,M,K,he;if(T=k,A=bt(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=bt(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=bt(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function bt(){var T,A,B,M;return T=k,A=yn(),A!==t?(B=Pt(),B===t&&(B=null),B!==t?(M=yn(),M!==t?(A=q(A,M),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t),T}function xt(){var T,A,B,M;if(T=k,G.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(Z)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=bn(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function bn(){var T,A,B,M,K,he;if(T=k,A=yn(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=yn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=yn(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function $o(){var T,A,B,M;if(T=k,H.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(V)),A!==t){for(B=[],M=Qe();M!==t;)B.push(M),M=Qe();B!==t?(M=os(),M!==t?(A=v(A,M),T=A):(k=T,T=t)):(k=T,T=t)}else k=T,T=t;return T}function os(){var T,A,B,M,K,he;if(T=k,A=as(),A!==t){for(B=[],M=k,K=Pt(),K===t&&(K=null),K!==t?(he=as(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);M!==t;)B.push(M),M=k,K=Pt(),K===t&&(K=null),K!==t?(he=as(),he!==t?(K=[K,he],M=K):(k=M,M=t)):(k=M,M=t);B!==t?(A=o(A,B),T=A):(k=T,T=t)}else k=T,T=t;return T}function as(){var T,A,B,M,K,he,Ws,wu,qo,Ja,Wo,jo;return T=k,A=Uo(),A!==t?(B=Pt(),B===t&&(B=null),B!==t?(M=Uo(),M!==t?(K=Pt(),K===t&&(K=null),K!==t?(he=or(),he!==t?(Ws=Pt(),Ws!==t?(wu=Go(),wu!==t?(qo=Pt(),qo===t&&(qo=null),qo!==t?(Ja=Go(),Ja!==t?(Wo=Pt(),Wo===t&&(Wo=null),Wo!==t?(jo=yn(),jo!==t?(A=ne(A,M,he,wu,Ja,jo),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t)):(k=T,T=t),T}function yn(){var T,A,B,M;return T=k,A=or(),A!==t?(B=Pt(),B===t&&(B=null),B!==t?(M=or(),M!==t?(A=j(A,M),T=A):(k=T,T=t)):(k=T,T=t)):(k=T,T=t),T}function Uo(){var T,A;return T=k,A=Za(),A===t&&(A=ls()),A!==t&&(A=ge(A)),T=A,T}function or(){var T,A,B,M;return T=k,A=k,B=En(),B===t&&(B=null),B!==t?(M=Za(),M!==t?(B=[B,M],A=B):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,B=En(),B===t&&(B=null),B!==t?(M=ls(),M!==t?(B=[B,M],A=B):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=le(A)),T=A,T}function Go(){var T,A;return T=k,Ce.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(qe)),A!==t&&(A=Ee(A)),T=A,T}function Pt(){var T,A,B,M,K;if(T=k,A=[],B=Qe(),B!==t)for(;B!==t;)A.push(B),B=Qe();else A=t;if(A!==t)if(B=Ka(),B===t&&(B=null),B!==t){for(M=[],K=Qe();K!==t;)M.push(K),K=Qe();M!==t?(A=[A,B,M],T=A):(k=T,T=t)}else k=T,T=t;else k=T,T=t;if(T===t){if(T=k,A=k,B=Ka(),B!==t){for(M=[],K=Qe();K!==t;)M.push(K),K=Qe();M!==t?(B=[B,M],A=B):(k=A,A=t)}else k=A,A=t;A!==t&&(A=Ke()),T=A}return T}function Ka(){var T;return n.charCodeAt(k)===44?(T=$e,k++):(T=t,Ae(Se)),T}function Za(){var T,A,B,M;return T=k,A=k,B=xu(),B!==t?(M=Je(),M===t&&(M=null),M!==t?(B=[B,M],A=B):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,B=ls(),B!==t?(M=Je(),M!==t?(B=[B,M],A=B):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=De(A)),T=A,T}function xu(){var T,A,B,M,K;return T=k,A=k,B=ls(),B===t&&(B=null),B!==t?(n.charCodeAt(k)===46?(M=de,k++):(M=t,Ae(At)),M!==t?(K=ls(),K!==t?(B=[B,M,K],A=B):(k=A,A=t)):(k=A,A=t)):(k=A,A=t),A===t&&(A=k,B=ls(),B!==t?(n.charCodeAt(k)===46?(M=de,k++):(M=t,Ae(At)),M!==t?(B=[B,M],A=B):(k=A,A=t)):(k=A,A=t)),A!==t&&(A=De(A)),T=A,T}function Je(){var T,A,B,M,K;return T=k,A=k,Nn.test(n.charAt(k))?(B=n.charAt(k),k++):(B=t,Ae(Ue)),B!==t?(M=En(),M===t&&(M=null),M!==t?(K=ls(),K!==t?(B=[B,M,K],A=B):(k=A,A=t)):(k=A,A=t)):(k=A,A=t),A!==t&&(A=De(A)),T=A,T}function En(){var T;return Nt.test(n.charAt(k))?(T=n.charAt(k),k++):(T=t,Ae(ut)),T}function ls(){var T,A,B;if(T=k,A=[],vt.test(n.charAt(k))?(B=n.charAt(k),k++):(B=t,Ae(Ut)),B!==t)for(;B!==t;)A.push(B),vt.test(n.charAt(k))?(B=n.charAt(k),k++):(B=t,Ae(Ut));else A=t;return A!==t&&(A=dt(A)),T=A,T}function Qe(){var T,A;return T=k,Mn.test(n.charAt(k))?(A=n.charAt(k),k++):(A=t,Ae(Gt)),A!==t&&(A=Ke()),T=A,T}function tg(T,A){if(!A)return[T];for(var B=[T],M=0,K=A.length;M<K;M++)B[M+1]=A[M][1];return B}var us={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var ph in us)us[ph.toUpperCase()]=us[ph];function qs(T,A){A||(A=[{}]);for(var B=A.length;B--;){var M={code:T,command:us[T]};T==T.toLowerCase()&&(M.relative=!0);for(var K in A[B])M[K]=A[B][K];A[B]=M}return A}if(We=r(),We!==t&&k===n.length)return We;throw We!==t&&k<n.length&&Ae(wt()),Et(ct,Ve<n.length?n.charAt(Ve):null,Ve<n.length?Ie(Ve,Ve+1):Ie(Ve,Ve))}var X9={parse:V9},qf=X9.parse;qf.parseSVG=qf;qf.makeAbsolute=Y9;var FE=qf;function Y9(n){var e,t={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(r){r.command==="moveto"&&(e=r),r.x0=t.x,r.y0=t.y;for(var s in i)s in r&&(r[s]+=r.relative?r[i[s]]:0);"x"in r||(r.x=t.x),"y"in r||(r.y=t.y),r.relative=!1,r.code=r.code.toUpperCase(),r.command=="closepath"&&(r.x=e.x,r.y=e.y),t=r}),n}const DE=new Map,$2={cx:12,cy:12,size:12},K9=n=>`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,Z9=({size:n=28,backgroundColor:e="#FF6600",color:t="#fff",innerSvg:i})=>{const r=i?_v(i,t,{cx:12,cy:9,size:9}):"";return`
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="${n}"
  height="${n}"
  viewBox="0 0 24 24"
>
  <!-- pin body -->
  <path
    d="M12 2C8 2 5 5 5 9c0 5 7 13 7 13s7-8 7-13c0-4-3-7-7-7z"
    fill="${e}"
  />

  <!-- subtle head highlight (suggested badge) -->
  <circle
    cx="12"
    cy="9"
    r="6"
    fill="rgba(255,255,255,0.18)"
  />

  <!-- icon -->
  ${r}
</svg>
`},J9=n=>{const e=n.match(/<path[^>]*d="([^"]+)"/);if(e)return e[1];const t=n.match(/M[\s\S]+/);if(t)return t[0];throw new Error("No path data found in SVG")},Q9=n=>{const e=FE.makeAbsolute(FE.parseSVG(n));let t=1/0,i=1/0,r=-1/0,s=-1/0;return e.forEach(o=>{const a=[];"x"in o&&"y"in o&&a.push([o.x,o.y]),"x1"in o&&"y1"in o&&a.push([o.x1,o.y1]),"x2"in o&&"y2"in o&&a.push([o.x2,o.y2]),a.forEach(([l,c])=>{l!=null&&c!=null&&(t=Math.min(t,l),i=Math.min(i,c),r=Math.max(r,l),s=Math.max(s,c))})}),{minX:t,minY:i,maxX:r,maxY:s,width:r-t,height:s-i}},_v=(n,e="#F092D5",t)=>{const i=J9(n),r=Q9(i),s=Math.min(t.size/r.width,t.size/r.height),o=r.minX+r.width/2,a=r.minY+r.height/2;return`
    <g
      transform="
        translate(${t.cx}, ${t.cy})
        scale(${s})
        translate(${-o}, ${-a})
      "
      fill="${e}"
    >
      <path d="${i}" />
    </g>
  `},eV=({size:n=28,backgroundColor:e="#FF6600",color:t="#fff",strokeWidth:i=2,innerSvg:r})=>{const s=r?_v(r,t,$2):"";return`
<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="10"
          fill="${e}" stroke="${t}" stroke-width="${i}"/>
  ${s}
</svg>
`},tV=({size:n=28,innerSvg:e,color:t="#FF6600"})=>{const i=e?_v(e,t,$2):"";return`
<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24" fill="${t}">
    ${i}
</svg>
`},d0={pin:Z9,circle:eV,icon:tV},f0={pin:1.5,circle:1,icon:1},nV=n=>n in f0?f0[n]:f0.pin,iV=n=>n in d0?d0[n]:d0.pin,rV=(n={})=>{const e="pin",t=n.innerSvg??"",i=!t&&n.fallbackText;let r;i?r=`
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 28 28">
        <circle cx="12" cy="12" r="10" fill="${n.backgroundColor??"#FF6600"}" stroke="${n.color??"#fff"}" stroke-width="2"/>
        <text x="12" y="13" text-anchor="middle" dominant-baseline="middle" font-size="8" font-weight="600" fill="${n.color??"#fff"}">${n.fallbackText}</text>
      </svg>
    `:r=iV(e)({...n,innerSvg:t});const s=`${e}|${t}|${JSON.stringify(n)}`;let o=DE.get(s);return o||(o=K9(r),DE.set(s,o)),new fn({image:new $a({src:o,scale:nV(e)})})},sV=n=>{const e=n.geohash.includes("http")?n.geohash.split("http://geohash.org/")[1]:n.geohash,{latitude:t,longitude:i}=vC.decode(e),r=new Ns({geometry:new Qr(tu([i,t])),...n.meta});r.setId(n.id);const s=n.style??{markerType:"pin"},o=rV(s);return r.set("originalStyle",o),r.setStyle(o),r},oV=async n=>{const e=n.map(async(t,i)=>{switch(t.kind){case"base-raster":const r=D9(t);return r.setZIndex(i),r;case"base-vector-tiles":const s=await F9(t);return s.setZIndex(i),s;case"overlay-vector":const o=O9(t);return o.setZIndex(i),o.setDeclutter(!1),o;default:throw new Error(`Unknown layer kind: ${JSON.stringify(t)}`)}});return Promise.all(e)},aV=n=>{const{type:e,coordinates:t,id:i,meta:r}=n,s=e==="MultiPolygon"?new ou(t):new Ar(t);s.transform("EPSG:4326","EPSG:3857");const o=new Ns({geometry:s,...r});return i&&o.setId(i),o},lV=n=>{const e=[];return n.vectorStyles&&e.push({id:n.vectorStyles.label,kind:"base-vector-tiles",provider:"custom",url:n.vectorStyles.uri,styleUrl:n.vectorStyles.uri,visible:!1,previewImage:n.vectorStyles.image,label:n.vectorStyles.label}),n.tileSets&&Array.isArray(n.tileSets)&&n.tileSets.forEach(t=>{e.push({id:t.label,kind:"base-raster",url:t.uri,attribution:t.attribution,visible:!1,previewImage:t.image,label:t.label})}),e.map((t,i)=>({...t,visible:i===0}))},uV=Hf.forwardRef((n,e)=>{var c;const[t,i]=oe.useState([]),r=oe.useRef(null),s=((c=n.controls)==null?void 0:c.showLayerSelector)??!0,o=oe.useMemo(()=>{var p;const d=Array.isArray(n.layers)&&n.layers.length>0?n.layers:n.mapStyleOptions&&Object.keys(n.mapStyleOptions).length>0?lV(n.mapStyleOptions):[],f=[{kind:"overlay-vector",id:my,data:((p=n.markers)==null?void 0:p.map(N8))??[],visible:!0},{kind:"overlay-vector",id:"polygon-layer",data:(n==null?void 0:n.polygons)??[],visible:!0}];return[...d,...f]},[n.layers]);oe.useEffect(()=>{let d=!1;return(async()=>{try{const f=await oV(o);d||i(f)}catch(f){console.error("ensureLayers failed",f);return}})(),()=>{d=!0}},[o]),oe.useEffect(()=>{var d;t.length<1||(d=n==null?void 0:n.onLayersReady)==null||d.call(n,!0)},[t]),oe.useEffect(()=>()=>{var d;(d=n.onLayersReady)==null||d.call(n,!1)},[]),oe.useEffect(()=>{if(!r.current)return;const d=CR(t,my);if(!d){console.debug("No marker layer found");return}const f=d.getSource();if(!f){console.debug("Could not find layer source");return}f.clear();const p=n.markers.map(sV);f.addFeatures(p);const y=n.polygons.map(aV);f.addFeatures(y);const m=[...p,...y];m.length===1?Hd(r.current,m[0]):MS(r.current,m)},[n.markers,n.polygons,t]),oe.useImperativeHandle(e,()=>({zoomIn:()=>{var p;const d=(p=r.current)==null?void 0:p.getView();if(!d){console.warn("Map view is not ready yet");return}const f=d.getZoom()??0;d.setZoom(f+1)},zoomOut:()=>{var p;const d=(p=r.current)==null?void 0:p.getView();if(!d){console.warn("Map view is not ready yet");return}const f=d.getZoom()??0;d.setZoom(f-1)},panToFeature:d=>{if(!r.current){console.warn("Map is not ready yet");return}const f=eb(t,[d]);f.length!==0&&Hd(r.current,f[0])},panToFeatures:d=>{if(!r.current){console.warn("Map is not ready yet");return}const f=eb(t,d);f.length!==0&&Hd(r.current,f[0])},layers:t}),[r.current,t]);const{layers:a,...l}=n;return Re(Uc,{children:[Q(N2,{layers:t,mapInstanceRef:r,...l}),s&&Q(B2,{layers:t})]})});uV.__docgenInfo={description:"",methods:[{name:"zoomIn",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomOut",docblock:null,modifiers:[],params:[],returns:null},{name:"panToFeature",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:{name:"string"}}],returns:null},{name:"panToFeatures",docblock:null,modifiers:[],params:[{name:"ids",optional:!1,type:{name:"Array",elements:[{name:"string"}],raw:"string[]"}}],returns:null}],displayName:"BasicMapV2",props:{zoom:{required:!0,tsType:{name:"number"},description:""},center:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},layers:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:`| BaseRasterLayerConfig
| BaseVectorTileLayerConfig
| OverlayVectorLayerConfig`,elements:[{name:"signature",type:"object",raw:`{
  id: string;
  kind: "base-raster";
  provider?: "osm" | "xyz" | "wmts";
  attribution?: string; // TODO: Possibly overwritten?
  url?: string;
  visible?: boolean;
  previewImage: string;
  label: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"base-raster"',required:!0}},{key:"provider",value:{name:"union",raw:'"osm" | "xyz" | "wmts"',elements:[{name:"literal",value:'"osm"'},{name:"literal",value:'"xyz"'},{name:"literal",value:'"wmts"'}],required:!1}},{key:"attribution",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"previewImage",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  id: string;
  kind: "base-vector-tiles";
  provider?: "mapbox" | "maptiler" | "arcgis" | "custom";
  url: string;
  styleUrl?: string; // e.g. Mapbox/MapTiler JSON
  accessToken?: string;
  visible?: boolean;
  previewImage: string;
  projection?: string;
  label: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"base-vector-tiles"',required:!0}},{key:"provider",value:{name:"union",raw:'"mapbox" | "maptiler" | "arcgis" | "custom"',elements:[{name:"literal",value:'"mapbox"'},{name:"literal",value:'"maptiler"'},{name:"literal",value:'"arcgis"'},{name:"literal",value:'"custom"'}],required:!1}},{key:"url",value:{name:"string",required:!0}},{key:"styleUrl",value:{name:"string",required:!1}},{key:"accessToken",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"previewImage",value:{name:"string",required:!0}},{key:"projection",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  id: string;
  kind: "overlay-vector";
  data: OverlayFeatureConfig[];
  style?: StyleLike;
  visible?: boolean;
  zIndex?: number;
  projection?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"kind",value:{name:"literal",value:'"overlay-vector"',required:!0}},{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  type: "Point" | "Polygon" | "MultiPolygon";
  coordinates: number[] | number[][] | number[][][];
  label?: string;
  id?: string;
  marker?: string | MarkerStyle;
  meta?: Record<string, any>;
}`,signature:{properties:[{key:"type",value:{name:"union",raw:'"Point" | "Polygon" | "MultiPolygon"',elements:[{name:"literal",value:'"Point"'},{name:"literal",value:'"Polygon"'},{name:"literal",value:'"MultiPolygon"'}],required:!0}},{key:"coordinates",value:{name:"union",raw:"number[] | number[][] | number[][][]",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"},{name:"Array",elements:[{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"}],raw:"number[][][]"}],required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"id",value:{name:"string",required:!1}},{key:"marker",value:{name:"union",raw:"string | MarkerStyle",elements:[{name:"string"},{name:"MarkerStyle"}],required:!1}},{key:"meta",value:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>",required:!1}}]}}],raw:"OverlayFeatureConfig[]",required:!0}},{key:"style",value:{name:"StyleLike",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"zIndex",value:{name:"number",required:!1}},{key:"projection",value:{name:"string",required:!1}}]}}]}],raw:"LayerConfig[]"},description:""},controls:{required:!1,tsType:{name:"Partial",elements:[{name:"MapControlsConfig"}],raw:"Partial<MapControlsConfig>"},description:""},mapStyleOptions:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  vectorStyles?: LegacyVectorStyle;
  tileSets?: LegacyTileSet[];
}`,signature:{properties:[{key:"vectorStyles",value:{name:"signature",type:"object",raw:`{
  label: string;
  uri: string;
  image: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"uri",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}}]},required:!1}},{key:"tileSets",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  uri: string;
  image: string;
  attribution?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"uri",value:{name:"string",required:!0}},{key:"image",value:{name:"string",required:!0}},{key:"attribution",value:{name:"string",required:!1}}]}}],raw:"LegacyTileSet[]",required:!1}}]}},description:"@deprecated Use `layers` instead. This prop will be removed in a future release."},markers:{required:!0,tsType:{name:"Array",elements:[{name:"MarkerFeature"}],raw:"MarkerFeature[]"},description:""},polygons:{required:!0,tsType:{name:"Array",elements:[{name:"PolygonFeature"}],raw:"PolygonFeature[]"},description:""},onFeatureClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},onLayersReady:{required:!1,tsType:{name:"signature",type:"function",raw:"(isReady: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isReady"}],return:{name:"void"}}},description:""}}};var Sr=(n=>(n.AUTHENTICATED="authenticated",n.REAUTHENTICATED="reauthenticated",n.USER_CHANGED="user-changed",n.UNAUTHORIZED="unauthorized",n))(Sr||{});const yy=new Set;let _y=null;const cV=new BroadcastChannel("auth-events");cV.onmessage=n=>{_y=n.data,yy.forEach(e=>e(n.data))};function vv(n){return yy.add(n),_y!==null&&n(_y),()=>{yy.delete(n)}}function vy(n){const e=new BroadcastChannel("auth-events");e.postMessage(n),e.close()}const U2=oe.createContext(null),hV=n=>{const e=new URLSearchParams(n.search).get("state");if(!e)return{redirect:void 0,url:n};const[t,i]=e.split(".");n.searchParams.set("state",t);let r;return i&&(r=new URL(atob(i.replace(/-/g,"+").replace(/_/g,"/")))),{redirect:r,url:n}},dV=(n,e,t)=>{const i=()=>{console.log("OAuth success event received"),e==null||e()},r=()=>{console.log("OAuth error event received"),t==null||t()},s=async o=>{const a=o;console.log("OAuth callback event received",a.detail);try{const l=a.detail.callbackUrl;console.log("Processing callback URL:",l);const{redirect:c,url:d}=hV(new URL(l)),f=await n.handleCallback(new URL(d).search);console.log("Callback processed successfully:",f),e==null||e(c)}catch(l){console.error("Callback processing failed:",l),t==null||t(l instanceof Error?l:new Error(String(l)))}};return window.addEventListener(Pl.OAUTH_SUCCESS,i),window.addEventListener(Pl.OAUTH_ERROR,r),window.addEventListener("oauth-callback",s),function(){window.removeEventListener(Pl.OAUTH_SUCCESS,i),window.removeEventListener(Pl.OAUTH_ERROR,r),window.removeEventListener("oauth-callback",s)}},NE=n=>{if(!n)return"/";let e=n.length;for(;e>1&&n[e-1]==="/";)e-=1;return n.slice(0,e)||"/"},zE=n=>{if(n instanceof URL)return n;const e=String(n).trim();try{return new URL(e)}catch{throw new Error(`Invalid absolute URL: "${e}"`)}},BE=(n,e)=>{if(typeof window>"u")return!1;if(!n)return console.error("[AuthProvider] redirectUri missing; cannot identify callback safely"),!1;try{const t=zE(n);if(!t.origin||!t.pathname)return console.error("[AuthProvider] redirectUri must be absolute for OAuth web flows"),!1;t.hash&&console.warn("[AuthProvider] detected hash: Hash routing is not supported in callback detection");const i=e?zE(e):new URL(window.location.href),r=NE(i.pathname),s=NE(t.pathname);return i.origin===t.origin&&r===s}catch(t){return console.error("[AuthProvider] Failed to parse redirectUri for comparison",t),!1}},fV=(n,e="")=>vv(t=>{switch(t){case Sr.AUTHENTICATED:case Sr.REAUTHENTICATED:n.refetchQueries({stale:!0});break;case Sr.USER_CHANGED:window.location.replace(e);break}});function G2(n,e){return function(){return n.apply(e,arguments)}}const{toString:pV}=Object.prototype,{getPrototypeOf:xv}=Object,{iterator:Kp,toStringTag:q2}=Symbol,Zp=(n=>e=>{const t=pV.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Lr=n=>(n=n.toLowerCase(),e=>Zp(e)===n),Jp=n=>e=>typeof e===n,{isArray:_u}=Array,lu=Jp("undefined");function ch(n){return n!==null&&!lu(n)&&n.constructor!==null&&!lu(n.constructor)&&xi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const W2=Lr("ArrayBuffer");function gV(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&W2(n.buffer),e}const mV=Jp("string"),xi=Jp("function"),j2=Jp("number"),hh=n=>n!==null&&typeof n=="object",yV=n=>n===!0||n===!1,Zd=n=>{if(Zp(n)!=="object")return!1;const e=xv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(q2 in n)&&!(Kp in n)},_V=n=>{if(!hh(n)||ch(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},vV=Lr("Date"),xV=Lr("File"),wV=Lr("Blob"),bV=Lr("FileList"),EV=n=>hh(n)&&xi(n.pipe),CV=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||xi(n.append)&&((e=Zp(n))==="formdata"||e==="object"&&xi(n.toString)&&n.toString()==="[object FormData]"))},TV=Lr("URLSearchParams"),[SV,RV,IV,AV]=["ReadableStream","Request","Response","Headers"].map(Lr),PV=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),_u(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{if(ch(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,n[a],a,n)}}function H2(n,e){if(ch(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const va=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V2=n=>!lu(n)&&n!==va;function xy(){const{caseless:n,skipUndefined:e}=V2(this)&&this||{},t={},i=(r,s)=>{const o=n&&H2(t,s)||s;Zd(t[o])&&Zd(r)?t[o]=xy(t[o],r):Zd(r)?t[o]=xy({},r):_u(r)?t[o]=r.slice():(!e||!lu(r))&&(t[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&dh(arguments[r],i);return t}const MV=(n,e,t,{allOwnKeys:i}={})=>(dh(e,(r,s)=>{t&&xi(r)?n[s]=G2(r,t):n[s]=r},{allOwnKeys:i}),n),LV=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),kV=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},OV=(n,e,t,i)=>{let r,s,o;const a={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&xv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},FV=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},DV=n=>{if(!n)return null;if(_u(n))return n;let e=n.length;if(!j2(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},NV=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&xv(Uint8Array)),zV=(n,e)=>{const i=(n&&n[Kp]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},BV=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},$V=Lr("HTMLFormElement"),UV=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),$E=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),GV=Lr("RegExp"),X2=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};dh(t,(r,s)=>{let o;(o=e(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},qV=n=>{X2(n,(e,t)=>{if(xi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(xi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WV=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return _u(n)?i(n):i(String(n).split(e)),t},jV=()=>{},HV=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function VV(n){return!!(n&&xi(n.append)&&n[q2]==="FormData"&&n[Kp])}const XV=n=>{const e=new Array(10),t=(i,r)=>{if(hh(i)){if(e.indexOf(i)>=0)return;if(ch(i))return i;if(!("toJSON"in i)){e[r]=i;const s=_u(i)?[]:{};return dh(i,(o,a)=>{const l=t(o,r+1);!lu(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return t(n,0)},YV=Lr("AsyncFunction"),KV=n=>n&&(hh(n)||xi(n))&&xi(n.then)&&xi(n.catch),Y2=((n,e)=>n?setImmediate:e?((t,i)=>(va.addEventListener("message",({source:r,data:s})=>{r===va&&s===t&&i.length&&i.shift()()},!1),r=>{i.push(r),va.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",xi(va.postMessage)),ZV=typeof queueMicrotask<"u"?queueMicrotask.bind(va):typeof process<"u"&&process.nextTick||Y2,JV=n=>n!=null&&xi(n[Kp]),ee={isArray:_u,isArrayBuffer:W2,isBuffer:ch,isFormData:CV,isArrayBufferView:gV,isString:mV,isNumber:j2,isBoolean:yV,isObject:hh,isPlainObject:Zd,isEmptyObject:_V,isReadableStream:SV,isRequest:RV,isResponse:IV,isHeaders:AV,isUndefined:lu,isDate:vV,isFile:xV,isBlob:wV,isRegExp:GV,isFunction:xi,isStream:EV,isURLSearchParams:TV,isTypedArray:NV,isFileList:bV,forEach:dh,merge:xy,extend:MV,trim:PV,stripBOM:LV,inherits:kV,toFlatObject:OV,kindOf:Zp,kindOfTest:Lr,endsWith:FV,toArray:DV,forEachEntry:zV,matchAll:BV,isHTMLForm:$V,hasOwnProperty:$E,hasOwnProp:$E,reduceDescriptors:X2,freezeMethods:qV,toObjectSet:WV,toCamelCase:UV,noop:jV,toFiniteNumber:HV,findKey:H2,global:va,isContextDefined:V2,isSpecCompliantForm:VV,toJSONObject:XV,isAsyncFn:YV,isThenable:KV,setImmediate:Y2,asap:ZV,isIterable:JV};function Ye(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}ee.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const K2=Ye.prototype,Z2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Z2[n]={value:n}});Object.defineProperties(Ye,Z2);Object.defineProperty(K2,"isAxiosError",{value:!0});Ye.from=(n,e,t,i,r,s)=>{const o=Object.create(K2);ee.toFlatObject(n,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return Ye.call(o,a,l,t,i,r),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const QV=null;function wy(n){return ee.isPlainObject(n)||ee.isArray(n)}function J2(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function UE(n,e,t){return n?n.concat(e).map(function(r,s){return r=J2(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function eX(n){return ee.isArray(n)&&!n.some(wy)}const tX=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Qp(n,e,t){if(!ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!ee.isUndefined(x[v])});const i=t.metaTokens,r=t.visitor||d,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(r))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(ee.isDate(m))return m.toISOString();if(ee.isBoolean(m))return m.toString();if(!l&&ee.isBlob(m))throw new Ye("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(m)||ee.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,v,x){let w=m;if(m&&!x&&typeof m=="object"){if(ee.endsWith(v,"{}"))v=i?v:v.slice(0,-2),m=JSON.stringify(m);else if(ee.isArray(m)&&eX(m)||(ee.isFileList(m)||ee.endsWith(v,"[]"))&&(w=ee.toArray(m)))return v=J2(v),w.forEach(function(S,C){!(ee.isUndefined(S)||S===null)&&e.append(o===!0?UE([v],C,s):o===null?v:v+"[]",c(S))}),!1}return wy(m)?!0:(e.append(UE(x,v,s),c(m)),!1)}const f=[],p=Object.assign(tX,{defaultVisitor:d,convertValue:c,isVisitable:wy});function y(m,v){if(!ee.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(m),ee.forEach(m,function(w,E){(!(ee.isUndefined(w)||w===null)&&r.call(e,w,ee.isString(E)?E.trim():E,v,p))===!0&&y(w,v?v.concat(E):[E])}),f.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return y(n),e}function GE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function wv(n,e){this._pairs=[],n&&Qp(n,this,e)}const Q2=wv.prototype;Q2.append=function(e,t){this._pairs.push([e,t])};Q2.toString=function(e){const t=e?function(i){return e.call(this,i,GE)}:GE;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function nX(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eI(n,e,t){if(!e)return n;const i=t&&t.encode||nX;ee.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(e,t):s=ee.isURLSearchParams(e)?e.toString():new wv(e,t).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class qE{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(i){i!==null&&e(i)})}}const tI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},iX=typeof URLSearchParams<"u"?URLSearchParams:wv,rX=typeof FormData<"u"?FormData:null,sX=typeof Blob<"u"?Blob:null,oX={isBrowser:!0,classes:{URLSearchParams:iX,FormData:rX,Blob:sX},protocols:["http","https","file","blob","url","data"]},bv=typeof window<"u"&&typeof document<"u",by=typeof navigator=="object"&&navigator||void 0,aX=bv&&(!by||["ReactNative","NativeScript","NS"].indexOf(by.product)<0),lX=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uX=bv&&window.location.href||"http://localhost",cX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bv,hasStandardBrowserEnv:aX,hasStandardBrowserWebWorkerEnv:lX,navigator:by,origin:uX},Symbol.toStringTag,{value:"Module"})),Zn={...cX,...oX};function hX(n,e){return Qp(n,new Zn.classes.URLSearchParams,{visitor:function(t,i,r,s){return Zn.isNode&&ee.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function dX(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function fX(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function nI(n){function e(t,i,r,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&ee.isArray(r)?r.length:o,l?(ee.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!ee.isObject(r[o]))&&(r[o]=[]),e(t,i,r[o],s)&&ee.isArray(r[o])&&(r[o]=fX(r[o])),!a)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const t={};return ee.forEachEntry(n,(i,r)=>{e(dX(i),r,t,0)}),t}return null}function pX(n,e,t){if(ee.isString(n))try{return(e||JSON.parse)(n),ee.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const fh={transitional:tI,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=ee.isObject(e);if(s&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return r?JSON.stringify(nI(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return hX(e,this.formSerializer).toString();if((a=ee.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),pX(e)):e}],transformResponse:[function(e){const t=this.transitional||fh.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(i&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ye.from(a,Ye.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zn.classes.FormData,Blob:Zn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{fh.headers[n]={}});const gX=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mX=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!t||e[t]&&gX[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},WE=Symbol("internals");function Yu(n){return n&&String(n).trim().toLowerCase()}function Jd(n){return n===!1||n==null?n:ee.isArray(n)?n.map(Jd):String(n)}function yX(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const _X=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function p0(n,e,t,i,r){if(ee.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!ee.isString(e)){if(ee.isString(i))return e.indexOf(i)!==-1;if(ee.isRegExp(i))return i.test(e)}}function vX(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function xX(n,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let wi=class{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(a,l,c){const d=Yu(l);if(!d)throw new Error("header name must be a non-empty string");const f=ee.findKey(r,d);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=Jd(a))}const o=(a,l)=>ee.forEach(a,(c,d)=>s(c,d,l));if(ee.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ee.isString(e)&&(e=e.trim())&&!_X(e))o(mX(e),t);else if(ee.isObject(e)&&ee.isIterable(e)){let a={},l,c;for(const d of e){if(!ee.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?ee.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,t)}else e!=null&&s(t,e,i);return this}get(e,t){if(e=Yu(e),e){const i=ee.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return yX(r);if(ee.isFunction(t))return t.call(this,r,i);if(ee.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yu(e),e){const i=ee.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||p0(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(o){if(o=Yu(o),o){const a=ee.findKey(i,o);a&&(!t||p0(i,i[a],a,t))&&(delete i[a],r=!0)}}return ee.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||p0(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return ee.forEach(this,(r,s)=>{const o=ee.findKey(i,s);if(o){t[o]=Jd(r),delete t[s];return}const a=e?vX(s):String(s).trim();a!==s&&delete t[s],t[a]=Jd(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&ee.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[WE]=this[WE]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Yu(o);i[a]||(xX(r,o),i[a]=!0)}return ee.isArray(e)?e.forEach(s):s(e),this}};wi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(wi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ee.freezeMethods(wi);function g0(n,e){const t=this||fh,i=e||t,r=wi.from(i.headers);let s=i.data;return ee.forEach(n,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function iI(n){return!!(n&&n.__CANCEL__)}function vu(n,e,t){Ye.call(this,n??"canceled",Ye.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(vu,Ye,{__CANCEL__:!0});function rI(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ye("Request failed with status code "+t.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function wX(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function bX(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=i[s];o||(o=c),t[r]=l,i[r]=c;let f=s,p=0;for(;f!==r;)p+=t[f++],f=f%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-o<e)return;const y=d&&c-d;return y?Math.round(p*1e3/y):void 0}}function EX(n,e){let t=0,i=1e3/e,r,s;const o=(c,d=Date.now())=>{t=d,r=null,s&&(clearTimeout(s),s=null),n(...c)};return[(...c)=>{const d=Date.now(),f=d-t;f>=i?o(c,d):(r=c,s||(s=setTimeout(()=>{s=null,o(r)},i-f)))},()=>r&&o(r)]}const Wf=(n,e,t=3)=>{let i=0;const r=bX(50,250);return EX(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,c=r(l),d=o<=a;i=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(f)},t)},jE=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},HE=n=>(...e)=>ee.asap(()=>n(...e)),CX=Zn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Zn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Zn.origin),Zn.navigator&&/(msie|trident)/i.test(Zn.navigator.userAgent)):()=>!0,TX=Zn.hasStandardBrowserEnv?{write(n,e,t,i,r,s,o){if(typeof document>"u")return;const a=[`${n}=${encodeURIComponent(e)}`];ee.isNumber(t)&&a.push(`expires=${new Date(t).toUTCString()}`),ee.isString(i)&&a.push(`path=${i}`),ee.isString(r)&&a.push(`domain=${r}`),s===!0&&a.push("secure"),ee.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function SX(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function RX(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function sI(n,e,t){let i=!SX(e);return n&&(i||t==!1)?RX(n,e):e}const VE=n=>n instanceof wi?{...n}:n;function qa(n,e){e=e||{};const t={};function i(c,d,f,p){return ee.isPlainObject(c)&&ee.isPlainObject(d)?ee.merge.call({caseless:p},c,d):ee.isPlainObject(d)?ee.merge({},d):ee.isArray(d)?d.slice():d}function r(c,d,f,p){if(ee.isUndefined(d)){if(!ee.isUndefined(c))return i(void 0,c,f,p)}else return i(c,d,f,p)}function s(c,d){if(!ee.isUndefined(d))return i(void 0,d)}function o(c,d){if(ee.isUndefined(d)){if(!ee.isUndefined(c))return i(void 0,c)}else return i(void 0,d)}function a(c,d,f){if(f in e)return i(c,d);if(f in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,f)=>r(VE(c),VE(d),f,!0)};return ee.forEach(Object.keys({...n,...e}),function(d){const f=l[d]||r,p=f(n[d],e[d],d);ee.isUndefined(p)&&f!==a||(t[d]=p)}),t}const oI=n=>{const e=qa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=wi.from(o),e.url=eI(sI(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ee.isFormData(t)){if(Zn.hasStandardBrowserEnv||Zn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&o.set(d,f)})}}if(Zn.hasStandardBrowserEnv&&(i&&ee.isFunction(i)&&(i=i(e)),i||i!==!1&&CX(e.url))){const l=r&&s&&TX.read(s);l&&o.set(r,l)}return e},IX=typeof XMLHttpRequest<"u",AX=IX&&function(n){return new Promise(function(t,i){const r=oI(n);let s=r.data;const o=wi.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,d,f,p,y,m;function v(){y&&y(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function w(){if(!x)return;const S=wi.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:S,config:n,request:x};rI(function(O){t(O),v()},function(O){i(O),v()},R),x=null}"onloadend"in x?x.onloadend=w:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(w)},x.onabort=function(){x&&(i(new Ye("Request aborted",Ye.ECONNABORTED,n,x)),x=null)},x.onerror=function(C){const R=C&&C.message?C.message:"Network Error",F=new Ye(R,Ye.ERR_NETWORK,n,x);F.event=C||null,i(F),x=null},x.ontimeout=function(){let C=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||tI;r.timeoutErrorMessage&&(C=r.timeoutErrorMessage),i(new Ye(C,R.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,n,x)),x=null},s===void 0&&o.setContentType(null),"setRequestHeader"in x&&ee.forEach(o.toJSON(),function(C,R){x.setRequestHeader(R,C)}),ee.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),a&&a!=="json"&&(x.responseType=r.responseType),c&&([p,m]=Wf(c,!0),x.addEventListener("progress",p)),l&&x.upload&&([f,y]=Wf(l),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(d=S=>{x&&(i(!S||S.type?new vu(null,n,x):S),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const E=wX(r.url);if(E&&Zn.protocols.indexOf(E)===-1){i(new Ye("Unsupported protocol "+E+":",Ye.ERR_BAD_REQUEST,n));return}x.send(s||null)})},PX=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,r;const s=function(c){if(!r){r=!0,a();const d=c instanceof Error?c:this.reason;i.abort(d instanceof Ye?d:new vu(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Ye(`timeout ${e} of ms exceeded`,Ye.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>ee.asap(a),l}},MX=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,r;for(;i<t;)r=i+e,yield n.slice(i,r),i=r},LX=async function*(n,e){for await(const t of kX(n))yield*MX(t,e)},kX=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},XE=(n,e,t,i)=>{const r=LX(n,e);let s=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await r.next();if(c){a(),l.close();return}let f=d.byteLength;if(t){let p=s+=f;t(p)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},YE=64*1024,{isFunction:Ud}=ee,OX=(({Request:n,Response:e})=>({Request:n,Response:e}))(ee.global),{ReadableStream:KE,TextEncoder:ZE}=ee.global,JE=(n,...e)=>{try{return!!n(...e)}catch{return!1}},FX=n=>{n=ee.merge.call({skipUndefined:!0},OX,n);const{fetch:e,Request:t,Response:i}=n,r=e?Ud(e):typeof fetch=="function",s=Ud(t),o=Ud(i);if(!r)return!1;const a=r&&Ud(KE),l=r&&(typeof ZE=="function"?(m=>v=>m.encode(v))(new ZE):async m=>new Uint8Array(await new t(m).arrayBuffer())),c=s&&a&&JE(()=>{let m=!1;const v=new t(Zn.origin,{body:new KE,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),d=o&&a&&JE(()=>ee.isReadableStream(new i("").body)),f={stream:d&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(v,x)=>{let w=v&&v[m];if(w)return w.call(v);throw new Ye(`Response type '${m}' is not supported`,Ye.ERR_NOT_SUPPORT,x)})});const p=async m=>{if(m==null)return 0;if(ee.isBlob(m))return m.size;if(ee.isSpecCompliantForm(m))return(await new t(Zn.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(m)||ee.isArrayBuffer(m))return m.byteLength;if(ee.isURLSearchParams(m)&&(m=m+""),ee.isString(m))return(await l(m)).byteLength},y=async(m,v)=>{const x=ee.toFiniteNumber(m.getContentLength());return x??p(v)};return async m=>{let{url:v,method:x,data:w,signal:E,cancelToken:S,timeout:C,onDownloadProgress:R,onUploadProgress:F,responseType:O,headers:N,withCredentials:L="same-origin",fetchOptions:z}=oI(m),$=e||fetch;O=O?(O+"").toLowerCase():"text";let U=PX([E,S&&S.toAbortSignal()],C),X=null;const q=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let G;try{if(F&&c&&x!=="get"&&x!=="head"&&(G=await y(N,w))!==0){let ge=new t(v,{method:"POST",body:w,duplex:"half"}),le;if(ee.isFormData(w)&&(le=ge.headers.get("content-type"))&&N.setContentType(le),ge.body){const[Ce,qe]=jE(G,Wf(HE(F)));w=XE(ge.body,YE,Ce,qe)}}ee.isString(L)||(L=L?"include":"omit");const Z=s&&"credentials"in t.prototype,H={...z,signal:U,method:x.toUpperCase(),headers:N.normalize().toJSON(),body:w,duplex:"half",credentials:Z?L:void 0};X=s&&new t(v,H);let V=await(s?$(X,z):$(v,H));const ne=d&&(O==="stream"||O==="response");if(d&&(R||ne&&q)){const ge={};["status","statusText","headers"].forEach(Ee=>{ge[Ee]=V[Ee]});const le=ee.toFiniteNumber(V.headers.get("content-length")),[Ce,qe]=R&&jE(le,Wf(HE(R),!0))||[];V=new i(XE(V.body,YE,Ce,()=>{qe&&qe(),q&&q()}),ge)}O=O||"text";let j=await f[ee.findKey(f,O)||"text"](V,m);return!ne&&q&&q(),await new Promise((ge,le)=>{rI(ge,le,{data:j,headers:wi.from(V.headers),status:V.status,statusText:V.statusText,config:m,request:X})})}catch(Z){throw q&&q(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,m,X),{cause:Z.cause||Z}):Ye.from(Z,Z&&Z.code,m,X)}}},DX=new Map,aI=n=>{let e=n&&n.env||{};const{fetch:t,Request:i,Response:r}=e,s=[i,r,t];let o=s.length,a=o,l,c,d=DX;for(;a--;)l=s[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:FX(e)),d=c;return c};aI();const Ev={http:QV,xhr:AX,fetch:{get:aI}};ee.forEach(Ev,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const QE=n=>`- ${n}`,NX=n=>ee.isFunction(n)||n===null||n===!1;function zX(n,e){n=ee.isArray(n)?n:[n];const{length:t}=n;let i,r;const s={};for(let o=0;o<t;o++){i=n[o];let a;if(r=i,!NX(i)&&(r=Ev[(a=String(i)).toLowerCase()],r===void 0))throw new Ye(`Unknown adapter '${a}'`);if(r&&(ee.isFunction(r)||(r=r.get(e))))break;s[a||"#"+o]=r}if(!r){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(QE).join(`
`):" "+QE(o[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r}const lI={getAdapter:zX,adapters:Ev};function m0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new vu(null,n)}function eC(n){return m0(n),n.headers=wi.from(n.headers),n.data=g0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),lI.getAdapter(n.adapter||fh.adapter,n)(n).then(function(i){return m0(n),i.data=g0.call(n,n.transformResponse,i),i.headers=wi.from(i.headers),i},function(i){return iI(i)||(m0(n),i&&i.response&&(i.response.data=g0.call(n,n.transformResponse,i.response),i.response.headers=wi.from(i.response.headers))),Promise.reject(i)})}const uI="1.13.2",eg={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{eg[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const tC={};eg.transitional=function(e,t,i){function r(s,o){return"[Axios v"+uI+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new Ye(r(o," has been removed"+(t?" in "+t:"")),Ye.ERR_DEPRECATED);return t&&!tC[o]&&(tC[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};eg.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function BX(n,e,t){if(typeof n!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Ye("option "+s+" must be "+l,Ye.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ye("Unknown option "+s,Ye.ERR_BAD_OPTION)}}const Qd={assertOptions:BX,validators:eg},Dr=Qd.validators;let ka=class{constructor(e){this.defaults=e||{},this.interceptors={request:new qE,response:new qE}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=qa(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&Qd.assertOptions(i,{silentJSONParsing:Dr.transitional(Dr.boolean),forcedJSONParsing:Dr.transitional(Dr.boolean),clarifyTimeoutError:Dr.transitional(Dr.boolean)},!1),r!=null&&(ee.isFunction(r)?t.paramsSerializer={serialize:r}:Qd.assertOptions(r,{encode:Dr.function,serialize:Dr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Qd.assertOptions(t,{baseUrl:Dr.spelling("baseURL"),withXsrfToken:Dr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&ee.merge(s.common,s[t.method]);s&&ee.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=wi.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,f=0,p;if(!l){const m=[eC.bind(this),void 0];for(m.unshift(...a),m.push(...c),p=m.length,d=Promise.resolve(t);f<p;)d=d.then(m[f++],m[f++]);return d}p=a.length;let y=t;for(;f<p;){const m=a[f++],v=a[f++];try{y=m(y)}catch(x){v.call(this,x);break}}try{d=eC.call(this,y)}catch(m){return Promise.reject(m)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=qa(this.defaults,e);const t=sI(e.baseURL,e.url,e.allowAbsoluteUrls);return eI(t,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){ka.prototype[e]=function(t,i){return this.request(qa(i||{},{method:e,url:t,data:(i||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,a){return this.request(qa(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ka.prototype[e]=t(),ka.prototype[e+"Form"]=t(!0)});let $X=class cI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new vu(s,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new cI(function(r){e=r}),cancel:e}}};function UX(n){return function(t){return n.apply(null,t)}}function GX(n){return ee.isObject(n)&&n.isAxiosError===!0}const Ey={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ey).forEach(([n,e])=>{Ey[e]=n});function hI(n){const e=new ka(n),t=G2(ka.prototype.request,e);return ee.extend(t,ka.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return hI(qa(n,r))},t}const gn=hI(fh);gn.Axios=ka;gn.CanceledError=vu;gn.CancelToken=$X;gn.isCancel=iI;gn.VERSION=uI;gn.toFormData=Qp;gn.AxiosError=Ye;gn.Cancel=gn.CanceledError;gn.all=function(e){return Promise.all(e)};gn.spread=UX;gn.isAxiosError=GX;gn.mergeConfig=qa;gn.AxiosHeaders=wi;gn.formToJSON=n=>nI(ee.isHTMLForm(n)?new FormData(n):n);gn.getAdapter=lI.getAdapter;gn.HttpStatusCode=Ey;gn.default=gn;const{Axios:xK,AxiosError:wK,CanceledError:bK,isCancel:EK,CancelToken:CK,VERSION:TK,all:SK,Cancel:RK,isAxiosError:IK,spread:AK,toFormData:PK,AxiosHeaders:dI,HttpStatusCode:MK,formToJSON:LK,getAdapter:kK,mergeConfig:OK}=gn,qX=(n,e)=>{var i;switch((i=new dI(n).get("Content-Type"))==null?void 0:i.toString().toLowerCase()){case"application/json":return e==null||typeof e=="string"?e:JSON.stringify(e);case"application/x-www-form-urlencoded":return new URLSearchParams(e).toString();case"multipart/form-data":return e;case"application/octet-stream":return e;case"text/plain":return String(e);case"application/xml":case"text/xml":if(typeof e!="string")throw new Error("XML payload must be a string");return e;default:return e}};function WX(n,{queryClient:e,keysToInvalidate:t=[]},i){return i?n.defaults.adapter=async r=>{var o;const s=(o=r.url)!=null&&o.startsWith("http")?r.url:`${r.baseURL||""}${r.url||""}`;try{const a=new dI(r.headers).toJSON(),l=await i.makeAuthenticatedRequest(s,{body:qX(r.headers,r.data),headers:a,method:r.method,skipAutoLogout:!0});if(l.status===401)return s.includes("/session/check")||vy(Sr.UNAUTHORIZED),new Promise((f,p)=>{let y=null;const m=()=>{i.makeAuthenticatedRequest(s,{method:r.method,skipAutoLogout:!0}).then(v=>v.text().then(x=>{const w=x?JSON.parse(x):null;f({data:w,status:v.status,statusText:v.statusText,headers:Object.fromEntries(v.headers.entries()),config:r,request:{}})})).catch(p)};y=vv(v=>{v===Sr.AUTHENTICATED&&(y&&y(),m())})});const c=await l.text(),d=c?JSON.parse(c):null;return l.status>=400&&l.status!==401?Promise.reject({message:`Request failed with status ${l.status}`,config:r,request:{},response:{status:l.status,statusText:l.statusText,data:d,headers:Object.fromEntries(l.headers.entries())}}):Promise.resolve({data:d,status:l.status,statusText:l.statusText,headers:Object.fromEntries(l.headers.entries()),config:r,request:{}})}catch(a){const l=a&&typeof a=="object"&&"message"in a&&typeof a.message=="string"?a.message:`Unknown error ${a}`;return Promise.reject({message:l,config:r,request:{},response:{status:500,data:{error:l}}})}}:n.interceptors.response.use(r=>r,r=>{var s;return((s=r.response)==null?void 0:s.status)===401&&(e&&t.forEach(o=>e.invalidateQueries({queryKey:o,exact:!0})),vy(Sr.UNAUTHORIZED)),Promise.reject(r)}),{instance:n}}const jX=(n,e)=>{const t=gn.create({baseURL:n,withCredentials:!0}),i={instance:t,withSessionHandling:r=>(WX(t,r,e),i),build:()=>({instance:t})};return i},HX=jX,VX=(n,e,t,i)=>({onError:o=>{e(null),t(o instanceof Error?o:new Error(String(o)))},onSuccess:async o=>{const a=n.getUserInfo();e(a),t(null),vy(Sr.AUTHENTICATED),!!!window.opener&&o&&window.location.replace(o)}}),XX=(n,e)=>{let t=!0;return(async()=>{e(!0);try{await n()}finally{t&&e(!1)}})(),()=>{t=!1}},YX=({apiUrl:n,config:e,queryClient:t,children:i})=>{const[r,s]=oe.useState(null),[o,a]=oe.useState(null),[l,c]=oe.useState(!1),[d,f]=oe.useState(null),[p,y]=oe.useState(!1);oe.useEffect(()=>{!e||Object.values(e).length===0||f(new Pl(e))},[e]),oe.useEffect(()=>{if(!d)return;const{onError:x,onSuccess:w}=VX(d,s,a),E=dV(d,w,x),S=fV(t),C=XX(async()=>{try{const R=BE(d.config.redirectUri);if(!BE(d.config.popupRedirectUri)&&!R){await d.isAuthenticated()||d.login();const N=d.getUserInfo();s(N),a(null)}}catch(R){console.error("[AuthProvider] Auth check failed",R),a(R instanceof Error?R:new Error(String(R)))}finally{y(!0)}},c);return()=>{E(),S(),C()}},[d,t,location.pathname]);const m=oe.useMemo(()=>{if(!d)return;const x=HX(n,d);return x.withSessionHandling({keysToInvalidate:[],queryClient:t}),x.build().instance},[d,t,n]);if(!d||!p||!m)return null;const v={user:r,error:o,loading:l,api:m,authClient:d,login:()=>d.loginWithPopup(d.config.popupRedirectUri),logout:()=>d.logout()};return Q(U2.Provider,{value:v,children:i})};YX.__docgenInfo={description:"",methods:[],displayName:"AuthProvider",props:{apiUrl:{required:!0,tsType:{name:"string"},description:""},config:{required:!0,tsType:{name:"AuthServerOAuth2ClientConfig"},description:""},queryClient:{required:!0,tsType:{name:"QueryClient"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const KX=()=>{const n=oe.useContext(U2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},ZX=({config:n})=>(Hf.useEffect(()=>{if(!n||Object.values(n).length===0){console.log("[auth-popup] Missing OAuth config on callback page, skipping finishPopupFlow");return}const e=typeof window<"u"&&!!window.opener,t=e||typeof window<"u"&&window.parent!==window;typeof window<"u"&&console.log("[auth-popup] Callback loaded",{href:window.location.href,search:window.location.search,hasOpener:e,isPopup:t});try{const i=new Pl(n);console.log("[auth-popup] Calling finishPopupFlow"),i.finishPopupFlow(),console.log("[auth-popup] finishPopupFlow returned")}catch(i){console.error("[auth-popup] finishPopupFlow threw",i)}},[n]),Q(ui,{gap:2,sx:{marginX:5},children:Q(ui,{children:Q(er,{variant:"body1",children:"Processing login..."})})}));ZX.__docgenInfo={description:"",methods:[],displayName:"AuthRedirectUri",props:{config:{required:!0,tsType:{name:"AuthServerOAuth2ClientConfig"},description:""}}};const JX=new Set,QX=new BroadcastChannel("auth-events");QX.onmessage=n=>{n.data,JX.forEach(e=>e(n.data))};nf([tf("as base64"),tf("as uri component")]);const eY=({debounceMs:n=5e3})=>{const{login:e}=KX(),t=oe.useRef(!1),[i,r]=oe.useState(!1),s=()=>{e()};return oe.useEffect(()=>vv(l=>{l===Sr.UNAUTHORIZED&&!t.current?(r(!0),t.current=!0,setTimeout(()=>{t.current=!1},n)):(l===Sr.AUTHENTICATED||l===Sr.REAUTHENTICATED)&&(r(!1),t.current=!1)}),[]),Q(JT,{hideCloseButton:!0,onClose:()=>{},sx:{m:2,p:2},open:i,children:Re(ui,{sx:{p:2,overflowY:"auto"},children:[Q(mF,{children:"You are not signed in"}),Q(er,{sx:{pt:4},children:"Your session may have expired, you may have signed out, or your account isn't active."}),Q(er,{children:"Please login to continue."}),Q(er,{sx:{pt:4},children:"If you continue to have issues, contact your system administrator."}),Re(ui,{ml:"auto",mt:2,gap:1,direction:"row",children:[Q(Oa,{color:"primary",variant:"outlined",disableElevation:!0,onClick:()=>{r(!1)},size:"large",children:"Close"}),Q(Oa,{color:"primary",variant:"contained",onClick:s,size:"large",children:"Login"})]})]})})};eY.__docgenInfo={description:"",methods:[],displayName:"AuthModal",props:{debounceMs:{defaultValue:{value:"5000",computed:!1},required:!1}}};export{iB as A,j$ as B,dB as C,sS as D,cB as E,H$ as F,Sr as G,eU as I,V$ as L,z2 as M,$T as P,n3 as Q,mB as S,x$ as T,sB as U,t_ as a,tS as b,e_ as c,uV as d,hB as e,gB as f,J6 as g,Q6 as h,eB as i,rB as j,ep as k,fB as l,uB as m,JT as n,aB as o,v$ as p,y$ as q,_$ as r,Pl as s,HX as t,Y$ as u,dV as v,YX as w,eY as x,ZX as y,vy as z};
